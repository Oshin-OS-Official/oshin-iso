{"version":3,"file":"BasePrompt.js","sources":["../src/core/Prompt.ts","../src/components/Prompt/PromptBirthYear/template.html?raw","../src/components/Prompt/PromptBirthYear/View.js","../src/components/Prompt/PromptBirthYear/Controller.js","../src/components/Prompt/PromptReview/template.html?raw","../src/components/Prompt/PromptReview/View.js","../src/components/Prompt/PromptReview/Controller.js","../src/components/Prompt/PromptSurvey/template.html?raw","../src/components/Prompt/PromptSurvey/View.js","../src/components/Prompt/PromptSurvey/Controller.js","../src/components/Prompt/BasePrompt.js"],"sourcesContent":["export const PromptType = {\n  PromptBirthYear: 'PromptBirthYear',\n  PromptReview: 'PromptReview',\n  PromptSurvey: 'PromptSurvey',\n}\n","export default \"<form id=\\\"birth-year-form\\\">\\n    <div id=\\\"promptingBirthYear\\\" class=\\\"relative sm:fixed sm:rounded-t-lg sm:border-t sm:border-l sm:border-r border-base-300 sm:border-solid left-0 right-0 bottom-0 bg-base-200 md:w-[80%] mx-auto inline-flex sm:items-center justify-center flex-col sm:flex-row gap-3 p-3 w-full\\\">\\n        <p data-i18n=\\\"askBirthYearTitle\\\" class=\\\"prompt-description text-sm text-base-content\\\"></p>\\n        <div class=\\\"input-block flex gap-2 sm:items-center\\\">\\n            <label data-i18n=\\\"askBirthYear\\\" class=\\\"prompt-title text-sm font-bold\\\" for=\\\"birthYear\\\"></label>\\n            <div class=\\\"tooltip-open tooltip-error\\\" data-tip=\\\"accent\\\" id=\\\"promptWarningMessage\\\">\\n                <input type=\\\"number\\\" id=\\\"birthYear\\\" class=\\\"prompt-input input input-bordered input-xs w-24\\\" maxlength=\\\"4\\\" placeholder=\\\"YYYY\\\" />\\n            </div>\\n            <button type=\\\"submit\\\" id=\\\"btnSubmitBirthYear\\\" class=\\\"btn-submit btn btn-primary btn-xs\\\" data-i18n=\\\"submit\\\"></button>\\n        </div>\\n        <iconify-icon id=\\\"closePrompting\\\" width=\\\"20\\\" class=\\\"btn-close absolute right-2 cursor-pointer\\\" icon=\\\"mdi:window-close\\\"></iconify-icon>\\n    </div>\\n</form>\\n\"","import API from '~/core/CoreAPI'\nimport Brightline from 'brightline.js'\nimport PubSub from 'dropletjs.pubsub'\nimport promptBirthYearTpl from './template.html?raw'\n\nvar log = API.Utils.createScopedLog('PromptBirthYearView')\n\nexport default class PromptBirthYearView {\n  constructor() {\n    log('construct', 'Constructing PromptBirthYearView', null, 'DEBUG')\n  }\n\n  init() {\n    log('init', 'Initializing view', null, 'DEBUG')\n    const template = new Brightline(promptBirthYearTpl)\n    const html = template.render()\n    if (this.isOptionsPage()) {\n      document\n        .getElementsByTagName('body')[0]\n        .insertAdjacentHTML('beforeend', html)\n      document\n        .getElementById('promptingBirthYear')\n        .classList.add('fixed-bottom-block')\n    } else {\n      document\n        .getElementsByTagName('body')[0]\n        .insertAdjacentHTML('beforeend', html)\n      document\n        .getElementById('promptingBirthYear')\n        .classList.add('fixed-bottom-block-popup')\n    }\n\n    API.StayFocusd.localizeHTML(document)\n\n    this.bindUIHandlers()\n  }\n\n  isExtensionPage() {\n    return location.hostname === API.Chrome.Extension.getID()\n  }\n  isOptionsPage() {\n    return this.isExtensionPage() && location.pathname === '/options.html'\n  }\n\n  closePrompting() {\n    document.getElementById('promptingBirthYear').classList.add('hidden')\n  }\n\n  /**\n   * Adds event listeners and publishes events for the controller to listen to.\n   */\n  bindUIHandlers() {\n    log('bindUIHandlers', 'Binding UI handlers', null, 'TRACE')\n    document\n      .getElementById('birth-year-form')\n      .addEventListener('submit', (event) => {\n        const age = document.getElementById('birthYear').value\n        const isValid = this.validateBirthYear(age)\n\n        if (isValid) {\n          PubSub.publish('PromptBirthYear.submit', { year: age })\n          this.closePrompting()\n          event.preventDefault()\n        } else event.preventDefault()\n      })\n\n    document.getElementById('birthYear').addEventListener('input', (e) => {\n      document\n        .getElementById('promptWarningMessage')\n        .classList.remove('tooltip')\n      if (e.target.value.length > 4)\n        e.target.value = e.target.value.slice(0, -1)\n    })\n\n    document.getElementById('closePrompting').addEventListener('click', () => {\n      this.closePrompting()\n      PubSub.publish('PromptBirthYear.close')\n    })\n\n    API.Analytics.bindHtmlEvents()\n  }\n\n  validateBirthYear(birthYear) {\n    const yearInt = Number(birthYear)\n    if (isNaN(yearInt)) {\n      this.showWarningMessage(API.Chrome.Translation.get('birthYearErrorsNan'))\n      return false\n    }\n\n    if (birthYear.length != 4) {\n      this.showWarningMessage(\n        API.Chrome.Translation.get('birthYearErrorsLength'),\n      )\n      return false\n    }\n\n    if (!this.isUnderCurrentYear(birthYear)) {\n      this.showWarningMessage(\n        API.Chrome.Translation.get('birthYearErrorsAgeMin'),\n      )\n      return false\n    }\n\n    if (!this.isUnder100(birthYear)) {\n      this.showWarningMessage(\n        API.Chrome.Translation.get('birthYearErrorsAgeMax'),\n      )\n      return false\n    }\n\n    document.getElementById('promptWarningMessage').classList.remove('tooltip')\n    return true\n  }\n\n  isUnder100(birthYear) {\n    return new Date().getFullYear() - birthYear < 100\n  }\n  isUnderCurrentYear(birthYear) {\n    return birthYear < new Date().getFullYear()\n  }\n\n  showWarningMessage(message) {\n    document\n      .getElementById('promptWarningMessage')\n      .setAttribute('data-tip', message)\n    document.getElementById('promptWarningMessage').classList.add('tooltip')\n  }\n}\n","import API from '~/core/CoreAPI'\nimport PubSub from 'dropletjs.pubsub'\nimport View from './View'\nimport Time, { HOUR, DAY } from '~/core/Time'\n\nvar log = API.Utils.createScopedLog('PromptBirthYearController')\n\nexport default class PromptBirthYearController {\n  view = null\n  PROMPT_AT_TIME_OF_DAY = 14 * HOUR\n  DEFAULT_INTERVAL = 2 * DAY\n\n  constructor() {\n    log('construct', 'Constructing PromptBirthYearController', null, 'DEBUG')\n    this.view = new View()\n  }\n\n  async initAsync() {\n    log('init', 'Initializing controller', null, 'DEBUG')\n\n    await API.Settings.initAsync()\n\n    if (await this.canShowPrompt()) {\n      this.mountView()\n      return true\n    }\n    return false\n  }\n\n  mountView() {\n    API.Analytics.event('PROMPT_BIRTHYEAR_SHOW')\n    this.view.init()\n    this.addListeners()\n  }\n\n  addListeners() {\n    log('addListeners', 'Adding listeners', null, 'TRACE')\n    PubSub.listen('PromptBirthYear.submit', async (_, { year }) => {\n      await API.Settings.setAsync({\n        age: year,\n      })\n      API.Analytics.event('PROMPT_BIRTHYEAR_SUBMITED')\n    })\n\n    PubSub.listen('PromptBirthYear.close', async () => {\n      API.Analytics.event('PROMPT_BIRTHYEAR_DISMISSED')\n      this.reschedulePrompt()\n    })\n  }\n\n  async canShowPrompt() {\n    const age = API.Settings.get('age')\n    if (age != null) return false\n\n    const promptAt = API.Settings.get('promptBirthYearAt')\n    if (promptAt == null) {\n      await this.reschedulePrompt()\n      return false\n    } else return new Date(promptAt) <= new Date()\n  }\n\n  async reschedulePrompt() {\n    let interval = API.Settings.get('promptBirthYearInterval')\n    if (interval == null) interval = this.DEFAULT_INTERVAL\n    else interval = interval * 2\n\n    const nextPromptAt = Time.getToday() + interval + this.PROMPT_AT_TIME_OF_DAY\n\n    await API.Settings.setAsync({ promptBirthYearAt: nextPromptAt })\n    await API.Settings.setAsync({ promptBirthYearInterval: interval })\n  }\n}\n","export default \"<div id=\\\"promptingReview\\\"\\n     class=\\\"relative sm:fixed sm:rounded-t-lg sm:border-t sm:border-l sm:border-r border-base-300 sm:border-solid left-0 right-0 bottom-0 bg-base-200 md:w-[80%] mx-auto inline-flex items-center justify-center gap-3 p-3 w-full\\\">\\n    <strong class=\\\"prompt-title text-sm\\\" data-i18n=\\\"reviewExtensionAsk\\\"></strong>\\n    <button id=\\\"btnOpenStore\\\" class=\\\"btn-submit btn btn-primary btn-outline btn-xs\\\" data-i18n=\\\"reviewExtensionPrompt\\\"></button>\\n    <iconify-icon id=\\\"closePromptingReview\\\" width=\\\"20\\\" class=\\\"btn-close absolute right-2 cursor-pointer\\\" icon=\\\"mdi:window-close\\\"></iconify-icon>\\n</div>\\n\"","import API from '~/core/CoreAPI'\nimport Brightline from 'brightline.js'\nimport PubSub from 'dropletjs.pubsub'\nimport promptReviewTpl from './template.html?raw'\n\nvar log = API.Utils.createScopedLog('PromptReviewView')\n\nexport default class PromptReviewView {\n  constructor() {\n    log('construct', 'Constructing PromptReviewView', null, 'DEBUG')\n  }\n  init() {\n    log('init', 'Initializing view', null, 'DEBUG')\n    const template = new Brightline(promptReviewTpl)\n    const html = template.render()\n    if (this.isOptionsPage()) {\n      document\n        .getElementsByTagName('body')[0]\n        .insertAdjacentHTML('beforeend', html)\n      document\n        .getElementById('promptingReview')\n        .classList.add('fixed-bottom-block')\n    } else {\n      document\n        .getElementsByTagName('body')[0]\n        .insertAdjacentHTML('beforeend', html)\n      document\n        .getElementById('promptingReview')\n        .classList.add('fixed-bottom-block-popup')\n    }\n\n    API.StayFocusd.localizeHTML(document)\n\n    this.bindUIHandlers()\n  }\n\n  isExtensionPage() {\n    return location.hostname === API.Chrome.Extension.getID()\n  }\n  isOptionsPage() {\n    return this.isExtensionPage() && location.pathname === '/options.html'\n  }\n\n  closePrompting() {\n    document.getElementById('promptingReview').classList.add('hidden')\n  }\n\n  /**\n   * Adds event listeners and publishes events for the controller to listen to.\n   */\n  bindUIHandlers() {\n    log('bindUIHandlers', 'Binding UI handlers', null, 'TRACE')\n    document.getElementById('btnOpenStore').addEventListener('click', () => {\n      PubSub.publish('PromptReview.openStore')\n      this.closePrompting()\n    })\n\n    document\n      .getElementById('closePromptingReview')\n      .addEventListener('click', () => {\n        this.closePrompting()\n        PubSub.publish('PromptReview.close')\n      })\n\n    API.Analytics.bindHtmlEvents()\n  }\n}\n","import API from '~/core/CoreAPI'\nimport PubSub from 'dropletjs.pubsub'\nimport View from './View'\nimport Time, { HOUR, DAY } from '~/core/Time'\nimport AppConsts from '~/core/AppConsts'\n\nvar log = API.Utils.createScopedLog('PromptReviewController')\n\nexport default class PromptReviewController {\n  view = null\n  CHROME_STORE_URL = `https://chromewebstore.google.com/detail/stayfocusd-block-distract/${AppConsts.APP_ID}/reviews`\n  PROMPT_AT_TIME_OF_DAY = 14 * HOUR\n  DEFAULT_INTERVAL = 2 * DAY\n\n  constructor() {\n    log('construct', 'Constructing PromptReviewController', null, 'DEBUG')\n    this.view = new View()\n  }\n\n  async initAsync() {\n    log('init', 'Initializing controller', null, 'DEBUG')\n\n    await API.Settings.initAsync()\n\n    if (await this.canShowPrompt()) {\n      this.mountView()\n      return true\n    }\n    return false\n  }\n\n  mountView() {\n    API.Analytics.event('PROMPT_REVIEW_SHOW')\n    this.view.init()\n    this.addListeners()\n  }\n\n  addListeners() {\n    log('addListeners', 'Adding listeners', null, 'TRACE')\n    PubSub.listen('PromptReview.openStore', async () => {\n      API.Analytics.event('REVIEW_PROMPT_CTA_CLICKED')\n      API.Chrome.Tab.create({\n        url: this.CHROME_STORE_URL,\n      })\n      await API.Settings.setAsync({\n        promptReview: true,\n      })\n    })\n\n    PubSub.listen('PromptReview.close', () => {\n      API.Analytics.event('REVIEW_PROMPT_DISMISSED')\n      this.reschedulePrompt()\n    })\n  }\n\n  async canShowPrompt() {\n    const isPromptReview = API.Settings.get('promptReview')\n    if (isPromptReview == true) return\n\n    const promptAt = API.Settings.get('promptReviewAt')\n    if (promptAt == null) {\n      await this.reschedulePrompt()\n      return false\n    } else return new Date(promptAt) <= new Date()\n  }\n\n  async reschedulePrompt() {\n    let interval = API.Settings.get('promptReviewInterval')\n    if (interval == null) interval = this.DEFAULT_INTERVAL\n    else interval = interval * 2\n\n    const nextPromptAt = Time.getToday() + interval + this.PROMPT_AT_TIME_OF_DAY\n\n    await API.Settings.setAsync({ promptReviewAt: nextPromptAt })\n    await API.Settings.setAsync({ promptReviewInterval: interval })\n  }\n}\n","export default \"<div id=\\\"promptingSurvey\\\" class=\\\"relative sm:fixed sm:rounded-t-lg sm:border-t sm:border-l sm:border-r border-base-300 sm:border-solid left-0 right-0 bottom-0 bg-base-200 md:w-[80%] mx-auto inline-flex flex-col sm:flex-row sm:items-center justify-center sm:gap-3 p-3 w-full text-sm\\\">\\n    <strong class=\\\"prompt-title\\\" data-i18n=\\\"surveyAsk\\\"></strong>\\n    <div class=\\\"flex\\\">\\n        <span class=\\\"prompt-title\\\" data-i18n=\\\"surveyLinkMessage\\\"></span>&nbsp;\\n        <a id=\\\"linkOpenSurvey\\\" class=\\\"font-bold link link-secondary\\\" href=\\\"https://forms.gle/SNwdQR43Z1kbuHab6\\\" target=\\\"_blank\\\">StayFocusd User Feedback Form</a>\\n    </div>\\n    <iconify-icon id=\\\"closePromptingSurvey\\\" width=\\\"20\\\" class=\\\"btn-close absolute right-2 cursor-pointer\\\" icon=\\\"mdi:window-close\\\"></iconify-icon>\\n</div>\\n\"","import API from '~/core/CoreAPI'\nimport Brightline from 'brightline.js'\nimport PubSub from 'dropletjs.pubsub'\nimport promptSurveyTpl from './template.html?raw'\n\nvar log = API.Utils.createScopedLog('PromptSurveyView')\n\nexport default class PromptSurveyView {\n  constructor() {\n    log('construct', 'Constructing PromptSurveyView', null, 'DEBUG')\n  }\n\n  init() {\n    log('init', 'Initializing view', null, 'DEBUG')\n    const template = new Brightline(promptSurveyTpl)\n    const html = template.render()\n    document\n      .getElementsByTagName('body')[0]\n      .insertAdjacentHTML('beforeend', html)\n    document\n      .getElementById('promptingSurvey')\n      .classList.add('fixed-bottom-block-popup')\n\n    API.StayFocusd.localizeHTML(document)\n\n    this.bindUIHandlers()\n  }\n\n  closePrompting() {\n    document.getElementById('promptingSurvey').classList.add('hidden')\n  }\n\n  /**\n   * Adds event listeners and publishes events for the controller to listen to.\n   */\n  bindUIHandlers() {\n    log('bindUIHandlers', 'Binding UI handlers', null, 'TRACE')\n    document.getElementById('linkOpenSurvey').addEventListener('click', () => {\n      PubSub.publish('PromptSurvey.openSurvey')\n      this.closePrompting()\n    })\n\n    document\n      .getElementById('closePromptingSurvey')\n      .addEventListener('click', () => {\n        this.closePrompting()\n        PubSub.publish('PromptSurvey.close')\n      })\n\n    API.Analytics.bindHtmlEvents()\n  }\n}\n","import API from '~/core/CoreAPI'\nimport PubSub from 'dropletjs.pubsub'\nimport View from './View'\nimport Time, { HOUR, DAY } from '~/core/Time'\n\nvar log = API.Utils.createScopedLog('PromptSurveyController')\n\nexport default class PromptSurveyController {\n  view = null\n  PROMPT_AT_TIME_OF_DAY = 14 * HOUR\n  DEFAULT_INTERVAL = 2 * DAY\n\n  constructor() {\n    log('construct', 'Constructing PromptSurveyTplController', null, 'DEBUG')\n\n    this.view = new View()\n  }\n\n  async initAsync() {\n    log('init', 'Initializing controller', null, 'DEBUG')\n\n    await API.Settings.initAsync()\n\n    if (await this.canShowPrompt()) {\n      this.mountView()\n      return true\n    }\n    return false\n  }\n\n  mountView() {\n    API.Analytics.event('PROMPT_SURVEY_SHOW')\n    this.view.init()\n    this.addListeners()\n  }\n\n  addListeners() {\n    log('addListeners', 'Adding listeners', null, 'TRACE')\n    PubSub.listen('PromptSurvey.openSurvey', async () => {\n      API.Analytics.event('PROMPT_SURVEY_CTA_CLICKED')\n      await API.Settings.setAsync({\n        promptSurvey: true,\n      })\n    })\n\n    PubSub.listen('PromptSurvey.close', () => {\n      API.Analytics.event('PROMPT_SURVEY_DISMISSED')\n      this.reschedulePrompt()\n    })\n  }\n\n  async canShowPrompt() {\n    const isPromptSurvey = API.Settings.get('promptSurvey')\n    if (isPromptSurvey == true) return\n\n    const promptAt = API.Settings.get('promptSurveyAt')\n    if (promptAt == null) {\n      await this.reschedulePrompt()\n      return false\n    } else return new Date(promptAt) <= new Date()\n  }\n\n  async reschedulePrompt() {\n    let interval = API.Settings.get('promptSurveyInterval')\n    if (interval == null) interval = this.DEFAULT_INTERVAL\n    else interval = interval * 2\n\n    const nextPromptAt = Time.getToday() + interval + this.PROMPT_AT_TIME_OF_DAY\n\n    await API.Settings.setAsync({ promptSurveyAt: nextPromptAt })\n    await API.Settings.setAsync({ promptSurveyInterval: interval })\n  }\n}\n","import { PromptType } from '~/core/Prompt'\nimport PromptBirthYearController from './PromptBirthYear/Controller'\nimport PromptReviewController from './PromptReview/Controller'\nimport PromptSurveyController from './PromptSurvey/Controller'\nimport API from '~/core/CoreAPI'\n\nvar log = API.Utils.createScopedLog('BasePrompt')\n\nexport default class BasePrompt {\n  constructor() {\n    log('construct', 'Constructing BasePrompt', null, 'DEBUG')\n  }\n\n  async init(...types) {\n    log('init', 'Initializing controller', null, 'DEBUG')\n    if (types.length == 0) types = Object.values(PromptType)\n\n    let promptIsAlreadyShown = false\n    for (const element of types) {\n      switch (element) {\n        case PromptType.PromptBirthYear:\n          if (!promptIsAlreadyShown) {\n            const promptBirthYearController = new PromptBirthYearController()\n            promptIsAlreadyShown = await promptBirthYearController.initAsync()\n          }\n          break\n        case PromptType.PromptReview:\n          if (!promptIsAlreadyShown) {\n            const promptReviewController = new PromptReviewController()\n            promptIsAlreadyShown = await promptReviewController.initAsync()\n          }\n          break\n        case PromptType.PromptSurvey:\n          if (!promptIsAlreadyShown) {\n            const promptSurveyController = new PromptSurveyController()\n            promptIsAlreadyShown = await promptSurveyController.initAsync()\n          }\n          break\n      }\n    }\n  }\n}\n"],"names":["PromptType","promptBirthYearTpl","log","API","PromptBirthYearView","html","Brightline","event","age","PubSub","e","birthYear","yearInt","message","PromptBirthYearController","__publicField","HOUR","DAY","View","_","year","promptAt","interval","nextPromptAt","Time","promptReviewTpl","PromptReviewView","PromptReviewController","AppConsts","promptSurveyTpl","PromptSurveyView","PromptSurveyController","BasePrompt","types","promptIsAlreadyShown","element"],"mappings":"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"}