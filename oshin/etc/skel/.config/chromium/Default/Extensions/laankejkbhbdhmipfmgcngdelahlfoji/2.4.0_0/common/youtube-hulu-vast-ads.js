"use strict";(()=>{var Pe=Object.create;var Ht=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var Fe=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var Le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var De=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Oe(t))!Ue.call(e,s)&&s!==r&&Ht(e,s,{get:()=>t[s],enumerable:!(o=Me(t,s))||o.enumerable});return e};var Vt=(e,t,r)=>(r=e!=null?Pe(Fe(e)):{},De(t||!e||!e.__esModule?Ht(r,"default",{value:e,enumerable:!0}):r,e));var vt=Le((Bt,Wt)=>{"use strict";(function(e){if(typeof Bt=="object")Wt.exports=e();else if(typeof define=="function"&&define.amd)define(e);else{var t;try{t=window}catch{t=self}t.SparkMD5=e()}})(function(e){"use strict";var t=function(d,l){return d+l&4294967295},r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(d,l,i,n,c,a){return l=t(t(l,d),t(n,a)),t(l<<c|l>>>32-c,i)}function s(d,l){var i=d[0],n=d[1],c=d[2],a=d[3];i+=(n&c|~n&a)+l[0]-680876936|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[1]-389564586|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[2]+606105819|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[3]-1044525330|0,n=(n<<22|n>>>10)+c|0,i+=(n&c|~n&a)+l[4]-176418897|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[5]+1200080426|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[6]-1473231341|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[7]-45705983|0,n=(n<<22|n>>>10)+c|0,i+=(n&c|~n&a)+l[8]+1770035416|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[9]-1958414417|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[10]-42063|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[11]-1990404162|0,n=(n<<22|n>>>10)+c|0,i+=(n&c|~n&a)+l[12]+1804603682|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[13]-40341101|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[14]-1502002290|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[15]+1236535329|0,n=(n<<22|n>>>10)+c|0,i+=(n&a|c&~a)+l[1]-165796510|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[6]-1069501632|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[11]+643717713|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[0]-373897302|0,n=(n<<20|n>>>12)+c|0,i+=(n&a|c&~a)+l[5]-701558691|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[10]+38016083|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[15]-660478335|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[4]-405537848|0,n=(n<<20|n>>>12)+c|0,i+=(n&a|c&~a)+l[9]+568446438|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[14]-1019803690|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[3]-187363961|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[8]+1163531501|0,n=(n<<20|n>>>12)+c|0,i+=(n&a|c&~a)+l[13]-1444681467|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[2]-51403784|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[7]+1735328473|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[12]-1926607734|0,n=(n<<20|n>>>12)+c|0,i+=(n^c^a)+l[5]-378558|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[8]-2022574463|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[11]+1839030562|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[14]-35309556|0,n=(n<<23|n>>>9)+c|0,i+=(n^c^a)+l[1]-1530992060|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[4]+1272893353|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[7]-155497632|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[10]-1094730640|0,n=(n<<23|n>>>9)+c|0,i+=(n^c^a)+l[13]+681279174|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[0]-358537222|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[3]-722521979|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[6]+76029189|0,n=(n<<23|n>>>9)+c|0,i+=(n^c^a)+l[9]-640364487|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[12]-421815835|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[15]+530742520|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[2]-995338651|0,n=(n<<23|n>>>9)+c|0,i+=(c^(n|~a))+l[0]-198630844|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[7]+1126891415|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[14]-1416354905|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[5]-57434055|0,n=(n<<21|n>>>11)+c|0,i+=(c^(n|~a))+l[12]+1700485571|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[3]-1894986606|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[10]-1051523|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[1]-2054922799|0,n=(n<<21|n>>>11)+c|0,i+=(c^(n|~a))+l[8]+1873313359|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[15]-30611744|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[6]-1560198380|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[13]+1309151649|0,n=(n<<21|n>>>11)+c|0,i+=(c^(n|~a))+l[4]-145523070|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[11]-1120210379|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[2]+718787259|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[9]-343485551|0,n=(n<<21|n>>>11)+c|0,d[0]=i+d[0]|0,d[1]=n+d[1]|0,d[2]=c+d[2]|0,d[3]=a+d[3]|0}function u(d){var l=[],i;for(i=0;i<64;i+=4)l[i>>2]=d.charCodeAt(i)+(d.charCodeAt(i+1)<<8)+(d.charCodeAt(i+2)<<16)+(d.charCodeAt(i+3)<<24);return l}function h(d){var l=[],i;for(i=0;i<64;i+=4)l[i>>2]=d[i]+(d[i+1]<<8)+(d[i+2]<<16)+(d[i+3]<<24);return l}function f(d){var l=d.length,i=[1732584193,-271733879,-1732584194,271733878],n,c,a,x,O,L;for(n=64;n<=l;n+=64)s(i,u(d.substring(n-64,n)));for(d=d.substring(n-64),c=d.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<c;n+=1)a[n>>2]|=d.charCodeAt(n)<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(s(i,a),n=0;n<16;n+=1)a[n]=0;return x=l*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),O=parseInt(x[2],16),L=parseInt(x[1],16)||0,a[14]=O,a[15]=L,s(i,a),i}function p(d){var l=d.length,i=[1732584193,-271733879,-1732584194,271733878],n,c,a,x,O,L;for(n=64;n<=l;n+=64)s(i,h(d.subarray(n-64,n)));for(d=n-64<l?d.subarray(n-64):new Uint8Array(0),c=d.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<c;n+=1)a[n>>2]|=d[n]<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(s(i,a),n=0;n<16;n+=1)a[n]=0;return x=l*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),O=parseInt(x[2],16),L=parseInt(x[1],16)||0,a[14]=O,a[15]=L,s(i,a),i}function m(d){var l="",i;for(i=0;i<4;i+=1)l+=r[d>>i*8+4&15]+r[d>>i*8&15];return l}function g(d){var l;for(l=0;l<d.length;l+=1)d[l]=m(d[l]);return d.join("")}g(f("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(d,l){var i=(d&65535)+(l&65535),n=(d>>16)+(l>>16)+(i>>16);return n<<16|i&65535}),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function d(l,i){return l=l|0||0,l<0?Math.max(l+i,0):Math.min(l,i)}ArrayBuffer.prototype.slice=function(l,i){var n=this.byteLength,c=d(l,n),a=n,x,O,L,Dt;return i!==e&&(a=d(i,n)),c>a?new ArrayBuffer(0):(x=a-c,O=new ArrayBuffer(x),L=new Uint8Array(O),Dt=new Uint8Array(this,c,x),L.set(Dt),O)}}();function w(d){return/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),d}function v(d,l){var i=d.length,n=new ArrayBuffer(i),c=new Uint8Array(n),a;for(a=0;a<i;a+=1)c[a]=d.charCodeAt(a);return l?c:n}function R(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function b(d,l,i){var n=new Uint8Array(d.byteLength+l.byteLength);return n.set(new Uint8Array(d)),n.set(new Uint8Array(l),d.byteLength),i?n:n.buffer}function q(d){var l=[],i=d.length,n;for(n=0;n<i-1;n+=2)l.push(parseInt(d.substr(n,2),16));return String.fromCharCode.apply(String,l)}function A(){this.reset()}return A.prototype.append=function(d){return this.appendBinary(w(d)),this},A.prototype.appendBinary=function(d){this._buff+=d,this._length+=d.length;var l=this._buff.length,i;for(i=64;i<=l;i+=64)s(this._hash,u(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},A.prototype.end=function(d){var l=this._buff,i=l.length,n,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a;for(n=0;n<i;n+=1)c[n>>2]|=l.charCodeAt(n)<<(n%4<<3);return this._finish(c,i),a=g(this._hash),d&&(a=q(a)),this.reset(),a},A.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},A.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},A.prototype.setState=function(d){return this._buff=d.buff,this._length=d.length,this._hash=d.hash,this},A.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},A.prototype._finish=function(d,l){var i=l,n,c,a;if(d[i>>2]|=128<<(i%4<<3),i>55)for(s(this._hash,d),i=0;i<16;i+=1)d[i]=0;n=this._length*8,n=n.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(n[2],16),a=parseInt(n[1],16)||0,d[14]=c,d[15]=a,s(this._hash,d)},A.hash=function(d,l){return A.hashBinary(w(d),l)},A.hashBinary=function(d,l){var i=f(d),n=g(i);return l?q(n):n},A.ArrayBuffer=function(){this.reset()},A.ArrayBuffer.prototype.append=function(d){var l=b(this._buff.buffer,d,!0),i=l.length,n;for(this._length+=d.byteLength,n=64;n<=i;n+=64)s(this._hash,h(l.subarray(n-64,n)));return this._buff=n-64<i?new Uint8Array(l.buffer.slice(n-64)):new Uint8Array(0),this},A.ArrayBuffer.prototype.end=function(d){var l=this._buff,i=l.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c,a;for(c=0;c<i;c+=1)n[c>>2]|=l[c]<<(c%4<<3);return this._finish(n,i),a=g(this._hash),d&&(a=q(a)),this.reset(),a},A.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},A.ArrayBuffer.prototype.getState=function(){var d=A.prototype.getState.call(this);return d.buff=R(d.buff),d},A.ArrayBuffer.prototype.setState=function(d){return d.buff=v(d.buff,!0),A.prototype.setState.call(this,d)},A.ArrayBuffer.prototype.destroy=A.prototype.destroy,A.ArrayBuffer.prototype._finish=A.prototype._finish,A.ArrayBuffer.hash=function(d,l){var i=p(new Uint8Array(d)),n=g(i);return l?q(n):n},A})});var T=class e{constructor(t,r){this.operation=t;this.data=r}static NONCE="z3ZCw_12v";nonce=e.NONCE;static fromObject(t){return!t||t.nonce!==e.NONCE?null:new e(t.operation,t.data)}validate(){return this.nonce===e.NONCE}};var X=class{crawlId;installId;zys;dateCrawlStarted;dateCrawled;crawlUrl;fragmentIndex;youTubeChannelId;youTubeChannelName;youTubeVideoId;constructor(t,r,o,s,u,h,f,p){this.crawlId=t,this.installId=r,this.zys=o,this.dateCrawlStarted=s,this.dateCrawled=u,this.crawlUrl=h,this.fragmentIndex=f,Object.assign(this,p)}get ads(){return this.zys}set ads(t){this.zys=t}};var ct=Vt(vt(),1);var _=class{x;y;width;height;text;sourceUrls;hash;hashOverride;type;typeOverride;canvases;svgs;depth;adRuleId;dedupeKey;duration;language;youTubeId;netflixData;twitterData;vastData;outerHtml;static minWidth=120;static minHeight=28;static minimumVideoToAdAreaRatio=.5;static minimumImageToAdAreaRatio=.05;constructor(t){this.x=t.x??0,this.y=t.y??0,this.width=t.width,this.height=t.height,this.text=t.text??"",this.sourceUrls=t.sourceUrls??[],this.hash=t.hash??"",this.type=t.type,this.canvases=[],this.svgs=[],this.depth=0,this.adRuleId=t.adRuleId,this.duration=t.duration,this.language=t.language,this.youTubeId=t.youTubeId,this.netflixData=t.netflixData,this.twitterData=t.twitterData,this.vastData=t.vastData}};var y=class e{u;t;h;d;width;height;constructor(t){this.u=e.qualifyURL(t.url,t.doc),this.t=t.urlType,this.d=t.depth,this.width=t.width,this.height=t.height}get url(){return this.u}set url(t){this.u=t}get urlType(){return this.t}set urlType(t){this.t=t}get depth(){return this.d}set depth(t){this.d=t}get hash(){return this.h}set hash(t){this.h=t}static SourceUrlTags=new Set(["A","DIV","IFRAME","IMG","LINK","SCRIPT","SPAN","VIDEO"]);static qualifyURL(t,r){if(!t||new RegExp("^(?:\\w+-extension)|(?:about)|(?:blob)|(?:javascript):").test(t))return"";r=r||document;let o=r.createElement("a");return o.href=t,o.href}};async function Q(e,t){if(!e)return[];let r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u=>y.SourceUrlTags.has(u.nodeName)||u?.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),o=[],s=r.currentNode;for(;s;){o.push(...await He(s,t));let u=s?.shadowRoot;u&&o.push(...await Q(u?.firstElementChild,t)),s=r.nextNode()}return o.filter(u=>u.url)}async function He(e,t){if(!e||!y.SourceUrlTags.has(e.nodeName))return[];if(e.nodeName=="IMG")return[await qt(e,t)];if(e.nodeName=="DIV"||e.nodeName=="SPAN"){let s=/url\(['"]?([^'"]+)['"]?\)/gi,u=getComputedStyle(e).getPropertyValue("background-image");return Promise.all(Array.from(u.matchAll(s)).filter(h=>h).map(h=>h[1]).map(async h=>{try{let f=new Image;return f.src=h,await f.decode(),qt(f,t)}catch{return new y({url:h,urlType:7,depth:t,doc:e?.ownerDocument})}}))}if(e.nodeName==="VIDEO"){if(e=e.hasAttribute("src")?e:e.querySelector("source"),!e)return[];let s=e.getBoundingClientRect(),u=Math.round(s.width),h=Math.round(s.height);return[new y({url:e.getAttribute("src"),urlType:4,depth:t,width:u,height:h,doc:e.ownerDocument})]}if(e.nodeName==="IFRAME")return[new y({url:e.getAttribute("src"),urlType:1,depth:t,width:e.offsetWidth,height:e.offsetHeight,doc:e.ownerDocument})];let r=null,o=0;switch(e.nodeName){case"SCRIPT":r=e.getAttribute("src"),o=6;break;case"LINK":r=e.getAttribute("href"),o=6;break;case"A":r=e.getAttribute("href"),o=8;break}return[new y({url:r,urlType:o,depth:t,doc:e.ownerDocument})]}async function qt(e,t){let r=e.getAttribute("src"),o=e.getBoundingClientRect(),s=Math.round(e.naturalWidth||o.width),u=Math.round(e.naturalHeight||o.height);if(!(s||u)&&r)try{let f=new Image;f.src=r,await f.decode(),s=f.naturalWidth,u=f.naturalHeight}catch{}let h=0;return(o.width||s)<2&&(o.height||u)<2||s===43&&u===22||o.y+window.scrollY<5&&(o.width||s)<85&&(o.height||u)<=20?h=7:h=3,new y({url:r,urlType:h,depth:t,width:o.width||s,height:o.height||u,doc:e.ownerDocument})}async function ut(e,t){e.sourceUrls=lt(e.sourceUrls,h=>h.u);let r=e.sourceUrls.filter(h=>h.t===3||h.t===4),s=r.filter(h=>h.t===3).sort((h,f)=>(h.width||0)*(h.height||0)-(f.width||0)*(f.height||0)).pop(),u=r.filter(h=>h.t===4);if(e.type=e.typeOverride??(r.length===1&&(r[0].width||0)>=e.width-2&&(r[0].height||0)>=e.height-2?r[0].t===3?1:3:u.length===1&&(u[0].width||0)*(u[0].height||0)>=e.width*e.height*_.minimumVideoToAdAreaRatio?3:7),e.hashOverride)return e.hash=e.hashOverride;if(e.type===7&&!u.length&&(s?.width||0)*(s?.height||0)<e.width*e.height*_.minimumImageToAdAreaRatio)return e.hash="";for(let h of r)h.h=await j(h.u||"",t);if(e.hash=r.filter(h=>h.h).reduce((h,f)=>z(h,f.h),"")||"",e.type===3&&!e.hash&&(e.hash=k(r[0].u??"",!0)),e.type===7&&e.text){let h=k(e.text.toLowerCase(),!0);e.hash=z(e.hash,h)}if(e.hash||(e.canvases?.length&&(e.hash=e.canvases.reduce((h,f)=>z(k(f),h),e.hash)),e.svgs?.length&&(e.hash=e.svgs.reduce((h,f)=>z(k(f),h),e.hash))),e.type===7&&e.hash){let h=k(Be(kt(Math.round(e.height)),kt(Math.round(e.width))),!0);e.hash=z(e.hash,h)}r.forEach(h=>{h.h&&(h.h=btoa(h.h))}),e.hash=btoa(e.hash)}async function j(e,t){try{return k(await t(e))}catch(r){return S(r),""}}function k(e,t){if(Ve(e)==="arraybuffer"){let r=e;return r.byteLength===0?"":ct.default.ArrayBuffer.hash(r,!0)}else{let r=e;return t?ct.default.hash(r,!0):ct.default.hashBinary(r,!0)}}function Ve(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function z(e,t){if(!t)return e||"";if(!e)return t;if(e.length<t.length){let u=e;e=t,t=u}let r=e.length,o=t.length,s="";for(let u=0;u<o;u++)s+=String.fromCharCode(e.charCodeAt(u)^t.charCodeAt(u));for(let u=o;u<r;u++)s+=String.fromCharCode(e.charCodeAt(u));return s}function kt(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!0),t}function Be(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}var V=3e3;var Et="pc",Ct="ca",et=72e5,Z=null;function S(...e){Z&&(e=e||[],e=e.map(t=>t?.stack&&t.message?{error:t.message,stack:t.stack}:t),e=e.map(t=>typeof t!="object"||t instanceof String?t:JSON.stringify(t)),e.length==1?Z(e[0]):Z(e))}function Jt(e){Z=e||Z}var ht=class{constructor(t,r,o,s){let u=Xt(t);u==="object"?(this.left=0,Object.assign(this,t)):u==="number"&&(this.left=Math.round(Math.max(t||0,0))||0,this.top=Math.round(Math.max(r||0,0))||0,this.width=Math.round(Math.max(o||0,0))||0,this.height=Math.round(Math.max(s||0,0))||0)}get bottom(){return this.top+this.height}get right(){return this.left+this.width}toString(){return`${this.width}x${this.height}@${this.left},${this.top}`}};function We(){return([1e7]+-1e3+-1e3+-1e3+-1e11).replace(/[01]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function Xt(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function qe(e,t){let r={},o=Object.keys(t);for(let s=0,u=o.length;s<u;s++){let h=o[s];if(t.hasOwnProperty(h)){let f=t[h];if(f==null||f===""&&e[h]||f instanceof Array&&!f.length&&e[h]?.length||(h==="top"||h==="left"||h==="X"||h==="Y")&&e[h]>0)continue;r[h]=t[h]}}return Object.assign(e,t)}function E(e){try{return e()}catch{return null}}var $r=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").map(e=>e.charCodeAt(0));function zt(e){return e.tagName?.toUpperCase?.()||E(()=>e.outerHTML.substr(1,e.outerHTML.indexOf(" ")-1).toUpperCase())||""}function jt(e){let t=0,r="",o={" ":1,"\f":1,"\n":1,"\r":1,"	":1,"\v":1,"\xA0":1,"\u2028":1,"\u2029":1};for(let s=0,u=e.length;s<u;s++)o[e.charAt(s)]?(t||(r+=" "),t=1):(t=0,r+=e.charAt(s));return r.trim()}function F(){return ke(C.location.hostname)}function ke(e){return e.split(".").slice(e.endsWith(".uk")||e.endsWith(".jp")?-3:-2).join(".")}function pt(){let e=new Set(["aarp.org","abc.com","aol.com","attn.com","atttvnow.com","brainly.com","bravotv.com","cartoonnetwork.com","cbs.com","cbssports.com","chron.com","citationmachine.net","cnet.com","cnn.com","crunchyroll.com","dailymail.co.uk","delish.com","discoveryplus.com","easybib.com","espn.com","fandom.com","foxbusiness.com","foxnews.com","fubo.tv","genius.com","go.cnn.com","go.com","goodhousekeeping.com","happykids.tv","hulu.com","imdb.com","investigationdiscovery.com","linkedin.com","locast.org","mlb.com","msn.com","music.amazon.com","music.apple.com","music.youtube.com","mytuner-radio.com","nexusmods.com","nfl.com","nhl.com","nypost.com","nytimes.com","paramountplus.com","pch.com","philo.com","playstation.com","pluto.tv","rawstory.com","realtor.com","refinery29.com","seattlepi.com","sfgate.com","sling.com","spanishdict.com","sporcle.com","steampowered.com","tablotv.com","therokuchannel.roku.com","try.frndlytv.com","tubitv.com","tv.apple.com","tv.youtube.com","twitch.tv","uproxx.com","usatoday.com","vudu.com","washingtonpost.com","watch.hgtv.com","watch.spectrum.net","weather.com","www3.nhk.or.jp","xbox.com","xfinity.com","yahoo.com","yelp.com","youtubekids.com"]);return I&&(e.has(C.location.hostname)||e.has(F()))}function U(e){e.documentElement&&(e=e.documentElement);let t=zt(e);if(e.offsetParent===null&&t!=="BODY"&&t!=="HTML"&&t!=="FRAME")return new ht;let o=(e.ownerDocument||document).defaultView||C,s=e.getBoundingClientRect();return new ht(s.left+o.scrollX,s.top+o.scrollY,s.width,s.height)}var Gt=["background-image","display","visibility","z-index","border-top-width","border-left-width","border-bottom-width","border-right-width","padding-top","padding-left","padding-bottom","padding-right","position","width","height","top","bottom","left","right","font-size"];function je(e){if(e._pm_st)return e.style&&(e._pm_st=qe(e._pm_st,JSON.parse(JSON.stringify(e.style,Gt)))),e._pm_st;let t=e.ownerDocument?.defaultView;typeof window<"u"&&(!t||!t.opener)&&(t=window);let r=JSON.parse(JSON.stringify(t.getComputedStyle(e),Gt));return e._pm_st=r,r}function Kt(e,t){let r=e.nodeName,o=je(e),s=U(e);if(o?.display!=="none"&&s&&s.width>20&&s.height>20)if(r==="CANVAS"&&!e.matches(".__pm_marker"))try{t.canvases.push(e.toDataURL("image/jpeg",.2))}catch{}else r==="SVG"&&t.svgs.push(e.outerHTML)}function mt(e){if(!e)return"";let t=e?.ownerDocument||document,r=t.defaultView.NodeFilter;if(Xt(e)==="htmldocument"&&e.body&&(e=e.body),!e)return"";let o={SCRIPT:1,NOSCRIPT:1,STYLE:1},s=zt(e);if(s==="HTML"&&(e=e.querySelector("body")),!e)return"";let u=function(m){try{return m.nodeType===3?r.FILTER_ACCEPT:!m.tagName||o[m.tagName]||m.offsetParent===null?r.FILTER_REJECT:r.FILTER_ACCEPT}catch{return r.FILTER_REJECT}};if(e.nodeType!==3&&(!s||o[s]))return"";let h=t.createTreeWalker(e,r.SHOW_ELEMENT|r.SHOW_TEXT,{acceptNode:u},!0),f={"LEARN MORE":1,REPLAY:1},p=[];for(;e;){if(e.nodeType===3){let m=jt(e.nodeValue||"");!f[m.toUpperCase()]&&!p.includes(m)&&p.push(m)}e=h.nextNode()}return p.length?jt(p.join(" ")):""}function P(e,t){return C.requestIdleCallback?{id:C.requestIdleCallback(e,{timeout:t}),isIdleCallback:!0}:{id:setTimeout(e,t),isIdleCallback:!1}}var tt=null;function G(e){tt=e||tt}function It(){tt=null}function Yt(){if(typeof window>"u")return;let e=function(f,p,m,g){P(()=>{!tt||!f||tt(f,p,m,g)},1e4)},t=f=>new TextDecoder("utf-8").decode(new Uint8Array(f)),r=function(f,p){try{if(p=f.currentTarget||p,p=p._datadog_xhr||p,p.readyState===4&&p.status>=200&&p.status<=210){let m=E(()=>p.responseXML),g=E(()=>p.responseText)||E(()=>t(p.response))||E(()=>m.documentElement.outerHTML);(g||m)&&e(g,m,p.reponseType==="json",p.responseURL)}}catch{}},o=XMLHttpRequest.prototype.send;function s(){let f=this.onreadystatechange,p=arguments;this.onreadystatechange=function(m){return r(m,this),f?.apply?.(this,arguments)},o.apply(this,p)}XMLHttpRequest.prototype.send=s;let u=C.fetch,h=function(){return u.apply(this,arguments).then(f=>{let p=f.headers.get("Content-Type");if(p&&(p.includes("text")||p.includes("json")||p.includes("xml")||p.includes("javascript"))){let m=f.clone();P(()=>{m.text().then(g=>e(g,null,p.includes("json"),f.url))},5e3)}return f})};C.fetch=h}function Tt(e){if(!e)return null;let t=null;return e=(e+"").trim(),e=="start"?t=0:e.indexOf(":")>=0?t=E(()=>Math.round(e.split(":").reduce((r,o,s,u)=>r+parseFloat(o)*Math.pow(60,u.length-s-1),0)))||t:isNaN(e)||(t=Math.round(parseFloat(e))),t}var Qt,$,Zt,St,H,dt,ft;function te(e){H[e.dedupeKey]?.depth>e.depth||H[e.dedupeKey]?.depth===e.depth&&H[e.dedupeKey].adRuleId<e.adRuleId||(H[e.dedupeKey]=e)}function Ge(){let e=C.location;return e.href.indexOf("youtube.com/watch")===-1?e.origin+e.pathname:e.href}async function $e(e){await Promise.all(e.map(t=>ut(t,M)))}async function Je(){let e=Object.values(H),t=Object.values(dt);return H={},dt={},await $e(e),new X(Qt,gt,e.concat(t).filter(r=>r.hash),$-(D?.TimeOffset||0),Date.now()-(D?.TimeOffset||0),St,Zt++,ft)}function N(e,t){if(!I){W(top,new T(Et,[e,t]));return}e.forEach(r=>dt[r.hash]=r),ft=t||ft,B()}var $t=0;async function B(){let e=Date.now();if(e-$t>V){$t=e;let t=await Je();Nt?.(JSON.stringify(t))}}function ee(){if(!I)return;Qt=We(),$=Date.now(),Zt=0;let e=D?.ParsedSiteConfigs[F()];if(e){let t=new RegExp(e).exec(location.href);St=t?t.slice(1).join(""):location.protocol+"://"+location.hostname}else St=Ge();H={},dt={},ft=void 0}function Xe(e,t){return e.reduce(function(r,o){return(r[t(o)]=r[t(o)]||[]).push(o),r},{})}function lt(e,t){return Object.values(Xe(e,t)).map(r=>r[0])}function W(e,t){e.postMessage(t,"*")}var re=null;function ne(){let e=document.querySelector("video.ad-video-player,video#ad-video-player"),t=document.querySelector(".AdUnitView a"),r=e&&e.src;if(e&&t&&r&&re!==r&&r.endsWith(".mp4")&&r.indexOf("bumper")===-1&&(r.indexOf("ads")>=0||r.indexOf("Ads")>=0)){if(!e.duration||isNaN(e.duration))return;re=r,P(()=>{j(r,M).then(o=>N([new _({width:1920,height:1080,sourceUrls:[new y({url:r,urlType:4}),new y({url:t.href,urlType:8})],hash:btoa(o),type:3,duration:Math.round(e.duration)})]))});return}}var yt={},ie=!1;function oe(){if(S("NETFLIX AD CAPTURE"),!(typeof window>"u")){if(!ie){let e=Object.defineProperty;Object.defineProperty=function(r,o,s){return Date.now()-$<et&&P(()=>{if(Object.hasOwn(r,"isAd")&&r.isAd){let u=ze(r);u&&(yt[u.hash]=u)}}),e(r,o,s)},ie=!0}N(Object.values(yt)),yt={}}}function ze(e){let t=e.movieId;if(!t||yt[t])return;let r=e.video_tracks[0].streams[0],o=r.res_w,s=r.res_h,u=e.audio_tracks[0].streams[0];return new _({hash:("n+++"+t).padEnd(t.length+4+(t.length+4)*6%8/2,"=").replace("===","A=="),type:3,sourceUrls:[new y({url:r.urls[0].url,urlType:4,width:o,height:s}),new y({url:u.urls[0].url,urlType:9})],width:o,height:s,duration:e.duration,language:u.language,netflixData:{id:t}})}var rt=[];async function Rt(){S("TWITTER AD CAPTURE"),G((e,t,r,o)=>{try{if(!o||!o.includes("HomeTimeline")&&!(o.includes("/conversation/")&&o.includes("/"+/\d+$/.exec(window.location.pathname)[0]+".json")))return;let s=Ke(e);rt=rt.concat(s)}catch{}}),await Ye()}function Ke(e){let t=JSON.parse(e);return([].concat.apply([],t?.data?.home?.home_timeline_urt?.instructions?.filter?.(s=>s?.type=="TimelineAddEntries")?.map?.(s=>s.entries))||[]).map(s=>s.content?.itemContent).filter(s=>s?.promotedMetadata).map(s=>{let u=s.tweet_results?.result?.card?.legacy?.binding_values?.filter?.(f=>f?.key=="unified_card")?.map?.(f=>JSON.parse(f.value?.string_value))?.[0],h=u?.destination_objects?.browser_1?.data?.url_data?.url||u?.destination_objects?.browser_with_docked_media_1?.url_data?.url;return{id_str:s?.tweet_results?.result?.rest_id,screen_name:s?.tweet_results?.result?.core?.user_results?.result?.legacy?.screen_name,cardDestination:h,advertiserId:s?.promotedMetadata?.advertiser_results?.result?.rest_id,user_id_str:s?.tweet_results?.result?.legacy?.user_id_str}}).filter(s=>s.id_str&&s.screen_name)}async function Ye(){if(!nt)return;let e=await Qe(document,rt),t=e.map(r=>r.twitterData.tid);rt=rt.filter(r=>!t.includes(r.id_str)),N(e)}async function Qe(e,t){let r="div.tweet.promoted-tweet",o=Array.from(e.querySelectorAll(r));o.length||(o=Array.from(e.querySelectorAll("article div>svg")).map(u=>u.parentElement.querySelector("span")).filter(u=>u?.textContent&&u.textContent.length<50).map(u=>u.closest("article"))),o.length||(o=Array.from(document.querySelectorAll("span")).filter(u=>u.textContent==="Ad").map(u=>u.closest("article")));let s=[];for(let u=0;u<o.length;u++){let h=o[u],f=Array.from(h.querySelectorAll("div>span,a span")).map(b=>b.textContent).filter(b=>b?.startsWith("@"))[0];f=f.startsWith("@")?f.substring(1):f;let p=null,m=null;for(m of t)if(m.screen_name==f&&(p=m.id_str,p))break;if(!p)continue;let g=mt(h);g&&(g=g.replace(new RegExp("# (\\w)","gi"),"#$1"));let w=U(h),v=new _({x:w.left,y:w.top,width:w.width,height:w.height,text:g,sourceUrls:(await Q(h.querySelector(".tweet-details-fixer")||h)).concat([new y({url:m.cardDestination,urlType:8})]).filter(b=>b.url&&!b.url.includes("/profile_images/")&&!b.url.includes(p+"/retweets")&&!b.url.includes(p+"/likes")&&!b.url.includes("/using-twitter/how-to")),hash:("t+++"+p).padEnd(p.length+4+(p.length+4)*6%8/2,"=").replace("===","A=="),type:h.querySelector("video")||h.querySelector(".PlayableMedia")?105:Array.from(h.querySelectorAll("img")).filter(b=>b.naturalWidth>200&&b.naturalHeight>40).length?104:h.querySelector("iframe")?102:103,twitterData:{taid:m.advertiserId||m.user_id_str||0,tid:p,tsn:f}}),R=(v.sourceUrls||[]).filter(b=>b?.url);v.sourceUrls=lt(R,b=>b.url),s.push(v)}return s}function Pt(){S("VAST AD CAPTURE"),G((e,t,r)=>{try{let o=e.substring(0,500),s=o.indexOf('"ad_id":')>=0||o.indexOf('"ad_type"')>=0,u=[];if(r||s)Ze(e,u);else if(o.indexOf("<VAST ")>=0||o.indexOf("<vmap:AdBreak ")>=0){let h=E(()=>t?.documentElement||e&&new DOMParser().parseFromString(e,"application/xml").documentElement);tr(h,u)}else return;Promise.allSettled(u).then(h=>{S("Ads found.",h.map(f=>f.value)),N(h.map(f=>f.value).filter(f=>f))})}catch(o){S(o)}})}function Ze(e,t){let r=E,o=r(()=>e&&JSON.parse(e)),s=r(()=>o.items);s?.length&&Array.from(s).forEach(u=>{let h=r(()=>u.media.streamurl);if(!h)return;let f=r(()=>u.clickthrough),p=r(()=>u.media.duration),m=r(()=>u.ad_id||u.ad_video_id),g=r(()=>u.title);m&&F()==="peacocktv.com"&&(m=m.split(".")[0]);let w=r(()=>u.system);t.push(j(h,M).then(v=>new _({width:1920,height:1080,sourceUrls:[new y({url:h,urlType:4}),new y({url:f,urlType:8}),new y({url:"http://"+w,urlType:1})].filter(b=>b.url),hash:btoa(v)||m,type:3,duration:Math.round(p),vastData:{Id:m,Title:g,System:w}})))})}function tr(e,t){let r=E,o=r(()=>e?.querySelectorAll("VAST Ad"));o&&Array.from(o).forEach(s=>{let u=s.querySelector("Creatives Creative");if(!u)return;let h=u.querySelector("MediaFiles");if(!h)return;let f=r(()=>u.querySelector("VideoClicks ClickThrough").textContent.trim())||r(()=>document.querySelector(".AdUnitView a").href.trim()),p=r(()=>Tt(u.querySelector("Duration").textContent)),m=r(()=>h.querySelector("MediaFile[type='video/mp4'],MediaFile[type='application/dash+xml'],MediaFile[type='video/mpd']").textContent.trim());if(!m){let l=u.querySelector("AdParameters"),i={},n,c=new RegExp("<(\\w+)>([^<]+)</\\1>","gi");for(;(n=c.exec(l.textContent))!==null;)i[n[1]]=n[2];p=r(()=>Tt(i.adDuration)),f=r(()=>i.clickUrl);let a=i.JsParameters;if(!a)return;let x=JSON.parse(a);m=r(()=>x.videos[0].url),m&&(p=p||x.duration,f=f||x.clickThruUrl||x.clickThroughUrl)}if(!m)return;let g=u.getAttribute("AdID")||u.getAttribute("AdId")||u.getAttribute("adid")||s.getAttribute("id");if(!g)return;F()==="peacocktv.com"&&(g=g.split(".")[0]);let w=r(()=>s.querySelector("AdTitle").textContent.trim()),v=r(()=>s.querySelector("AdSystem").textContent.trim()),R=s.querySelector("Extension"),b=r(()=>R.querySelector("CreativeParameter[name='_fw_advertiser_name']").textContent.trim())||r(()=>R.querySelector("CreativeParameter[name='fw_advertiser_name']").textContent.trim())||r(()=>R.querySelector("CreativeParameter[name='fw_advertiser']").textContent.trim()),q=r(()=>R.querySelector("CreativeParameter[name='fw_brand']").textContent.trim()),A=r(()=>R.querySelector("CreativeParameter[name='industry']").textContent.trim()),d=r(()=>R.querySelector("CreativeParameter[name='ccr_measurement']").textContent.trim());t.push(j(m,M).then(l=>new _({width:1920,height:1080,sourceUrls:[new y({url:m,urlType:4}),new y({url:f,urlType:8}),new y({url:d,urlType:0})].filter(i=>i.url),hash:btoa(l)||g,type:3,duration:Math.round(p),vastData:{Id:g,Adv:b,Brand:q,Cat:A,Title:w,System:v}})))})}var ae=Vt(vt(),1);function er(e){return e?new URL(e).searchParams.get("v"):null}var Mt;function wt(){return Mt||(Mt=document.querySelector("#movie_player")),Mt}function rr(){return E(()=>{let e=JSON.parse(wt().getDebugText());return e.ad_debug_videoId||e.addebug_videoId||e.ad_videoId})}function nr(){return E(()=>{let e=document.querySelector("#upload-info a.yt-simple-endpoint"),t=e.href.split("/");return{youTubeChannelId:t[t.length-1],youTubeChannelName:e.textContent.trim(),youTubeVideoId:E(()=>er(window.location.href))}})}function ir(){let e=E(()=>document.querySelector(".ytp-ad-player-overlay-instream-info .ytp-ad-button-text").textContent);if(e&&ar.test(e)){let t=e.indexOf("http://")===0||e.indexOf("https://")===0?e:"https://"+e.toLowerCase();return new y({url:t,urlType:8})}return null}function or(e){return e?btoa(ae.default.hash("YouTube+"+e,!0)):null}function sr(){return E(()=>wt().getAdState()>0||JSON.parse(wt().getDebugText()).addebug_videoId)}var ar=new RegExp("^(?:https?://)?[a-z0-9.-]+(\\.[a-z]+)+(?:$|/)"),ce={};function se(e){[e?.playerAds??[],e?.adPlacements??[]].flat().map(t=>(t.adPlacementRenderer?.renderer?.linearAdSequenceRenderer?.linearAds?.map(r=>r?.instreamVideoAdRenderer)??[]).concat([t.adPlacementRenderer?.renderer?.instreamVideoAdRenderer])).flat().filter(t=>t).map(function(t){let r=t?.playerOverlay?.instreamAdPlayerOverlayRenderer?.visitAdvertiserRenderer?.buttonRenderer?.navigationEndpoint?.urlEndpoint?.url;return r?{videoId:t.externalVideoId,lp:r}:null}).filter(t=>t).reduce((t,r)=>Object.assign(t,{[r.videoId]:new y({url:r.lp,urlType:8})}),ce)}function ue(){try{if(G((p,m,g,w)=>{try{if(!w||!w.includes("/ad_break?")&&!w.includes("/player?"))return;se(JSON.parse(p))}catch(v){S(v)}}),!sr())return B();se(window.ytInitialPlayerResponse);let e=0,t=640,r=360,o=0,s=0,u=wt(),h=u.querySelector("a.ytp-title-link"),f=u.querySelector("video");if(f){e=f.duration||0;let p=U(f);t=p?.width||t,r=p?.height||r,o=p?.left||o,s=p?.top||s}P(()=>{let p=rr()||void 0,m=ce[p]??ir(),g=nr(),w=m?[m]:[],v=new _({x:o,y:s,width:t,height:r,text:h?.textContent,sourceUrls:w,hash:or(p),type:3,duration:Math.round(e),youTubeId:p});N([v],g)})}catch(e){S(e)}}var it=class{constructor(t=null){this.log=t,this.#t.log=t??(()=>{})}simplifyTree(t){let r;for(;;){if(r=this.#t[t.r],!r)throw new Error(`Rule ${t.r} not implemented.`);if(r!==this.#t.PassOn||!t.c||!t.c.length)break;t=t.c[0]}return t.c&&t.c.length&&(t.c=t.c.map(o=>this.simplifyTree(o))),t}debugPrintParseTree(t,r=0){this.log(`${" ".repeat(r*2)}${t.r}: ${this.#t.GetText(t)}`),t.c&&t.c.length&&t.c.forEach(o=>this.debugPrintParseTree(o,r+1))}isValidRuleName(t){return t.indexOf("TerminalNode")===0||!!this.#t[t]}evaluate(t,r){return this.#t.evaluate(t,r)}#t=class{static#s=0;static evaluate(t,r,o){try{if(!this[t.r])throw new Error(t.r+" is not a parser rule function.");return this[t.r](t,r,o)}catch(s){this.log("Error "+t.r+' at "'+this.GetText(t)+'": '+s)}}static#i=new RegExp(`(?:^['"])|(?:['"]$)`,"g");static#o=new RegExp("\\s+","g");static#a=this;static PassOn(t,r){return this.evaluate(t.c[0],r)}static NoOp(t){this.log(`Unimplemented rule: ${t.r} at "${this.GetText(t.t)}".`)}static ExpStmt=this.PassOn;static ExpSequence=this.PassOn;static LitExp=this.PassOn;static Literal=this.PassOn;static ArrayLitExp=this.PassOn;static ArrayLit=this.PassOn;static ArrowFuncBody=this.PassOn;static ObjectLitExp=this.PassOn;static IdName=this.PassOn;static MultOperator=this.NoOp;static AdditionOperator=this.NoOp;static RelationalOperator=this.NoOp;static EqualityOperator=this.NoOp;static ReservedWord=this.NoOp;static AssignExp=this.NoOp;static VarModifier=this.NoOp;static FormalParameterList=this.NoOp;static FormalParameterArg=this.NoOp;static PropAssign=this.NoOp;static Exp=this.NoOp;static Assignable=this.NoOp;static AnonFunc=this.NoOp;static ArrowFuncParameters=this.NoOp;static PropName(t){return t.c?t.c[0].t:this.#r(t.t)}static ObjectLit(t,r){let o={};return t.c.forEach(s=>this.PropExpAssign(s,r,o)),o}static PropExpAssign(t,r,o){let s=this.evaluate(t.c[0],r),u=this.evaluate(t.c[1],r);o[s]=u}static#r(t){return t?.replaceAll(this.#i,"")}static StrLit(t){return this.#r(t?.t)}static NumLit(t){return Number.parseFloat(t?.t)}static IntLit(t){return Number.parseInt(t?.t)}static BoolLit(t){return t.t&&t.t=="true"}static NullLit(){return null}static IdExp(t,r){return this.evaluate(t.c[0],r)}static Id(t,r){return r[t.t]}static FuncExp(t,r){return this.evaluate(t.c[0],r)}static ArrowFunc(t,r){let o=t.c[0]?.c?.map(u=>this.#e(u)).flat(),s=this;return function(...u){o.forEach((f,p)=>{r[f]=u[p]});let h=s.evaluate(t.c[1],r);return o.forEach(f=>{delete r[f]}),h}}static AnonFuncDecl(t,r){let o=t.c[0]?.c?.map(u=>this.#e(u)).flat(),s=this;return function(...u){o.forEach((f,p)=>{r[f]=u[p]});let h=s.evaluate(t.c[1],r);return o.forEach(f=>{delete r[f]}),h}}static#e(t,r=null){return r=r??[],t.c?.forEach(o=>this.#e(o,r)),t.t&&r.push(t.t),r}static#c(t,r=0){this.log(`${"  ".repeat(r)}${t.r}: ${this.GetText(t)}`)}static GetText(t){return this.#e(t).join(" ")}static ElementList(t,r){return t.c.map(o=>this.evaluate(o,r))}static ArrayElem=this.PassOn;static ArgsExp(t,r){let o=t.c[0],s=this.evaluate(t.c[1],r),u=this.evaluate(o,r,s);return typeof u=="function"&&(u=u.apply(o._this??null,s)),delete o._this,u}static Args(t,r){return t.c.map(o=>this.evaluate(o,r))}static Arg(t,r){return this.evaluate(t.c[0],r)}static MemberDotExp(t,r,o){return this.#n(t,r,o,!0)}static MemberIndexExp(t,r,o){return this.#n(t,r,o)}static#n(t,r,o,s){let u=this.evaluate(t.c[0],r),h=s?t.c[1].t:this.evaluate(t.c[1],r);return this["_x_"+h]?this["_x_"+h](u,...o??[]):(t._this=u,u[h])}static ErrorNodeImpl(t){this.log(`Error parsing ${t.r} at ${t.t} (unexpected token?)`)}static AdditiveExp(t,r){switch(t.c[1].t){case"+":return this.evaluate(t.c[0],r)+this.evaluate(t.c[2],r);case"-":return this.evaluate(t.c[0],r)-this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static MultiplicativeExp(t,r){switch(t.c[1].t){case"*":return this.evaluate(t.c[0],r)*this.evaluate(t.c[2],r);case"/":return this.evaluate(t.c[0],r)/this.evaluate(t.c[2],r);case"%":return this.evaluate(t.c[0],r)%this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static RelationalExp(t,r){switch(t.c[1].t){case">":return this.evaluate(t.c[0],r)>this.evaluate(t.c[2],r);case"<":return this.evaluate(t.c[0],r)<this.evaluate(t.c[2],r);case">=":return this.evaluate(t.c[0],r)>=this.evaluate(t.c[2],r);case"<=":return this.evaluate(t.c[0],r)<=this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static EqualityExp(t,r){switch(t.c[1].t){case"==":return this.evaluate(t.c[0],r)==this.evaluate(t.c[2],r);case"!=":return this.evaluate(t.c[0],r)!=this.evaluate(t.c[2],r);case"===":return this.evaluate(t.c[0],r)===this.evaluate(t.c[2],r);case"!==":return this.evaluate(t.c[0],r)!==this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static TernaryExp(t,r){return this.evaluate(t.c[0],r)?this.evaluate(t.c[1],r):this.evaluate(t.c[2],r)}static CoalesceExp(t,r){return this.evaluate(t.c[0],r)??this.evaluate(t.c[1],r)}static InstanceofExp(t,r){return this.evaluate(t.c[0],r)instanceof this.evaluate(t.c[1],r)}static LogicalAndExp(t,r){return this.evaluate(t.c[0],r)&&this.evaluate(t.c[1],r)}static LogicalOrExp(t,r){return this.evaluate(t.c[0],r)||this.evaluate(t.c[1],r)}static UnaryPlusExp(t,r){return+this.evaluate(t.c[0],r)}static UnaryMinusExp(t,r){return-this.evaluate(t.c[0],r)}static BitNotExp(t,r){return~this.evaluate(t.c[0],r)}static NotExp(t,r){return!this.evaluate(t.c[0],r)}static ParenthesizedExp(t,r){return this.evaluate(t.c[0],r)}static Eos(){return null}static _x_query(t,r){return Array.from(t?.querySelectorAll(r)??[])}static _x_where(t,r){return t?.filter(r)}static _x_select(t,...r){let o=r.length;if(!r||o===0)throw new Error("Method 'select' expects on or more arrow functions.");return t?.map((s,u)=>{if(o>1){let h=[];for(let f=0;f<o-1;f++)h[f]=r[f](s,...f==0?[u]:h);return r[o-1](s,...h)}else return r[0](s,u)})}static _x_width(t){return t?.offsetWidth}static _x_height(t){return t?.offsetHeight}static _x_text(t){return t?.textContent?.trim()?.replaceAll(this.#o," ")}static _x_parent(t){return t?.parentNode}static _x_matchRegExp(t,r,o){return t.match(new RegExp(r,o))}}};function Ot(e){if(e.checkVisibility&&!e.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}))return!1;let t=e.ownerDocument,r=t.defaultView,o=r?.getComputedStyle(e);if(o&&(o.opacity==="0"||o.visibility==="hidden"))return!1;let s=e.getBoundingClientRect();if(!s||s.width<=0||s.height<=0)return!1;let{top:u,left:h,right:f,bottom:p}=s;if(f<0||p<0)return!1;let m=r?.innerWidth||t.documentElement.clientWidth,g=r?.innerHeight||t.documentElement.clientHeight;if(u>g||h>m)return!1;let w=e.parentNode;if(w&&w instanceof Element&&getComputedStyle(w).overflow==="hidden"){let v=w.getBoundingClientRect();if(p<v.top||u>v.bottom||f<v.left||h>v.right)return!1}return!0}function le(e,t){return r=>new Promise(o=>{let s=e+"-response",u=Math.random(),h=p=>{let{type:m,payload:g,nonce:w}=p.data??{};m!==s||w!==u||(o(g),f())},f=()=>{window.removeEventListener("message",h)};window.addEventListener("message",h),s==="getFrameId-response"?r.postMessage(new T("getFrameId",u),"*"):window.postMessage({type:e,nonce:u,payload:r},"*"),t&&setTimeout(o,t)})}var de,fe,pe,J,_t=new Set,bt=new Set,Ft=new Set,at=!1,Ut=[],me=[],Nt,M,D,gt,nt,C=typeof window>"u"?{location:{hostname:""}}:window,I=C.top===C.self,cr=(Math.random()+1).toString(36).substring(2),ur=2e3,ge=7e3,lr=5*ge,hr=2e3;function st(e,t,...r){let o=setTimeout(e,t,...r);return _t.add(o),o}function ot(e,t,...r){let o=setInterval(e,t,...r);return bt.add(o),o}function Lt(e,t){let r=P(e,t);return r.isIdleCallback?Ft.add(r.id):_t.add(r.id),r}var dr={"hulu.com":[ne],"netflix.com":[oe],"twitter.com":[Rt],"x.com":[Rt],"youtube.com":[ue]};at||(typeof F<"u"&&(J=F()),typeof pt<"u"&&(pt()||ye())&&Yt());function ye(){return dr[J]}function fr(){if(!I||!nt)return;if(pt()){Pt();let s=new Set,u=()=>{let h=Array.from(C.frames).concat(Array.from(document.querySelectorAll("frame,iframe")).map(f=>E(f.contentWindow)).filter(f=>f));for(let f=0;f<h.length;f++)try{let p=h[f];if(!p||s.has(p))continue;W(p,new T(Ct,et-(Date.now()-$))),s.add(p)}catch(p){S(p)}};u(),ot(u,5e3)}let e=Date.now(),t=ye(),r=function(s){e=Date.now(),Lt(async()=>{for(let u=0,h=t?.length;t&&u<h;u++)await t[u].call();I&&(t||s)&&B()},V-500)},o=ot(r,V);r(!0),ot(()=>{Date.now()-e>V*5&&(clearInterval(o),bt.delete(o),o=ot(r,V),r(!0))},V)}function we(){I&&(J=F(),_t=new Set,bt=new Set,Ft=new Set,ee(),B())}function pr(){if(!I)return;let e=D.AdRules.filter(o=>!o.Hostnames||o.Hostnames.startsWith("^")&&!o.Hostnames.includes(J)),t=D.AdRules.filter(o=>o.Hostnames&&!o.Hostnames.startsWith("^")&&o.Hostnames.includes(J)),r=e.concat(t);st(()=>{Pr();let o=ot(()=>{he(r)},ge);he(r),st(()=>{t.length?r=t:clearInterval(o)},lr)},ur)}var mr=new Set(["facebook.com","hulu.com","netflix.com","twitter.com","x.com"]);function Ae(){fr(),mr.has(J)||pr(),st(wr,et)}function gr(e){if(!I)return;let t=C.location.href.split("#")[0];setInterval(()=>{let r=C.location.href.split("#")[0];r!==t&&(t=r,e())},1e3)}function _e(){_t.forEach(e=>clearTimeout(e)),bt.forEach(e=>clearInterval(e)),Ft.forEach(e=>cancelIdleCallback(e))}function yr(){_e(),we(),Ae()}function wr(){It(),_e()}function Ar(e){at?ut(e,M).then(()=>window.dispatchEvent(new CustomEvent("displayAdFound",{detail:e}))):te(e)}async function _r(e){try{let t=T.fromObject(e.data);if(!t)return;let r=t.data;switch(t.operation){case Ct:r>0&&(Pt(),st(It,r));break;case Et:N(r[0],r[1]);break;case"extractDisplayAd":I||await At(document.documentElement,r);break;case"displayAdFound":I&&Ar(r);break;case"getFrameId":W(e.source,{type:"getFrameId-response",payload:cr,nonce:r});break}}catch(t){S(t);return}}function br(){function e(){C.addEventListener("message",_r,!0)}e();let t=setInterval(e,200);setTimeout(clearInterval,1e4,t)}function xr(e){fe=e.getInstallId,at=e.isRuleEditor,Nt=e.sendData,M=e.fetchHttpResponse,de=e.getExternalConfiguration?t=>e.getExternalConfiguration(t):null,Jt(e.pm_log)}function be(e){pe=le("getFrameId",1e3),M=e.fetchHttpResponse,br(),I&&(xr(e),fe().then(t=>gt=t).then(t=>de()).then(t=>D=t||{EnabledPct:0}).then(t=>{nt=Array.from(gt).map(r=>r.charCodeAt(0)).reduce((r,o)=>r+o,0)%100<D.EnabledPct,nt&&(we(),Ae(),gr(yr))}))}async function vr(e,t){at||(I||(t.dedupeKey=await pe(e.ownerDocument.defaultView)),t.dedupeKey??=`${t.width}x${t.height} @ ${t.x},${t.y}`),W(top,new T("displayAdFound",t))}async function Sr(e,t){if(e){let r=U(e);(t.isFromIFrame||e.nodeName!=="IFRAME")&&(t.x+=r.left,t.y+=r.top),t.sourceUrls.push(...await Q(e,t.depth)),t.text+=mt(e)+" ";let o=Array.from(e.querySelectorAll("canvas, svg"));o.length&&o.forEach(s=>Kt(s,t))}}async function At(e,t){if(await Sr(e,t),e.nodeName==="IFRAME"){t.depth++,t.outerHtml=e.outerHTML;try{await At(e.contentWindow.document.documentElement,t)}catch{W(e.contentWindow,new T("extractDisplayAd",t));try{var r=e.contentWindow.frames;for(let s=0,u=r.length;s<u;s++)try{W(r[s],new T("extractDisplayAd",t))}catch(h){S(h)}}catch(s){S(s)}}}else{e.nodeName==="HTML"&&(t.outerHtml+=`<!-- IFRAME Content -->${e.outerHTML}`);let o;if(t.isFromIFrame){if(e.scrollWidth<=t.width-5||e.scrollHeight<=t.height-5)return;o=Array.from(e.querySelectorAll("iframe")).filter(s=>(s.scrollWidth>=t.width||s.scrollHeight>=t.height)&&s.scrollWidth>=_.minWidth&&s.scrollHeight>=_.minHeight&&Ot(s))}else o=Array.from(e.querySelectorAll("iframe")).filter(s=>Ot(s)).sort((s,u)=>s.scrollWidth*s.scrollHeight-u.scrollWidth*u.scrollHeight).slice(0,1);o?.length?await Promise.allSettled(o.map(s=>{let u={...t,width:Math.min(t.width,s.offsetWidth),height:Math.min(t.height,s.offsetHeight),sourceUrls:t.sourceUrls.map(h=>h)};return At(s,u)})):(t.text=t.textOverride??t.text.trim(),vr(e,t))}}function Er(e,t,r){try{let o=new it,s=o.evaluate(t,{doc:document});Ut.forEach(u=>s.push(...o.evaluate(t,{doc:u}))),me.forEach(u=>{u.doc.defaultView&&s.push(...o.evaluate(t,{doc:u.doc}).map(h=>xe(h)?(h.x??=u.x,h.y??=u.y,h.depth??=u.depth,h):{element:h,x:u.x,y:u.y,depth:u.depth}))}),s&&s.forEach(async u=>await Ir(e,u,r))}catch{}}function Cr(e){e.forEach(t=>Er(t.Id,t.ParseTree))}async function Ir(e,t,r){let o={};xe(t)&&(o=t,t=t.element,delete o.element);let s=new _({width:t.offsetWidth,height:t.offsetHeight,adRuleId:e});s.isFromIFrame=t.nodeName==="IFRAME",at&&(s.adRuleName=r,s.tabUrl=location.href),Object.assign(s,o),await At(t,s)}function he(e){I&&Lt(t=>{t.didTimeout||(Cr(e),st(B,hr))},4e3)}function Tr(e){let t=Date.now(),r=null;for(;r=e[0];){for(var o=null;o=r.nextNode();)if(o.shadowRoot&&(e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)),Ut.push(o.shadowRoot)),Date.now()-t>50)return!1;e.shift()}return!0}function Nr(){Ut=[];let e=[];try{e.push(document.createTreeWalker(document.body,NodeFilter.SHOW_ELEMENT))}catch{}let t=!1,r=0;for(;!t&&r++<100;)Lt(()=>t||=Tr(e))}function Rr(){me=Array.from(document.querySelectorAll("iframe")).filter(e=>e.src&&new URL(e.src).origin==top.location.origin&&e.offsetWidth>=_.minWidth&&e.offsetHeight>=_.minHeight).map(e=>{try{let t=e.contentWindow,r=U(e),o=r.left,s=r.top,u=1;for(;t?.parent&&t.parent!==top;)t=t.parent,r=U(t.frameElement),o+=r.left,s+=r.top,u++;return{doc:e.contentDocument,x:o,y:s,depth:u}}catch{return null}}).filter(e=>e)}function Pr(){Nr(),Rr()}function xe(e){return!(e instanceof Node)&&e.element}function ve(...e){console.log("[injected-script]",...Array.isArray(e)?e:[e])}function xt(e,t){return r=>new Promise(o=>{let s=t+"-response",u=Math.random(),h=p=>{let{type:m,payload:g,nonce:w}=p.data??{};m!==s||w!==u||(e?.("Got response:",{name:t,payload:r,response:g}),o(g),f())},f=()=>{window.removeEventListener("message",h)};window.addEventListener("message",h),e?.("Sending message:",{name:t,payload:r}),window.postMessage({type:t,payload:r,nonce:u},"*")})}function Se(e,t){return r=>{e?.("Sending message:",{type:t,payload:r}),window.postMessage({type:t,payload:r},"*")}}var Ee="ads#INIT",Ce="ads#SEND_DATA",Ie="ads#GET_INSTALL_ID",Te="ads#GET_EXTERNAL_CONFIG",Ne="ads#FETCH_HTTP_RESPONSE";function Re(e){let t=e.enableLogs?ve:void 0;t?.("Recieved init event",{config:e});let r=Se(t,Ce),o=xt(t,Ie),s=xt(t,Te),u=xt(t,Ne);be({getInstallId:o,fetchHttpResponse:u,sendData:r,pm_log:t,getExternalConfiguration:s})}function Mr(){window.addEventListener("message",({data:e})=>{e?.type===Ee&&Re(e.payload)})}Mr();})();
