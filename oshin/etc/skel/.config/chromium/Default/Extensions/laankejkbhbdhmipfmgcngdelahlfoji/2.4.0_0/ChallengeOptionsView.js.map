{"version":3,"file":"ChallengeOptionsView.js","sources":["../src/components/Challenge/views/options/options.tpl?raw","../src/components/Challenge/views/options/ChallengeOptionsView.js"],"sourcesContent":["export default \"<h1>\\n    Require Challenge\\n</h1>\\n<div>\\n    <p id=\\\"requireChallengeMsg\\\" class=\\\"attention\\\"></p>\\n    <p>\\n        If this option is selected, you will be required to complete a difficult -- but not impossible -- challenge before you are allowed to change any settings.\\n        This makes it inconvenient for you to change settings, therefore reducing the chances that you'll cheat.\\n    </p>\\n    <p>\\n        <i>Want to test the challenge before you turn it on? <a href=\\\"#\\\" class=\\\"link link-accent\\\" id=\\\"showChallenge\\\">Click here</a>.</i>\\n    </p>\\n    <label class=\\\"pl-1 flex gap-3 items-center\\\">\\n        <input type=\\\"checkbox\\\" id=\\\"requireChallengeCheckbox\\\" class=\\\"checkbox checkbox-sm checkbox-primary\\\" {{checked}}>\\n        <span>Yes, I want to be challenged before being allowed to change any settings (including this one).</span>\\n    </label>\\n    <h4>\\n        Customize Challenge Text\\n    </h4>\\n    <p>\\n        Enter custom text to be used in the challenge (min {{minChallengeTextLength}} chars).\\n    </p>\\n    <textarea id=\\\"customChallenge\\\" class=\\\"textarea textarea-bordered w-full h-40\\\">{{customChallenge}}</textarea>\\n    <p>\\n        <input type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" name=\\\"setCustomChallenge\\\" value=\\\"Set custom text\\\">&#160;\\n        <input type=\\\"button\\\" class=\\\"btn btn-ghost btn-sm\\\" id=\\\"resetCustomChallenge\\\" value=\\\"Reset to default\\\">\\n    </p>\\n    <p>\\n        <small class=\\\"disclaimer\\\">BE WARNED: If you enter something really long and difficult, you will have to complete the challenge with that text before you can change it.</small>\\n    </p>\\n</div>\\n\"","import Logger from '~/core/Logger'\nimport API from '~/core/CoreAPI'\nimport Brightline from 'brightline.js'\nimport optionsTpl from './options.tpl?raw'\nimport ChallengeView from '../../ChallengeView'\nimport $original from 'jquery'\n\nlet $\n/**\n * Alias for Logger.log(). Prepends class name to funcName.\n *\n * @param originator The name of the instance to prepend to the log message\n * @param funcName The name of the function generating the log message\n * @param message The message to log\n * @param payload Data object\n * @param level Log level (ERROR, WARN, INFO, DEBUG)\n */\nvar log = function (originator, funcName, message, payload, level) {\n  Logger.log(originator + '.' + funcName, message, payload, level)\n}\n\nexport default class ChallengeOptionsView extends ChallengeView {\n  /**\n   * Pass in instance of jQuery bound to page in which view is being rendered\n   *\n   * @param jQuery\n   */\n  setJQuery(jQuery) {\n    log(this.originator, 'setJQuery', 'Setting jQuery')\n    $ = jQuery || $original\n  }\n\n  /**\n   * Injects rendered view into jQuery container\n   *\n   * @param $container jQuery element into which view should be injected\n   */\n  inject($container) {\n    super.inject($container, this.render(optionsTpl))\n  }\n\n  /**\n   * Renders view\n   */\n  render(tpl) {\n    log(this.originator, 'render', 'Rendering view')\n\n    tpl = tpl || ''\n    var template = new Brightline(tpl)\n\n    if (this.model.isRequired()) {\n      template.set('checked', 'checked=\"checked\"')\n    }\n\n    template.set('customChallenge', this.model.getText())\n    template.set('minChallengeTextLength', this.model.minLength)\n\n    return template.render()\n  }\n\n  /**\n   * Binds handlers to UI\n   */\n  bindUIHandlers() {\n    log(this.originator, 'bindUIHandlers', 'Binding UI handlers', null, 'TRACE')\n\n    var self = this\n    var $customChallenge = $('#customChallenge')\n\n    $('input[name=setCustomChallenge]').click(function () {\n      self.model.setText($customChallenge.val())\n    })\n\n    $('#resetCustomChallenge').click(function () {\n      self.model.resetText()\n\n      $customChallenge.val(self.model.getText(true))\n    })\n\n    $('#requireChallengeCheckbox').click(function () {\n      self.setChallengeRequired($(this))\n    })\n  }\n\n  /**\n   * Sets challengeRequired option\n   *\n   * @param checkbox The jquery object for the challengeRequired checkbox\n   */\n  setChallengeRequired(checkbox) {\n    log(\n      this.originator,\n      'setChallengeRequired',\n      'Setting challenge required',\n      checkbox.prop('checked') ? 'ON' : 'OFF',\n    )\n\n    if (checkbox.prop('checked')) {\n      var confirmed = confirm(\n        API.Chrome.Translation.get('confirmRequireChallenge'),\n      )\n\n      if (confirmed) {\n        this.model.setRequired(true)\n      } else {\n        checkbox.prop('checked', false)\n      }\n    } else {\n      this.model.setRequired(false)\n    }\n  }\n}\n"],"names":["optionsTpl","$","log","originator","funcName","message","payload","level","Logger","ChallengeOptionsView","ChallengeView","jQuery","$original","$container","tpl","template","Brightline","self","$customChallenge","checkbox","confirmed","API"],"mappings":"2KAAA,MAAeA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECOf,IAAIC,EAUJ,IAAIC,EAAM,SAAUC,EAAYC,EAAUC,EAASC,EAASC,EAAO,CACjEC,EAAO,IAAIL,EAAa,IAAMC,EAAUC,EAASC,EAASC,CAAK,CACjE,EAEe,MAAME,UAA6BC,CAAc,CAM9D,UAAUC,EAAQ,CAChBT,EAAI,KAAK,WAAY,YAAa,gBAAgB,EAClDD,EAAIU,GAAUC,CACf,CAOD,OAAOC,EAAY,CACjB,MAAM,OAAOA,EAAY,KAAK,OAAOb,CAAU,CAAC,CACjD,CAKD,OAAOc,EAAK,CACVZ,EAAI,KAAK,WAAY,SAAU,gBAAgB,EAE/CY,EAAMA,GAAO,GACb,IAAIC,EAAW,IAAIC,EAAWF,CAAG,EAEjC,OAAI,KAAK,MAAM,cACbC,EAAS,IAAI,UAAW,mBAAmB,EAG7CA,EAAS,IAAI,kBAAmB,KAAK,MAAM,QAAO,CAAE,EACpDA,EAAS,IAAI,yBAA0B,KAAK,MAAM,SAAS,EAEpDA,EAAS,OAAQ,CACzB,CAKD,gBAAiB,CACfb,EAAI,KAAK,WAAY,iBAAkB,sBAAuB,KAAM,OAAO,EAE3E,IAAIe,EAAO,KACPC,EAAmBjB,EAAE,kBAAkB,EAE3CA,EAAE,gCAAgC,EAAE,MAAM,UAAY,CACpDgB,EAAK,MAAM,QAAQC,EAAiB,IAAG,CAAE,CAC/C,CAAK,EAEDjB,EAAE,uBAAuB,EAAE,MAAM,UAAY,CAC3CgB,EAAK,MAAM,UAAW,EAEtBC,EAAiB,IAAID,EAAK,MAAM,QAAQ,EAAI,CAAC,CACnD,CAAK,EAEDhB,EAAE,2BAA2B,EAAE,MAAM,UAAY,CAC/CgB,EAAK,qBAAqBhB,EAAE,IAAI,CAAC,CACvC,CAAK,CACF,CAOD,qBAAqBkB,EAAU,CAQ7B,GAPAjB,EACE,KAAK,WACL,uBACA,6BACAiB,EAAS,KAAK,SAAS,EAAI,KAAO,KACnC,EAEGA,EAAS,KAAK,SAAS,EAAG,CAC5B,IAAIC,EAAY,QACdC,EAAI,OAAO,YAAY,IAAI,yBAAyB,CACrD,EAEGD,EACF,KAAK,MAAM,YAAY,EAAI,EAE3BD,EAAS,KAAK,UAAW,EAAK,CAEtC,MACM,KAAK,MAAM,YAAY,EAAK,CAE/B,CACH"}