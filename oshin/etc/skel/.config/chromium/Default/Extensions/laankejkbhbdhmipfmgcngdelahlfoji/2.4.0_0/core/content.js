var Pb=Object.defineProperty;var Db=(Yn,Vt,fr)=>Vt in Yn?Pb(Yn,Vt,{enumerable:!0,configurable:!0,writable:!0,value:fr}):Yn[Vt]=fr;var xe=(Yn,Vt,fr)=>(Db(Yn,typeof Vt!="symbol"?Vt+"":Vt,fr),fr);(function(){var zr;"use strict";var Yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fr={exports:{}};/*!
 * jQuery JavaScript Library v1.11.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:02Z
 */(function(t){(function(e,n){t.exports=e.document?n(e,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return n(i)}})(typeof window<"u"?window:Yn,function(e,n){var i=[],a=i.slice,u=i.concat,d=i.push,y=i.indexOf,h={},p=h.toString,v=h.hasOwnProperty,m="".trim,g={},A="1.11.0",o=function(s,l){return new o.fn.init(s,l)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,P=/^-ms-/,R=/-([\da-z])/gi,$=function(s,l){return l.toUpperCase()};o.fn=o.prototype={jquery:A,constructor:o,selector:"",length:0,toArray:function(){return a.call(this)},get:function(s){return s!=null?s<0?this[s+this.length]:this[s]:a.call(this)},pushStack:function(s){var l=o.merge(this.constructor(),s);return l.prevObject=this,l.context=this.context,l},each:function(s,l){return o.each(this,s,l)},map:function(s){return this.pushStack(o.map(this,function(l,c){return s.call(l,c,l)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(s){var l=this.length,c=+s+(s<0?l:0);return this.pushStack(c>=0&&c<l?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:i.sort,splice:i.splice},o.extend=o.fn.extend=function(){var s,l,c,f,b,w,x=arguments[0]||{},E=1,F=arguments.length,W=!1;for(typeof x=="boolean"&&(W=x,x=arguments[E]||{},E++),typeof x!="object"&&!o.isFunction(x)&&(x={}),E===F&&(x=this,E--);E<F;E++)if((b=arguments[E])!=null)for(f in b)s=x[f],c=b[f],x!==c&&(W&&c&&(o.isPlainObject(c)||(l=o.isArray(c)))?(l?(l=!1,w=s&&o.isArray(s)?s:[]):w=s&&o.isPlainObject(s)?s:{},x[f]=o.extend(W,w,c)):c!==void 0&&(x[f]=c));return x},o.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isFunction:function(s){return o.type(s)==="function"},isArray:Array.isArray||function(s){return o.type(s)==="array"},isWindow:function(s){return s!=null&&s==s.window},isNumeric:function(s){return s-parseFloat(s)>=0},isEmptyObject:function(s){var l;for(l in s)return!1;return!0},isPlainObject:function(s){var l;if(!s||o.type(s)!=="object"||s.nodeType||o.isWindow(s))return!1;try{if(s.constructor&&!v.call(s,"constructor")&&!v.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}if(g.ownLast)for(l in s)return v.call(s,l);for(l in s);return l===void 0||v.call(s,l)},type:function(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?h[p.call(s)]||"object":typeof s},globalEval:function(s){s&&o.trim(s)&&(e.execScript||function(l){e.eval.call(e,l)})(s)},camelCase:function(s){return s.replace(P,"ms-").replace(R,$)},nodeName:function(s,l){return s.nodeName&&s.nodeName.toLowerCase()===l.toLowerCase()},each:function(s,l,c){var f,b=0,w=s.length,x=O(s);if(c){if(x)for(;b<w&&(f=l.apply(s[b],c),f!==!1);b++);else for(b in s)if(f=l.apply(s[b],c),f===!1)break}else if(x)for(;b<w&&(f=l.call(s[b],b,s[b]),f!==!1);b++);else for(b in s)if(f=l.call(s[b],b,s[b]),f===!1)break;return s},trim:m&&!m.call("\uFEFFÂ ")?function(s){return s==null?"":m.call(s)}:function(s){return s==null?"":(s+"").replace(S,"")},makeArray:function(s,l){var c=l||[];return s!=null&&(O(Object(s))?o.merge(c,typeof s=="string"?[s]:s):d.call(c,s)),c},inArray:function(s,l,c){var f;if(l){if(y)return y.call(l,s,c);for(f=l.length,c=c?c<0?Math.max(0,f+c):c:0;c<f;c++)if(c in l&&l[c]===s)return c}return-1},merge:function(s,l){for(var c=+l.length,f=0,b=s.length;f<c;)s[b++]=l[f++];if(c!==c)for(;l[f]!==void 0;)s[b++]=l[f++];return s.length=b,s},grep:function(s,l,c){for(var f,b=[],w=0,x=s.length,E=!c;w<x;w++)f=!l(s[w],w),f!==E&&b.push(s[w]);return b},map:function(s,l,c){var f,b=0,w=s.length,x=O(s),E=[];if(x)for(;b<w;b++)f=l(s[b],b,c),f!=null&&E.push(f);else for(b in s)f=l(s[b],b,c),f!=null&&E.push(f);return u.apply([],E)},guid:1,proxy:function(s,l){var c,f,b;if(typeof l=="string"&&(b=s[l],l=s,s=b),!!o.isFunction(s))return c=a.call(arguments,2),f=function(){return s.apply(l||this,c.concat(a.call(arguments)))},f.guid=s.guid=s.guid||o.guid++,f},now:function(){return+new Date},support:g}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(s,l){h["[object "+l+"]"]=l.toLowerCase()});function O(s){var l=s.length,c=o.type(s);return c==="function"||o.isWindow(s)?!1:s.nodeType===1&&l?!0:c==="array"||l===0||typeof l=="number"&&l>0&&l-1 in s}var D=function(s){var l,c,f,b,w,x,E,F,W,V,X,te,ae,ve,Te,He,Rn,$e="sizzle"+-new Date,Jt=s.document,_e=0,Bi=0,We=bl(),st=bl(),kr=bl(),xs=function(_,I){return _===I&&(W=!0),0},en="undefined",Ui=1<<31,ei={}.hasOwnProperty,Wt=[],Or=Wt.pop,An=Wt.push,Pr=Wt.push,Hu=Wt.slice,ti=Wt.indexOf||function(_){for(var I=0,B=this.length;I<B;I++)if(this[I]===_)return I;return-1},ml="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ze="[\\x20\\t\\r\\n\\f]",ji="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",qu=ji.replace("w","w#"),zu="\\["+Ze+"*("+ji+")"+Ze+"*(?:([*^$|!~]?=)"+Ze+`*(?:(['"])((?:\\\\.|[^\\\\])*?)\\3|(`+qu+")|)|)"+Ze+"*\\]",yl=":("+ji+`)(?:\\(((['"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|`+zu.replace(3,8)+")*)|.*)\\)|)",Fa=new RegExp("^"+Ze+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ze+"+$","g"),mb=new RegExp("^"+Ze+"*,"+Ze+"*"),yb=new RegExp("^"+Ze+"*([>+~]|"+Ze+")"+Ze+"*"),vb=new RegExp("="+Ze+`*([^\\]'"]*?)`+Ze+"*\\]","g"),bb=new RegExp(yl),wb=new RegExp("^"+qu+"$"),$a={ID:new RegExp("^#("+ji+")"),CLASS:new RegExp("^\\.("+ji+")"),TAG:new RegExp("^("+ji.replace("w","w*")+")"),ATTR:new RegExp("^"+zu),PSEUDO:new RegExp("^"+yl),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ze+"*(even|odd|(([+-]|)(\\d*)n|)"+Ze+"*(?:([+-]|)"+Ze+"*(\\d+)|))"+Ze+"*\\)|)","i"),bool:new RegExp("^(?:"+ml+")$","i"),needsContext:new RegExp("^"+Ze+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ze+"*((?:-\\d)?\\d*)"+Ze+"*\\)|)(?=[^-]|$)","i")},Ab=/^(?:input|select|textarea|button)$/i,xb=/^h\d$/i,Ss=/^[^{]+\{\s*\[native \w/,Sb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vl=/[+~]/,_b=/'|\\/g,Dr=new RegExp("\\\\([\\da-f]{1,6}"+Ze+"?|("+Ze+")|.)","ig"),Nr=function(_,I,B){var Y="0x"+I-65536;return Y!==Y||B?I:Y<0?String.fromCharCode(Y+65536):String.fromCharCode(Y>>10|55296,Y&1023|56320)};try{Pr.apply(Wt=Hu.call(Jt.childNodes),Jt.childNodes),Wt[Jt.childNodes.length].nodeType}catch{Pr={apply:Wt.length?function(I,B){An.apply(I,Hu.call(B))}:function(I,B){for(var Y=I.length,H=0;I[Y++]=B[H++];);I.length=Y-1}}}function nt(_,I,B,Y){var H,re,ie,ue,ye,ke,Ee,Ae,Ye,Ie;if((I?I.ownerDocument||I:Jt)!==X&&V(I),I=I||X,B=B||[],!_||typeof _!="string")return B;if((ue=I.nodeType)!==1&&ue!==9)return[];if(ae&&!Y){if(H=Sb.exec(_))if(ie=H[1]){if(ue===9)if(re=I.getElementById(ie),re&&re.parentNode){if(re.id===ie)return B.push(re),B}else return B;else if(I.ownerDocument&&(re=I.ownerDocument.getElementById(ie))&&Rn(I,re)&&re.id===ie)return B.push(re),B}else{if(H[2])return Pr.apply(B,I.getElementsByTagName(_)),B;if((ie=H[3])&&c.getElementsByClassName&&I.getElementsByClassName)return Pr.apply(B,I.getElementsByClassName(ie)),B}if(c.qsa&&(!ve||!ve.test(_))){if(Ae=Ee=$e,Ye=I,Ie=ue===9&&_,ue===1&&I.nodeName.toLowerCase()!=="object"){for(ke=Wa(_),(Ee=I.getAttribute("id"))?Ae=Ee.replace(_b,"\\$&"):I.setAttribute("id",Ae),Ae="[id='"+Ae+"'] ",ye=ke.length;ye--;)ke[ye]=Ae+Va(ke[ye]);Ye=vl.test(_)&&Al(I.parentNode)||I,Ie=ke.join(",")}if(Ie)try{return Pr.apply(B,Ye.querySelectorAll(Ie)),B}catch{}finally{Ee||I.removeAttribute("id")}}}return Ob(_.replace(Fa,"$1"),I,B,Y)}function bl(){var _=[];function I(B,Y){return _.push(B+" ")>f.cacheLength&&delete I[_.shift()],I[B+" "]=Y}return I}function Bn(_){return _[$e]=!0,_}function Un(_){var I=X.createElement("div");try{return!!_(I)}catch{return!1}finally{I.parentNode&&I.parentNode.removeChild(I),I=null}}function wl(_,I){for(var B=_.split("|"),Y=_.length;Y--;)f.attrHandle[B[Y]]=I}function Gu(_,I){var B=I&&_,Y=B&&_.nodeType===1&&I.nodeType===1&&(~I.sourceIndex||Ui)-(~_.sourceIndex||Ui);if(Y)return Y;if(B){for(;B=B.nextSibling;)if(B===I)return-1}return _?1:-1}function Tb(_){return function(I){var B=I.nodeName.toLowerCase();return B==="input"&&I.type===_}}function Eb(_){return function(I){var B=I.nodeName.toLowerCase();return(B==="input"||B==="button")&&I.type===_}}function ni(_){return Bn(function(I){return I=+I,Bn(function(B,Y){for(var H,re=_([],B.length,I),ie=re.length;ie--;)B[H=re[ie]]&&(B[H]=!(Y[H]=B[H]))})})}function Al(_){return _&&typeof _.getElementsByTagName!==en&&_}c=nt.support={},w=nt.isXML=function(_){var I=_&&(_.ownerDocument||_).documentElement;return I?I.nodeName!=="HTML":!1},V=nt.setDocument=function(_){var I,B=_?_.ownerDocument||_:Jt,Y=B.defaultView;return B===X||B.nodeType!==9||!B.documentElement?X:(X=B,te=B.documentElement,ae=!w(B),Y&&Y!==Y.top&&(Y.addEventListener?Y.addEventListener("unload",function(){V()},!1):Y.attachEvent&&Y.attachEvent("onunload",function(){V()})),c.attributes=Un(function(H){return H.className="i",!H.getAttribute("className")}),c.getElementsByTagName=Un(function(H){return H.appendChild(B.createComment("")),!H.getElementsByTagName("*").length}),c.getElementsByClassName=Ss.test(B.getElementsByClassName)&&Un(function(H){return H.innerHTML="<div class='a'></div><div class='a i'></div>",H.firstChild.className="i",H.getElementsByClassName("i").length===2}),c.getById=Un(function(H){return te.appendChild(H).id=$e,!B.getElementsByName||!B.getElementsByName($e).length}),c.getById?(f.find.ID=function(H,re){if(typeof re.getElementById!==en&&ae){var ie=re.getElementById(H);return ie&&ie.parentNode?[ie]:[]}},f.filter.ID=function(H){var re=H.replace(Dr,Nr);return function(ie){return ie.getAttribute("id")===re}}):(delete f.find.ID,f.filter.ID=function(H){var re=H.replace(Dr,Nr);return function(ie){var ue=typeof ie.getAttributeNode!==en&&ie.getAttributeNode("id");return ue&&ue.value===re}}),f.find.TAG=c.getElementsByTagName?function(H,re){if(typeof re.getElementsByTagName!==en)return re.getElementsByTagName(H)}:function(H,re){var ie,ue=[],ye=0,ke=re.getElementsByTagName(H);if(H==="*"){for(;ie=ke[ye++];)ie.nodeType===1&&ue.push(ie);return ue}return ke},f.find.CLASS=c.getElementsByClassName&&function(H,re){if(typeof re.getElementsByClassName!==en&&ae)return re.getElementsByClassName(H)},Te=[],ve=[],(c.qsa=Ss.test(B.querySelectorAll))&&(Un(function(H){H.innerHTML="<select t=''><option selected=''></option></select>",H.querySelectorAll("[t^='']").length&&ve.push("[*^$]="+Ze+`*(?:''|"")`),H.querySelectorAll("[selected]").length||ve.push("\\["+Ze+"*(?:value|"+ml+")"),H.querySelectorAll(":checked").length||ve.push(":checked")}),Un(function(H){var re=B.createElement("input");re.setAttribute("type","hidden"),H.appendChild(re).setAttribute("name","D"),H.querySelectorAll("[name=d]").length&&ve.push("name"+Ze+"*[*^$|!~]?="),H.querySelectorAll(":enabled").length||ve.push(":enabled",":disabled"),H.querySelectorAll("*,:x"),ve.push(",.*:")})),(c.matchesSelector=Ss.test(He=te.webkitMatchesSelector||te.mozMatchesSelector||te.oMatchesSelector||te.msMatchesSelector))&&Un(function(H){c.disconnectedMatch=He.call(H,"div"),He.call(H,"[s!='']:x"),Te.push("!=",yl)}),ve=ve.length&&new RegExp(ve.join("|")),Te=Te.length&&new RegExp(Te.join("|")),I=Ss.test(te.compareDocumentPosition),Rn=I||Ss.test(te.contains)?function(H,re){var ie=H.nodeType===9?H.documentElement:H,ue=re&&re.parentNode;return H===ue||!!(ue&&ue.nodeType===1&&(ie.contains?ie.contains(ue):H.compareDocumentPosition&&H.compareDocumentPosition(ue)&16))}:function(H,re){if(re){for(;re=re.parentNode;)if(re===H)return!0}return!1},xs=I?function(H,re){if(H===re)return W=!0,0;var ie=!H.compareDocumentPosition-!re.compareDocumentPosition;return ie||(ie=(H.ownerDocument||H)===(re.ownerDocument||re)?H.compareDocumentPosition(re):1,ie&1||!c.sortDetached&&re.compareDocumentPosition(H)===ie?H===B||H.ownerDocument===Jt&&Rn(Jt,H)?-1:re===B||re.ownerDocument===Jt&&Rn(Jt,re)?1:F?ti.call(F,H)-ti.call(F,re):0:ie&4?-1:1)}:function(H,re){if(H===re)return W=!0,0;var ie,ue=0,ye=H.parentNode,ke=re.parentNode,Ee=[H],Ae=[re];if(!ye||!ke)return H===B?-1:re===B?1:ye?-1:ke?1:F?ti.call(F,H)-ti.call(F,re):0;if(ye===ke)return Gu(H,re);for(ie=H;ie=ie.parentNode;)Ee.unshift(ie);for(ie=re;ie=ie.parentNode;)Ae.unshift(ie);for(;Ee[ue]===Ae[ue];)ue++;return ue?Gu(Ee[ue],Ae[ue]):Ee[ue]===Jt?-1:Ae[ue]===Jt?1:0},B)},nt.matches=function(_,I){return nt(_,null,null,I)},nt.matchesSelector=function(_,I){if((_.ownerDocument||_)!==X&&V(_),I=I.replace(vb,"='$1']"),c.matchesSelector&&ae&&(!Te||!Te.test(I))&&(!ve||!ve.test(I)))try{var B=He.call(_,I);if(B||c.disconnectedMatch||_.document&&_.document.nodeType!==11)return B}catch{}return nt(I,X,null,[_]).length>0},nt.contains=function(_,I){return(_.ownerDocument||_)!==X&&V(_),Rn(_,I)},nt.attr=function(_,I){(_.ownerDocument||_)!==X&&V(_);var B=f.attrHandle[I.toLowerCase()],Y=B&&ei.call(f.attrHandle,I.toLowerCase())?B(_,I,!ae):void 0;return Y!==void 0?Y:c.attributes||!ae?_.getAttribute(I):(Y=_.getAttributeNode(I))&&Y.specified?Y.value:null},nt.error=function(_){throw new Error("Syntax error, unrecognized expression: "+_)},nt.uniqueSort=function(_){var I,B=[],Y=0,H=0;if(W=!c.detectDuplicates,F=!c.sortStable&&_.slice(0),_.sort(xs),W){for(;I=_[H++];)I===_[H]&&(Y=B.push(H));for(;Y--;)_.splice(B[Y],1)}return F=null,_},b=nt.getText=function(_){var I,B="",Y=0,H=_.nodeType;if(H){if(H===1||H===9||H===11){if(typeof _.textContent=="string")return _.textContent;for(_=_.firstChild;_;_=_.nextSibling)B+=b(_)}else if(H===3||H===4)return _.nodeValue}else for(;I=_[Y++];)B+=b(I);return B},f=nt.selectors={cacheLength:50,createPseudo:Bn,match:$a,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(_){return _[1]=_[1].replace(Dr,Nr),_[3]=(_[4]||_[5]||"").replace(Dr,Nr),_[2]==="~="&&(_[3]=" "+_[3]+" "),_.slice(0,4)},CHILD:function(_){return _[1]=_[1].toLowerCase(),_[1].slice(0,3)==="nth"?(_[3]||nt.error(_[0]),_[4]=+(_[4]?_[5]+(_[6]||1):2*(_[3]==="even"||_[3]==="odd")),_[5]=+(_[7]+_[8]||_[3]==="odd")):_[3]&&nt.error(_[0]),_},PSEUDO:function(_){var I,B=!_[5]&&_[2];return $a.CHILD.test(_[0])?null:(_[3]&&_[4]!==void 0?_[2]=_[4]:B&&bb.test(B)&&(I=Wa(B,!0))&&(I=B.indexOf(")",B.length-I)-B.length)&&(_[0]=_[0].slice(0,I),_[2]=B.slice(0,I)),_.slice(0,3))}},filter:{TAG:function(_){var I=_.replace(Dr,Nr).toLowerCase();return _==="*"?function(){return!0}:function(B){return B.nodeName&&B.nodeName.toLowerCase()===I}},CLASS:function(_){var I=We[_+" "];return I||(I=new RegExp("(^|"+Ze+")"+_+"("+Ze+"|$)"))&&We(_,function(B){return I.test(typeof B.className=="string"&&B.className||typeof B.getAttribute!==en&&B.getAttribute("class")||"")})},ATTR:function(_,I,B){return function(Y){var H=nt.attr(Y,_);return H==null?I==="!=":I?(H+="",I==="="?H===B:I==="!="?H!==B:I==="^="?B&&H.indexOf(B)===0:I==="*="?B&&H.indexOf(B)>-1:I==="$="?B&&H.slice(-B.length)===B:I==="~="?(" "+H+" ").indexOf(B)>-1:I==="|="?H===B||H.slice(0,B.length+1)===B+"-":!1):!0}},CHILD:function(_,I,B,Y,H){var re=_.slice(0,3)!=="nth",ie=_.slice(-4)!=="last",ue=I==="of-type";return Y===1&&H===0?function(ye){return!!ye.parentNode}:function(ye,ke,Ee){var Ae,Ye,Ie,Ke,Nt,It,cn=re!==ie?"nextSibling":"previousSibling",Je=ye.parentNode,_s=ue&&ye.nodeName.toLowerCase(),Ts=!Ee&&!ue;if(Je){if(re){for(;cn;){for(Ie=ye;Ie=Ie[cn];)if(ue?Ie.nodeName.toLowerCase()===_s:Ie.nodeType===1)return!1;It=cn=_==="only"&&!It&&"nextSibling"}return!0}if(It=[ie?Je.firstChild:Je.lastChild],ie&&Ts){for(Ye=Je[$e]||(Je[$e]={}),Ae=Ye[_]||[],Nt=Ae[0]===_e&&Ae[1],Ke=Ae[0]===_e&&Ae[2],Ie=Nt&&Je.childNodes[Nt];Ie=++Nt&&Ie&&Ie[cn]||(Ke=Nt=0)||It.pop();)if(Ie.nodeType===1&&++Ke&&Ie===ye){Ye[_]=[_e,Nt,Ke];break}}else if(Ts&&(Ae=(ye[$e]||(ye[$e]={}))[_])&&Ae[0]===_e)Ke=Ae[1];else for(;(Ie=++Nt&&Ie&&Ie[cn]||(Ke=Nt=0)||It.pop())&&!((ue?Ie.nodeName.toLowerCase()===_s:Ie.nodeType===1)&&++Ke&&(Ts&&((Ie[$e]||(Ie[$e]={}))[_]=[_e,Ke]),Ie===ye)););return Ke-=H,Ke===Y||Ke%Y===0&&Ke/Y>=0}}},PSEUDO:function(_,I){var B,Y=f.pseudos[_]||f.setFilters[_.toLowerCase()]||nt.error("unsupported pseudo: "+_);return Y[$e]?Y(I):Y.length>1?(B=[_,_,"",I],f.setFilters.hasOwnProperty(_.toLowerCase())?Bn(function(H,re){for(var ie,ue=Y(H,I),ye=ue.length;ye--;)ie=ti.call(H,ue[ye]),H[ie]=!(re[ie]=ue[ye])}):function(H){return Y(H,0,B)}):Y}},pseudos:{not:Bn(function(_){var I=[],B=[],Y=x(_.replace(Fa,"$1"));return Y[$e]?Bn(function(H,re,ie,ue){for(var ye,ke=Y(H,null,ue,[]),Ee=H.length;Ee--;)(ye=ke[Ee])&&(H[Ee]=!(re[Ee]=ye))}):function(H,re,ie){return I[0]=H,Y(I,null,ie,B),!B.pop()}}),has:Bn(function(_){return function(I){return nt(_,I).length>0}}),contains:Bn(function(_){return function(I){return(I.textContent||I.innerText||b(I)).indexOf(_)>-1}}),lang:Bn(function(_){return wb.test(_||"")||nt.error("unsupported lang: "+_),_=_.replace(Dr,Nr).toLowerCase(),function(I){var B;do if(B=ae?I.lang:I.getAttribute("xml:lang")||I.getAttribute("lang"))return B=B.toLowerCase(),B===_||B.indexOf(_+"-")===0;while((I=I.parentNode)&&I.nodeType===1);return!1}}),target:function(_){var I=s.location&&s.location.hash;return I&&I.slice(1)===_.id},root:function(_){return _===te},focus:function(_){return _===X.activeElement&&(!X.hasFocus||X.hasFocus())&&!!(_.type||_.href||~_.tabIndex)},enabled:function(_){return _.disabled===!1},disabled:function(_){return _.disabled===!0},checked:function(_){var I=_.nodeName.toLowerCase();return I==="input"&&!!_.checked||I==="option"&&!!_.selected},selected:function(_){return _.parentNode&&_.parentNode.selectedIndex,_.selected===!0},empty:function(_){for(_=_.firstChild;_;_=_.nextSibling)if(_.nodeType<6)return!1;return!0},parent:function(_){return!f.pseudos.empty(_)},header:function(_){return xb.test(_.nodeName)},input:function(_){return Ab.test(_.nodeName)},button:function(_){var I=_.nodeName.toLowerCase();return I==="input"&&_.type==="button"||I==="button"},text:function(_){var I;return _.nodeName.toLowerCase()==="input"&&_.type==="text"&&((I=_.getAttribute("type"))==null||I.toLowerCase()==="text")},first:ni(function(){return[0]}),last:ni(function(_,I){return[I-1]}),eq:ni(function(_,I,B){return[B<0?B+I:B]}),even:ni(function(_,I){for(var B=0;B<I;B+=2)_.push(B);return _}),odd:ni(function(_,I){for(var B=1;B<I;B+=2)_.push(B);return _}),lt:ni(function(_,I,B){for(var Y=B<0?B+I:B;--Y>=0;)_.push(Y);return _}),gt:ni(function(_,I,B){for(var Y=B<0?B+I:B;++Y<I;)_.push(Y);return _})}},f.pseudos.nth=f.pseudos.eq;for(l in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})f.pseudos[l]=Tb(l);for(l in{submit:!0,reset:!0})f.pseudos[l]=Eb(l);function Zu(){}Zu.prototype=f.filters=f.pseudos,f.setFilters=new Zu;function Wa(_,I){var B,Y,H,re,ie,ue,ye,ke=st[_+" "];if(ke)return I?0:ke.slice(0);for(ie=_,ue=[],ye=f.preFilter;ie;){(!B||(Y=mb.exec(ie)))&&(Y&&(ie=ie.slice(Y[0].length)||ie),ue.push(H=[])),B=!1,(Y=yb.exec(ie))&&(B=Y.shift(),H.push({value:B,type:Y[0].replace(Fa," ")}),ie=ie.slice(B.length));for(re in f.filter)(Y=$a[re].exec(ie))&&(!ye[re]||(Y=ye[re](Y)))&&(B=Y.shift(),H.push({value:B,type:re,matches:Y}),ie=ie.slice(B.length));if(!B)break}return I?ie.length:ie?nt.error(_):st(_,ue).slice(0)}function Va(_){for(var I=0,B=_.length,Y="";I<B;I++)Y+=_[I].value;return Y}function xl(_,I,B){var Y=I.dir,H=B&&Y==="parentNode",re=Bi++;return I.first?function(ie,ue,ye){for(;ie=ie[Y];)if(ie.nodeType===1||H)return _(ie,ue,ye)}:function(ie,ue,ye){var ke,Ee,Ae=[_e,re];if(ye){for(;ie=ie[Y];)if((ie.nodeType===1||H)&&_(ie,ue,ye))return!0}else for(;ie=ie[Y];)if(ie.nodeType===1||H){if(Ee=ie[$e]||(ie[$e]={}),(ke=Ee[Y])&&ke[0]===_e&&ke[1]===re)return Ae[2]=ke[2];if(Ee[Y]=Ae,Ae[2]=_(ie,ue,ye))return!0}}}function Sl(_){return _.length>1?function(I,B,Y){for(var H=_.length;H--;)if(!_[H](I,B,Y))return!1;return!0}:_[0]}function Ha(_,I,B,Y,H){for(var re,ie=[],ue=0,ye=_.length,ke=I!=null;ue<ye;ue++)(re=_[ue])&&(!B||B(re,Y,H))&&(ie.push(re),ke&&I.push(ue));return ie}function _l(_,I,B,Y,H,re){return Y&&!Y[$e]&&(Y=_l(Y)),H&&!H[$e]&&(H=_l(H,re)),Bn(function(ie,ue,ye,ke){var Ee,Ae,Ye,Ie=[],Ke=[],Nt=ue.length,It=ie||kb(I||"*",ye.nodeType?[ye]:ye,[]),cn=_&&(ie||!I)?Ha(It,Ie,_,ye,ke):It,Je=B?H||(ie?_:Nt||Y)?[]:ue:cn;if(B&&B(cn,Je,ye,ke),Y)for(Ee=Ha(Je,Ke),Y(Ee,[],ye,ke),Ae=Ee.length;Ae--;)(Ye=Ee[Ae])&&(Je[Ke[Ae]]=!(cn[Ke[Ae]]=Ye));if(ie){if(H||_){if(H){for(Ee=[],Ae=Je.length;Ae--;)(Ye=Je[Ae])&&Ee.push(cn[Ae]=Ye);H(null,Je=[],Ee,ke)}for(Ae=Je.length;Ae--;)(Ye=Je[Ae])&&(Ee=H?ti.call(ie,Ye):Ie[Ae])>-1&&(ie[Ee]=!(ue[Ee]=Ye))}}else Je=Ha(Je===ue?Je.splice(Nt,Je.length):Je),H?H(null,ue,Je,ke):Pr.apply(ue,Je)})}function Tl(_){for(var I,B,Y,H=_.length,re=f.relative[_[0].type],ie=re||f.relative[" "],ue=re?1:0,ye=xl(function(Ae){return Ae===I},ie,!0),ke=xl(function(Ae){return ti.call(I,Ae)>-1},ie,!0),Ee=[function(Ae,Ye,Ie){return!re&&(Ie||Ye!==E)||((I=Ye).nodeType?ye(Ae,Ye,Ie):ke(Ae,Ye,Ie))}];ue<H;ue++)if(B=f.relative[_[ue].type])Ee=[xl(Sl(Ee),B)];else{if(B=f.filter[_[ue].type].apply(null,_[ue].matches),B[$e]){for(Y=++ue;Y<H&&!f.relative[_[Y].type];Y++);return _l(ue>1&&Sl(Ee),ue>1&&Va(_.slice(0,ue-1).concat({value:_[ue-2].type===" "?"*":""})).replace(Fa,"$1"),B,ue<Y&&Tl(_.slice(ue,Y)),Y<H&&Tl(_=_.slice(Y)),Y<H&&Va(_))}Ee.push(B)}return Sl(Ee)}function Cb(_,I){var B=I.length>0,Y=_.length>0,H=function(re,ie,ue,ye,ke){var Ee,Ae,Ye,Ie=0,Ke="0",Nt=re&&[],It=[],cn=E,Je=re||Y&&f.find.TAG("*",ke),_s=_e+=cn==null?1:Math.random()||.1,Ts=Je.length;for(ke&&(E=ie!==X&&ie);Ke!==Ts&&(Ee=Je[Ke])!=null;Ke++){if(Y&&Ee){for(Ae=0;Ye=_[Ae++];)if(Ye(Ee,ie,ue)){ye.push(Ee);break}ke&&(_e=_s)}B&&((Ee=!Ye&&Ee)&&Ie--,re&&Nt.push(Ee))}if(Ie+=Ke,B&&Ke!==Ie){for(Ae=0;Ye=I[Ae++];)Ye(Nt,It,ie,ue);if(re){if(Ie>0)for(;Ke--;)Nt[Ke]||It[Ke]||(It[Ke]=Or.call(ye));It=Ha(It)}Pr.apply(ye,It),ke&&!re&&It.length>0&&Ie+I.length>1&&nt.uniqueSort(ye)}return ke&&(_e=_s,E=cn),Nt};return B?Bn(H):H}x=nt.compile=function(_,I){var B,Y=[],H=[],re=kr[_+" "];if(!re){for(I||(I=Wa(_)),B=I.length;B--;)re=Tl(I[B]),re[$e]?Y.push(re):H.push(re);re=kr(_,Cb(H,Y))}return re};function kb(_,I,B){for(var Y=0,H=I.length;Y<H;Y++)nt(_,I[Y],B);return B}function Ob(_,I,B,Y){var H,re,ie,ue,ye,ke=Wa(_);if(!Y&&ke.length===1){if(re=ke[0]=ke[0].slice(0),re.length>2&&(ie=re[0]).type==="ID"&&c.getById&&I.nodeType===9&&ae&&f.relative[re[1].type]){if(I=(f.find.ID(ie.matches[0].replace(Dr,Nr),I)||[])[0],!I)return B;_=_.slice(re.shift().value.length)}for(H=$a.needsContext.test(_)?0:re.length;H--&&(ie=re[H],!f.relative[ue=ie.type]);)if((ye=f.find[ue])&&(Y=ye(ie.matches[0].replace(Dr,Nr),vl.test(re[0].type)&&Al(I.parentNode)||I))){if(re.splice(H,1),_=Y.length&&Va(re),!_)return Pr.apply(B,Y),B;break}}return x(_,ke)(Y,I,!ae,B,vl.test(_)&&Al(I.parentNode)||I),B}return c.sortStable=$e.split("").sort(xs).join("")===$e,c.detectDuplicates=!!W,V(),c.sortDetached=Un(function(_){return _.compareDocumentPosition(X.createElement("div"))&1}),Un(function(_){return _.innerHTML="<a href='#'></a>",_.firstChild.getAttribute("href")==="#"})||wl("type|href|height|width",function(_,I,B){if(!B)return _.getAttribute(I,I.toLowerCase()==="type"?1:2)}),(!c.attributes||!Un(function(_){return _.innerHTML="<input/>",_.firstChild.setAttribute("value",""),_.firstChild.getAttribute("value")===""}))&&wl("value",function(_,I,B){if(!B&&_.nodeName.toLowerCase()==="input")return _.defaultValue}),Un(function(_){return _.getAttribute("disabled")==null})||wl(ml,function(_,I,B){var Y;if(!B)return _[I]===!0?I.toLowerCase():(Y=_.getAttributeNode(I))&&Y.specified?Y.value:null}),nt}(e);o.find=D,o.expr=D.selectors,o.expr[":"]=o.expr.pseudos,o.unique=D.uniqueSort,o.text=D.getText,o.isXMLDoc=D.isXML,o.contains=D.contains;var G=o.expr.match.needsContext,j=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Z=/^.[^:#\[\.,]*$/;function C(s,l,c){if(o.isFunction(l))return o.grep(s,function(f,b){return!!l.call(f,b,f)!==c});if(l.nodeType)return o.grep(s,function(f){return f===l!==c});if(typeof l=="string"){if(Z.test(l))return o.filter(l,s,c);l=o.filter(l,s)}return o.grep(s,function(f){return o.inArray(f,l)>=0!==c})}o.filter=function(s,l,c){var f=l[0];return c&&(s=":not("+s+")"),l.length===1&&f.nodeType===1?o.find.matchesSelector(f,s)?[f]:[]:o.find.matches(s,o.grep(l,function(b){return b.nodeType===1}))},o.fn.extend({find:function(s){var l,c=[],f=this,b=f.length;if(typeof s!="string")return this.pushStack(o(s).filter(function(){for(l=0;l<b;l++)if(o.contains(f[l],this))return!0}));for(l=0;l<b;l++)o.find(s,f[l],c);return c=this.pushStack(b>1?o.unique(c):c),c.selector=this.selector?this.selector+" "+s:s,c},filter:function(s){return this.pushStack(C(this,s||[],!1))},not:function(s){return this.pushStack(C(this,s||[],!0))},is:function(s){return!!C(this,typeof s=="string"&&G.test(s)?o(s):s||[],!1).length}});var M,N=e.document,J=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=o.fn.init=function(s,l){var c,f;if(!s)return this;if(typeof s=="string")if(s.charAt(0)==="<"&&s.charAt(s.length-1)===">"&&s.length>=3?c=[null,s,null]:c=J.exec(s),c&&(c[1]||!l))if(c[1]){if(l=l instanceof o?l[0]:l,o.merge(this,o.parseHTML(c[1],l&&l.nodeType?l.ownerDocument||l:N,!0)),j.test(c[1])&&o.isPlainObject(l))for(c in l)o.isFunction(this[c])?this[c](l[c]):this.attr(c,l[c]);return this}else{if(f=N.getElementById(c[2]),f&&f.parentNode){if(f.id!==c[2])return M.find(s);this.length=1,this[0]=f}return this.context=N,this.selector=s,this}else return!l||l.jquery?(l||M).find(s):this.constructor(l).find(s);else{if(s.nodeType)return this.context=this[0]=s,this.length=1,this;if(o.isFunction(s))return typeof M.ready<"u"?M.ready(s):s(o)}return s.selector!==void 0&&(this.selector=s.selector,this.context=s.context),o.makeArray(s,this)};fe.prototype=o.fn,M=o(N);var L=/^(?:parents|prev(?:Until|All))/,z={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(s,l,c){for(var f=[],b=s[l];b&&b.nodeType!==9&&(c===void 0||b.nodeType!==1||!o(b).is(c));)b.nodeType===1&&f.push(b),b=b[l];return f},sibling:function(s,l){for(var c=[];s;s=s.nextSibling)s.nodeType===1&&s!==l&&c.push(s);return c}}),o.fn.extend({has:function(s){var l,c=o(s,this),f=c.length;return this.filter(function(){for(l=0;l<f;l++)if(o.contains(this,c[l]))return!0})},closest:function(s,l){for(var c,f=0,b=this.length,w=[],x=G.test(s)||typeof s!="string"?o(s,l||this.context):0;f<b;f++)for(c=this[f];c&&c!==l;c=c.parentNode)if(c.nodeType<11&&(x?x.index(c)>-1:c.nodeType===1&&o.find.matchesSelector(c,s))){w.push(c);break}return this.pushStack(w.length>1?o.unique(w):w)},index:function(s){return s?typeof s=="string"?o.inArray(this[0],o(s)):o.inArray(s.jquery?s[0]:s,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,l){return this.pushStack(o.unique(o.merge(this.get(),o(s,l))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function T(s,l){do s=s[l];while(s&&s.nodeType!==1);return s}o.each({parent:function(s){var l=s.parentNode;return l&&l.nodeType!==11?l:null},parents:function(s){return o.dir(s,"parentNode")},parentsUntil:function(s,l,c){return o.dir(s,"parentNode",c)},next:function(s){return T(s,"nextSibling")},prev:function(s){return T(s,"previousSibling")},nextAll:function(s){return o.dir(s,"nextSibling")},prevAll:function(s){return o.dir(s,"previousSibling")},nextUntil:function(s,l,c){return o.dir(s,"nextSibling",c)},prevUntil:function(s,l,c){return o.dir(s,"previousSibling",c)},siblings:function(s){return o.sibling((s.parentNode||{}).firstChild,s)},children:function(s){return o.sibling(s.firstChild)},contents:function(s){return o.nodeName(s,"iframe")?s.contentDocument||s.contentWindow.document:o.merge([],s.childNodes)}},function(s,l){o.fn[s]=function(c,f){var b=o.map(this,l,c);return s.slice(-5)!=="Until"&&(f=c),f&&typeof f=="string"&&(b=o.filter(f,b)),this.length>1&&(z[s]||(b=o.unique(b)),L.test(s)&&(b=b.reverse())),this.pushStack(b)}});var q=/\S+/g,K={};function le(s){var l=K[s]={};return o.each(s.match(q)||[],function(c,f){l[f]=!0}),l}o.Callbacks=function(s){s=typeof s=="string"?K[s]||le(s):o.extend({},s);var l,c,f,b,w,x,E=[],F=!s.once&&[],W=function(X){for(c=s.memory&&X,f=!0,w=x||0,x=0,b=E.length,l=!0;E&&w<b;w++)if(E[w].apply(X[0],X[1])===!1&&s.stopOnFalse){c=!1;break}l=!1,E&&(F?F.length&&W(F.shift()):c?E=[]:V.disable())},V={add:function(){if(E){var X=E.length;(function te(ae){o.each(ae,function(ve,Te){var He=o.type(Te);He==="function"?(!s.unique||!V.has(Te))&&E.push(Te):Te&&Te.length&&He!=="string"&&te(Te)})})(arguments),l?b=E.length:c&&(x=X,W(c))}return this},remove:function(){return E&&o.each(arguments,function(X,te){for(var ae;(ae=o.inArray(te,E,ae))>-1;)E.splice(ae,1),l&&(ae<=b&&b--,ae<=w&&w--)}),this},has:function(X){return X?o.inArray(X,E)>-1:!!(E&&E.length)},empty:function(){return E=[],b=0,this},disable:function(){return E=F=c=void 0,this},disabled:function(){return!E},lock:function(){return F=void 0,c||V.disable(),this},locked:function(){return!F},fireWith:function(X,te){return E&&(!f||F)&&(te=te||[],te=[X,te.slice?te.slice():te],l?F.push(te):W(te)),this},fire:function(){return V.fireWith(this,arguments),this},fired:function(){return!!f}};return V},o.extend({Deferred:function(s){var l=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],c="pending",f={state:function(){return c},always:function(){return b.done(arguments).fail(arguments),this},then:function(){var w=arguments;return o.Deferred(function(x){o.each(l,function(E,F){var W=o.isFunction(w[E])&&w[E];b[F[1]](function(){var V=W&&W.apply(this,arguments);V&&o.isFunction(V.promise)?V.promise().done(x.resolve).fail(x.reject).progress(x.notify):x[F[0]+"With"](this===f?x.promise():this,W?[V]:arguments)})}),w=null}).promise()},promise:function(w){return w!=null?o.extend(w,f):f}},b={};return f.pipe=f.then,o.each(l,function(w,x){var E=x[2],F=x[3];f[x[1]]=E.add,F&&E.add(function(){c=F},l[w^1][2].disable,l[2][2].lock),b[x[0]]=function(){return b[x[0]+"With"](this===b?f:this,arguments),this},b[x[0]+"With"]=E.fireWith}),f.promise(b),s&&s.call(b,b),b},when:function(s){var l=0,c=a.call(arguments),f=c.length,b=f!==1||s&&o.isFunction(s.promise)?f:0,w=b===1?s:o.Deferred(),x=function(V,X,te){return function(ae){X[V]=this,te[V]=arguments.length>1?a.call(arguments):ae,te===E?w.notifyWith(X,te):--b||w.resolveWith(X,te)}},E,F,W;if(f>1)for(E=new Array(f),F=new Array(f),W=new Array(f);l<f;l++)c[l]&&o.isFunction(c[l].promise)?c[l].promise().done(x(l,W,c)).fail(w.reject).progress(x(l,F,E)):--b;return b||w.resolveWith(W,c),w.promise()}});var se;o.fn.ready=function(s){return o.ready.promise().done(s),this},o.extend({isReady:!1,readyWait:1,holdReady:function(s){s?o.readyWait++:o.ready(!0)},ready:function(s){if(!(s===!0?--o.readyWait:o.isReady)){if(!N.body)return setTimeout(o.ready);o.isReady=!0,!(s!==!0&&--o.readyWait>0)&&(se.resolveWith(N,[o]),o.fn.trigger&&o(N).trigger("ready").off("ready"))}}});function pe(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",ge,!1),e.removeEventListener("load",ge,!1)):(N.detachEvent("onreadystatechange",ge),e.detachEvent("onload",ge))}function ge(){(N.addEventListener||event.type==="load"||N.readyState==="complete")&&(pe(),o.ready())}o.ready.promise=function(s){if(!se)if(se=o.Deferred(),N.readyState==="complete")setTimeout(o.ready);else if(N.addEventListener)N.addEventListener("DOMContentLoaded",ge,!1),e.addEventListener("load",ge,!1);else{N.attachEvent("onreadystatechange",ge),e.attachEvent("onload",ge);var l=!1;try{l=e.frameElement==null&&N.documentElement}catch{}l&&l.doScroll&&function c(){if(!o.isReady){try{l.doScroll("left")}catch{return setTimeout(c,50)}pe(),o.ready()}}()}return se.promise(s)};var Fe="undefined",Zt;for(Zt in o(g))break;g.ownLast=Zt!=="0",g.inlineBlockNeedsLayout=!1,o(function(){var s,l,c=N.getElementsByTagName("body")[0];c&&(s=N.createElement("div"),s.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l=N.createElement("div"),c.appendChild(s).appendChild(l),typeof l.style.zoom!==Fe&&(l.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(g.inlineBlockNeedsLayout=l.offsetWidth===3)&&(c.style.zoom=1)),c.removeChild(s),s=l=null)}),function(){var s=N.createElement("div");if(g.deleteExpando==null){g.deleteExpando=!0;try{delete s.test}catch{g.deleteExpando=!1}}s=null}(),o.acceptData=function(s){var l=o.noData[(s.nodeName+" ").toLowerCase()],c=+s.nodeType||1;return c!==1&&c!==9?!1:!l||l!==!0&&s.getAttribute("classid")===l};var yn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/([A-Z])/g;function an(s,l,c){if(c===void 0&&s.nodeType===1){var f="data-"+l.replace(Re,"-$1").toLowerCase();if(c=s.getAttribute(f),typeof c=="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:+c+""===c?+c:yn.test(c)?o.parseJSON(c):c}catch{}o.data(s,l,c)}else c=void 0}return c}function sr(s){var l;for(l in s)if(!(l==="data"&&o.isEmptyObject(s[l]))&&l!=="toJSON")return!1;return!0}function jt(s,l,c,f){if(o.acceptData(s)){var b,w,x=o.expando,E=s.nodeType,F=E?o.cache:s,W=E?s[x]:s[x]&&x;if(!((!W||!F[W]||!f&&!F[W].data)&&c===void 0&&typeof l=="string"))return W||(E?W=s[x]=i.pop()||o.guid++:W=x),F[W]||(F[W]=E?{}:{toJSON:o.noop}),(typeof l=="object"||typeof l=="function")&&(f?F[W]=o.extend(F[W],l):F[W].data=o.extend(F[W].data,l)),w=F[W],f||(w.data||(w.data={}),w=w.data),c!==void 0&&(w[o.camelCase(l)]=c),typeof l=="string"?(b=w[l],b==null&&(b=w[o.camelCase(l)])):b=w,b}}function Sr(s,l,c){if(o.acceptData(s)){var f,b,w=s.nodeType,x=w?o.cache:s,E=w?s[o.expando]:o.expando;if(x[E]){if(l&&(f=c?x[E]:x[E].data,f)){for(o.isArray(l)?l=l.concat(o.map(l,o.camelCase)):(l in f)?l=[l]:(l=o.camelCase(l),l in f?l=[l]:l=l.split(" ")),b=l.length;b--;)delete f[l[b]];if(c?!sr(f):!o.isEmptyObject(f))return}!c&&(delete x[E].data,!sr(x[E]))||(w?o.cleanData([s],!0):g.deleteExpando||x!=x.window?delete x[E]:x[E]=null)}}}o.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(s){return s=s.nodeType?o.cache[s[o.expando]]:s[o.expando],!!s&&!sr(s)},data:function(s,l,c){return jt(s,l,c)},removeData:function(s,l){return Sr(s,l)},_data:function(s,l,c){return jt(s,l,c,!0)},_removeData:function(s,l){return Sr(s,l,!0)}}),o.fn.extend({data:function(s,l){var c,f,b,w=this[0],x=w&&w.attributes;if(s===void 0){if(this.length&&(b=o.data(w),w.nodeType===1&&!o._data(w,"parsedAttrs"))){for(c=x.length;c--;)f=x[c].name,f.indexOf("data-")===0&&(f=o.camelCase(f.slice(5)),an(w,f,b[f]));o._data(w,"parsedAttrs",!0)}return b}return typeof s=="object"?this.each(function(){o.data(this,s)}):arguments.length>1?this.each(function(){o.data(this,s,l)}):w?an(w,s,o.data(w,s)):void 0},removeData:function(s){return this.each(function(){o.removeData(this,s)})}}),o.extend({queue:function(s,l,c){var f;if(s)return l=(l||"fx")+"queue",f=o._data(s,l),c&&(!f||o.isArray(c)?f=o._data(s,l,o.makeArray(c)):f.push(c)),f||[]},dequeue:function(s,l){l=l||"fx";var c=o.queue(s,l),f=c.length,b=c.shift(),w=o._queueHooks(s,l),x=function(){o.dequeue(s,l)};b==="inprogress"&&(b=c.shift(),f--),b&&(l==="fx"&&c.unshift("inprogress"),delete w.stop,b.call(s,x,w)),!f&&w&&w.empty.fire()},_queueHooks:function(s,l){var c=l+"queueHooks";return o._data(s,c)||o._data(s,c,{empty:o.Callbacks("once memory").add(function(){o._removeData(s,l+"queue"),o._removeData(s,c)})})}}),o.fn.extend({queue:function(s,l){var c=2;return typeof s!="string"&&(l=s,s="fx",c--),arguments.length<c?o.queue(this[0],s):l===void 0?this:this.each(function(){var f=o.queue(this,s,l);o._queueHooks(this,s),s==="fx"&&f[0]!=="inprogress"&&o.dequeue(this,s)})},dequeue:function(s){return this.each(function(){o.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,l){var c,f=1,b=o.Deferred(),w=this,x=this.length,E=function(){--f||b.resolveWith(w,[w])};for(typeof s!="string"&&(l=s,s=void 0),s=s||"fx";x--;)c=o._data(w[x],s+"queueHooks"),c&&c.empty&&(f++,c.empty.add(E));return E(),b.promise(l)}});var qn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vn=["Top","Right","Bottom","Left"],Kt=function(s,l){return s=l||s,o.css(s,"display")==="none"||!o.contains(s.ownerDocument,s)},on=o.access=function(s,l,c,f,b,w,x){var E=0,F=s.length,W=c==null;if(o.type(c)==="object"){b=!0;for(E in c)o.access(s,l,E,c[E],!0,w,x)}else if(f!==void 0&&(b=!0,o.isFunction(f)||(x=!0),W&&(x?(l.call(s,f),l=null):(W=l,l=function(V,X,te){return W.call(o(V),te)})),l))for(;E<F;E++)l(s[E],c,x?f:f.call(s[E],E,l(s[E],c)));return b?s:W?l.call(s):F?l(s[0],c):w},bn=/^(?:checkbox|radio)$/i;(function(){var s=N.createDocumentFragment(),l=N.createElement("div"),c=N.createElement("input");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a>",g.leadingWhitespace=l.firstChild.nodeType===3,g.tbody=!l.getElementsByTagName("tbody").length,g.htmlSerialize=!!l.getElementsByTagName("link").length,g.html5Clone=N.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",c.type="checkbox",c.checked=!0,s.appendChild(c),g.appendChecked=c.checked,l.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!l.cloneNode(!0).lastChild.defaultValue,s.appendChild(l),l.innerHTML="<input type='radio' checked='checked' name='t'/>",g.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,g.noCloneEvent=!0,l.attachEvent&&(l.attachEvent("onclick",function(){g.noCloneEvent=!1}),l.cloneNode(!0).click()),g.deleteExpando==null){g.deleteExpando=!0;try{delete l.test}catch{g.deleteExpando=!1}}s=l=c=null})(),function(){var s,l,c=N.createElement("div");for(s in{submit:!0,change:!0,focusin:!0})l="on"+s,(g[s+"Bubbles"]=l in e)||(c.setAttribute(l,"t"),g[s+"Bubbles"]=c.attributes[l].expando===!1);c=null}();var Gr=/^(?:input|select|textarea)$/i,Zr=/^key/,ar=/^(?:mouse|contextmenu)|click/,_r=/^(?:focusinfocus|focusoutblur)$/,Ei=/^([^.]*)(?:\.(.+)|)$/;function or(){return!0}function kn(){return!1}function Pt(){try{return N.activeElement}catch{}}o.event={global:{},add:function(s,l,c,f,b){var w,x,E,F,W,V,X,te,ae,ve,Te,He=o._data(s);if(He){for(c.handler&&(F=c,c=F.handler,b=F.selector),c.guid||(c.guid=o.guid++),(x=He.events)||(x=He.events={}),(V=He.handle)||(V=He.handle=function(Rn){return typeof o!==Fe&&(!Rn||o.event.triggered!==Rn.type)?o.event.dispatch.apply(V.elem,arguments):void 0},V.elem=s),l=(l||"").match(q)||[""],E=l.length;E--;)w=Ei.exec(l[E])||[],ae=Te=w[1],ve=(w[2]||"").split(".").sort(),ae&&(W=o.event.special[ae]||{},ae=(b?W.delegateType:W.bindType)||ae,W=o.event.special[ae]||{},X=o.extend({type:ae,origType:Te,data:f,handler:c,guid:c.guid,selector:b,needsContext:b&&o.expr.match.needsContext.test(b),namespace:ve.join(".")},F),(te=x[ae])||(te=x[ae]=[],te.delegateCount=0,(!W.setup||W.setup.call(s,f,ve,V)===!1)&&(s.addEventListener?s.addEventListener(ae,V,!1):s.attachEvent&&s.attachEvent("on"+ae,V))),W.add&&(W.add.call(s,X),X.handler.guid||(X.handler.guid=c.guid)),b?te.splice(te.delegateCount++,0,X):te.push(X),o.event.global[ae]=!0);s=null}},remove:function(s,l,c,f,b){var w,x,E,F,W,V,X,te,ae,ve,Te,He=o.hasData(s)&&o._data(s);if(!(!He||!(V=He.events))){for(l=(l||"").match(q)||[""],W=l.length;W--;){if(E=Ei.exec(l[W])||[],ae=Te=E[1],ve=(E[2]||"").split(".").sort(),!ae){for(ae in V)o.event.remove(s,ae+l[W],c,f,!0);continue}for(X=o.event.special[ae]||{},ae=(f?X.delegateType:X.bindType)||ae,te=V[ae]||[],E=E[2]&&new RegExp("(^|\\.)"+ve.join("\\.(?:.*\\.|)")+"(\\.|$)"),F=w=te.length;w--;)x=te[w],(b||Te===x.origType)&&(!c||c.guid===x.guid)&&(!E||E.test(x.namespace))&&(!f||f===x.selector||f==="**"&&x.selector)&&(te.splice(w,1),x.selector&&te.delegateCount--,X.remove&&X.remove.call(s,x));F&&!te.length&&((!X.teardown||X.teardown.call(s,ve,He.handle)===!1)&&o.removeEvent(s,ae,He.handle),delete V[ae])}o.isEmptyObject(V)&&(delete He.handle,o._removeData(s,"events"))}},trigger:function(s,l,c,f){var b,w,x,E,F,W,V,X=[c||N],te=v.call(s,"type")?s.type:s,ae=v.call(s,"namespace")?s.namespace.split("."):[];if(x=W=c=c||N,!(c.nodeType===3||c.nodeType===8)&&!_r.test(te+o.event.triggered)&&(te.indexOf(".")>=0&&(ae=te.split("."),te=ae.shift(),ae.sort()),w=te.indexOf(":")<0&&"on"+te,s=s[o.expando]?s:new o.Event(te,typeof s=="object"&&s),s.isTrigger=f?2:3,s.namespace=ae.join("."),s.namespace_re=s.namespace?new RegExp("(^|\\.)"+ae.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=c),l=l==null?[s]:o.makeArray(l,[s]),F=o.event.special[te]||{},!(!f&&F.trigger&&F.trigger.apply(c,l)===!1))){if(!f&&!F.noBubble&&!o.isWindow(c)){for(E=F.delegateType||te,_r.test(E+te)||(x=x.parentNode);x;x=x.parentNode)X.push(x),W=x;W===(c.ownerDocument||N)&&X.push(W.defaultView||W.parentWindow||e)}for(V=0;(x=X[V++])&&!s.isPropagationStopped();)s.type=V>1?E:F.bindType||te,b=(o._data(x,"events")||{})[s.type]&&o._data(x,"handle"),b&&b.apply(x,l),b=w&&x[w],b&&b.apply&&o.acceptData(x)&&(s.result=b.apply(x,l),s.result===!1&&s.preventDefault());if(s.type=te,!f&&!s.isDefaultPrevented()&&(!F._default||F._default.apply(X.pop(),l)===!1)&&o.acceptData(c)&&w&&c[te]&&!o.isWindow(c)){W=c[w],W&&(c[w]=null),o.event.triggered=te;try{c[te]()}catch{}o.event.triggered=void 0,W&&(c[w]=W)}return s.result}},dispatch:function(s){s=o.event.fix(s);var l,c,f,b,w,x=[],E=a.call(arguments),F=(o._data(this,"events")||{})[s.type]||[],W=o.event.special[s.type]||{};if(E[0]=s,s.delegateTarget=this,!(W.preDispatch&&W.preDispatch.call(this,s)===!1)){for(x=o.event.handlers.call(this,s,F),l=0;(b=x[l++])&&!s.isPropagationStopped();)for(s.currentTarget=b.elem,w=0;(f=b.handlers[w++])&&!s.isImmediatePropagationStopped();)(!s.namespace_re||s.namespace_re.test(f.namespace))&&(s.handleObj=f,s.data=f.data,c=((o.event.special[f.origType]||{}).handle||f.handler).apply(b.elem,E),c!==void 0&&(s.result=c)===!1&&(s.preventDefault(),s.stopPropagation()));return W.postDispatch&&W.postDispatch.call(this,s),s.result}},handlers:function(s,l){var c,f,b,w,x=[],E=l.delegateCount,F=s.target;if(E&&F.nodeType&&(!s.button||s.type!=="click")){for(;F!=this;F=F.parentNode||this)if(F.nodeType===1&&(F.disabled!==!0||s.type!=="click")){for(b=[],w=0;w<E;w++)f=l[w],c=f.selector+" ",b[c]===void 0&&(b[c]=f.needsContext?o(c,this).index(F)>=0:o.find(c,this,null,[F]).length),b[c]&&b.push(f);b.length&&x.push({elem:F,handlers:b})}}return E<l.length&&x.push({elem:this,handlers:l.slice(E)}),x},fix:function(s){if(s[o.expando])return s;var l,c,f,b=s.type,w=s,x=this.fixHooks[b];for(x||(this.fixHooks[b]=x=ar.test(b)?this.mouseHooks:Zr.test(b)?this.keyHooks:{}),f=x.props?this.props.concat(x.props):this.props,s=new o.Event(w),l=f.length;l--;)c=f[l],s[c]=w[c];return s.target||(s.target=w.srcElement||N),s.target.nodeType===3&&(s.target=s.target.parentNode),s.metaKey=!!s.metaKey,x.filter?x.filter(s,w):s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(s,l){return s.which==null&&(s.which=l.charCode!=null?l.charCode:l.keyCode),s}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(s,l){var c,f,b,w=l.button,x=l.fromElement;return s.pageX==null&&l.clientX!=null&&(f=s.target.ownerDocument||N,b=f.documentElement,c=f.body,s.pageX=l.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b&&b.clientLeft||c&&c.clientLeft||0),s.pageY=l.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0)),!s.relatedTarget&&x&&(s.relatedTarget=x===s.target?l.toElement:x),!s.which&&w!==void 0&&(s.which=w&1?1:w&2?3:w&4?2:0),s}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Pt()&&this.focus)try{return this.focus(),!1}catch{}},delegateType:"focusin"},blur:{trigger:function(){if(this===Pt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(o.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(s){return o.nodeName(s.target,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&(s.originalEvent.returnValue=s.result)}}},simulate:function(s,l,c,f){var b=o.extend(new o.Event,c,{type:s,isSimulated:!0,originalEvent:{}});f?o.event.trigger(b,null,l):o.event.dispatch.call(l,b),b.isDefaultPrevented()&&c.preventDefault()}},o.removeEvent=N.removeEventListener?function(s,l,c){s.removeEventListener&&s.removeEventListener(l,c,!1)}:function(s,l,c){var f="on"+l;s.detachEvent&&(typeof s[f]===Fe&&(s[f]=null),s.detachEvent(f,c))},o.Event=function(s,l){if(!(this instanceof o.Event))return new o.Event(s,l);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&(s.returnValue===!1||s.getPreventDefault&&s.getPreventDefault())?or:kn):this.type=s,l&&o.extend(this,l),this.timeStamp=s&&s.timeStamp||o.now(),this[o.expando]=!0},o.Event.prototype={isDefaultPrevented:kn,isPropagationStopped:kn,isImmediatePropagationStopped:kn,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=or,s&&(s.preventDefault?s.preventDefault():s.returnValue=!1)},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=or,s&&(s.stopPropagation&&s.stopPropagation(),s.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=or,this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(s,l){o.event.special[s]={delegateType:l,bindType:l,handle:function(c){var f,b=this,w=c.relatedTarget,x=c.handleObj;return(!w||w!==b&&!o.contains(b,w))&&(c.type=x.origType,f=x.handler.apply(this,arguments),c.type=l),f}}}),g.submitBubbles||(o.event.special.submit={setup:function(){if(o.nodeName(this,"form"))return!1;o.event.add(this,"click._submit keypress._submit",function(s){var l=s.target,c=o.nodeName(l,"input")||o.nodeName(l,"button")?l.form:void 0;c&&!o._data(c,"submitBubbles")&&(o.event.add(c,"submit._submit",function(f){f._submit_bubble=!0}),o._data(c,"submitBubbles",!0))})},postDispatch:function(s){s._submit_bubble&&(delete s._submit_bubble,this.parentNode&&!s.isTrigger&&o.event.simulate("submit",this.parentNode,s,!0))},teardown:function(){if(o.nodeName(this,"form"))return!1;o.event.remove(this,"._submit")}}),g.changeBubbles||(o.event.special.change={setup:function(){if(Gr.test(this.nodeName))return(this.type==="checkbox"||this.type==="radio")&&(o.event.add(this,"propertychange._change",function(s){s.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),o.event.add(this,"click._change",function(s){this._just_changed&&!s.isTrigger&&(this._just_changed=!1),o.event.simulate("change",this,s,!0)})),!1;o.event.add(this,"beforeactivate._change",function(s){var l=s.target;Gr.test(l.nodeName)&&!o._data(l,"changeBubbles")&&(o.event.add(l,"change._change",function(c){this.parentNode&&!c.isSimulated&&!c.isTrigger&&o.event.simulate("change",this.parentNode,c,!0)}),o._data(l,"changeBubbles",!0))})},handle:function(s){var l=s.target;if(this!==l||s.isSimulated||s.isTrigger||l.type!=="radio"&&l.type!=="checkbox")return s.handleObj.handler.apply(this,arguments)},teardown:function(){return o.event.remove(this,"._change"),!Gr.test(this.nodeName)}}),g.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(s,l){var c=function(f){o.event.simulate(l,f.target,o.event.fix(f),!0)};o.event.special[l]={setup:function(){var f=this.ownerDocument||this,b=o._data(f,l);b||f.addEventListener(s,c,!0),o._data(f,l,(b||0)+1)},teardown:function(){var f=this.ownerDocument||this,b=o._data(f,l)-1;b?o._data(f,l,b):(f.removeEventListener(s,c,!0),o._removeData(f,l))}}}),o.fn.extend({on:function(s,l,c,f,b){var w,x;if(typeof s=="object"){typeof l!="string"&&(c=c||l,l=void 0);for(w in s)this.on(w,l,c,s[w],b);return this}if(c==null&&f==null?(f=l,c=l=void 0):f==null&&(typeof l=="string"?(f=c,c=void 0):(f=c,c=l,l=void 0)),f===!1)f=kn;else if(!f)return this;return b===1&&(x=f,f=function(E){return o().off(E),x.apply(this,arguments)},f.guid=x.guid||(x.guid=o.guid++)),this.each(function(){o.event.add(this,s,f,c,l)})},one:function(s,l,c,f){return this.on(s,l,c,f,1)},off:function(s,l,c){var f,b;if(s&&s.preventDefault&&s.handleObj)return f=s.handleObj,o(s.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof s=="object"){for(b in s)this.off(b,l,s[b]);return this}return(l===!1||typeof l=="function")&&(c=l,l=void 0),c===!1&&(c=kn),this.each(function(){o.event.remove(this,s,c,l)})},trigger:function(s,l){return this.each(function(){o.event.trigger(s,l,this)})},triggerHandler:function(s,l){var c=this[0];if(c)return o.event.trigger(s,l,c,!0)}});function On(s){var l=lr.split("|"),c=s.createDocumentFragment();if(c.createElement)for(;l.length;)c.createElement(l.pop());return c}var lr="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",De=/ jQuery\d+="(?:null|\d+)"/g,Be=new RegExp("<(?:"+lr+")[\\s/>]","i"),be=/^\s+/,je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Yt=/<([\w:]+)/,tt=/<tbody/i,Le=/<|&#?\w+;/,we=/<(?:script|style|link)/i,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,cr=/^$|\/(?:java|ecma)script/i,ur=/^true\/(.*)/,ma=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ft={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:g.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Xo=On(N),Pn=Xo.appendChild(N.createElement("div"));Ft.optgroup=Ft.option,Ft.tbody=Ft.tfoot=Ft.colgroup=Ft.caption=Ft.thead,Ft.th=Ft.td;function pt(s,l){var c,f,b=0,w=typeof s.getElementsByTagName!==Fe?s.getElementsByTagName(l||"*"):typeof s.querySelectorAll!==Fe?s.querySelectorAll(l||"*"):void 0;if(!w)for(w=[],c=s.childNodes||s;(f=c[b])!=null;b++)!l||o.nodeName(f,l)?w.push(f):o.merge(w,pt(f,l));return l===void 0||l&&o.nodeName(s,l)?o.merge([s],w):w}function Qo(s){bn.test(s.type)&&(s.defaultChecked=s.checked)}function ya(s,l){return o.nodeName(s,"table")&&o.nodeName(l.nodeType!==11?l:l.firstChild,"tr")?s.getElementsByTagName("tbody")[0]||s.appendChild(s.ownerDocument.createElement("tbody")):s}function Ci(s){return s.type=(o.find.attr(s,"type")!==null)+"/"+s.type,s}function Tr(s){var l=ur.exec(s.type);return l?s.type=l[1]:s.removeAttribute("type"),s}function Kr(s,l){for(var c,f=0;(c=s[f])!=null;f++)o._data(c,"globalEval",!l||o._data(l[f],"globalEval"))}function ki(s,l){if(!(l.nodeType!==1||!o.hasData(s))){var c,f,b,w=o._data(s),x=o._data(l,w),E=w.events;if(E){delete x.handle,x.events={};for(c in E)for(f=0,b=E[c].length;f<b;f++)o.event.add(l,c,E[c][f])}x.data&&(x.data=o.extend({},x.data))}}function ps(s,l){var c,f,b;if(l.nodeType===1){if(c=l.nodeName.toLowerCase(),!g.noCloneEvent&&l[o.expando]){b=o._data(l);for(f in b.events)o.removeEvent(l,f,b.handle);l.removeAttribute(o.expando)}c==="script"&&l.text!==s.text?(Ci(l).text=s.text,Tr(l)):c==="object"?(l.parentNode&&(l.outerHTML=s.outerHTML),g.html5Clone&&s.innerHTML&&!o.trim(l.innerHTML)&&(l.innerHTML=s.innerHTML)):c==="input"&&bn.test(s.type)?(l.defaultChecked=l.checked=s.checked,l.value!==s.value&&(l.value=s.value)):c==="option"?l.defaultSelected=l.selected=s.defaultSelected:(c==="input"||c==="textarea")&&(l.defaultValue=s.defaultValue)}}o.extend({clone:function(s,l,c){var f,b,w,x,E,F=o.contains(s.ownerDocument,s);if(g.html5Clone||o.isXMLDoc(s)||!Be.test("<"+s.nodeName+">")?w=s.cloneNode(!0):(Pn.innerHTML=s.outerHTML,Pn.removeChild(w=Pn.firstChild)),(!g.noCloneEvent||!g.noCloneChecked)&&(s.nodeType===1||s.nodeType===11)&&!o.isXMLDoc(s))for(f=pt(w),E=pt(s),x=0;(b=E[x])!=null;++x)f[x]&&ps(b,f[x]);if(l)if(c)for(E=E||pt(s),f=f||pt(w),x=0;(b=E[x])!=null;x++)ki(b,f[x]);else ki(s,w);return f=pt(w,"script"),f.length>0&&Kr(f,!F&&pt(s,"script")),f=E=b=null,w},buildFragment:function(s,l,c,f){for(var b,w,x,E,F,W,V,X=s.length,te=On(l),ae=[],ve=0;ve<X;ve++)if(w=s[ve],w||w===0)if(o.type(w)==="object")o.merge(ae,w.nodeType?[w]:w);else if(!Le.test(w))ae.push(l.createTextNode(w));else{for(E=E||te.appendChild(l.createElement("div")),F=(Yt.exec(w)||["",""])[1].toLowerCase(),V=Ft[F]||Ft._default,E.innerHTML=V[1]+w.replace(je,"<$1></$2>")+V[2],b=V[0];b--;)E=E.lastChild;if(!g.leadingWhitespace&&be.test(w)&&ae.push(l.createTextNode(be.exec(w)[0])),!g.tbody)for(w=F==="table"&&!tt.test(w)?E.firstChild:V[1]==="<table>"&&!tt.test(w)?E:0,b=w&&w.childNodes.length;b--;)o.nodeName(W=w.childNodes[b],"tbody")&&!W.childNodes.length&&w.removeChild(W);for(o.merge(ae,E.childNodes),E.textContent="";E.firstChild;)E.removeChild(E.firstChild);E=te.lastChild}for(E&&te.removeChild(E),g.appendChecked||o.grep(pt(ae,"input"),Qo),ve=0;w=ae[ve++];)if(!(f&&o.inArray(w,f)!==-1)&&(x=o.contains(w.ownerDocument,w),E=pt(te.appendChild(w),"script"),x&&Kr(E),c))for(b=0;w=E[b++];)cr.test(w.type||"")&&c.push(w);return E=null,te},cleanData:function(s,l){for(var c,f,b,w,x=0,E=o.expando,F=o.cache,W=g.deleteExpando,V=o.event.special;(c=s[x])!=null;x++)if((l||o.acceptData(c))&&(b=c[E],w=b&&F[b],w)){if(w.events)for(f in w.events)V[f]?o.event.remove(c,f):o.removeEvent(c,f,w.handle);F[b]&&(delete F[b],W?delete c[E]:typeof c.removeAttribute!==Fe?c.removeAttribute(E):c[E]=null,i.push(b))}}}),o.fn.extend({text:function(s){return on(this,function(l){return l===void 0?o.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(l))},null,s,arguments.length)},append:function(){return this.domManip(arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var l=ya(this,s);l.appendChild(s)}})},prepend:function(){return this.domManip(arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var l=ya(this,s);l.insertBefore(s,l.firstChild)}})},before:function(){return this.domManip(arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return this.domManip(arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},remove:function(s,l){for(var c,f=s?o.filter(s,this):this,b=0;(c=f[b])!=null;b++)!l&&c.nodeType===1&&o.cleanData(pt(c)),c.parentNode&&(l&&o.contains(c.ownerDocument,c)&&Kr(pt(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var s,l=0;(s=this[l])!=null;l++){for(s.nodeType===1&&o.cleanData(pt(s,!1));s.firstChild;)s.removeChild(s.firstChild);s.options&&o.nodeName(s,"select")&&(s.options.length=0)}return this},clone:function(s,l){return s=s??!1,l=l??s,this.map(function(){return o.clone(this,s,l)})},html:function(s){return on(this,function(l){var c=this[0]||{},f=0,b=this.length;if(l===void 0)return c.nodeType===1?c.innerHTML.replace(De,""):void 0;if(typeof l=="string"&&!we.test(l)&&(g.htmlSerialize||!Be.test(l))&&(g.leadingWhitespace||!be.test(l))&&!Ft[(Yt.exec(l)||["",""])[1].toLowerCase()]){l=l.replace(je,"<$1></$2>");try{for(;f<b;f++)c=this[f]||{},c.nodeType===1&&(o.cleanData(pt(c,!1)),c.innerHTML=l);c=0}catch{}}c&&this.empty().append(l)},null,s,arguments.length)},replaceWith:function(){var s=arguments[0];return this.domManip(arguments,function(l){s=this.parentNode,o.cleanData(pt(this)),s&&s.replaceChild(l,this)}),s&&(s.length||s.nodeType)?this:this.remove()},detach:function(s){return this.remove(s,!0)},domManip:function(s,l){s=u.apply([],s);var c,f,b,w,x,E,F=0,W=this.length,V=this,X=W-1,te=s[0],ae=o.isFunction(te);if(ae||W>1&&typeof te=="string"&&!g.checkClone&&Xt.test(te))return this.each(function(ve){var Te=V.eq(ve);ae&&(s[0]=te.call(this,ve,Te.html())),Te.domManip(s,l)});if(W&&(E=o.buildFragment(s,this[0].ownerDocument,!1,this),c=E.firstChild,E.childNodes.length===1&&(E=c),c)){for(w=o.map(pt(E,"script"),Ci),b=w.length;F<W;F++)f=E,F!==X&&(f=o.clone(f,!0,!0),b&&o.merge(w,pt(f,"script"))),l.call(this[F],f,F);if(b)for(x=w[w.length-1].ownerDocument,o.map(w,Tr),F=0;F<b;F++)f=w[F],cr.test(f.type||"")&&!o._data(f,"globalEval")&&o.contains(x,f)&&(f.src?o._evalUrl&&o._evalUrl(f.src):o.globalEval((f.text||f.textContent||f.innerHTML||"").replace(ma,"")));E=c=null}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,l){o.fn[s]=function(c){for(var f,b=0,w=[],x=o(c),E=x.length-1;b<=E;b++)f=b===E?this:this.clone(!0),o(x[b])[l](f),d.apply(w,f.get());return this.pushStack(w)}});var Dn,va={};function ba(s,l){var c=o(l.createElement(s)).appendTo(l.body),f=e.getDefaultComputedStyle?e.getDefaultComputedStyle(c[0]).display:o.css(c[0],"display");return c.detach(),f}function wa(s){var l=N,c=va[s];return c||(c=ba(s,l),(c==="none"||!c)&&(Dn=(Dn||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(l.documentElement),l=(Dn[0].contentWindow||Dn[0].contentDocument).document,l.write(),l.close(),c=ba(s,l),Dn.detach()),va[s]=c),c}(function(){var s,l,c=N.createElement("div"),f="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=c.getElementsByTagName("a")[0],s.style.cssText="float:left;opacity:.5",g.opacity=/^0.5/.test(s.style.opacity),g.cssFloat=!!s.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle=c.style.backgroundClip==="content-box",s=c=null,g.shrinkWrapBlocks=function(){var b,w,x;if(l==null){if(b=N.getElementsByTagName("body")[0],!b)return;w=N.createElement("div"),x=N.createElement("div"),b.appendChild(w).appendChild(x),l=!1,typeof x.style.zoom!==Fe&&(x.style.cssText=f+";width:1px;padding:1px;zoom:1",x.innerHTML="<div></div>",x.firstChild.style.width="5px",l=x.offsetWidth!==3),b.removeChild(w),b=w=x=null}return l}})();var Aa=/^margin/,Oi=new RegExp("^("+qn+")(?!px)[a-z%]+$","i"),zn,Nn,dr=/^(top|right|bottom|left)$/;e.getComputedStyle?(zn=function(s){return s.ownerDocument.defaultView.getComputedStyle(s,null)},Nn=function(s,l,c){var f,b,w,x,E=s.style;return c=c||zn(s),x=c?c.getPropertyValue(l)||c[l]:void 0,c&&(x===""&&!o.contains(s.ownerDocument,s)&&(x=o.style(s,l)),Oi.test(x)&&Aa.test(l)&&(f=E.width,b=E.minWidth,w=E.maxWidth,E.minWidth=E.maxWidth=E.width=x,x=c.width,E.width=f,E.minWidth=b,E.maxWidth=w)),x===void 0?x:x+""}):N.documentElement.currentStyle&&(zn=function(s){return s.currentStyle},Nn=function(s,l,c){var f,b,w,x,E=s.style;return c=c||zn(s),x=c?c[l]:void 0,x==null&&E&&E[l]&&(x=E[l]),Oi.test(x)&&!dr.test(l)&&(f=E.left,b=s.runtimeStyle,w=b&&b.left,w&&(b.left=s.currentStyle.left),E.left=l==="fontSize"?"1em":x,x=E.pixelLeft+"px",E.left=f,w&&(b.left=w)),x===void 0?x:x+""||"auto"});function xa(s,l){return{get:function(){var c=s();if(c!=null){if(c){delete this.get;return}return(this.get=l).apply(this,arguments)}}}}(function(){var s,l,c,f,b,w,x=N.createElement("div"),E="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",F="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";x.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=x.getElementsByTagName("a")[0],s.style.cssText="float:left;opacity:.5",g.opacity=/^0.5/.test(s.style.opacity),g.cssFloat=!!s.style.cssFloat,x.style.backgroundClip="content-box",x.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle=x.style.backgroundClip==="content-box",s=x=null,o.extend(g,{reliableHiddenOffsets:function(){if(l!=null)return l;var V,X,te,ae=N.createElement("div"),ve=N.getElementsByTagName("body")[0];if(ve)return ae.setAttribute("className","t"),ae.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",V=N.createElement("div"),V.style.cssText=E,ve.appendChild(V).appendChild(ae),ae.innerHTML="<table><tr><td></td><td>t</td></tr></table>",X=ae.getElementsByTagName("td"),X[0].style.cssText="padding:0;margin:0;border:0;display:none",te=X[0].offsetHeight===0,X[0].style.display="",X[1].style.display="none",l=te&&X[0].offsetHeight===0,ve.removeChild(V),ae=ve=null,l},boxSizing:function(){return c==null&&W(),c},boxSizingReliable:function(){return f==null&&W(),f},pixelPosition:function(){return b==null&&W(),b},reliableMarginRight:function(){var V,X,te,ae;if(w==null&&e.getComputedStyle){if(V=N.getElementsByTagName("body")[0],!V)return;X=N.createElement("div"),te=N.createElement("div"),X.style.cssText=E,V.appendChild(X).appendChild(te),ae=te.appendChild(N.createElement("div")),ae.style.cssText=te.style.cssText=F,ae.style.marginRight=ae.style.width="0",te.style.width="1px",w=!parseFloat((e.getComputedStyle(ae,null)||{}).marginRight),V.removeChild(X)}return w}});function W(){var V,X,te=N.getElementsByTagName("body")[0];te&&(V=N.createElement("div"),X=N.createElement("div"),V.style.cssText=E,te.appendChild(V).appendChild(X),X.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",o.swap(te,te.style.zoom!=null?{zoom:1}:{},function(){c=X.offsetWidth===4}),f=!0,b=!1,w=!0,e.getComputedStyle&&(b=(e.getComputedStyle(X,null)||{}).top!=="1%",f=(e.getComputedStyle(X,null)||{width:"4px"}).width==="4px"),te.removeChild(V),X=te=null)}})(),o.swap=function(s,l,c,f){var b,w,x={};for(w in l)x[w]=s.style[w],s.style[w]=l[w];b=c.apply(s,f||[]);for(w in l)s.style[w]=x[w];return b};var ms=/alpha\([^)]*\)/i,Jo=/opacity\s*=\s*([^)]*)/,el=/^(none|table(?!-c[ea]).+)/,tl=new RegExp("^("+qn+")(.*)$","i"),In=new RegExp("^([+-])=("+qn+")","i"),nl={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:0,fontWeight:400},_a=["Webkit","O","Moz","ms"];function Ta(s,l){if(l in s)return l;for(var c=l.charAt(0).toUpperCase()+l.slice(1),f=l,b=_a.length;b--;)if(l=_a[b]+c,l in s)return l;return f}function Ea(s,l){for(var c,f,b,w=[],x=0,E=s.length;x<E;x++)f=s[x],f.style&&(w[x]=o._data(f,"olddisplay"),c=f.style.display,l?(!w[x]&&c==="none"&&(f.style.display=""),f.style.display===""&&Kt(f)&&(w[x]=o._data(f,"olddisplay",wa(f.nodeName)))):w[x]||(b=Kt(f),(c&&c!=="none"||!b)&&o._data(f,"olddisplay",b?c:o.css(f,"display"))));for(x=0;x<E;x++)f=s[x],f.style&&(!l||f.style.display==="none"||f.style.display==="")&&(f.style.display=l?w[x]||"":"none");return s}function Gn(s,l,c){var f=tl.exec(l);return f?Math.max(0,f[1]-(c||0))+(f[2]||"px"):l}function Ca(s,l,c,f,b){for(var w=c===(f?"border":"content")?4:l==="width"?1:0,x=0;w<4;w+=2)c==="margin"&&(x+=o.css(s,c+vn[w],!0,b)),f?(c==="content"&&(x-=o.css(s,"padding"+vn[w],!0,b)),c!=="margin"&&(x-=o.css(s,"border"+vn[w]+"Width",!0,b))):(x+=o.css(s,"padding"+vn[w],!0,b),c!=="padding"&&(x+=o.css(s,"border"+vn[w]+"Width",!0,b)));return x}function ka(s,l,c){var f=!0,b=l==="width"?s.offsetWidth:s.offsetHeight,w=zn(s),x=g.boxSizing()&&o.css(s,"boxSizing",!1,w)==="border-box";if(b<=0||b==null){if(b=Nn(s,l,w),(b<0||b==null)&&(b=s.style[l]),Oi.test(b))return b;f=x&&(g.boxSizingReliable()||b===s.style[l]),b=parseFloat(b)||0}return b+Ca(s,l,c||(x?"border":"content"),f,w)+"px"}o.extend({cssHooks:{opacity:{get:function(s,l){if(l){var c=Nn(s,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:g.cssFloat?"cssFloat":"styleFloat"},style:function(s,l,c,f){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var b,w,x,E=o.camelCase(l),F=s.style;if(l=o.cssProps[E]||(o.cssProps[E]=Ta(F,E)),x=o.cssHooks[l]||o.cssHooks[E],c!==void 0){if(w=typeof c,w==="string"&&(b=In.exec(c))&&(c=(b[1]+1)*b[2]+parseFloat(o.css(s,l)),w="number"),c==null||c!==c)return;if(w==="number"&&!o.cssNumber[E]&&(c+="px"),!g.clearCloneStyle&&c===""&&l.indexOf("background")===0&&(F[l]="inherit"),!x||!("set"in x)||(c=x.set(s,c,f))!==void 0)try{F[l]="",F[l]=c}catch{}}else return x&&"get"in x&&(b=x.get(s,!1,f))!==void 0?b:F[l]}},css:function(s,l,c,f){var b,w,x,E=o.camelCase(l);return l=o.cssProps[E]||(o.cssProps[E]=Ta(s.style,E)),x=o.cssHooks[l]||o.cssHooks[E],x&&"get"in x&&(w=x.get(s,!0,c)),w===void 0&&(w=Nn(s,l,f)),w==="normal"&&l in Sa&&(w=Sa[l]),c===""||c?(b=parseFloat(w),c===!0||o.isNumeric(b)?b||0:w):w}}),o.each(["height","width"],function(s,l){o.cssHooks[l]={get:function(c,f,b){if(f)return c.offsetWidth===0&&el.test(o.css(c,"display"))?o.swap(c,nl,function(){return ka(c,l,b)}):ka(c,l,b)},set:function(c,f,b){var w=b&&zn(c);return Gn(c,f,b?Ca(c,l,b,g.boxSizing()&&o.css(c,"boxSizing",!1,w)==="border-box",w):0)}}}),g.opacity||(o.cssHooks.opacity={get:function(s,l){return Jo.test((l&&s.currentStyle?s.currentStyle.filter:s.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":l?"1":""},set:function(s,l){var c=s.style,f=s.currentStyle,b=o.isNumeric(l)?"alpha(opacity="+l*100+")":"",w=f&&f.filter||c.filter||"";c.zoom=1,!((l>=1||l==="")&&o.trim(w.replace(ms,""))===""&&c.removeAttribute&&(c.removeAttribute("filter"),l===""||f&&!f.filter))&&(c.filter=ms.test(w)?w.replace(ms,b):w+" "+b)}}),o.cssHooks.marginRight=xa(g.reliableMarginRight,function(s,l){if(l)return o.swap(s,{display:"inline-block"},Nn,[s,"marginRight"])}),o.each({margin:"",padding:"",border:"Width"},function(s,l){o.cssHooks[s+l]={expand:function(c){for(var f=0,b={},w=typeof c=="string"?c.split(" "):[c];f<4;f++)b[s+vn[f]+l]=w[f]||w[f-2]||w[0];return b}},Aa.test(s)||(o.cssHooks[s+l].set=Gn)}),o.fn.extend({css:function(s,l){return on(this,function(c,f,b){var w,x,E={},F=0;if(o.isArray(f)){for(w=zn(c),x=f.length;F<x;F++)E[f[F]]=o.css(c,f[F],!1,w);return E}return b!==void 0?o.style(c,f,b):o.css(c,f)},s,l,arguments.length>1)},show:function(){return Ea(this,!0)},hide:function(){return Ea(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){Kt(this)?o(this).show():o(this).hide()})}});function Dt(s,l,c,f,b){return new Dt.prototype.init(s,l,c,f,b)}o.Tween=Dt,Dt.prototype={constructor:Dt,init:function(s,l,c,f,b,w){this.elem=s,this.prop=c,this.easing=b||"swing",this.options=l,this.start=this.now=this.cur(),this.end=f,this.unit=w||(o.cssNumber[c]?"":"px")},cur:function(){var s=Dt.propHooks[this.prop];return s&&s.get?s.get(this):Dt.propHooks._default.get(this)},run:function(s){var l,c=Dt.propHooks[this.prop];return this.options.duration?this.pos=l=o.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=l=s,this.now=(this.end-this.start)*l+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Dt.propHooks._default.set(this),this}},Dt.prototype.init.prototype=Dt.prototype,Dt.propHooks={_default:{get:function(s){var l;return s.elem[s.prop]!=null&&(!s.elem.style||s.elem.style[s.prop]==null)?s.elem[s.prop]:(l=o.css(s.elem,s.prop,""),!l||l==="auto"?0:l)},set:function(s){o.fx.step[s.prop]?o.fx.step[s.prop](s):s.elem.style&&(s.elem.style[o.cssProps[s.prop]]!=null||o.cssHooks[s.prop])?o.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},Dt.propHooks.scrollTop=Dt.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},o.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2}},o.fx=Dt.prototype.init,o.fx.step={};var Er,Pi,Di=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+qn+")([a-z%]*)$","i"),rl=/queueHooks$/,ln=[il],Yr={"*":[function(s,l){var c=this.createTween(s,l),f=c.cur(),b=Oa.exec(l),w=b&&b[3]||(o.cssNumber[s]?"":"px"),x=(o.cssNumber[s]||w!=="px"&&+f)&&Oa.exec(o.css(c.elem,s)),E=1,F=20;if(x&&x[3]!==w){w=w||x[3],b=b||[],x=+f||1;do E=E||".5",x=x/E,o.style(c.elem,s,x+w);while(E!==(E=c.cur()/f)&&E!==1&&--F)}return b&&(x=c.start=+x||+f||0,c.unit=w,c.end=b[1]?x+(b[1]+1)*b[2]:+b[2]),c}]};function Pa(){return setTimeout(function(){Er=void 0}),Er=o.now()}function Ni(s,l){var c,f={height:s},b=0;for(l=l?1:0;b<4;b+=2-l)c=vn[b],f["margin"+c]=f["padding"+c]=s;return l&&(f.opacity=f.width=s),f}function Da(s,l,c){for(var f,b=(Yr[l]||[]).concat(Yr["*"]),w=0,x=b.length;w<x;w++)if(f=b[w].call(c,l,s))return f}function il(s,l,c){var f,b,w,x,E,F,W,V,X=this,te={},ae=s.style,ve=s.nodeType&&Kt(s),Te=o._data(s,"fxshow");c.queue||(E=o._queueHooks(s,"fx"),E.unqueued==null&&(E.unqueued=0,F=E.empty.fire,E.empty.fire=function(){E.unqueued||F()}),E.unqueued++,X.always(function(){X.always(function(){E.unqueued--,o.queue(s,"fx").length||E.empty.fire()})})),s.nodeType===1&&("height"in l||"width"in l)&&(c.overflow=[ae.overflow,ae.overflowX,ae.overflowY],W=o.css(s,"display"),V=wa(s.nodeName),W==="none"&&(W=V),W==="inline"&&o.css(s,"float")==="none"&&(!g.inlineBlockNeedsLayout||V==="inline"?ae.display="inline-block":ae.zoom=1)),c.overflow&&(ae.overflow="hidden",g.shrinkWrapBlocks()||X.always(function(){ae.overflow=c.overflow[0],ae.overflowX=c.overflow[1],ae.overflowY=c.overflow[2]}));for(f in l)if(b=l[f],Di.exec(b)){if(delete l[f],w=w||b==="toggle",b===(ve?"hide":"show"))if(b==="show"&&Te&&Te[f]!==void 0)ve=!0;else continue;te[f]=Te&&Te[f]||o.style(s,f)}if(!o.isEmptyObject(te)){Te?"hidden"in Te&&(ve=Te.hidden):Te=o._data(s,"fxshow",{}),w&&(Te.hidden=!ve),ve?o(s).show():X.done(function(){o(s).hide()}),X.done(function(){var He;o._removeData(s,"fxshow");for(He in te)o.style(s,He,te[He])});for(f in te)x=Da(ve?Te[f]:0,f,X),f in Te||(Te[f]=x.start,ve&&(x.end=x.start,x.start=f==="width"||f==="height"?1:0))}}function sl(s,l){var c,f,b,w,x;for(c in s)if(f=o.camelCase(c),b=l[f],w=s[c],o.isArray(w)&&(b=w[1],w=s[c]=w[0]),c!==f&&(s[f]=w,delete s[c]),x=o.cssHooks[f],x&&"expand"in x){w=x.expand(w),delete s[f];for(c in w)c in s||(s[c]=w[c],l[c]=b)}else l[f]=b}function Xr(s,l,c){var f,b,w=0,x=ln.length,E=o.Deferred().always(function(){delete F.elem}),F=function(){if(b)return!1;for(var X=Er||Pa(),te=Math.max(0,W.startTime+W.duration-X),ae=te/W.duration||0,ve=1-ae,Te=0,He=W.tweens.length;Te<He;Te++)W.tweens[Te].run(ve);return E.notifyWith(s,[W,ve,te]),ve<1&&He?te:(E.resolveWith(s,[W]),!1)},W=E.promise({elem:s,props:o.extend({},l),opts:o.extend(!0,{specialEasing:{}},c),originalProperties:l,originalOptions:c,startTime:Er||Pa(),duration:c.duration,tweens:[],createTween:function(X,te){var ae=o.Tween(s,W.opts,X,te,W.opts.specialEasing[X]||W.opts.easing);return W.tweens.push(ae),ae},stop:function(X){var te=0,ae=X?W.tweens.length:0;if(b)return this;for(b=!0;te<ae;te++)W.tweens[te].run(1);return X?E.resolveWith(s,[W,X]):E.rejectWith(s,[W,X]),this}}),V=W.props;for(sl(V,W.opts.specialEasing);w<x;w++)if(f=ln[w].call(W,s,V,W.opts),f)return f;return o.map(V,Da,W),o.isFunction(W.opts.start)&&W.opts.start.call(s,W),o.fx.timer(o.extend(F,{elem:s,anim:W,queue:W.opts.queue})),W.progress(W.opts.progress).done(W.opts.done,W.opts.complete).fail(W.opts.fail).always(W.opts.always)}o.Animation=o.extend(Xr,{tweener:function(s,l){o.isFunction(s)?(l=s,s=["*"]):s=s.split(" ");for(var c,f=0,b=s.length;f<b;f++)c=s[f],Yr[c]=Yr[c]||[],Yr[c].unshift(l)},prefilter:function(s,l){l?ln.unshift(s):ln.push(s)}}),o.speed=function(s,l,c){var f=s&&typeof s=="object"?o.extend({},s):{complete:c||!c&&l||o.isFunction(s)&&s,duration:s,easing:c&&l||l&&!o.isFunction(l)&&l};return f.duration=o.fx.off?0:typeof f.duration=="number"?f.duration:f.duration in o.fx.speeds?o.fx.speeds[f.duration]:o.fx.speeds._default,(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){o.isFunction(f.old)&&f.old.call(this),f.queue&&o.dequeue(this,f.queue)},f},o.fn.extend({fadeTo:function(s,l,c,f){return this.filter(Kt).css("opacity",0).show().end().animate({opacity:l},s,c,f)},animate:function(s,l,c,f){var b=o.isEmptyObject(s),w=o.speed(l,c,f),x=function(){var E=Xr(this,o.extend({},s),w);(b||o._data(this,"finish"))&&E.stop(!0)};return x.finish=x,b||w.queue===!1?this.each(x):this.queue(w.queue,x)},stop:function(s,l,c){var f=function(b){var w=b.stop;delete b.stop,w(c)};return typeof s!="string"&&(c=l,l=s,s=void 0),l&&s!==!1&&this.queue(s||"fx",[]),this.each(function(){var b=!0,w=s!=null&&s+"queueHooks",x=o.timers,E=o._data(this);if(w)E[w]&&E[w].stop&&f(E[w]);else for(w in E)E[w]&&E[w].stop&&rl.test(w)&&f(E[w]);for(w=x.length;w--;)x[w].elem===this&&(s==null||x[w].queue===s)&&(x[w].anim.stop(c),b=!1,x.splice(w,1));(b||!c)&&o.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var l,c=o._data(this),f=c[s+"queue"],b=c[s+"queueHooks"],w=o.timers,x=f?f.length:0;for(c.finish=!0,o.queue(this,s,[]),b&&b.stop&&b.stop.call(this,!0),l=w.length;l--;)w[l].elem===this&&w[l].queue===s&&(w[l].anim.stop(!0),w.splice(l,1));for(l=0;l<x;l++)f[l]&&f[l].finish&&f[l].finish.call(this);delete c.finish})}}),o.each(["toggle","show","hide"],function(s,l){var c=o.fn[l];o.fn[l]=function(f,b,w){return f==null||typeof f=="boolean"?c.apply(this,arguments):this.animate(Ni(l,!0),f,b,w)}}),o.each({slideDown:Ni("show"),slideUp:Ni("hide"),slideToggle:Ni("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,l){o.fn[s]=function(c,f,b){return this.animate(l,c,f,b)}}),o.timers=[],o.fx.tick=function(){var s,l=o.timers,c=0;for(Er=o.now();c<l.length;c++)s=l[c],!s()&&l[c]===s&&l.splice(c--,1);l.length||o.fx.stop(),Er=void 0},o.fx.timer=function(s){o.timers.push(s),s()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){Pi||(Pi=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(Pi),Pi=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(s,l){return s=o.fx&&o.fx.speeds[s]||s,l=l||"fx",this.queue(l,function(c,f){var b=setTimeout(c,s);f.stop=function(){clearTimeout(b)}})},function(){var s,l,c,f,b=N.createElement("div");b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=b.getElementsByTagName("a")[0],c=N.createElement("select"),f=c.appendChild(N.createElement("option")),l=b.getElementsByTagName("input")[0],s.style.cssText="top:1px",g.getSetAttribute=b.className!=="t",g.style=/top/.test(s.getAttribute("style")),g.hrefNormalized=s.getAttribute("href")==="/a",g.checkOn=!!l.value,g.optSelected=f.selected,g.enctype=!!N.createElement("form").enctype,c.disabled=!0,g.optDisabled=!f.disabled,l=N.createElement("input"),l.setAttribute("value",""),g.input=l.getAttribute("value")==="",l.value="t",l.setAttribute("type","radio"),g.radioValue=l.value==="t",s=l=c=f=b=null}();var al=/\r/g;o.fn.extend({val:function(s){var l,c,f,b=this[0];return arguments.length?(f=o.isFunction(s),this.each(function(w){var x;this.nodeType===1&&(f?x=s.call(this,w,o(this).val()):x=s,x==null?x="":typeof x=="number"?x+="":o.isArray(x)&&(x=o.map(x,function(E){return E==null?"":E+""})),l=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],(!l||!("set"in l)||l.set(this,x,"value")===void 0)&&(this.value=x))})):b?(l=o.valHooks[b.type]||o.valHooks[b.nodeName.toLowerCase()],l&&"get"in l&&(c=l.get(b,"value"))!==void 0?c:(c=b.value,typeof c=="string"?c.replace(al,""):c??"")):void 0}}),o.extend({valHooks:{option:{get:function(s){var l=o.find.attr(s,"value");return l??o.text(s)}},select:{get:function(s){for(var l,c,f=s.options,b=s.selectedIndex,w=s.type==="select-one"||b<0,x=w?null:[],E=w?b+1:f.length,F=b<0?E:w?b:0;F<E;F++)if(c=f[F],(c.selected||F===b)&&(g.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!o.nodeName(c.parentNode,"optgroup"))){if(l=o(c).val(),w)return l;x.push(l)}return x},set:function(s,l){for(var c,f,b=s.options,w=o.makeArray(l),x=b.length;x--;)if(f=b[x],o.inArray(o.valHooks.option.get(f),w)>=0)try{f.selected=c=!0}catch{f.scrollHeight}else f.selected=!1;return c||(s.selectedIndex=-1),b}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(s,l){if(o.isArray(l))return s.checked=o.inArray(o(s).val(),l)>=0}},g.checkOn||(o.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var wn,ys,Mn=o.expr.attrHandle,vs=/^(?:checked|selected)$/i,hr=g.getSetAttribute,Ii=g.input;o.fn.extend({attr:function(s,l){return on(this,o.attr,s,l,arguments.length>1)},removeAttr:function(s){return this.each(function(){o.removeAttr(this,s)})}}),o.extend({attr:function(s,l,c){var f,b,w=s.nodeType;if(!(!s||w===3||w===8||w===2)){if(typeof s.getAttribute===Fe)return o.prop(s,l,c);if((w!==1||!o.isXMLDoc(s))&&(l=l.toLowerCase(),f=o.attrHooks[l]||(o.expr.match.bool.test(l)?ys:wn)),c!==void 0)if(c===null)o.removeAttr(s,l);else return f&&"set"in f&&(b=f.set(s,c,l))!==void 0?b:(s.setAttribute(l,c+""),c);else return f&&"get"in f&&(b=f.get(s,l))!==null?b:(b=o.find.attr(s,l),b??void 0)}},removeAttr:function(s,l){var c,f,b=0,w=l&&l.match(q);if(w&&s.nodeType===1)for(;c=w[b++];)f=o.propFix[c]||c,o.expr.match.bool.test(c)?Ii&&hr||!vs.test(c)?s[f]=!1:s[o.camelCase("default-"+c)]=s[f]=!1:o.attr(s,c,""),s.removeAttribute(hr?c:f)},attrHooks:{type:{set:function(s,l){if(!g.radioValue&&l==="radio"&&o.nodeName(s,"input")){var c=s.value;return s.setAttribute("type",l),c&&(s.value=c),l}}}}}),ys={set:function(s,l,c){return l===!1?o.removeAttr(s,c):Ii&&hr||!vs.test(c)?s.setAttribute(!hr&&o.propFix[c]||c,c):s[o.camelCase("default-"+c)]=s[c]=!0,c}},o.each(o.expr.match.bool.source.match(/\w+/g),function(s,l){var c=Mn[l]||o.find.attr;Mn[l]=Ii&&hr||!vs.test(l)?function(f,b,w){var x,E;return w||(E=Mn[b],Mn[b]=x,x=c(f,b,w)!=null?b.toLowerCase():null,Mn[b]=E),x}:function(f,b,w){if(!w)return f[o.camelCase("default-"+b)]?b.toLowerCase():null}}),(!Ii||!hr)&&(o.attrHooks.value={set:function(s,l,c){if(o.nodeName(s,"input"))s.defaultValue=l;else return wn&&wn.set(s,l,c)}}),hr||(wn={set:function(s,l,c){var f=s.getAttributeNode(c);if(f||s.setAttributeNode(f=s.ownerDocument.createAttribute(c)),f.value=l+="",c==="value"||l===s.getAttribute(c))return l}},Mn.id=Mn.name=Mn.coords=function(s,l,c){var f;if(!c)return(f=s.getAttributeNode(l))&&f.value!==""?f.value:null},o.valHooks.button={get:function(s,l){var c=s.getAttributeNode(l);if(c&&c.specified)return c.value},set:wn.set},o.attrHooks.contenteditable={set:function(s,l,c){wn.set(s,l===""?!1:l,c)}},o.each(["width","height"],function(s,l){o.attrHooks[l]={set:function(c,f){if(f==="")return c.setAttribute(l,"auto"),f}}})),g.style||(o.attrHooks.style={get:function(s){return s.style.cssText||void 0},set:function(s,l){return s.style.cssText=l+""}});var ol=/^(?:input|select|textarea|button|object)$/i,Na=/^(?:a|area)$/i;o.fn.extend({prop:function(s,l){return on(this,o.prop,s,l,arguments.length>1)},removeProp:function(s){return s=o.propFix[s]||s,this.each(function(){try{this[s]=void 0,delete this[s]}catch{}})}}),o.extend({propFix:{for:"htmlFor",class:"className"},prop:function(s,l,c){var f,b,w,x=s.nodeType;if(!(!s||x===3||x===8||x===2))return w=x!==1||!o.isXMLDoc(s),w&&(l=o.propFix[l]||l,b=o.propHooks[l]),c!==void 0?b&&"set"in b&&(f=b.set(s,c,l))!==void 0?f:s[l]=c:b&&"get"in b&&(f=b.get(s,l))!==null?f:s[l]},propHooks:{tabIndex:{get:function(s){var l=o.find.attr(s,"tabindex");return l?parseInt(l,10):ol.test(s.nodeName)||Na.test(s.nodeName)&&s.href?0:-1}}}}),g.hrefNormalized||o.each(["href","src"],function(s,l){o.propHooks[l]={get:function(c){return c.getAttribute(l,4)}}}),g.optSelected||(o.propHooks.selected={get:function(s){var l=s.parentNode;return l&&(l.selectedIndex,l.parentNode&&l.parentNode.selectedIndex),null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this}),g.enctype||(o.propFix.enctype="encoding");var bs=/[\t\r\n\f]/g;o.fn.extend({addClass:function(s){var l,c,f,b,w,x,E=0,F=this.length,W=typeof s=="string"&&s;if(o.isFunction(s))return this.each(function(V){o(this).addClass(s.call(this,V,this.className))});if(W){for(l=(s||"").match(q)||[];E<F;E++)if(c=this[E],f=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(bs," "):" "),f){for(w=0;b=l[w++];)f.indexOf(" "+b+" ")<0&&(f+=b+" ");x=o.trim(f),c.className!==x&&(c.className=x)}}return this},removeClass:function(s){var l,c,f,b,w,x,E=0,F=this.length,W=arguments.length===0||typeof s=="string"&&s;if(o.isFunction(s))return this.each(function(V){o(this).removeClass(s.call(this,V,this.className))});if(W){for(l=(s||"").match(q)||[];E<F;E++)if(c=this[E],f=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(bs," "):""),f){for(w=0;b=l[w++];)for(;f.indexOf(" "+b+" ")>=0;)f=f.replace(" "+b+" "," ");x=s?o.trim(f):"",c.className!==x&&(c.className=x)}}return this},toggleClass:function(s,l){var c=typeof s;return typeof l=="boolean"&&c==="string"?l?this.addClass(s):this.removeClass(s):o.isFunction(s)?this.each(function(f){o(this).toggleClass(s.call(this,f,this.className,l),l)}):this.each(function(){if(c==="string")for(var f,b=0,w=o(this),x=s.match(q)||[];f=x[b++];)w.hasClass(f)?w.removeClass(f):w.addClass(f);else(c===Fe||c==="boolean")&&(this.className&&o._data(this,"__className__",this.className),this.className=this.className||s===!1?"":o._data(this,"__className__")||"")})},hasClass:function(s){for(var l=" "+s+" ",c=0,f=this.length;c<f;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(bs," ").indexOf(l)>=0)return!0;return!1}}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(s,l){o.fn[l]=function(c,f){return arguments.length>0?this.on(l,null,c,f):this.trigger(l)}}),o.fn.extend({hover:function(s,l){return this.mouseenter(s).mouseleave(l||s)},bind:function(s,l,c){return this.on(s,null,l,c)},unbind:function(s,l){return this.off(s,null,l)},delegate:function(s,l,c,f){return this.on(l,s,c,f)},undelegate:function(s,l,c){return arguments.length===1?this.off(s,"**"):this.off(l,s||"**",c)}});var ws=o.now(),Mi=/\?/,Li=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;o.parseJSON=function(s){if(e.JSON&&e.JSON.parse)return e.JSON.parse(s+"");var l,c=null,f=o.trim(s+"");return f&&!o.trim(f.replace(Li,function(b,w,x,E){return l&&w&&(c=0),c===0?b:(l=x||w,c+=!E-!x,"")}))?Function("return "+f)():o.error("Invalid JSON: "+s)},o.parseXML=function(s){var l,c;if(!s||typeof s!="string")return null;try{e.DOMParser?(c=new DOMParser,l=c.parseFromString(s,"text/xml")):(l=new ActiveXObject("Microsoft.XMLDOM"),l.async="false",l.loadXML(s))}catch{l=void 0}return(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+s),l};var Qt,Zn,ll=/#.*$/,Ln=/([?&])_=[^&]*/,cl=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,ul=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,dl=/^(?:GET|HEAD)$/,hl=/^\/\//,Ia=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Kn={},Ri={},Ma="*/".concat("*");try{Zn=location.href}catch{Zn=N.createElement("a"),Zn.href="",Zn=Zn.href}Qt=Ia.exec(Zn.toLowerCase())||[];function Qr(s){return function(l,c){typeof l!="string"&&(c=l,l="*");var f,b=0,w=l.toLowerCase().match(q)||[];if(o.isFunction(c))for(;f=w[b++];)f.charAt(0)==="+"?(f=f.slice(1)||"*",(s[f]=s[f]||[]).unshift(c)):(s[f]=s[f]||[]).push(c)}}function La(s,l,c,f){var b={},w=s===Ri;function x(E){var F;return b[E]=!0,o.each(s[E]||[],function(W,V){var X=V(l,c,f);if(typeof X=="string"&&!w&&!b[X])return l.dataTypes.unshift(X),x(X),!1;if(w)return!(F=X)}),F}return x(l.dataTypes[0])||!b["*"]&&x("*")}function Jr(s,l){var c,f,b=o.ajaxSettings.flatOptions||{};for(f in l)l[f]!==void 0&&((b[f]?s:c||(c={}))[f]=l[f]);return c&&o.extend(!0,s,c),s}function fl(s,l,c){for(var f,b,w,x,E=s.contents,F=s.dataTypes;F[0]==="*";)F.shift(),b===void 0&&(b=s.mimeType||l.getResponseHeader("Content-Type"));if(b){for(x in E)if(E[x]&&E[x].test(b)){F.unshift(x);break}}if(F[0]in c)w=F[0];else{for(x in c){if(!F[0]||s.converters[x+" "+F[0]]){w=x;break}f||(f=x)}w=w||f}if(w)return w!==F[0]&&F.unshift(w),c[w]}function Ra(s,l,c,f){var b,w,x,E,F,W={},V=s.dataTypes.slice();if(V[1])for(x in s.converters)W[x.toLowerCase()]=s.converters[x];for(w=V.shift();w;)if(s.responseFields[w]&&(c[s.responseFields[w]]=l),!F&&f&&s.dataFilter&&(l=s.dataFilter(l,s.dataType)),F=w,w=V.shift(),w){if(w==="*")w=F;else if(F!=="*"&&F!==w){if(x=W[F+" "+w]||W["* "+w],!x){for(b in W)if(E=b.split(" "),E[1]===w&&(x=W[F+" "+E[0]]||W["* "+E[0]],x)){x===!0?x=W[b]:W[b]!==!0&&(w=E[0],V.unshift(E[1]));break}}if(x!==!0)if(x&&s.throws)l=x(l);else try{l=x(l)}catch(X){return{state:"parsererror",error:x?X:"No conversion from "+F+" to "+w}}}}return{state:"success",data:l}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zn,type:"GET",isLocal:ul.test(Qt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ma,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,l){return l?Jr(Jr(s,o.ajaxSettings),l):Jr(o.ajaxSettings,s)},ajaxPrefilter:Qr(Kn),ajaxTransport:Qr(Ri),ajax:function(s,l){typeof s=="object"&&(l=s,s=void 0),l=l||{};var c,f,b,w,x,E,F,W,V=o.ajaxSetup({},l),X=V.context||V,te=V.context&&(X.nodeType||X.jquery)?o(X):o.event,ae=o.Deferred(),ve=o.Callbacks("once memory"),Te=V.statusCode||{},He={},Rn={},$e=0,Jt="canceled",_e={readyState:0,getResponseHeader:function(We){var st;if($e===2){if(!W)for(W={};st=cl.exec(w);)W[st[1].toLowerCase()]=st[2];st=W[We.toLowerCase()]}return st??null},getAllResponseHeaders:function(){return $e===2?w:null},setRequestHeader:function(We,st){var kr=We.toLowerCase();return $e||(We=Rn[kr]=Rn[kr]||We,He[We]=st),this},overrideMimeType:function(We){return $e||(V.mimeType=We),this},statusCode:function(We){var st;if(We)if($e<2)for(st in We)Te[st]=[Te[st],We[st]];else _e.always(We[_e.status]);return this},abort:function(We){var st=We||Jt;return F&&F.abort(st),Bi(0,st),this}};if(ae.promise(_e).complete=ve.add,_e.success=_e.done,_e.error=_e.fail,V.url=((s||V.url||Zn)+"").replace(ll,"").replace(hl,Qt[1]+"//"),V.type=l.method||l.type||V.method||V.type,V.dataTypes=o.trim(V.dataType||"*").toLowerCase().match(q)||[""],V.crossDomain==null&&(c=Ia.exec(V.url.toLowerCase()),V.crossDomain=!!(c&&(c[1]!==Qt[1]||c[2]!==Qt[2]||(c[3]||(c[1]==="http:"?"80":"443"))!==(Qt[3]||(Qt[1]==="http:"?"80":"443"))))),V.data&&V.processData&&typeof V.data!="string"&&(V.data=o.param(V.data,V.traditional)),La(Kn,V,l,_e),$e===2)return _e;E=V.global,E&&o.active++===0&&o.event.trigger("ajaxStart"),V.type=V.type.toUpperCase(),V.hasContent=!dl.test(V.type),b=V.url,V.hasContent||(V.data&&(b=V.url+=(Mi.test(b)?"&":"?")+V.data,delete V.data),V.cache===!1&&(V.url=Ln.test(b)?b.replace(Ln,"$1_="+ws++):b+(Mi.test(b)?"&":"?")+"_="+ws++)),V.ifModified&&(o.lastModified[b]&&_e.setRequestHeader("If-Modified-Since",o.lastModified[b]),o.etag[b]&&_e.setRequestHeader("If-None-Match",o.etag[b])),(V.data&&V.hasContent&&V.contentType!==!1||l.contentType)&&_e.setRequestHeader("Content-Type",V.contentType),_e.setRequestHeader("Accept",V.dataTypes[0]&&V.accepts[V.dataTypes[0]]?V.accepts[V.dataTypes[0]]+(V.dataTypes[0]!=="*"?", "+Ma+"; q=0.01":""):V.accepts["*"]);for(f in V.headers)_e.setRequestHeader(f,V.headers[f]);if(V.beforeSend&&(V.beforeSend.call(X,_e,V)===!1||$e===2))return _e.abort();Jt="abort";for(f in{success:1,error:1,complete:1})_e[f](V[f]);if(F=La(Ri,V,l,_e),!F)Bi(-1,"No Transport");else{_e.readyState=1,E&&te.trigger("ajaxSend",[_e,V]),V.async&&V.timeout>0&&(x=setTimeout(function(){_e.abort("timeout")},V.timeout));try{$e=1,F.send(He,Bi)}catch(We){if($e<2)Bi(-1,We);else throw We}}function Bi(We,st,kr,xs){var en,Ui,ei,Wt,Or,An=st;$e!==2&&($e=2,x&&clearTimeout(x),F=void 0,w=xs||"",_e.readyState=We>0?4:0,en=We>=200&&We<300||We===304,kr&&(Wt=fl(V,_e,kr)),Wt=Ra(V,Wt,_e,en),en?(V.ifModified&&(Or=_e.getResponseHeader("Last-Modified"),Or&&(o.lastModified[b]=Or),Or=_e.getResponseHeader("etag"),Or&&(o.etag[b]=Or)),We===204||V.type==="HEAD"?An="nocontent":We===304?An="notmodified":(An=Wt.state,Ui=Wt.data,ei=Wt.error,en=!ei)):(ei=An,(We||!An)&&(An="error",We<0&&(We=0))),_e.status=We,_e.statusText=(st||An)+"",en?ae.resolveWith(X,[Ui,An,_e]):ae.rejectWith(X,[_e,An,ei]),_e.statusCode(Te),Te=void 0,E&&te.trigger(en?"ajaxSuccess":"ajaxError",[_e,V,en?Ui:ei]),ve.fireWith(X,[_e,An]),E&&(te.trigger("ajaxComplete",[_e,V]),--o.active||o.event.trigger("ajaxStop")))}return _e},getJSON:function(s,l,c){return o.get(s,l,c,"json")},getScript:function(s,l){return o.get(s,void 0,l,"script")}}),o.each(["get","post"],function(s,l){o[l]=function(c,f,b,w){return o.isFunction(f)&&(w=w||b,b=f,f=void 0),o.ajax({url:c,type:l,dataType:w,data:f,success:b})}}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,l){o.fn[l]=function(c){return this.on(l,c)}}),o._evalUrl=function(s){return o.ajax({url:s,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},o.fn.extend({wrapAll:function(s){if(o.isFunction(s))return this.each(function(c){o(this).wrapAll(s.call(this,c))});if(this[0]){var l=o(s,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&l.insertBefore(this[0]),l.map(function(){for(var c=this;c.firstChild&&c.firstChild.nodeType===1;)c=c.firstChild;return c}).append(this)}return this},wrapInner:function(s){return o.isFunction(s)?this.each(function(l){o(this).wrapInner(s.call(this,l))}):this.each(function(){var l=o(this),c=l.contents();c.length?c.wrapAll(s):l.append(s)})},wrap:function(s){var l=o.isFunction(s);return this.each(function(c){o(this).wrapAll(l?s.call(this,c):s)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(s){return s.offsetWidth<=0&&s.offsetHeight<=0||!g.reliableHiddenOffsets()&&(s.style&&s.style.display||o.css(s,"display"))==="none"},o.expr.filters.visible=function(s){return!o.expr.filters.hidden(s)};var Ba=/%20/g,Ua=/\[\]$/,Cr=/\r?\n/g,ja=/^(?:submit|button|image|reset|file)$/i,gl=/^(?:input|select|textarea|keygen)/i;function As(s,l,c,f){var b;if(o.isArray(l))o.each(l,function(w,x){c||Ua.test(s)?f(s,x):As(s+"["+(typeof x=="object"?w:"")+"]",x,c,f)});else if(!c&&o.type(l)==="object")for(b in l)As(s+"["+b+"]",l[b],c,f);else f(s,l)}o.param=function(s,l){var c,f=[],b=function(w,x){x=o.isFunction(x)?x():x??"",f[f.length]=encodeURIComponent(w)+"="+encodeURIComponent(x)};if(l===void 0&&(l=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(s)||s.jquery&&!o.isPlainObject(s))o.each(s,function(){b(this.name,this.value)});else for(c in s)As(c,s[c],l,b);return f.join("&").replace(Ba,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=o.prop(this,"elements");return s?o.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!o(this).is(":disabled")&&gl.test(this.nodeName)&&!ja.test(s)&&(this.checked||!bn.test(s))}).map(function(s,l){var c=o(this).val();return c==null?null:o.isArray(c)?o.map(c,function(f){return{name:l.name,value:f.replace(Cr,`\r
`)}}):{name:l.name,value:c.replace(Cr,`\r
`)}}).get()}}),o.ajaxSettings.xhr=e.ActiveXObject!==void 0?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&ne()||he()}:ne;var pl=0,k={},U=o.ajaxSettings.xhr();e.ActiveXObject&&o(e).on("unload",function(){for(var s in k)k[s](void 0,!0)}),g.cors=!!U&&"withCredentials"in U,U=g.ajax=!!U,U&&o.ajaxTransport(function(s){if(!s.crossDomain||g.cors){var l;return{send:function(c,f){var b,w=s.xhr(),x=++pl;if(w.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(b in s.xhrFields)w[b]=s.xhrFields[b];s.mimeType&&w.overrideMimeType&&w.overrideMimeType(s.mimeType),!s.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(b in c)c[b]!==void 0&&w.setRequestHeader(b,c[b]+"");w.send(s.hasContent&&s.data||null),l=function(E,F){var W,V,X;if(l&&(F||w.readyState===4))if(delete k[x],l=void 0,w.onreadystatechange=o.noop,F)w.readyState!==4&&w.abort();else{X={},W=w.status,typeof w.responseText=="string"&&(X.text=w.responseText);try{V=w.statusText}catch{V=""}!W&&s.isLocal&&!s.crossDomain?W=X.text?200:404:W===1223&&(W=204)}X&&f(W,V,X,w.getAllResponseHeaders())},s.async?w.readyState===4?setTimeout(l):w.onreadystatechange=k[x]=l:l()},abort:function(){l&&l(void 0,!0)}}}});function ne(){try{return new e.XMLHttpRequest}catch{}}function he(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch{}}o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(s){return o.globalEval(s),s}}}),o.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),o.ajaxTransport("script",function(s){if(s.crossDomain){var l,c=N.head||o("head")[0]||N.documentElement;return{send:function(f,b){l=N.createElement("script"),l.async=!0,s.scriptCharset&&(l.charset=s.scriptCharset),l.src=s.url,l.onload=l.onreadystatechange=function(w,x){(x||!l.readyState||/loaded|complete/.test(l.readyState))&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),l=null,x||b(200,"success"))},c.insertBefore(l,c.firstChild)},abort:function(){l&&l.onload(void 0,!0)}}}});var qe=[],Ce=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=qe.pop()||o.expando+"_"+ws++;return this[s]=!0,s}}),o.ajaxPrefilter("json jsonp",function(s,l,c){var f,b,w,x=s.jsonp!==!1&&(Ce.test(s.url)?"url":typeof s.data=="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ce.test(s.data)&&"data");if(x||s.dataTypes[0]==="jsonp")return f=s.jsonpCallback=o.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,x?s[x]=s[x].replace(Ce,"$1"+f):s.jsonp!==!1&&(s.url+=(Mi.test(s.url)?"&":"?")+s.jsonp+"="+f),s.converters["script json"]=function(){return w||o.error(f+" was not called"),w[0]},s.dataTypes[0]="json",b=e[f],e[f]=function(){w=arguments},c.always(function(){e[f]=b,s[f]&&(s.jsonpCallback=l.jsonpCallback,qe.push(f)),w&&o.isFunction(b)&&b(w[0]),w=b=void 0}),"script"}),o.parseHTML=function(s,l,c){if(!s||typeof s!="string")return null;typeof l=="boolean"&&(c=l,l=!1),l=l||N;var f=j.exec(s),b=!c&&[];return f?[l.createElement(f[1])]:(f=o.buildFragment([s],l,b),b&&b.length&&o(b).remove(),o.merge([],f.childNodes))};var Xe=o.fn.load;o.fn.load=function(s,l,c){if(typeof s!="string"&&Xe)return Xe.apply(this,arguments);var f,b,w,x=this,E=s.indexOf(" ");return E>=0&&(f=s.slice(E,s.length),s=s.slice(0,E)),o.isFunction(l)?(c=l,l=void 0):l&&typeof l=="object"&&(w="POST"),x.length>0&&o.ajax({url:s,type:w,dataType:"html",data:l}).done(function(F){b=arguments,x.html(f?o("<div>").append(o.parseHTML(F)).find(f):F)}).complete(c&&function(F,W){x.each(c,b||[F.responseText,W,F])}),this},o.expr.filters.animated=function(s){return o.grep(o.timers,function(l){return s===l.elem}).length};var lt=e.document.documentElement;function ht(s){return o.isWindow(s)?s:s.nodeType===9?s.defaultView||s.parentWindow:!1}o.offset={setOffset:function(s,l,c){var f,b,w,x,E,F,W,V=o.css(s,"position"),X=o(s),te={};V==="static"&&(s.style.position="relative"),E=X.offset(),w=o.css(s,"top"),F=o.css(s,"left"),W=(V==="absolute"||V==="fixed")&&o.inArray("auto",[w,F])>-1,W?(f=X.position(),x=f.top,b=f.left):(x=parseFloat(w)||0,b=parseFloat(F)||0),o.isFunction(l)&&(l=l.call(s,c,E)),l.top!=null&&(te.top=l.top-E.top+x),l.left!=null&&(te.left=l.left-E.left+b),"using"in l?l.using.call(s,te):X.css(te)}},o.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(x){o.offset.setOffset(this,s,x)});var l,c,f={top:0,left:0},b=this[0],w=b&&b.ownerDocument;if(w)return l=w.documentElement,o.contains(l,b)?(typeof b.getBoundingClientRect!==Fe&&(f=b.getBoundingClientRect()),c=ht(w),{top:f.top+(c.pageYOffset||l.scrollTop)-(l.clientTop||0),left:f.left+(c.pageXOffset||l.scrollLeft)-(l.clientLeft||0)}):f},position:function(){if(this[0]){var s,l,c={top:0,left:0},f=this[0];return o.css(f,"position")==="fixed"?l=f.getBoundingClientRect():(s=this.offsetParent(),l=this.offset(),o.nodeName(s[0],"html")||(c=s.offset()),c.top+=o.css(s[0],"borderTopWidth",!0),c.left+=o.css(s[0],"borderLeftWidth",!0)),{top:l.top-c.top-o.css(f,"marginTop",!0),left:l.left-c.left-o.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent||lt;s&&!o.nodeName(s,"html")&&o.css(s,"position")==="static";)s=s.offsetParent;return s||lt})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,l){var c=/Y/.test(l);o.fn[s]=function(f){return on(this,function(b,w,x){var E=ht(b);if(x===void 0)return E?l in E?E[l]:E.document.documentElement[w]:b[w];E?E.scrollTo(c?o(E).scrollLeft():x,c?x:o(E).scrollTop()):b[w]=x},s,f,arguments.length,null)}}),o.each(["top","left"],function(s,l){o.cssHooks[l]=xa(g.pixelPosition,function(c,f){if(f)return f=Nn(c,l),Oi.test(f)?o(c).position()[l]+"px":f})}),o.each({Height:"height",Width:"width"},function(s,l){o.each({padding:"inner"+s,content:l,"":"outer"+s},function(c,f){o.fn[f]=function(b,w){var x=arguments.length&&(c||typeof b!="boolean"),E=c||(b===!0||w===!0?"margin":"border");return on(this,function(F,W,V){var X;return o.isWindow(F)?F.document.documentElement["client"+s]:F.nodeType===9?(X=F.documentElement,Math.max(F.body["scroll"+s],X["scroll"+s],F.body["offset"+s],X["offset"+s],X["client"+s])):V===void 0?o.css(F,W,E):o.style(F,W,V,E)},l,x?b:void 0,x,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack;var Qe=e.jQuery,$t=e.$;return o.noConflict=function(s){return e.$===o&&(e.$=$t),s&&e.jQuery===o&&(e.jQuery=Qe),o},typeof n===Fe&&(e.jQuery=e.$=o),o})})(fr);var Xu=fr.exports;const Et=Vt(Xu),Xn={initAPI(t){return t.mixin("Object",this)},merge:function(t,e,n=!1){return n?Object.assign(!0,t,e):Object.assign(t,e)},lookup:function(t,e){const n=t.split("."),i=n.pop(),a=n.length;let u=1,d=n[0];for(;(e=e[d])&&u<a;)d=n[u],u+=1;if(e)return e[i]},isObjLiteral:function(t){return typeof t=="object"&&t!==null&&typeof t.length>"u"},isArray:function(t){return typeof t=="object"&&t!==null&&typeof t.length<"u"},isJSON:function(t){try{JSON.parse(t)}catch{return!1}return!0},sort:function(t){const e=[],n={};for(const i in t)t.hasOwnProperty(i)&&e.push(i);e.sort();for(let i=0;i<e.length;i++){const a=e[i];n[a]=t[a]}return n}};var El={exports:{}};(function(t,e){(function(i,a){t.exports=a()})(self,()=>(()=>{var n={11:d=>{class y{constructor(p,v,m,g=new Date){this.type=m,this.message=p,this.metadata=v,this.timestamp=g}toJSON(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}}}d.exports=y},953:(d,y,h)=>{const p=h(510),v=h(750),m=h(11),g=h(743),A=h(964),o=h(566),S=h(58),P=h(611),R=h(929),$=h(795),O=h(698),D=h(987),G=h(100),j=h(377),{add:Z,clear:C,merge:M}=h(908),N=()=>{};class J{constructor(T,q=p.schema,K=[],le){this._notifier=le,this._config={},this._schema=q,this._delivery={sendSession:N,sendEvent:N},this._logger={debug:N,info:N,warn:N,error:N},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=J,this.Event=v,this.Breadcrumb=m,this.Session=g,this._config=this._configure(T,K),A(K.concat(this._config.plugins),ge=>{ge&&this._loadPlugin(ge)}),this._depth=1;const se=this,pe=this.notify;this.notify=function(){return pe.apply(se,arguments)}}addMetadata(T,q,K){return D.add(this._metadata,T,q,K)}getMetadata(T,q){return D.get(this._metadata,T,q)}clearMetadata(T,q){return D.clear(this._metadata,T,q)}addFeatureFlag(T,q=null){Z(this._features,this._featuresIndex,T,q)}addFeatureFlags(T){M(this._features,T,this._featuresIndex)}clearFeatureFlag(T){C(this._features,this._featuresIndex,T)}clearFeatureFlags(){this._features=[],this._featuresIndex={}}getContext(){return this._context}setContext(T){this._context=T}_configure(T,q){const K=P(q,(pe,ge)=>ge&&ge.configSchema?$({},pe,ge.configSchema):pe,this._schema),{errors:le,config:se}=P(R(K),(pe,ge)=>{const Fe=K[ge].defaultValue(T[ge]);return T[ge]!==void 0?K[ge].validate(T[ge])?K[ge].allowPartialObject?pe.config[ge]=$(Fe,T[ge]):pe.config[ge]=T[ge]:(pe.errors[ge]=K[ge].message,pe.config[ge]=Fe):pe.config[ge]=Fe,pe},{errors:{},config:{}});if(K.apiKey){if(!se.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(se.apiKey)||(le.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=$({},se.metadata),M(this._features,se.featureFlags,this._featuresIndex),this._user=$({},se.user),this._context=se.context,se.logger&&(this._logger=se.logger),se.onError&&(this._cbs.e=this._cbs.e.concat(se.onError)),se.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(se.onBreadcrumb)),se.onSession&&(this._cbs.s=this._cbs.s.concat(se.onSession)),R(le).length&&this._logger.warn(fe(le,T)),se}getUser(){return this._user}setUser(T,q,K){this._user={id:T,email:q,name:K}}_loadPlugin(T){const q=T.load(this);return T.name&&(this._plugins[`~${T.name}~`]=q),this}getPlugin(T){return this._plugins[`~${T}~`]}_setDelivery(T){this._delivery=T(this)}startSession(){const T=new g;return T.app.releaseStage=this._config.releaseStage,T.app.version=this._config.appVersion,T.app.type=this._config.appType,T._user=$({},this._user),G(this._cbs.s,T,"onSession",this._logger)?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,T)}addOnError(T,q=!1){this._cbs.e[q?"unshift":"push"](T)}removeOnError(T){this._cbs.e=S(this._cbs.e,q=>q!==T)}_addOnSessionPayload(T){this._cbs.sp.push(T)}addOnSession(T){this._cbs.s.push(T)}removeOnSession(T){this._cbs.s=S(this._cbs.s,q=>q!==T)}addOnBreadcrumb(T,q=!1){this._cbs.b[q?"unshift":"push"](T)}removeOnBreadcrumb(T){this._cbs.b=S(this._cbs.b,q=>q!==T)}pauseSession(){return this._sessionDelegate.pauseSession(this)}resumeSession(){return this._sessionDelegate.resumeSession(this)}leaveBreadcrumb(T,q,K){if(T=typeof T=="string"?T:"",K=typeof K=="string"&&o(j,K)?K:"manual",q=typeof q=="object"&&q!==null?q:{},!T)return;const le=new m(T,q,K);if(G(this._cbs.b,le,"onBreadcrumb",this._logger)){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(le),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}_isBreadcrumbTypeEnabled(T){const q=this._config.enabledBreadcrumbTypes;return q===null||o(q,T)}notify(T,q,K=N){const le=v.create(T,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(le,q,K)}_notify(T,q,K=N){if(T.app=$({},T.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),T.context=T.context||this._context,T._metadata=$({},T._metadata,this._metadata),T._user=$({},T._user,this._user),T.breadcrumbs=this._breadcrumbs.slice(),M(T._features,this._features,T._featuresIndex),this._config.enabledReleaseStages!==null&&!o(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),K(null,T);const le=T.severity,se=ge=>{this._logger.error("Error occurred in onError callback, continuing anywayâ¦"),this._logger.error(ge)},pe=[].concat(this._cbs.e).concat(q);O(pe,T,se,(ge,Fe)=>{if(ge&&se(ge),!Fe)return this._logger.debug("Event not sent due to onError callback"),K(null,T);this._isBreadcrumbTypeEnabled("error")&&J.prototype.leaveBreadcrumb.call(this,T.errors[0].errorClass,{errorClass:T.errors[0].errorClass,errorMessage:T.errors[0].errorMessage,severity:T.severity},"error"),le!==T.severity&&(T._handledState.severityReason={type:"userCallbackSetSeverity"}),T.unhandled!==T._handledState.unhandled&&(T._handledState.severityReason.unhandledOverridden=!0,T._handledState.unhandled=T.unhandled),this._session&&(this._session._track(T),T._session=this._session),this._delivery.sendEvent({apiKey:T.apiKey||this._config.apiKey,notifier:this._notifier,events:[T]},Zt=>K(Zt,T))})}}const fe=(z,T)=>new Error(`Invalid configuration
${A(R(z),K=>`  - ${K} ${z[K]}, got ${L(T[K])}`).join(`

`)}`),L=z=>{switch(typeof z){case"string":case"number":case"object":return JSON.stringify(z);default:return String(z)}};d.exports=J},510:(d,y,h)=>{const p=h(58),v=h(611),m=h(929),g=h(37),A=h(566),o=h(849),S=h(937),P=h(90),R=h(377),$=()=>({unhandledExceptions:!0,unhandledRejections:!0});d.exports.schema={apiKey:{defaultValue:()=>null,message:"is required",validate:S},appVersion:{defaultValue:()=>{},message:"should be a string",validate:O=>O===void 0||S(O)},appType:{defaultValue:()=>{},message:"should be a string",validate:O=>O===void 0||S(O)},autoDetectErrors:{defaultValue:()=>!0,message:"should be true|false",validate:O=>O===!0||O===!1},enabledErrorTypes:{defaultValue:()=>$(),message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:O=>{if(typeof O!="object"||!O)return!1;const D=m(O),G=m($());return!(p(D,j=>A(G,j)).length<D.length||p(m(O),j=>typeof O[j]!="boolean").length>0)}},onError:{defaultValue:()=>[],message:"should be a function or array of functions",validate:P},onSession:{defaultValue:()=>[],message:"should be a function or array of functions",validate:P},onBreadcrumb:{defaultValue:()=>[],message:"should be a function or array of functions",validate:P},endpoints:{defaultValue:()=>({notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}),message:"should be an object containing endpoint URLs { notify, sessions }",validate:O=>O&&typeof O=="object"&&S(O.notify)&&S(O.sessions)&&p(m(O),D=>!A(["notify","sessions"],D)).length===0},autoTrackSessions:{defaultValue:O=>!0,message:"should be true|false",validate:O=>O===!0||O===!1},enabledReleaseStages:{defaultValue:()=>null,message:"should be an array of strings",validate:O=>O===null||g(O)&&p(O,D=>typeof D=="string").length===O.length},releaseStage:{defaultValue:()=>"production",message:"should be a string",validate:O=>typeof O=="string"&&O.length},maxBreadcrumbs:{defaultValue:()=>25,message:"should be a number â¤100",validate:O=>o(0,100)(O)},enabledBreadcrumbTypes:{defaultValue:()=>R,message:`should be null or a list of available breadcrumb types (${R.join(",")})`,validate:O=>O===null||g(O)&&v(O,(D,G)=>D===!1?D:A(R,G),!0)},context:{defaultValue:()=>{},message:"should be a string",validate:O=>O===void 0||typeof O=="string"},user:{defaultValue:()=>({}),message:"should be an object with { id, email, name } properties",validate:O=>O===null||O&&v(m(O),(D,G)=>D&&A(["id","email","name"],G),!0)},metadata:{defaultValue:()=>({}),message:"should be an object",validate:O=>typeof O=="object"&&O!==null},logger:{defaultValue:()=>{},message:"should be null or an object with methods { debug, info, warn, error }",validate:O=>!O||O&&v(["debug","info","warn","error"],(D,G)=>D&&typeof O[G]=="function",!0)},redactedKeys:{defaultValue:()=>["password"],message:"should be an array of strings|regexes",validate:O=>g(O)&&O.length===p(O,D=>typeof D=="string"||D&&typeof D.test=="function").length},plugins:{defaultValue:()=>[],message:"should be an array of plugin objects",validate:O=>g(O)&&O.length===p(O,D=>D&&typeof D=="object"&&typeof D.load=="function").length},featureFlags:{defaultValue:()=>[],message:'should be an array of objects that have a "name" property',validate:O=>g(O)&&O.length===p(O,D=>D&&typeof D=="object"&&typeof D.name=="string").length}}},750:(d,y,h)=>{const p=h(866),v=h(346),m=h(391),g=h(964),A=h(611),o=h(58),S=h(795),P=h(987),R=h(908),$=h(473);class O{constructor(z,T,q=[],K=j(),le){this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=le,this._handledState=K,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this.errors=[C(z,T,O.__type,q)]}addMetadata(z,T,q){return P.add(this._metadata,z,T,q)}getMetadata(z,T){return P.get(this._metadata,z,T)}clearMetadata(z,T){return P.clear(this._metadata,z,T)}addFeatureFlag(z,T=null){R.add(this._features,this._featuresIndex,z,T)}addFeatureFlags(z){R.merge(this._features,z,this._featuresIndex)}getFeatureFlags(){return R.toEventApi(this._features)}clearFeatureFlag(z){R.clear(this._features,this._featuresIndex,z)}clearFeatureFlags(){this._features=[],this._featuresIndex={}}getUser(){return this._user}setUser(z,T,q){this._user={id:z,email:T,name:q}}toJSON(){return{payloadVersion:"4",exceptions:g(this.errors,z=>S({},z,{message:z.errorMessage})),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags()}}}const D=L=>{const z={file:L.fileName,method:G(L.functionName),lineNumber:L.lineNumber,columnNumber:L.columnNumber,code:void 0,inProject:void 0};return z.lineNumber>-1&&!z.file&&!z.method&&(z.file="global code"),z},G=L=>/^global code$/i.test(L)?"global code":L,j=()=>({unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}),Z=L=>typeof L=="string"?L:"";function C(L,z,T,q){return{errorClass:Z(L),errorMessage:Z(z),type:T,stacktrace:A(q,(K,le)=>{const se=D(le);try{return JSON.stringify(se)==="{}"?K:K.concat(se)}catch{return K}},[])}}function M(L){return L.cause?[L,...M(L.cause)]:[L]}O.getStacktrace=function(L,z,T){if(m(L))return p.parse(L).slice(z);try{return o(v.backtrace(),q=>(q.functionName||"").indexOf("StackGenerator$$")===-1).slice(1+T)}catch{return[]}},O.create=function(L,z,T,q,K=0,le){const[se,pe]=J(L,z,q,le);let ge;try{const Fe=O.getStacktrace(se,pe>0?1+pe+K:0,1+K);ge=new O(se.name,se.message,Fe,T,L)}catch{ge=new O(se.name,se.message,[],T,L)}if(se.name==="InvalidError"&&ge.addMetadata(`${q}`,"non-error parameter",N(L)),se.cause){const Fe=M(se).slice(1),Zt=g(Fe,yn=>{const Re=$(yn)&&m(yn)?p.parse(yn):[],[an]=J(yn,!0,"error cause");return an.name==="InvalidError"&&ge.addMetadata("error cause",N(yn)),C(an.name,an.message,O.__type,Re)});ge.errors.push(...Zt)}return ge};const N=L=>L===null?"null":L===void 0?"undefined":L,J=(L,z,T,q)=>{let K,le=0;const se=pe=>{const ge=T==="error cause"?"was":"received";q&&q.warn(`${T} ${ge} a non-error: "${pe}"`);const Fe=new Error(`${T} ${ge} a non-error. See "${T}" tab for more detail.`);return Fe.name="InvalidError",Fe};if(!z)$(L)?K=L:(K=se(typeof L),le+=2);else switch(typeof L){case"string":case"number":case"boolean":K=new Error(String(L)),le+=1;break;case"function":K=se("function"),le+=2;break;case"object":L!==null&&$(L)?K=L:L!==null&&fe(L)?(K=new Error(L.message||L.errorMessage),K.name=L.name||L.errorClass,le+=1):(K=se(L===null?"null":"unsupported object"),le+=2);break;default:K=se("nothing"),le+=2}if(!m(K))try{throw K}catch(pe){m(pe)&&(K=pe,le=1)}return[K,le]};O.__type="browserjs";const fe=L=>(typeof L.name=="string"||typeof L.errorClass=="string")&&(typeof L.message=="string"||typeof L.errorMessage=="string");d.exports=O},994:d=>{d.exports=(y,h,p)=>{let v=0;const m=()=>{if(v>=y.length)return p(null,!0);h(y[v],(g,A)=>{if(g)return p(g);if(A===!1)return p(null,!1);v++,m()})};m()}},377:d=>{d.exports=["navigation","request","process","log","user","state","error","manual"]},698:(d,y,h)=>{const p=h(994);d.exports=(v,m,g,A)=>{p(v,(S,P)=>{if(typeof S!="function")return P(null);try{if(S.length!==2){const R=S(m);return R&&typeof R.then=="function"?R.then($=>setTimeout(()=>P(null,$)),$=>{setTimeout(()=>(g($),P(null,!0)))}):P(null,R)}S(m,(R,$)=>{if(R)return g(R),P(null);P(null,$)})}catch(R){g(R),P(null)}},A)}},866:(d,y,h)=>{d.exports=h(247)},795:d=>{d.exports=function(y){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(y[v]=p[v])}return y}},58:(d,y,h)=>{const p=h(611);d.exports=(v,m)=>p(v,(g,A,o,S)=>m(A,o,S)?g.concat(A):g,[])},566:(d,y,h)=>{const p=h(611);d.exports=(v,m)=>p(v,(g,A,o,S)=>g===!0||A===m,!1)},37:d=>{d.exports=y=>Object.prototype.toString.call(y)==="[object Array]"},929:d=>{const y=!{toString:null}.propertyIsEnumerable("toString"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];d.exports=p=>{const v=[];let m;for(m in p)Object.prototype.hasOwnProperty.call(p,m)&&v.push(m);if(!y)return v;for(let g=0,A=h.length;g<A;g++)Object.prototype.hasOwnProperty.call(p,h[g])&&v.push(h[g]);return v}},964:(d,y,h)=>{const p=h(611);d.exports=(v,m)=>p(v,(g,A,o,S)=>g.concat(m(A,o,S)),[])},611:d=>{d.exports=(y,h,p)=>{let v=p;for(let m=0,g=y.length;m<g;m++)v=h(v,y[m],m,y);return v}},908:(d,y,h)=>{const p=h(964),v=h(58),m=h(37),g=h(575);function A(R,$,O,D){if(typeof O!="string")return;D===void 0?D=null:D!==null&&typeof D!="string"&&(D=g(D));const G=$[O];if(typeof G=="number"){R[G]={name:O,variant:D};return}R.push({name:O,variant:D}),$[O]=R.length-1}function o(R,$,O){if(m($)){for(let D=0;D<$.length;++D){const G=$[D];G===null||typeof G!="object"||A(R,O,G.name,G.variant)}return R}}function S(R){return p(v(R,Boolean),({name:$,variant:O})=>{const D={featureFlag:$};return typeof O=="string"&&(D.variant=O),D})}function P(R,$,O){const D=$[O];typeof D=="number"&&(R[D]=null,delete $[O])}d.exports={add:A,clear:P,merge:o,toEventApi:S}},391:d=>{d.exports=y=>!!y&&(!!y.stack||!!y.stacktrace||!!y["opera#sourceloc"])&&typeof(y.stack||y.stacktrace||y["opera#sourceloc"])=="string"&&y.stack!==`${y.name}: ${y.message}`},473:(d,y,h)=>{d.exports=h(232)},599:(d,y,h)=>{const p=h(575),v=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];d.exports.event=(m,g)=>{let A=p(m,null,null,{redactedPaths:v,redactedKeys:g});return A.length>1e6&&(m.events[0]._metadata={notifier:`WARNING!
Serialized payload was ${A.length/1e6}MB (limit = 1MB)
metadata was removed`},A=p(m,null,null,{redactedPaths:v,redactedKeys:g})),A},d.exports.session=(m,g)=>p(m,null,null)},987:(d,y,h)=>{const p=h(795),v=(A,o,S,P)=>{if(!o)return;let R;if(S===null)return g(A,o);typeof S=="object"&&(R=S),typeof S=="string"&&(R={[S]:P}),R&&(o==="__proto__"||o==="constructor"||o==="prototype"||(A[o]||(A[o]={}),A[o]=p({},A[o],R)))},m=(A,o,S)=>{if(typeof o=="string"){if(!S)return A[o];if(A[o])return A[o][S]}},g=(A,o,S)=>{if(typeof o=="string"){if(!S){delete A[o];return}o==="__proto__"||o==="constructor"||o==="prototype"||A[o]&&delete A[o][S]}};d.exports={add:v,get:m,clear:g}},100:d=>{d.exports=(y,h,p,v)=>{let m=!1;const g=y.slice();for(;!m&&g.length;)try{m=g.pop()(h)===!1}catch(A){v.error(`Error occurred in ${p} callback, continuing anywayâ¦`),v.error(A)}return m}},849:d=>{d.exports=(y=1,h=1/0)=>p=>typeof p=="number"&&parseInt(""+p,10)===p&&p>=y&&p<=h},90:(d,y,h)=>{const p=h(58),v=h(37);d.exports=m=>typeof m=="function"||v(m)&&p(m,g=>typeof g=="function").length===m.length},937:d=>{d.exports=y=>typeof y=="string"&&!!y.length},277:(d,y,h)=>{var p=h(42),v=h(408),m=0,g=4,A=36,o=Math.pow(A,g);function S(){return v((Math.random()*o<<0).toString(A),g)}function P(){return m=m<o?m:0,m++,m-1}function R(){var $="c",O=new Date().getTime().toString(A),D=v(P().toString(A),g),G=p(),j=S()+S();return $+O+D+G+j}R.fingerprint=p,d.exports=R},42:(d,y,h)=>{var p=h(408),v=typeof window=="object"?window:self,m=0;for(var g in v)Object.hasOwnProperty.call(v,g)&&m++;var A=navigator.mimeTypes?navigator.mimeTypes.length:0,o=p((A+navigator.userAgent.length).toString(36)+m.toString(36),4);d.exports=function(){return o}},408:d=>{d.exports=function(h,p){var v="000000000"+h;return v.substr(v.length-p)}},575:d=>{d.exports=function(O,D,G,j){var Z=j&&j.redactedKeys?j.redactedKeys:[],C=j&&j.redactedPaths?j.redactedPaths:[];return JSON.stringify($(O,Z,C),D,G)};var y=20,h=25e3,p=8,v="...";function m(O){return O instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(O))}function g(O){return"[Throws: "+(O?O.message:"?")+"]"}function A(O,D){for(var G=0,j=O.length;G<j;G++)if(O[G]===D)return!0;return!1}function o(O,D){for(var G=0,j=O.length;G<j;G++)if(D.indexOf(O[G])===0)return!0;return!1}function S(O,D){for(var G=0,j=O.length;G<j;G++)if(typeof O[G]=="string"&&O[G].toLowerCase()===D.toLowerCase()||O[G]&&typeof O[G].test=="function"&&O[G].test(D))return!0;return!1}function P(O){return Object.prototype.toString.call(O)==="[object Array]"}function R(O,D){try{return O[D]}catch(G){return g(G)}}function $(O,D,G){var j=[],Z=0;function C(M,N){function J(){return N.length>p&&Z>h}if(Z++,N.length>y||J())return v;if(M===null||typeof M!="object")return M;if(A(j,M))return"[Circular]";if(j.push(M),typeof M.toJSON=="function")try{Z--;var fe=C(M.toJSON(),N);return j.pop(),fe}catch(pe){return g(pe)}var L=m(M);if(L){Z--;var z=C({name:M.name,message:M.message},N);return j.pop(),z}if(P(M)){for(var T=[],q=0,K=M.length;q<K;q++){if(J()){T.push(v);break}T.push(C(M[q],N.concat("[]")))}return j.pop(),T}var le={};try{for(var se in M)if(Object.prototype.hasOwnProperty.call(M,se)){if(o(G,N.join("."))&&S(D,se)){le[se]="[REDACTED]";continue}if(J()){le[se]=v;break}le[se]=C(R(M,se),N.concat(se))}}catch{}return j.pop(),le}return C(O,[])}},247:function(d,y,h){var p,v,m;(function(g,A){v=[h(998)],p=A,m=typeof p=="function"?p.apply(y,v):p,m!==void 0&&(d.exports=m)})(this,function(A){var o=/(^|@)\S+\:\d+/,S=/^\s*at .*(\S+\:\d+|\(native\))/m,P=/^(eval@)?(\[native code\])?$/;return{parse:function($){if(typeof $.stacktrace<"u"||typeof $["opera#sourceloc"]<"u")return this.parseOpera($);if($.stack&&$.stack.match(S))return this.parseV8OrIE($);if($.stack)return this.parseFFOrSafari($);throw new Error("Cannot parse given Error object")},extractLocation:function($){if($.indexOf(":")===-1)return[$];var O=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,D=O.exec($.replace(/[\(\)]/g,""));return[D[1],D[2]||void 0,D[3]||void 0]},parseV8OrIE:function($){var O=$.stack.split(`
`).filter(function(D){return!!D.match(S)},this);return O.map(function(D){D.indexOf("(eval ")>-1&&(D=D.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var G=D.replace(/^\s+/,"").replace(/\(eval code/g,"("),j=G.match(/ (\((.+):(\d+):(\d+)\)$)/);G=j?G.replace(j[0],""):G;var Z=G.split(/\s+/).slice(1),C=this.extractLocation(j?j[1]:Z.pop()),M=Z.join(" ")||void 0,N=["eval","<anonymous>"].indexOf(C[0])>-1?void 0:C[0];return new A({functionName:M,fileName:N,lineNumber:C[1],columnNumber:C[2],source:D})},this)},parseFFOrSafari:function($){var O=$.stack.split(`
`).filter(function(D){return!D.match(P)},this);return O.map(function(D){if(D.indexOf(" > eval")>-1&&(D=D.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),D.indexOf("@")===-1&&D.indexOf(":")===-1)return new A({functionName:D});var G=/((.*".+"[^@]*)?[^@]*)(?:@)/,j=D.match(G),Z=j&&j[1]?j[1]:void 0,C=this.extractLocation(D.replace(G,""));return new A({functionName:Z,fileName:C[0],lineNumber:C[1],columnNumber:C[2],source:D})},this)},parseOpera:function($){return!$.stacktrace||$.message.indexOf(`
`)>-1&&$.message.split(`
`).length>$.stacktrace.split(`
`).length?this.parseOpera9($):$.stack?this.parseOpera11($):this.parseOpera10($)},parseOpera9:function($){for(var O=/Line (\d+).*script (?:in )?(\S+)/i,D=$.message.split(`
`),G=[],j=2,Z=D.length;j<Z;j+=2){var C=O.exec(D[j]);C&&G.push(new A({fileName:C[2],lineNumber:C[1],source:D[j]}))}return G},parseOpera10:function($){for(var O=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,D=$.stacktrace.split(`
`),G=[],j=0,Z=D.length;j<Z;j+=2){var C=O.exec(D[j]);C&&G.push(new A({functionName:C[3]||void 0,fileName:C[2],lineNumber:C[1],source:D[j]}))}return G},parseOpera11:function($){var O=$.stack.split(`
`).filter(function(D){return!!D.match(o)&&!D.match(/^Error created at/)},this);return O.map(function(D){var G=D.split("@"),j=this.extractLocation(G.pop()),Z=G.shift()||"",C=Z.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,M;Z.match(/\(([^\)]*)\)/)&&(M=Z.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var N=M===void 0||M==="[arguments not available]"?void 0:M.split(",");return new A({functionName:C,args:N,fileName:j[0],lineNumber:j[1],columnNumber:j[2],source:D})},this)}}})},232:d=>{d.exports=y;function y(h){switch(Object.prototype.toString.call(h)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return h instanceof Error}}},346:function(d,y,h){var p,v,m;(function(g,A){v=[h(998)],p=A,m=typeof p=="function"?p.apply(y,v):p,m!==void 0&&(d.exports=m)})(this,function(g){return{backtrace:function(o){var S=[],P=10;typeof o=="object"&&typeof o.maxStackSize=="number"&&(P=o.maxStackSize);for(var R=arguments.callee;R&&S.length<P&&R.arguments;){for(var $=new Array(R.arguments.length),O=0;O<$.length;++O)$[O]=R.arguments[O];/function(?:\s+([\w$]+))+\s*\(/.test(R.toString())?S.push(new g({functionName:RegExp.$1||void 0,args:$})):S.push(new g({args:$}));try{R=R.caller}catch{break}}return S}}})},998:function(d,y){var h,p,v;(function(m,g){p=[],h=g,v=typeof h=="function"?h.apply(y,p):h,v!==void 0&&(d.exports=v)})(this,function(){function m(Z){return!isNaN(parseFloat(Z))&&isFinite(Z)}function g(Z){return Z.charAt(0).toUpperCase()+Z.substring(1)}function A(Z){return function(){return this[Z]}}var o=["isConstructor","isEval","isNative","isToplevel"],S=["columnNumber","lineNumber"],P=["fileName","functionName","source"],R=["args"],$=o.concat(S,P,R);function O(Z){if(Z instanceof Object)for(var C=0;C<$.length;C++)Z.hasOwnProperty($[C])&&Z[$[C]]!==void 0&&this["set"+g($[C])](Z[$[C]])}O.prototype={getArgs:function(){return this.args},setArgs:function(Z){if(Object.prototype.toString.call(Z)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=Z},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Z){if(Z instanceof O)this.evalOrigin=Z;else if(Z instanceof Object)this.evalOrigin=new O(Z);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var Z=this.getFunctionName()||"{anonymous}",C="("+(this.getArgs()||[]).join(",")+")",M=this.getFileName()?"@"+this.getFileName():"",N=m(this.getLineNumber())?":"+this.getLineNumber():"",J=m(this.getColumnNumber())?":"+this.getColumnNumber():"";return Z+C+M+N+J}};for(var D=0;D<o.length;D++)O.prototype["get"+g(o[D])]=A(o[D]),O.prototype["set"+g(o[D])]=function(Z){return function(C){this[Z]=!!C}}(o[D]);for(var G=0;G<S.length;G++)O.prototype["get"+g(S[G])]=A(S[G]),O.prototype["set"+g(S[G])]=function(Z){return function(C){if(!m(C))throw new TypeError(Z+" must be a Number");this[Z]=Number(C)}}(S[G]);for(var j=0;j<P.length;j++)O.prototype["get"+g(P[j])]=A(P[j]),O.prototype["set"+g(P[j])]=function(Z){return function(C){this[Z]=String(C)}}(P[j]);return O})},743:(d,y,h)=>{const p=h(277);class v{constructor(){this.id=p(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}getUser(){return this._user}setUser(g,A,o){this._user={id:g,email:A,name:o}}toJSON(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}}_track(g){this[g._handledState.unhandled?"_unhandled":"_handled"]+=1}}d.exports=v},798:(d,y,h)=>{const p=h(795),v="bugsnag-anonymous-id",m=A=>{try{const o=A.localStorage;let S=o.getItem(v);return S&&/^c[a-z0-9]{20,32}$/.test(S)||(S=h(79)(),o.setItem(v,S)),S}catch{}};d.exports=(A=navigator,o=window)=>({load:S=>{const P={locale:A.browserLanguage||A.systemLanguage||A.userLanguage||A.language,userAgent:A.userAgent};o&&o.screen&&o.screen.orientation&&o.screen.orientation.type?P.orientation=o.screen.orientation.type:o&&o.document&&(P.orientation=o.document.documentElement.clientWidth>o.document.documentElement.clientHeight?"landscape":"portrait"),S._config.generateAnonymousId&&(P.id=m(o)),S.addOnSession(R=>{R.device=p({},R.device,P),S._config.collectUserIp||g(R)}),S.addOnError(R=>{R.device=p({},R.device,P,{time:new Date}),S._config.collectUserIp||g(R)},!0)},configSchema:{generateAnonymousId:{validate:S=>S===!0||S===!1,defaultValue:()=>!0,message:"should be true|false"}}});const g=A=>{const o=A.getUser();(!o||!o.id)&&A.setUser(A.device.id)}},79:(d,y,h)=>{var p=h(963),v=h(879),m=0,g=4,A=36,o=Math.pow(A,g);function S(){return v((Math.random()*o<<0).toString(A),g)}function P(){return m=m<o?m:0,m++,m-1}function R(){var $="c",O=new Date().getTime().toString(A),D=v(P().toString(A),g),G=p(),j=S()+S();return $+O+D+G+j}R.fingerprint=p,d.exports=R},963:(d,y,h)=>{var p=h(879),v=typeof window=="object"?window:self,m=0;for(var g in v)Object.hasOwnProperty.call(v,g)&&m++;var A=navigator.mimeTypes?navigator.mimeTypes.length:0,o=p((A+navigator.userAgent.length).toString(36)+m.toString(36),4);d.exports=function(){return o}},879:d=>{d.exports=function(h,p){var v="000000000"+h;return v.substr(v.length-p)}},223:(d,y,h)=>{const p=h(566);d.exports={load:m=>{m._sessionDelegate=v}};const v={startSession:(m,g)=>{const A=m;return A._session=g,A._pausedSession=null,A._config.enabledReleaseStages!==null&&!p(A._config.enabledReleaseStages,A._config.releaseStage)?(A._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),A):(A._delivery.sendSession({notifier:A._notifier,device:g.device,app:g.app,sessions:[{id:g.id,startedAt:g.startedAt,user:g._user}]}),A)},resumeSession:m=>m._session?m:m._pausedSession?(m._session=m._pausedSession,m._pausedSession=null,m):m.startSession(),pauseSession:m=>{m._pausedSession=m._session,m._session=null}}},155:(d,y,h)=>{const p=h(795);d.exports={load:v=>{v._config.collectUserIp||v.addOnError(m=>{m._user&&typeof m._user.id>"u"&&delete m._user.id,m._user=p({id:"[REDACTED]"},m._user),m.request=p({clientIp:"[REDACTED]"},m.request)})},configSchema:{collectUserIp:{defaultValue:()=>!0,message:"should be true|false",validate:v=>v===!0||v===!1}}}},584:d=>{d.exports=(p=window,v="window onerror")=>({load:m=>{if(!m._config.autoDetectErrors||!m._config.enabledErrorTypes.unhandledExceptions)return;function g(o,S,P,R,$){if(P===0&&/Script error\.?/.test(o))m._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{const O={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}};let D;if($)D=m.Event.create($,!0,O,v,1),y(D.errors[0].stacktrace,S,P,R);else if(typeof o=="object"&&o!==null&&(!S||typeof S!="string")&&!P&&!R&&!$){const G=o.type?`Event: ${o.type}`:"Error",j=o.message||o.detail||"";D=m.Event.create({name:G,message:j},!0,O,v,1),D.originalError=o,D.addMetadata(v,{event:o,extraParameters:S})}else D=m.Event.create(o,!0,O,v,1),y(D.errors[0].stacktrace,S,P,R);m._notify(D)}typeof A=="function"&&A.apply(this,arguments)}const A=p.onerror;p.onerror=g}});const y=(p,v,m,g)=>{p[0]||p.push({});const A=p[0];!A.file&&typeof v=="string"&&(A.file=v),!A.lineNumber&&h(m)&&(A.lineNumber=m),A.columnNumber||(h(g)?A.columnNumber=g:window.event&&h(window.event.errorCharacter)&&(A.columnNumber=window.event.errorCharacter))},h=p=>typeof p=="number"&&String.call(p)!=="NaN"},536:(d,y,h)=>{const p=h(964),v=h(473);d.exports=(g=window)=>({load:o=>{if(!o._config.autoDetectErrors||!o._config.enabledErrorTypes.unhandledRejections)return;const S=P=>{let R=P.reason,$=!1;try{P.detail&&P.detail.reason&&(R=P.detail.reason,$=!0)}catch{}const O=o.Event.create(R,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,o._logger);$&&p(O.errors[0].stacktrace,m(R)),o._notify(O,D=>{v(D.originalError)&&!D.originalError.stack&&D.addMetadata("unhandledRejection handler",{[Object.prototype.toString.call(D.originalError)]:{name:D.originalError.name,message:D.originalError.message,code:D.originalError.code}})})};"addEventListener"in g?g.addEventListener("unhandledrejection",S):g.onunhandledrejection=(P,R)=>{S({detail:{reason:P,promise:R}})}}});const m=g=>A=>{A.file!==g.toString()&&A.method&&(A.method=A.method.replace(/^\s+/,""))}},182:(d,y,h)=>{const{schema:p}=h(510),v=h(964),m=h(795);d.exports={appType:{...p.appType,defaultValue:()=>"workerjs"},logger:m({},p.logger,{defaultValue:()=>typeof console<"u"&&typeof console.debug=="function"?g():void 0}),autoTrackSessions:{...p.autoTrackSessions,defaultValue:()=>!1},autoDetectErrors:{...p.autoTrackSessions,defaultValue:()=>!1}};const g=()=>{const A={},o=console.log;return v(["debug","info","warn","error"],S=>{const P=console[S];A[S]=typeof P=="function"?P.bind(console,"[bugsnag]"):o.bind(console,"[bugsnag]")}),A}},230:d=>{const y=/^(chrome|moz|safari|safari-web)-extension:/;d.exports={name:"preventDiscard",load:h=>{h.addOnError(p=>{p.errors.forEach(({stacktrace:v})=>{v.forEach(function(m){m.file=m.file.replace(y,"$1_extension:")})})},!0)}}}},i={};function a(d){var y=i[d];if(y!==void 0)return y.exports;var h=i[d]={exports:{}};return n[d].call(h.exports,h,h.exports,a),h.exports}a.n=d=>{var y=d&&d.__esModule?()=>d.default:()=>d;return a.d(y,{a:y}),y},a.d=(d,y)=>{for(var h in y)a.o(y,h)&&!a.o(d,h)&&Object.defineProperty(d,h,{enumerable:!0,get:y[h]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(d,y)=>Object.prototype.hasOwnProperty.call(d,y);var u={};return(()=>{a.d(u,{default:()=>T});var d=a(953),y=a.n(d),h=a(510),p=a(599);const m=(q,K=a.g.fetch)=>({sendEvent:(le,se=()=>{})=>{const pe=q._config.endpoints.notify;K(pe,{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":le.apiKey||q._config.apiKey,"Bugsnag-Payload-Version":"4","Bugsnag-Sent-At":new Date().toISOString()},body:p.event(le,q._config.redactedKeys)}).then(()=>{se(null)}).catch(ge=>{q._logger.error(ge),se(ge)})},sendSession:(le,se=()=>{})=>{const pe=q._config.endpoints.sessions;K(pe,{method:"POST",headers:{"Content-Type":"application/json","Bugsnag-Api-Key":q._config.apiKey,"Bugsnag-Payload-Version":"1","Bugsnag-Sent-At":new Date().toISOString()},body:p.session(le,q._config.redactedKeys)}).then(()=>{se(null)}).catch(ge=>{q._logger.error(ge),se(ge)})}});var g=a(155),A=a.n(g),o=a(584),S=a.n(o),P=a(536),R=a.n(P),$=a(182),O=a.n($),D=a(798),G=a.n(D),j=a(223),Z=a.n(j),C=a(230),M=a.n(C);const N="Bugsnag Web Worker",J="https://github.com/bugsnag/bugsnag-js",fe="7.22.7",L={...h.schema,...O()},z={createClient:q=>{typeof q=="string"&&(q={apiKey:q}),q||(q={});const K=[G()(navigator,null),Z(),A(),M(),S()(self,"worker onerror"),R()(self)],le=new(y())(q,L,K,{name:N,version:fe,url:J});return le._setDelivery(m),le._logger.debug("Loaded!"),le._config.autoTrackSessions?le.startSession():le},start:q=>z._client?(z._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),z._client):(z._client=z.createClient(q),z._client),isStarted:()=>z._client!=null};Object.getOwnPropertyNames(y().prototype).forEach(q=>{/^_/.test(q)||q==="constructor"||(z[q]=function(){if(!z._client)return console.log(`Bugsnag.${q}() was called before Bugsnag.start()`);z._client._depth+=1;const K=z._client[q].apply(z._client,arguments);return z._client._depth-=1,K})});const T=z})(),u=u.default,u})())})(El);var Qu=El.exports;const Ju=Vt(Qu);function Es(t){return t==null?t:t instanceof Error?{errorClass:t.name,errorMessage:t.message}:typeof t=="function"?"[Function]":Array.isArray(t)?t.map(Es):typeof t=="object"?Object.entries(t).reduce((e,[n,i])=>(e[n]=Es(i),e),{}):t}var Cl={exports:{}};(function(t,e){(function(n,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Yn,function(n){var i,a;if(!((a=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&a.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const u="The message port closed before a response was received.",d=y=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(M,N=void 0){super(N),this.createItem=M}get(M){return this.has(M)||this.set(M,this.createItem(M)),super.get(M)}}const v=C=>C&&typeof C=="object"&&typeof C.then=="function",m=(C,M)=>(...N)=>{y.runtime.lastError?C.reject(new Error(y.runtime.lastError.message)):M.singleCallbackArg||N.length<=1&&M.singleCallbackArg!==!1?C.resolve(N[0]):C.resolve(N)},g=C=>C==1?"argument":"arguments",A=(C,M)=>function(J,...fe){if(fe.length<M.minArgs)throw new Error(`Expected at least ${M.minArgs} ${g(M.minArgs)} for ${C}(), got ${fe.length}`);if(fe.length>M.maxArgs)throw new Error(`Expected at most ${M.maxArgs} ${g(M.maxArgs)} for ${C}(), got ${fe.length}`);return new Promise((L,z)=>{if(M.fallbackToNoCallback)try{J[C](...fe,m({resolve:L,reject:z},M))}catch(T){console.warn(`${C} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,T),J[C](...fe),M.fallbackToNoCallback=!1,M.noCallback=!0,L()}else M.noCallback?(J[C](...fe),L()):J[C](...fe,m({resolve:L,reject:z},M))})},o=(C,M,N)=>new Proxy(M,{apply(J,fe,L){return N.call(fe,C,...L)}});let S=Function.call.bind(Object.prototype.hasOwnProperty);const P=(C,M={},N={})=>{let J=Object.create(null),fe={has(z,T){return T in C||T in J},get(z,T,q){if(T in J)return J[T];if(!(T in C))return;let K=C[T];if(typeof K=="function")if(typeof M[T]=="function")K=o(C,C[T],M[T]);else if(S(N,T)){let le=A(T,N[T]);K=o(C,C[T],le)}else K=K.bind(C);else if(typeof K=="object"&&K!==null&&(S(M,T)||S(N,T)))K=P(K,M[T],N[T]);else if(S(N,"*"))K=P(K,M[T],N["*"]);else return Object.defineProperty(J,T,{configurable:!0,enumerable:!0,get(){return C[T]},set(le){C[T]=le}}),K;return J[T]=K,K},set(z,T,q,K){return T in J?J[T]=q:C[T]=q,!0},defineProperty(z,T,q){return Reflect.defineProperty(J,T,q)},deleteProperty(z,T){return Reflect.deleteProperty(J,T)}},L=Object.create(C);return new Proxy(L,fe)},R=C=>({addListener(M,N,...J){M.addListener(C.get(N),...J)},hasListener(M,N){return M.hasListener(C.get(N))},removeListener(M,N){M.removeListener(C.get(N))}}),$=new p(C=>typeof C!="function"?C:function(N){const J=P(N,{},{getContent:{minArgs:0,maxArgs:0}});C(J)}),O=new p(C=>typeof C!="function"?C:function(N,J,fe){let L=!1,z,T=new Promise(se=>{z=function(pe){L=!0,se(pe)}}),q;try{q=C(N,J,z)}catch(se){q=Promise.reject(se)}const K=q!==!0&&v(q);if(q!==!0&&!K&&!L)return!1;const le=se=>{se.then(pe=>{fe(pe)},pe=>{let ge;pe&&(pe instanceof Error||typeof pe.message=="string")?ge=pe.message:ge="An unexpected error occurred",fe({__mozWebExtensionPolyfillReject__:!0,message:ge})}).catch(pe=>{console.error("Failed to send onMessage rejected reply",pe)})};return le(K?q:T),!0}),D=({reject:C,resolve:M},N)=>{y.runtime.lastError?y.runtime.lastError.message===u?M():C(new Error(y.runtime.lastError.message)):N&&N.__mozWebExtensionPolyfillReject__?C(new Error(N.message)):M(N)},G=(C,M,N,...J)=>{if(J.length<M.minArgs)throw new Error(`Expected at least ${M.minArgs} ${g(M.minArgs)} for ${C}(), got ${J.length}`);if(J.length>M.maxArgs)throw new Error(`Expected at most ${M.maxArgs} ${g(M.maxArgs)} for ${C}(), got ${J.length}`);return new Promise((fe,L)=>{const z=D.bind(null,{resolve:fe,reject:L});J.push(z),N.sendMessage(...J)})},j={devtools:{network:{onRequestFinished:R($)}},runtime:{onMessage:R(O),onMessageExternal:R(O),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":Z},services:{"*":Z},websites:{"*":Z}},P(y,j,h)};n.exports=d(chrome)}else n.exports=globalThis.browser})})(Cl);var ed=Cl.exports;const Ht=Vt(ed);let tn;function td(){const[,t,e]=/(.*?):\/\/(.*)/.exec(Ht.runtime.getURL("/"))??["","",""];return`${t.replace(/-/g,"_")}://${e}`}function nd(t){return typeof t=="string"||typeof t=="boolean"||typeof t=="number"}function rd(t){var e;return!!((e=t==null?void 0:t.stacktrace)!=null&&e.find(n=>n.file.startsWith(Pl)))}function id(t,e){return!!e.find(n=>t.errorMessage.match(n))}function sd(t){t.errors.forEach(e=>{e.stacktrace=e.stacktrace.map(n=>(n.file=n.file.replace(/chrome-extension:/g,"chrome_extension:"),n.file=n.file.replace(/moz-extension:/g,"moz_extension:"),n.file=n.file.replace(/safari-extension:/g,"safari_extension:"),n.file=n.file.replace(/safari-web-extension:/g,"safari_web_extension:"),n))})}function kl(...t){return t.find(e=>e instanceof Error)??ad(t)}function ad(...t){return t.map(e=>nd(e)?String(e):JSON.stringify(Es(e))).join(" ")}function Ol(t){return e=>{e.errors.forEach(n=>{const i=1+n.stacktrace.findIndex(a=>a.method===t.name);n.stacktrace=n.stacktrace.slice(i)})}}let Pl="";const Ir={bugsnagClient:null,apiKey:"14be373dfe46ae64888094a22d25ce46",sampleGroup:0,initAPI(t){return tn=t,tn.mixin("Bugsnag",{init:this.init.bind(this)})},async init(t){if(Pl=td(),this.bugsnagClient!=null)return;await Promise.all([tn.Requirements.init()]);const e=await tn.Storage.get("install-id"),n=tn.Settings.get("hasAcceptedPrivacyPolicy"),i=await tn.Requirements.isOnboardingCompleted(),a=tn.Settings.get("isNewUser");this.bugsnagClient=Ju.start({apiKey:this.apiKey,appType:"Web Extension",collectUserIp:!1,appVersion:tn.Chrome.Extension.getVersion(),enabledReleaseStages:["production"],releaseStage:"production",context:t??"unknown",logger:null,generateAnonymousId:!1,onError:[sd,this.isValidError.bind(this)],onSession:[this.isValidSession.bind(this)]}),this.bugsnagClient.setUser(e),this.bugsnagClient.addMetadata("user properties",{hasAcceptedPrivacyPolicy:n,hasCompletedOnboarding:i,isNewUser:a}),this.sampleGroup=await tn.Storage.getOrSet("bugsnagSamplingGroup",100*Math.random())},notifyError(...t){var e;(e=this.bugsnagClient)==null||e.notify(kl(t),n=>{Ol(this.notifyError)(n),n.severity="error"})},notifyWarning(...t){var e;(e=this.bugsnagClient)==null||e.notify(kl(t),n=>{Ol(this.notifyWarning)(n),n.severity="warning"})},logBreadcrumb(...t){var e;(e=this.bugsnagClient)==null||e.leaveBreadcrumb(typeof t[0]=="string"?t[0]:"(no message)",{args:Es(t)},"log")},disabled(){return!this.isReady()||!this.canUploadData()},async isValidError(t){if(this.disabled()||!this.isSampled())return!1;const e=tn.RemoteConfig.get("bugsnagIgnoreMatches");return t.errors?!!t.errors.find(n=>rd(n)&&!id(n,e)):!1},isValidSession(){if(this.disabled())return!1},canUploadData(){return tn.Settings.get("hasAcceptedPrivacyPolicy")??!1},isReady(){return tn.Settings.isInitialized()},isSampled(){const t=tn.RemoteConfig.get("bugsnagSampling");return this.sampleGroup<t}};function od(){return{log:function(...e){const[n,i,a,u]=e,d=u??"INFO";d==="ERROR"?Ir.notifyError(...e):d==="WARN"?(Ir.logBreadcrumb(...e),Ir.notifyWarning(...e)):d==="INFO"?Ir.logBreadcrumb(...e):Ir.logBreadcrumb(...e)}}}const un=od(),ft={firstToLower:function(t){return typeof t=="string"?t.toLowerCase()[0]+t.slice(1):t},firstToUpper:function(t){return typeof t=="string"?t.toUpperCase()[0]+t.slice(1):t},isEmpty:function(t){return t===null||t===""||typeof t>"u"||Object.keys(t).length===0},sanitizeMSWordChars:function(t){let e=t;return e=e.replace(/[\u2018\u2019\u201A]/g,"'"),e=e.replace(/[\u201C\u201D\u201E]/g,'"'),e=e.replace(/\u2026/g,"..."),e=e.replace(/[\u2013\u2014]/g,"--"),e=e.replace(/\u02C6/g,"^"),e=e.replace(/\u2039/g,"<"),e=e.replace(/\u203A/g,">"),e=e.replace(/[\u02DC\u00A0]/g," "),e},getDecoupledPromise(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});return{resolve:t,reject:e,promise:n}},createScopedLog(t){return(e,n,i=void 0,a="INFO")=>{un.log(`${t}.${e}`,n,i,a)}},isTopFrame(){return window.self===window.top},initAPI(t){return t.mixin("Utils",{firstToLower:this.firstToLower.bind(this),firstToUpper:this.firstToUpper.bind(this),isEmpty:this.isEmpty.bind(this),sanitizeMSWordChars:this.sanitizeMSWordChars.bind(this),getDecoupledPromise:this.getDecoupledPromise.bind(this),createScopedLog:this.createScopedLog.bind(this),isTopFrame:this.isTopFrame.bind(this)})}},ld=ft.createScopedLog("API"),ee=(()=>(()=>{let e={},n=null;const i=function(...a){let u="",d=null;if(a.length===0)throw new TypeError("Mixin has no arguments");if(ld("mixin","Adding mixin to API",a,"DEBUG"),a.length===2&&typeof a[0]=="string"){if(u=a[0],typeof a[1]=="object"&&a[1]!==null?d=a[1]:typeof a[1]=="function"&&(d=a[1]()),d)if(u.indexOf(".")>-1){const y=u.split("."),h=y.pop(),p={};n||(n=Xn.lookup(u,e)),p[h]=n?Xn.merge(n,d,!0):d,i(y.join("."),p)}else{const y=u;u in e?e[y]=Xn.merge(e[y],d):e[y]=d,n=null}}else a.length===1&&typeof a[0]=="object"&&a[0]!==null?e=Xn.merge(e,a[0]):a.length===1&&typeof a[0]=="function"&&(d=a[0](),typeof d=="object"&&d!==null&&(e=Xn.merge(e,d)))};return i({mixin:i}),e})())();function Cs(t){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cs(t)}function Mr(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Mt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function jn(t){Mt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Cs(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function cd(t,e){Mt(2,arguments);var n=jn(t).getTime(),i=Mr(e);return new Date(n+i)}var ud={};function ks(){return ud}function dd(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function hd(t){return Mt(1,arguments),t instanceof Date||Cs(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function fd(t){if(Mt(1,arguments),!hd(t)&&typeof t!="number")return!1;var e=jn(t);return!isNaN(Number(e))}function gd(t,e){Mt(2,arguments);var n=Mr(e);return cd(t,-n)}var pd=864e5;function md(t){Mt(1,arguments);var e=jn(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),a=n-i;return Math.floor(a/pd)+1}function Os(t){Mt(1,arguments);var e=1,n=jn(t),i=n.getUTCDay(),a=(i<e?7:0)+i-e;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Dl(t){Mt(1,arguments);var e=jn(t),n=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var a=Os(i),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var d=Os(u);return e.getTime()>=a.getTime()?n+1:e.getTime()>=d.getTime()?n:n-1}function yd(t){Mt(1,arguments);var e=Dl(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var i=Os(n);return i}var vd=6048e5;function bd(t){Mt(1,arguments);var e=jn(t),n=Os(e).getTime()-yd(e).getTime();return Math.round(n/vd)+1}function Ps(t,e){var n,i,a,u,d,y,h,p;Mt(1,arguments);var v=ks(),m=Mr((n=(i=(a=(u=e==null?void 0:e.weekStartsOn)!==null&&u!==void 0?u:e==null||(d=e.locale)===null||d===void 0||(y=d.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&a!==void 0?a:v.weekStartsOn)!==null&&i!==void 0?i:(h=v.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=jn(t),A=g.getUTCDay(),o=(A<m?7:0)+A-m;return g.setUTCDate(g.getUTCDate()-o),g.setUTCHours(0,0,0,0),g}function Nl(t,e){var n,i,a,u,d,y,h,p;Mt(1,arguments);var v=jn(t),m=v.getUTCFullYear(),g=ks(),A=Mr((n=(i=(a=(u=e==null?void 0:e.firstWeekContainsDate)!==null&&u!==void 0?u:e==null||(d=e.locale)===null||d===void 0||(y=d.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&a!==void 0?a:g.firstWeekContainsDate)!==null&&i!==void 0?i:(h=g.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var o=new Date(0);o.setUTCFullYear(m+1,0,A),o.setUTCHours(0,0,0,0);var S=Ps(o,e),P=new Date(0);P.setUTCFullYear(m,0,A),P.setUTCHours(0,0,0,0);var R=Ps(P,e);return v.getTime()>=S.getTime()?m+1:v.getTime()>=R.getTime()?m:m-1}function wd(t,e){var n,i,a,u,d,y,h,p;Mt(1,arguments);var v=ks(),m=Mr((n=(i=(a=(u=e==null?void 0:e.firstWeekContainsDate)!==null&&u!==void 0?u:e==null||(d=e.locale)===null||d===void 0||(y=d.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&a!==void 0?a:v.firstWeekContainsDate)!==null&&i!==void 0?i:(h=v.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&n!==void 0?n:1),g=Nl(t,e),A=new Date(0);A.setUTCFullYear(g,0,m),A.setUTCHours(0,0,0,0);var o=Ps(A,e);return o}var Ad=6048e5;function xd(t,e){Mt(1,arguments);var n=jn(t),i=Ps(n,e).getTime()-wd(n,e).getTime();return Math.round(i/Ad)+1}function Ve(t,e){for(var n=t<0?"-":"",i=Math.abs(t).toString();i.length<e;)i="0"+i;return n+i}var Sd={y:function(e,n){var i=e.getUTCFullYear(),a=i>0?i:1-i;return Ve(n==="yy"?a%100:a,n.length)},M:function(e,n){var i=e.getUTCMonth();return n==="M"?String(i+1):Ve(i+1,2)},d:function(e,n){return Ve(e.getUTCDate(),n.length)},a:function(e,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(e,n){return Ve(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ve(e.getUTCHours(),n.length)},m:function(e,n){return Ve(e.getUTCMinutes(),n.length)},s:function(e,n){return Ve(e.getUTCSeconds(),n.length)},S:function(e,n){var i=n.length,a=e.getUTCMilliseconds(),u=Math.floor(a*Math.pow(10,i-3));return Ve(u,n.length)}};const gr=Sd;var ri={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_d={G:function(e,n,i){var a=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return i.era(a,{width:"abbreviated"});case"GGGGG":return i.era(a,{width:"narrow"});case"GGGG":default:return i.era(a,{width:"wide"})}},y:function(e,n,i){if(n==="yo"){var a=e.getUTCFullYear(),u=a>0?a:1-a;return i.ordinalNumber(u,{unit:"year"})}return gr.y(e,n)},Y:function(e,n,i,a){var u=Nl(e,a),d=u>0?u:1-u;if(n==="YY"){var y=d%100;return Ve(y,2)}return n==="Yo"?i.ordinalNumber(d,{unit:"year"}):Ve(d,n.length)},R:function(e,n){var i=Dl(e);return Ve(i,n.length)},u:function(e,n){var i=e.getUTCFullYear();return Ve(i,n.length)},Q:function(e,n,i){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return Ve(a,2);case"Qo":return i.ordinalNumber(a,{unit:"quarter"});case"QQQ":return i.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,n,i){var a=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return Ve(a,2);case"qo":return i.ordinalNumber(a,{unit:"quarter"});case"qqq":return i.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,n,i){var a=e.getUTCMonth();switch(n){case"M":case"MM":return gr.M(e,n);case"Mo":return i.ordinalNumber(a+1,{unit:"month"});case"MMM":return i.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(a,{width:"wide",context:"formatting"})}},L:function(e,n,i){var a=e.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return Ve(a+1,2);case"Lo":return i.ordinalNumber(a+1,{unit:"month"});case"LLL":return i.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(a,{width:"wide",context:"standalone"})}},w:function(e,n,i,a){var u=xd(e,a);return n==="wo"?i.ordinalNumber(u,{unit:"week"}):Ve(u,n.length)},I:function(e,n,i){var a=bd(e);return n==="Io"?i.ordinalNumber(a,{unit:"week"}):Ve(a,n.length)},d:function(e,n,i){return n==="do"?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):gr.d(e,n)},D:function(e,n,i){var a=md(e);return n==="Do"?i.ordinalNumber(a,{unit:"dayOfYear"}):Ve(a,n.length)},E:function(e,n,i){var a=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return i.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(a,{width:"short",context:"formatting"});case"EEEE":default:return i.day(a,{width:"wide",context:"formatting"})}},e:function(e,n,i,a){var u=e.getUTCDay(),d=(u-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return Ve(d,2);case"eo":return i.ordinalNumber(d,{unit:"day"});case"eee":return i.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(u,{width:"short",context:"formatting"});case"eeee":default:return i.day(u,{width:"wide",context:"formatting"})}},c:function(e,n,i,a){var u=e.getUTCDay(),d=(u-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return Ve(d,n.length);case"co":return i.ordinalNumber(d,{unit:"day"});case"ccc":return i.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(u,{width:"narrow",context:"standalone"});case"cccccc":return i.day(u,{width:"short",context:"standalone"});case"cccc":default:return i.day(u,{width:"wide",context:"standalone"})}},i:function(e,n,i){var a=e.getUTCDay(),u=a===0?7:a;switch(n){case"i":return String(u);case"ii":return Ve(u,n.length);case"io":return i.ordinalNumber(u,{unit:"day"});case"iii":return i.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(a,{width:"short",context:"formatting"});case"iiii":default:return i.day(a,{width:"wide",context:"formatting"})}},a:function(e,n,i){var a=e.getUTCHours(),u=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(e,n,i){var a=e.getUTCHours(),u;switch(a===12?u=ri.noon:a===0?u=ri.midnight:u=a/12>=1?"pm":"am",n){case"b":case"bb":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(e,n,i){var a=e.getUTCHours(),u;switch(a>=17?u=ri.evening:a>=12?u=ri.afternoon:a>=4?u=ri.morning:u=ri.night,n){case"B":case"BB":case"BBB":return i.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(u,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(e,n,i){if(n==="ho"){var a=e.getUTCHours()%12;return a===0&&(a=12),i.ordinalNumber(a,{unit:"hour"})}return gr.h(e,n)},H:function(e,n,i){return n==="Ho"?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):gr.H(e,n)},K:function(e,n,i){var a=e.getUTCHours()%12;return n==="Ko"?i.ordinalNumber(a,{unit:"hour"}):Ve(a,n.length)},k:function(e,n,i){var a=e.getUTCHours();return a===0&&(a=24),n==="ko"?i.ordinalNumber(a,{unit:"hour"}):Ve(a,n.length)},m:function(e,n,i){return n==="mo"?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):gr.m(e,n)},s:function(e,n,i){return n==="so"?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):gr.s(e,n)},S:function(e,n){return gr.S(e,n)},X:function(e,n,i,a){var u=a._originalDate||e,d=u.getTimezoneOffset();if(d===0)return"Z";switch(n){case"X":return Ml(d);case"XXXX":case"XX":return Lr(d);case"XXXXX":case"XXX":default:return Lr(d,":")}},x:function(e,n,i,a){var u=a._originalDate||e,d=u.getTimezoneOffset();switch(n){case"x":return Ml(d);case"xxxx":case"xx":return Lr(d);case"xxxxx":case"xxx":default:return Lr(d,":")}},O:function(e,n,i,a){var u=a._originalDate||e,d=u.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Il(d,":");case"OOOO":default:return"GMT"+Lr(d,":")}},z:function(e,n,i,a){var u=a._originalDate||e,d=u.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Il(d,":");case"zzzz":default:return"GMT"+Lr(d,":")}},t:function(e,n,i,a){var u=a._originalDate||e,d=Math.floor(u.getTime()/1e3);return Ve(d,n.length)},T:function(e,n,i,a){var u=a._originalDate||e,d=u.getTime();return Ve(d,n.length)}};function Il(t,e){var n=t>0?"-":"+",i=Math.abs(t),a=Math.floor(i/60),u=i%60;if(u===0)return n+String(a);var d=e||"";return n+String(a)+d+Ve(u,2)}function Ml(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ve(Math.abs(t)/60,2)}return Lr(t,e)}function Lr(t,e){var n=e||"",i=t>0?"-":"+",a=Math.abs(t),u=Ve(Math.floor(a/60),2),d=Ve(a%60,2);return i+u+n+d}const Td=_d;var Ll=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Rl=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Ed=function(e,n){var i=e.match(/(P+)(p+)?/)||[],a=i[1],u=i[2];if(!u)return Ll(e,n);var d;switch(a){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",Ll(a,n)).replace("{{time}}",Rl(u,n))},Cd={p:Rl,P:Ed};const kd=Cd;var Od=["D","DD"],Pd=["YY","YYYY"];function Dd(t){return Od.indexOf(t)!==-1}function Nd(t){return Pd.indexOf(t)!==-1}function Bl(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Id={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Md=function(e,n,i){var a,u=Id[e];return typeof u=="string"?a=u:n===1?a=u.one:a=u.other.replace("{{count}}",n.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+a:a+" ago":a};const Ld=Md;function za(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,i=t.formats[n]||t.formats[t.defaultWidth];return i}}var Rd={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bd={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ud={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jd={date:za({formats:Rd,defaultWidth:"full"}),time:za({formats:Bd,defaultWidth:"full"}),dateTime:za({formats:Ud,defaultWidth:"full"})};const Fd=jd;var $d={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wd=function(e,n,i,a){return $d[e]};const Vd=Wd;function Fi(t){return function(e,n){var i=n!=null&&n.context?String(n.context):"standalone",a;if(i==="formatting"&&t.formattingValues){var u=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):u;a=t.formattingValues[d]||t.formattingValues[u]}else{var y=t.defaultWidth,h=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[h]||t.values[y]}var p=t.argumentCallback?t.argumentCallback(e):e;return a[p]}}var Hd={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qd={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zd={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gd={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yd=function(e,n){var i=Number(e),a=i%100;if(a>20||a<10)switch(a%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},Xd={ordinalNumber:Yd,era:Fi({values:Hd,defaultWidth:"wide"}),quarter:Fi({values:qd,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Fi({values:zd,defaultWidth:"wide"}),day:Fi({values:Gd,defaultWidth:"wide"}),dayPeriod:Fi({values:Zd,defaultWidth:"wide",formattingValues:Kd,defaultFormattingWidth:"wide"})};const Qd=Xd;function $i(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.width,a=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],u=e.match(a);if(!u)return null;var d=u[0],y=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(y)?eh(y,function(m){return m.test(d)}):Jd(y,function(m){return m.test(d)}),p;p=t.valueCallback?t.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;var v=e.slice(d.length);return{value:p,rest:v}}}function Jd(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function eh(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function th(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.match(t.matchPattern);if(!i)return null;var a=i[0],u=e.match(t.parsePattern);if(!u)return null;var d=t.valueCallback?t.valueCallback(u[0]):u[0];d=n.valueCallback?n.valueCallback(d):d;var y=e.slice(a.length);return{value:d,rest:y}}}var nh=/^(\d+)(th|st|nd|rd)?/i,rh=/\d+/i,ih={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sh={any:[/^b/i,/^(a|c)/i]},ah={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oh={any:[/1/i,/2/i,/3/i,/4/i]},lh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ch={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hh={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fh={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gh={ordinalNumber:th({matchPattern:nh,parsePattern:rh,valueCallback:function(e){return parseInt(e,10)}}),era:$i({matchPatterns:ih,defaultMatchWidth:"wide",parsePatterns:sh,defaultParseWidth:"any"}),quarter:$i({matchPatterns:ah,defaultMatchWidth:"wide",parsePatterns:oh,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:$i({matchPatterns:lh,defaultMatchWidth:"wide",parsePatterns:ch,defaultParseWidth:"any"}),day:$i({matchPatterns:uh,defaultMatchWidth:"wide",parsePatterns:dh,defaultParseWidth:"any"}),dayPeriod:$i({matchPatterns:hh,defaultMatchWidth:"any",parsePatterns:fh,defaultParseWidth:"any"})},ph={code:"en-US",formatDistance:Ld,formatLong:Fd,formatRelative:Vd,localize:Qd,match:gh,options:{weekStartsOn:0,firstWeekContainsDate:1}};const mh=ph;var yh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bh=/^'([^]*?)'?$/,wh=/''/g,Ah=/[a-zA-Z]/;function xh(t,e,n){var i,a,u,d,y,h,p,v,m,g,A,o,S,P,R,$,O,D;Mt(2,arguments);var G=String(e),j=ks(),Z=(i=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:j.locale)!==null&&i!==void 0?i:mh,C=Mr((u=(d=(y=(h=n==null?void 0:n.firstWeekContainsDate)!==null&&h!==void 0?h:n==null||(p=n.locale)===null||p===void 0||(v=p.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&y!==void 0?y:j.firstWeekContainsDate)!==null&&d!==void 0?d:(m=j.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&u!==void 0?u:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=Mr((A=(o=(S=(P=n==null?void 0:n.weekStartsOn)!==null&&P!==void 0?P:n==null||(R=n.locale)===null||R===void 0||($=R.options)===null||$===void 0?void 0:$.weekStartsOn)!==null&&S!==void 0?S:j.weekStartsOn)!==null&&o!==void 0?o:(O=j.locale)===null||O===void 0||(D=O.options)===null||D===void 0?void 0:D.weekStartsOn)!==null&&A!==void 0?A:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Z.localize)throw new RangeError("locale must contain localize property");if(!Z.formatLong)throw new RangeError("locale must contain formatLong property");var N=jn(t);if(!fd(N))throw new RangeError("Invalid time value");var J=dd(N),fe=gd(N,J),L={firstWeekContainsDate:C,weekStartsOn:M,locale:Z,_originalDate:N},z=G.match(vh).map(function(T){var q=T[0];if(q==="p"||q==="P"){var K=kd[q];return K(T,Z.formatLong)}return T}).join("").match(yh).map(function(T){if(T==="''")return"'";var q=T[0];if(q==="'")return Sh(T);var K=Td[q];if(K)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Nd(T)&&Bl(T,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Dd(T)&&Bl(T,e,String(t)),K(fe,T,Z.localize,L);if(q.match(Ah))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return T}).join("");return z}function Sh(t){var e=t.match(bh);return e?e[1].replace(wh,"'"):t}function Wi(){return xh(new Date,"OOOO")}function Ds(){let t=/^.+?(-|_)(.+?)($|-|_)/,e=[...typeof navigator<"u"?navigator.languages:[],Intl.DateTimeFormat().resolvedOptions().locale].map(n=>{var i;return(i=n.match(t))==null?void 0:i[2]}).find(n=>!!n);return e==null?void 0:e.toUpperCase()}var _h=13,Ul="abcdefghijklmnopqrstuvwxyz0123456789",Th=Ul.length;function Eh(){let t="";for(let e=0;e<_h;e++)t+=Ul.charAt(Math.floor(Math.random()*Th));return t}function Ch(t,e){if(typeof t=="string"&&(t=kh(t.trim())),!t)return;let n=(e==null?void 0:e.removeGenericPrefixes)??!0,i=t.hostname;return n&&(i=i.replace(/^(m|mobile|amp|www|www1|www2|www3|tab|item|checkout|secure|user|account|accounts|web|app|open|i|v|preview|cdn|l|id|nid|user|sso|signin|login|auth0|play|api|click|detail|dashboard|console|manage|support|help)\./,"").replace(/.*\.zoom\.us/,"zoom.us").replace(/.*\.slack\.com/,"slack.com").replace(/.*\.wikipedia\.org/,"wikipedia.org").replace(/.*\.amazonaws\.com/,"amazonaws.com").replace(/.*\.netsuite\.com/,"netsuite.com").replace(/.*\.tumblr\.com/,"tumblr.com").replace(/.*\.deviantart\.com/,"deviantart.com")),{hostname:i,path:Oh(t.pathname)}}function kh(t){if(!t)return;let e=n=>{let i=new URL(n);if(!/^https?:/.test(i.protocol))throw Error("Invalid URL, ignored protocol found");if(!i.hostname)throw Error("Invalid URL, no hostname");if(i.hostname.lastIndexOf(".")>=i.hostname.length-2)throw Error("Invalid URL, bad domain ending");return i};try{return e(t)}catch{}if(!t.includes("://"))try{return e("https://"+t)}catch{}}function Oh(t){return t.endsWith("/")?t.substring(0,Math.max(1,t.length-1)):t}var Ga={exports:{}};(function(t,e){(function(n,i){var a="1.0.37",u="",d="?",y="function",h="undefined",p="object",v="string",m="major",g="model",A="name",o="type",S="vendor",P="version",R="architecture",$="console",O="mobile",D="tablet",G="smarttv",j="wearable",Z="embedded",C=500,M="Amazon",N="Apple",J="ASUS",fe="BlackBerry",L="Browser",z="Chrome",T="Edge",q="Firefox",K="Google",le="Huawei",se="LG",pe="Microsoft",ge="Motorola",Fe="Opera",Zt="Samsung",yn="Sharp",Re="Sony",an="Xiaomi",sr="Zebra",jt="Facebook",Sr="Chromium OS",qn="Mac OS",vn=function(De,Be){var be={};for(var je in De)Be[je]&&Be[je].length%2===0?be[je]=Be[je].concat(De[je]):be[je]=De[je];return be},Kt=function(De){for(var Be={},be=0;be<De.length;be++)Be[De[be].toUpperCase()]=De[be];return Be},on=function(De,Be){return typeof De===v?bn(Be).indexOf(bn(De))!==-1:!1},bn=function(De){return De.toLowerCase()},Gr=function(De){return typeof De===v?De.replace(/[^\d\.]/g,u).split(".")[0]:i},Zr=function(De,Be){if(typeof De===v)return De=De.replace(/^\s\s*/,u),typeof Be===h?De:De.substring(0,C)},ar=function(De,Be){for(var be=0,je,Yt,tt,Le,we,Xt;be<Be.length&&!we;){var cr=Be[be],ur=Be[be+1];for(je=Yt=0;je<cr.length&&!we&&cr[je];)if(we=cr[je++].exec(De),we)for(tt=0;tt<ur.length;tt++)Xt=we[++Yt],Le=ur[tt],typeof Le===p&&Le.length>0?Le.length===2?typeof Le[1]==y?this[Le[0]]=Le[1].call(this,Xt):this[Le[0]]=Le[1]:Le.length===3?typeof Le[1]===y&&!(Le[1].exec&&Le[1].test)?this[Le[0]]=Xt?Le[1].call(this,Xt,Le[2]):i:this[Le[0]]=Xt?Xt.replace(Le[1],Le[2]):i:Le.length===4&&(this[Le[0]]=Xt?Le[3].call(this,Xt.replace(Le[1],Le[2])):i):this[Le]=Xt||i;be+=2}},_r=function(De,Be){for(var be in Be)if(typeof Be[be]===p&&Be[be].length>0){for(var je=0;je<Be[be].length;je++)if(on(Be[be][je],De))return be===d?i:be}else if(on(Be[be],De))return be===d?i:be;return De},Ei={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},or={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},kn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[P,[A,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[P,[A,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[A,P],[/opios[\/ ]+([\w\.]+)/i],[P,[A,Fe+" Mini"]],[/\bopr\/([\w\.]+)/i],[P,[A,Fe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[P,[A,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[A,P],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[P,[A,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[P,[A,"WeChat"]],[/konqueror\/([\w\.]+)/i],[P,[A,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[P,[A,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[P,[A,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[P,[A,"Smart Lenovo "+L]],[/(avast|avg)\/([\w\.]+)/i],[[A,/(.+)/,"$1 Secure "+L],P],[/\bfocus\/([\w\.]+)/i],[P,[A,q+" Focus"]],[/\bopt\/([\w\.]+)/i],[P,[A,Fe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[P,[A,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[P,[A,"Dolphin"]],[/coast\/([\w\.]+)/i],[P,[A,Fe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[P,[A,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[P,[A,q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[A,"360 "+L]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[A,/(.+)/,"$1 "+L],P],[/samsungbrowser\/([\w\.]+)/i],[P,[A,Zt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[A,/_/g," "],P],[/metasr[\/ ]?([\d\.]+)/i],[P,[A,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[A,"Sogou Mobile"],P],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[A,P],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[A],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[A,jt],P],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[A,P],[/\bgsa\/([\w\.]+) .*safari\//i],[P,[A,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[P,[A,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[P,[A,z+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[A,z+" WebView"],P],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[P,[A,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[A,P],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[P,[A,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[P,A],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[A,[P,_r,Ei]],[/(webkit|khtml)\/([\w\.]+)/i],[A,P],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[A,"Netscape"],P],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[P,[A,q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[A,P],[/(cobalt)\/([\w\.]+)/i],[A,[P,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,bn]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows (ce|mobile); ppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[R,/ower/,u,bn]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,bn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[S,Zt],[o,D]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[g,[S,Zt],[o,O]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[S,N],[o,O]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[S,N],[o,D]],[/(macintosh);/i],[g,[S,N]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[S,yn],[o,O]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[S,le],[o,D]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[S,le],[o,O]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[g,/_/g," "],[S,an],[o,O]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[S,an],[o,D]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[S,"OPPO"],[o,O]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[S,"Vivo"],[o,O]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[g,[S,"Realme"],[o,O]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[S,ge],[o,O]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[S,ge],[o,D]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[S,se],[o,D]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[S,se],[o,O]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[S,"Lenovo"],[o,D]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[S,"Nokia"],[o,O]],[/(pixel c)\b/i],[g,[S,K],[o,D]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[S,K],[o,O]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[S,Re],[o,O]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[S,Re],[o,D]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[S,"OnePlus"],[o,O]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[S,M],[o,D]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[S,M],[o,O]],[/(playbook);[-\w\),; ]+(rim)/i],[g,S,[o,D]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[S,fe],[o,O]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[S,J],[o,D]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[S,J],[o,O]],[/(nexus 9)/i],[g,[S,"HTC"],[o,D]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[S,[g,/_/g," "],[o,O]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[S,"Acer"],[o,D]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[S,"Meizu"],[o,O]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[g,[S,"Ulefone"],[o,O]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[S,g,[o,O]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[S,g,[o,D]],[/(surface duo)/i],[g,[S,pe],[o,D]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[S,"Fairphone"],[o,O]],[/(u304aa)/i],[g,[S,"AT&T"],[o,O]],[/\bsie-(\w*)/i],[g,[S,"Siemens"],[o,O]],[/\b(rct\w+) b/i],[g,[S,"RCA"],[o,D]],[/\b(venue[\d ]{2,7}) b/i],[g,[S,"Dell"],[o,D]],[/\b(q(?:mv|ta)\w+) b/i],[g,[S,"Verizon"],[o,D]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[S,"Barnes & Noble"],[o,D]],[/\b(tm\d{3}\w+) b/i],[g,[S,"NuVision"],[o,D]],[/\b(k88) b/i],[g,[S,"ZTE"],[o,D]],[/\b(nx\d{3}j) b/i],[g,[S,"ZTE"],[o,O]],[/\b(gen\d{3}) b.+49h/i],[g,[S,"Swiss"],[o,O]],[/\b(zur\d{3}) b/i],[g,[S,"Swiss"],[o,D]],[/\b((zeki)?tb.*\b) b/i],[g,[S,"Zeki"],[o,D]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[S,"Dragon Touch"],g,[o,D]],[/\b(ns-?\w{0,9}) b/i],[g,[S,"Insignia"],[o,D]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[S,"NextBook"],[o,D]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[S,"Voice"],g,[o,O]],[/\b(lvtel\-)?(v1[12]) b/i],[[S,"LvTel"],g,[o,O]],[/\b(ph-1) /i],[g,[S,"Essential"],[o,O]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[S,"Envizen"],[o,D]],[/\b(trio[-\w\. ]+) b/i],[g,[S,"MachSpeed"],[o,D]],[/\btu_(1491) b/i],[g,[S,"Rotor"],[o,D]],[/(shield[\w ]+) b/i],[g,[S,"Nvidia"],[o,D]],[/(sprint) (\w+)/i],[S,g,[o,O]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[S,pe],[o,O]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[S,sr],[o,D]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[S,sr],[o,O]],[/smart-tv.+(samsung)/i],[S,[o,G]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[S,Zt],[o,G]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[S,se],[o,G]],[/(apple) ?tv/i],[S,[g,N+" TV"],[o,G]],[/crkey/i],[[g,z+"cast"],[S,K],[o,G]],[/droid.+aft(\w+)( bui|\))/i],[g,[S,M],[o,G]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[S,yn],[o,G]],[/(bravia[\w ]+)( bui|\))/i],[g,[S,Re],[o,G]],[/(mitv-\w{5}) bui/i],[g,[S,an],[o,G]],[/Hbbtv.*(technisat) (.*);/i],[S,g,[o,G]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[S,Zr],[g,Zr],[o,G]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[o,G]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[S,g,[o,$]],[/droid.+; (shield) bui/i],[g,[S,"Nvidia"],[o,$]],[/(playstation [345portablevi]+)/i],[g,[S,Re],[o,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[S,pe],[o,$]],[/((pebble))app/i],[S,g,[o,j]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[S,N],[o,j]],[/droid.+; (glass) \d/i],[g,[S,K],[o,j]],[/droid.+; (wt63?0{2,3})\)/i],[g,[S,sr],[o,j]],[/(quest( 2| pro)?)/i],[g,[S,jt],[o,j]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[S,[o,Z]],[/(aeobc)\b/i],[g,[S,M],[o,Z]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[g,[o,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[o,D]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[o,D]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[o,O]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[S,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[P,[A,T+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[P,[A,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[A,P],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[P,A]],os:[[/microsoft (windows) (vista|xp)/i],[A,P],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[A,[P,_r,or]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[P,_r,or],[A,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[P,/_/g,"."],[A,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[A,qn],[P,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[P,A],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[A,P],[/\(bb(10);/i],[P,[A,fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[P,[A,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[P,[A,q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[P,[A,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[P,[A,"watchOS"]],[/crkey\/([\d\.]+)/i],[P,[A,z+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[A,Sr],P],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[A,P],[/(sunos) ?([\w\.\d]*)/i],[[A,"Solaris"],P],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[A,P]]},Pt=function(De,Be){if(typeof De===p&&(Be=De,De=i),!(this instanceof Pt))return new Pt(De,Be).getResult();var be=typeof n!==h&&n.navigator?n.navigator:i,je=De||(be&&be.userAgent?be.userAgent:u),Yt=be&&be.userAgentData?be.userAgentData:i,tt=Be?vn(kn,Be):kn,Le=be&&be.userAgent==je;return this.getBrowser=function(){var we={};return we[A]=i,we[P]=i,ar.call(we,je,tt.browser),we[m]=Gr(we[P]),Le&&be&&be.brave&&typeof be.brave.isBrave==y&&(we[A]="Brave"),we},this.getCPU=function(){var we={};return we[R]=i,ar.call(we,je,tt.cpu),we},this.getDevice=function(){var we={};return we[S]=i,we[g]=i,we[o]=i,ar.call(we,je,tt.device),Le&&!we[o]&&Yt&&Yt.mobile&&(we[o]=O),Le&&we[g]=="Macintosh"&&be&&typeof be.standalone!==h&&be.maxTouchPoints&&be.maxTouchPoints>2&&(we[g]="iPad",we[o]=D),we},this.getEngine=function(){var we={};return we[A]=i,we[P]=i,ar.call(we,je,tt.engine),we},this.getOS=function(){var we={};return we[A]=i,we[P]=i,ar.call(we,je,tt.os),Le&&!we[A]&&Yt&&Yt.platform!="Unknown"&&(we[A]=Yt.platform.replace(/chrome os/i,Sr).replace(/macos/i,qn)),we},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return je},this.setUA=function(we){return je=typeof we===v&&we.length>C?Zr(we,C):we,this},this.setUA(je),this};Pt.VERSION=a,Pt.BROWSER=Kt([A,P,m]),Pt.CPU=Kt([R]),Pt.DEVICE=Kt([g,S,o,$,O,G,D,j,Z]),Pt.ENGINE=Pt.OS=Kt([A,P]),t.exports&&(e=t.exports=Pt),e.UAParser=Pt;var On=typeof n!==h&&(n.jQuery||n.Zepto);if(On&&!On.ua){var lr=new Pt;On.ua=lr.getResult(),On.ua.get=function(){return lr.getUA()},On.ua.set=function(De){lr.setUA(De);var Be=lr.getResult();for(var be in Be)On.ua[be]=Be[be]}}})(typeof window=="object"?window:Yn)})(Ga,Ga.exports);var Ph=Ga.exports;const Za=Vt(Ph),Lt=ft.createScopedLog("Amplitude");let wt;const jl={installIdKey:"install-id",initialized:null,installId:null,browser:null,os:null,version:null,sessionId:null,sampleGroup:null,enabled:null,initAPI(t){return wt=t,wt.mixin("Analytics",{init:this.init.bind(this),event:this.event.bind(this),bindHtmlEvents:this.bindHtmlEvents.bind(this)})},async init(){if(this.initialized!=null)Lt==null||Lt("init","Amplitude already initialized",{sessionId:this.sessionId},"DEBUG");else{const{promise:t,resolve:e}=wt.Utils.getDecoupledPromise();this.initialized=t;const n=new Za(navigator.userAgent);this.sessionId=Date.now(),this.os=n.getOS(),this.browser=n.getBrowser(),this.version=wt.Chrome.Extension.getVersion(),this.sampleGroup=await wt.Storage.getOrSet("analyticsSamplingGroup",100*Math.random());const i=wt.Settings.get("hasAcceptedPrivacyPolicy")??!0,a=!0;this.enabled=i&&a,this.installId=await wt.Storage.get(this.installIdKey),this.installId||(this.installId=Eh(),await wt.Storage.set({[this.installIdKey]:this.installId})),e(),Lt==null||Lt("init","Initialized Amplitude",this,"INFO")}},async event(t,e){if(!this.initialized){Lt==null||Lt("event","Cannot report event until initialized",this,"WARN");return}const n=Date.now();await this.initialized;const i=wt.RemoteConfig.get("amplitudeSampling"),a=wt.RemoteConfig.get("defaultAmplitudeSampling"),u=i[t]??a,d=this.sampleGroup<u,y=this.enabled&&d,h={event_type:t,user_id:this.installId,user_properties:{hasAcceptedToS:!!wt.Settings.get("hasAcceptedToS"),hasAcceptedPrivacyPolicy:!!wt.Settings.get("hasAcceptedPrivacyPolicy"),explicitlyDeclinedPrivacyPolicy:!!wt.Settings.get("explicitlyDeclinedPrivacyPolicy"),isNewUser:!!wt.Settings.get("isNewUser"),is18OrOlder:wt.Settings.get("is18OrOlder"),age:wt.Settings.get("age")},time:n,event_properties:{page:`${location.protocol}//${location.hostname}${location.pathname}`,...e},app_version:this.version,os_name:this.browser.name,os_version:this.browser.version,platform:this.os.name};Lt==null||Lt("event",y?"Reported event":"Skipped event",{event:h,samplePercentInt:u,isSampled:d,thisEnabled:this.enabled},"DEBUG"),y&&await wt.AmplitudeAPI.uploadEvents(h)},bindHtmlEvents(){Lt==null||Lt("bindHtmlEvents","Binding amplitude events to DOM",void 0,"DEBUG");const t="data-analytics-click";document.querySelectorAll(`*[${t}]`).forEach(n=>{n.addEventListener("click",i=>{var d;const a=i.target,u=(d=a==null?void 0:a.getAttribute)==null?void 0:d.call(a,t);u&&this.event(u)})});const e="data-analytics-toggle";document.querySelectorAll(`*[${e}]`).forEach(n=>{n.addEventListener("change",i=>{var y;const a=i.target,u=a==null?void 0:a.checked,d=(y=a==null?void 0:a.getAttribute)==null?void 0:y.call(a,e);d&&this.event(d,{checked:u})})})}},Dh=ft.createScopedLog("AmplitudeAPI"),Nh={baseUrl:"https://api2.amplitude.com",apiKey:"07de81d51a94380a82c075614cd12f6e",initAPI(t){return t.mixin("AmplitudeAPI",{uploadEvents:this.uploadEvents.bind(this)})},async uploadEvents(...t){return await fetch(`${this.baseUrl}/batch`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({api_key:this.apiKey,events:t})}).catch(e=>{Dh("uploadEvents","Failed to upload event",e,"WARN")})}},Ih={initAPI(t){return t.mixin("Chrome",{Extension:{addListener:this.exists("runtime")?this.addRuntimeListener.bind(this):this.throwMisusedAPIException,connect:this.exists("runtime","connect")?chrome.runtime.connect.bind(chrome.runtime):this.throwMisusedAPIException,getID:this.exists("runtime")?function(){return chrome.runtime.id}:this.throwMisusedAPIException,getURL:this.exists("extension","getURL")?chrome.extension.getURL.bind(chrome.extension):this.throwMisusedAPIException,reload:this.exists("runtime","reload")?chrome.runtime.reload.bind(chrome.runtime):this.throwMisusedAPIException,getVersion:this.exists("runtime","getManifest")?this.getVersion.bind(this):this.throwMisusedAPIException,setUninstallURL:this.exists("runtime","setUninstallURL")?chrome.runtime.setUninstallURL.bind(chrome.runtime):this.throwMisusedAPIException},Message:{on:chrome.runtime.onMessage,send:this.exists("runtime","sendMessage")?chrome.runtime.sendMessage.bind(chrome.runtime):this.throwMisusedAPIException,sendToTab:this.exists("tabs","sendMessage")?chrome.tabs.sendMessage.bind(chrome.tabs):this.throwMisusedAPIException},Notification:{create:this.exists("notifications","create")?chrome.notifications.create.bind(chrome.notifications):this.throwMisusedAPIException,clear:this.exists("notifications","clear")?chrome.notifications.clear.bind(chrome.notifications):this.throwMisusedAPIException},Storage:{addListener:this.exists("storage")?this.addStorageListener.bind(this):this.throwMisusedAPIException,getLocal:this.exists("storage")?chrome.storage.local.get.bind(chrome.storage.local):this.throwMisusedAPIException,getSync:this.exists("storage")?chrome.storage.sync.get.bind(chrome.storage.sync):this.throwMisusedAPIException,removeLocal:this.exists("storage")?chrome.storage.local.remove.bind(chrome.storage.local):this.throwMisusedAPIException,removeSync:this.exists("storage")?chrome.storage.sync.remove.bind(chrome.storage.sync):this.throwMisusedAPIException,setLocal:this.exists("storage")?chrome.storage.local.set.bind(chrome.storage.local):this.throwMisusedAPIException,setSync:this.exists("storage")?chrome.storage.sync.set.bind(chrome.storage.sync):this.throwMisusedAPIException},Tab:{addListener:this.exists("tabs")?this.addTabsListener.bind(this):this.throwMisusedAPIException,create:this.exists("tabs","create")?chrome.tabs.create.bind(chrome.tabs):this.throwMisusedAPIException,getAllInWindow:this.exists("tabs","query")?this.getAllTabsInWindow.bind(this):this.throwMisusedAPIException,getCurrent:this.exists("tabs","getCurrent")?chrome.tabs.getCurrent.bind(chrome.tabs):this.throwMisusedAPIException,getSelected:this.exists("tabs","query")?this.getSelectedTab.bind(this):this.throwMisusedAPIException,remove:this.exists("tabs","remove")?chrome.tabs.remove.bind(chrome.tabs):this.throwMisusedAPIException,update:this.exists("tabs","update")?chrome.tabs.update.bind(chrome.tabs):this.throwMisusedAPIException,get:this.exists("tabs","get")?chrome.tabs.get.bind(chrome.tabs):this.throwMisusedAPIException},Translation:{get:this.exists("i18n","getMessage")?chrome.i18n.getMessage.bind(chrome.i18n):this.throwMisusedAPIException},Window:{addListener:this.exists("windows")?this.addWindowsListener.bind(this):this.throwMisusedAPIException,getLastFocused:this.exists("windows","getLastFocused")?chrome.windows.getLastFocused.bind(chrome.windows):this.throwMisusedAPIException},Alarms:{addListener:this.exists("alarms")?this.addAlarmsListener.bind(this):this.throwMisusedAPIException,ensure:this.exists("alarms")?this.ensureAlarm.bind(this):this.throwMisusedAPIException}})},getSelectedTab:function(t,e){const n={active:!0};t?n.windowId=t:n.currentWindow=!0,chrome.tabs.query(n,function(i){const a=i[0];typeof e=="function"&&e(a)})},getAllTabsInWindow:function(t,e){const n={};t?n.windowId=t:n.currentWindow=!0,chrome.tabs.query(n,function(i){typeof e=="function"&&e(i)})},getVersion(){return chrome.runtime.getManifest().version},async ensureAlarm(t,e){return new Promise(n=>{chrome.alarms.get(t,i=>{i||chrome.alarms.create(t,e),n()})})},addRuntimeListener:function(t,e){this.addListener("runtime",t,e)},addStorageListener:function(t,e){this.addListener("storage",t,e)},addTabsListener:function(t,e){this.addListener("tabs",t,e)},addWindowsListener:function(t,e){this.addListener("windows",t,e)},addAlarmsListener(t,e){this.addListener("alarms",t,e)},addListener:function(t,e,n){const i=t,a=e;typeof chrome[i][a]<"u"&&chrome[i][a].addListener(n)},exists:function(t,e){const n=t,i=e;let a=chrome&&typeof chrome[n]=="object";return a&&i&&(a=typeof chrome[n][i]=="function"),a},throwMisusedAPIException:function(){throw new Error("Improper use of chrome API in content script!")}},Mh={initAPI(t){return t.mixin("Date",this)},parseMilitaryTime:function(t){const e=t.split(":");let n=parseInt(e[0],10);const i=parseInt(e[1],10),a=n>=12?"pm":"am";n=n>=12?n-12:n;const u=n===0?12:n,d=a==="pm"?ee.Chrome.Translation.get("timePM"):ee.Chrome.Translation.get("timeAM");return{hour:this.toTwoDigits(u),min:this.toTwoDigits(i),ampm:a,display:u+":"+this.toTwoDigits(i)+" "+d}},timestampToDisplayDate:function(t){const e=new Date(t),n={},i=e.getMonth()+1,a=e.getDate(),u=e.getHours(),d=e.getMinutes();return n.year=e.getFullYear(),n.month=this.toTwoDigits(i),n.day=this.toTwoDigits(a),n.minutes=this.toTwoDigits(d),n.ampm=u>=12?ee.Chrome.Translation.get("timePM"):ee.Chrome.Translation.get("timeAM"),n.hours=u>12?u-12:u,n.hours===0&&(n.hours=12,n.ampm=ee.Chrome.Translation.get("timeAM")),n},hasTimePassed:function(t,e,n,i=new Date){t=n==="pm"?parseInt(t,10)+12:t;const a=i.toDateString();return new Date(a+" "+t+":"+e)<i},secondsUntilTime:function(t,e,n,i=new Date){t=n==="pm"?parseInt(t,10)+12:t;const a=i.toDateString(),d=new Date(a+" "+t+":"+e).getTime()-i.getTime();return Math.floor(d/1e3)},minutesUntilTime:function(t,e,n,i){const a=this.secondsUntilTime(t,e,n,i);return Math.floor(a/60)},getTodayDateObj:function(t,e,n,i=new Date){t=n==="pm"?parseInt(t,10)+12:t;const a=i.toDateString();return new Date(a+" "+t+":"+e)},hoursToMilliseconds:function(t){return parseFloat(t)*60*60*1e3},timeUnitToMilliseconds:function(t,e){if(!this.isValidTimeUnit(e))throw new Error('[DateUtils.timeUnitToMilliseconds()] Could not convert time unit to milliseconds. "'+e+'" is not a valid time unit.');return t=parseFloat(t),this.isValidHourUnit(e)?t*60*60*1e3:this.isValidMinUnit(e)?t*60*1e3:this.isValidSecUnit(e)?t*1e3:t},isValidTime:function(t,e){if(typeof t!="string"||t.indexOf(":")!==2||t.length!==5)return!1;e=e===12?12:24;const n=t.split(":"),i=parseInt(n[0]),a=parseInt(n[1]);return a>=0&&a<=59&&(e===12&&i>=1&&i<=12||e===24&&i>=0&&i<=23)},isValidTimeUnit:function(t){return this.isValidHourUnit(t)||this.isValidMinUnit(t)||this.isValidSecUnit(t)||this.isValidMSUnit(t)},isValidHourUnit:function(t){return typeof t=="string"&&(t.indexOf("hour")===0||t.indexOf("hr")===0||t==="h")},isValidMinUnit:function(t){return typeof t=="string"&&(t.indexOf("min")===0||t==="m")},isValidSecUnit:function(t){return typeof t=="string"&&(t.indexOf("sec")===0||t==="s")},isValidMSUnit:function(t){return typeof t=="string"&&(t.indexOf("millis")===0||t==="ms")},dayNumToDay:function(t,e){if(t<0||t>6)throw new Error("[DateUtils.dayNumToDay()] Day num must be between 0 and 6");return e===!0?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]},getDaysInMonth:function(t,e){const n=new Date;return t=t||n.getMonth(),e=e||n.getYear(),32-new Date(e,t,32).getDate()},secondsToMinsAndSecs:function(t){return t/60===Math.floor(t/60)?t/60+" minutes":Math.floor(t/60)+" minutes and "+(t-Math.floor(t/60)*60)+" seconds"},toTwoDigits:function(t){return t<10?"0"+t:t.toString()},getYMD:function(t){t=t||new Date;const e=this.toTwoDigits(t.getMonth()+1),n=this.toTwoDigits(t.getDate());return t.getFullYear()+"-"+e+"-"+n}},At=ft.createScopedLog("DomainParser"),Fl={initAPI(t){return t.mixin("Domain",{extractBaseDomain:this.extractBaseDomain.bind(this),extractFullDomain:this.extractFullDomain.bind(this),isMoreGeneralURL:this.isMoreGeneralURL.bind(this),matchesWildcard:this.matchesWildcard.bind(this)})},extractFullDomain:function(t){if(!t)return null;At("extractFullDomain","Extracting full domain from",t,"TRACE");const e=t.match(/^(.[^/]*?:\/\/)?(.[^/]+)/);if(e===null||e.length<2)return t.split("/")[0];let n=e[2];return n.startsWith("www.")&&(n=n.replace("www.","")),n},extractBaseDomain:function(t){At("extractBaseDomain","Extracting base domain from",t,"TRACE");const e=this.extractFullDomain(t);if(!e||e.length===0)return"";const n=e.split(".");if(n.length===1)return e;let i=n[n.length-1];return i=n[n.length-2]+"."+i,this.isMultiPartDomain(e)&&(i=n[n.length-3]+"."+i),i},isMultiPartDomain:function(t){const e="Is "+t+" multi-part domain?",n=t.split(".");let i=[];if(n.length===1)return At("isMultiPartDomain",e,"NO","TRACE"),!1;const a=n[n.length-2];if(a.length===1||a.length===2&&n.length>3)return At("isMultiPartDomain",e,"YES","TRACE"),!0;if(a.length===3&&n.length>=3){i=["com","edu","gov","mil","net","org","biz","www","pro","int","web","xxx"];for(const u in i)if(i.hasOwnProperty(u)&&a===i[u])return At("isMultiPartDomain",e,"YES","TRACE"),!0}if(a.length===4&&n.length>=3){i=["info","mobi","name","jobs","kiwi","aero","asia","coop"];for(const u in i)if(i.hasOwnProperty(u)&&a===i[u])return At("isMultiPartDomain",e,"YES","TRACE"),!0}if(n.length>=3){const u=n[n.length-3];if(a.length===2&&n.length===3&&u.length>2&&u!=="www")return At("isMultiPartDomain",e,"YES","TRACE"),!0}return At("isMultiPartDomain",e,"NO","TRACE"),!1},isMoreGeneralURL:function(t,e){t=typeof t=="string"?t.toLowerCase():t,e=typeof e=="string"?e.toLowerCase():e;const n="Is "+t+" more general than "+e+"?";if(t=="chrome-extension://"&&(e==null?void 0:e.indexOf(t))==0)return!0;if(t=this.stripProtocol(t),e=this.stripProtocol(e),t==""&&e!="")return!1;const i=this.extractBaseDomain(e);if(t===e||t===i||e.indexOf(t)===0)return At("isMoreGeneralURL",n,"YES","TRACE"),!0;const a=this.extractBaseDomain(t);return a===i&&t.length<=e.length&&e.indexOf(t)>=0&&(e.indexOf("/")>=0||e.indexOf("?")>=0)||i.length>a.length&&i.indexOf(t)>-1?(At("isMoreGeneralURL",n,"YES","TRACE"),!0):(At("isMoreGeneralURL",n,"NO","TRACE"),!1)},matchesWildcard:function(t,e){if(t.indexOf("*")==-1)return;const n="Does "+e+" match wildcard "+t+"?";t=t.toLowerCase(),e=e.toLowerCase();const i=t.replace("*","");if(e=e||"",e.indexOf(i)===-1)return At("matchesWildcard",n,"NO","TRACE"),!1;const a=e.substring(0,e.indexOf(i)+i.length),d=e.substring(a.length-i.length,a.length)===i;return At("matchesWildcard",n,d?"YES":"NO","TRACE"),d},stripProtocol:function(t){return t?t.indexOf("://")>-1?t.slice(t.indexOf("://")+3,t.length):t:""}};let Rr;function $l(){return Rr.RemoteConfig.get("incrementalRollout")}const Lh=t=>({storageKey:`@incrementalRollout/${t}`,async getMyPercent(){return Rr.Storage.getOrSet(this.storageKey,Math.random())},async getEnabledPercent(){return(await $l())[t]??0},async isEnabled(){const e=await this.getEnabledPercent();return await this.getMyPercent()<e},async debug(){un.log("IncrementalRollout","Incremental rollout info:",{isEnabled:await this.isEnabled(),myPercent:await this.getMyPercent(),enabledPercent:await this.getEnabledPercent(),remoteConfig:await $l()},"DEBUG")},async enable(){await Rr.Storage.set({[this.storageKey]:-1})},async disable(){await Rr.Storage.set({[this.storageKey]:2})},async randomize(){await Rr.Storage.set({[this.storageKey]:Math.random()})}}),Rh={initAPI(t){return Rr=t,Rr.mixin("IncrementalRollout",{AdFinder:Lh("ad-finder")})}};let mt;const Bh={initialized:null,onboardingSampleGroup:null,initAPI(t){return mt=t,mt.mixin("Requirements",{init:this.init.bind(this),isOnboardingCompleted:this.isOnboardingCompleted.bind(this),getPromptAgainAt:this.getPromptAgainAt.bind(this),setPromptAgainAt:this.setPromptAgainAt.bind(this),getOnboardingShownCount:this.getOnboardingShownCount.bind(this),incrementOnboardingShownCount:this.incrementOnboardingShownCount.bind(this),getConfirmationCount:this.getConfirmationCount.bind(this),incrementConfirmationCount:this.incrementConfirmationCount.bind(this),isUnder18:this.isUnder18.bind(this)})},async init(){if(this.initialized!=null)return;const{promise:t,resolve:e,reject:n}=mt.Utils.getDecoupledPromise();this.initialized=t,this.onboardingSampleGroup=await mt.Storage.getOrSet("onboardingSampleGroup",100*Math.random());try{await Promise.all([mt.Settings.initAsync(),mt.RemoteConfig.init()]),e()}catch(i){n(i)}},async isOnboardingCompleted(){const t=Date.now();if(this.initialized==null)throw Error("You must call `API.Requirements.init()` before calling `isOnboardingCompleted()`");await this.initialized;const e=mt.RemoteConfig.get("onboardingEnabledPercentInt2");if(!(this.onboardingSampleGroup<e)||this.isUnder18()||mt.Settings.get("explicitlyDeclinedPrivacyPolicy"))return!0;if(!mt.Settings.get("hasAcceptedToS"))return!1;const d=mt.Settings.get("hasAcceptedPrivacyPolicy"),y=await this.getPromptAgainAt(),h=await this.getConfirmationCount();return!!d||t<y||h>3},async getPromptAgainAt(){return await mt.Storage.get("showOnboardingAgainAt")??0},setPromptAgainAt(t){return mt.Storage.set({showOnboardingAgainAt:t})},async getOnboardingShownCount(){return await mt.Storage.get("onboardingShownCount")??0},async incrementOnboardingShownCount(){const t=await this.getOnboardingShownCount();await mt.Storage.set({onboardingShownCount:t+1})},async getConfirmationCount(){return await mt.Storage.get("privacyPolicyConfirmationCount")??0},async incrementConfirmationCount(){const t=await this.getConfirmationCount();await mt.Storage.set({privacyPolicyConfirmationCount:t+1})},isUnder18(){if(mt.Settings.get("is18OrOlder"))return!1;const e=mt.Settings.get("age");return e&&e<18},isEffectiveHourOfDay(){const t=[3,22,13,9,8,5,11,2,12,14,4,1],e=new Date().getHours();return!t.includes(e)}},ct=ft.createScopedLog("Storage");let nn;const Rt={LOCAL:1,SYNC:2,map:null,cache:{},initAPI:function(t){return nn=t,nn.mixin("Storage",{addOnChangeListener:this.addOnChangeListener.bind(this),init:this.init.bind(this),initAsync:this.initAsync.bind(this),get:this.get.bind(this),getOrSet:this.getOrSet.bind(this),getAll:this.getAll.bind(this),set:this.set.bind(this),merge:this.merge.bind(this),remove:this.remove.bind(this),setBucket:this.setBucket.bind(this)})},init:async function(t){ct("init","Initializing storage",null,"DEBUG"),this.cache={},this.map=null;const e=await this.getSynced("storageMap");ct("init","Storage initialization complete",e,"DEBUG"),typeof e<"u"?this.map=e:(this.map={},await this.saveMap()),typeof t=="function"&&t()},initAsync(){return new Promise(t=>this.init(t))},get:async function(t,e=!1){let n;return this.inCache(t)&&!e?n=this.getCached(t):this.inSync(t)?n=await this.getSynced(t):n=await this.getLocal(t),n},async getOrSet(t,e,n=!1){let i=await this.get(t,n);return i==null&&(i=e,await this.set({[t]:i})),i},refresh:async function(t){return await this.get(t,!0)},getAll:async function(t){const e=typeof t=="string"?t.toUpperCase():t;if(e){if(e==="SYNC")return await nn.Chrome.Storage.getSync(null);if(e==="LOCAL")return await nn.Chrome.Storage.getLocal(null)}else{const n={},[i,a]=await Promise.all([nn.Chrome.Storage.getSync(null),nn.Chrome.Storage.getLocal(null)]);return n.SYNC=i,n.LOCAL=a,n}return{}},set:async function(t,e=null){const n=typeof e=="string"?e.toUpperCase():null,i={},a={};let u=!1,d=!1;for(const h in t)t.hasOwnProperty(h)&&(this.inSync(h)||n==="SYNC"?(i[h]=t[h],u=!0):(a[h]=t[h],d=!0));const y=[];u&&y.push(this.setSynced(i)),d&&y.push(this.setLocal(a)),await Promise.all(y)},remove:async function(t,e){var n;this.inSync(t)||e==="SYNC"?await this.removeSynced(t):await this.removeLocal(t),typeof((n=this.map)==null?void 0:n[t])<"u"&&(delete this.map[t],await this.saveMap())},merge:async function(t,e,n){if(ct("merge","Merging "+t+" from "+n+" to "+e,null,"TRACE"),n==="SYNC"){const i=await this.getSynced(t),a=await this.getLocal(t);await this.doMerge(t,e,a,i)}else if(n==="LOCAL"){const i=await this.getLocal(t),a=await this.getSynced(t);await this.doMerge(t,e,a,i)}},doMerge:async function(t,e,n,i){n=Xn.isObjLiteral(n)?n:{},i=Xn.isObjLiteral(i)?i:{},await this.remove(t),await this.setBucket(t,e,!0);const a={};a[t]=Xn.merge(n,i,!0),await this.set(a)},setBucket:async function(t,e,n=!1){if(this.isArray(t)){const i=t;for(let a=0;a<i.length;a++)await this.setBucket(i[a],e,n)}else if(typeof t=="string"){const i=t;typeof e=="string"&&(e=e.toUpperCase()),e=typeof this[e]<"u"?e:"LOCAL",ct("setBucket","Adding "+i+" to "+e+" storage bucket",null,"TRACE"),this.map[i]=this[e],await this.saveMap(),n!==!0&&await this.migrate(i,e)}},saveMap:async function(t){const e=t??this.map;await this.setSynced({storageMap:e})},migrate:async function(t,e){const n=e==="SYNC"?"LOCAL":"SYNC";if(ct("migrate","Migrating "+t+" from "+n+" to "+e,null,"DEBUG"),e==="SYNC"){const i=await this.getLocal(t),a={};a[t]=i,await this.removeLocal(t),await this.setSynced(a)}else if(e==="LOCAL"){const i=await this.getSynced(t),a={};a[t]=i,await this.removeSynced(t),await this.setLocal(a)}},addOnChangeListener:function(t){t=typeof t=="function"?t:function(){},nn.Chrome.Storage.addListener("onChanged",t)},inCache:function(t){return typeof this.cache[t]<"u"},inSync:function(t){return this.map[t]===this.SYNC},inLocal:function(t){return this.map[t]===this.LOCAL},setCached:function(t){ct("setCached","Storing items in cache",t,"TRACE");for(const e in t)t.hasOwnProperty(e)&&(this.cache[e]=t[e])},getCached:function(t){return ct("getCached","Getting "+t+" from cache",null,"TRACE"),this.cache[t]},removeCached:function(t){ct("removeCached","Removing "+t+" from cache",null,"TRACE"),delete this.cache[t]},setSynced:async function(t,e=()=>{}){ct("setSynced","Storing items in sync storage",t,"TRACE"),this.setCached(t),await nn.Chrome.Storage.setSync(t,e)},getSynced:async function(t){ct("getSynced","Getting "+t+" from sync storage",null,"TRACE");const e=await nn.Chrome.Storage.getSync(t);return typeof t=="string"?(ct("getSynced",t+" retrieved from sync storage:",e[t],"TRACE"),this.setCached(e),e[t]):(ct("getSynced","Data retrieved from sync storage:",e,"TRACE"),e)},removeSynced:async function(t){ct("removeSynced","Removing "+t+" from sync storage",null,"TRACE"),this.removeCached(t),await nn.Chrome.Storage.removeSync(t)},setLocal:async function(t){ct("setLocal","Storing items in Chrome local storage",t,"TRACE"),this.setCached(t),await nn.Chrome.Storage.setLocal(t)},getLocal:async function(t){ct("getLocal","Getting data from Chrome local storage",t,"TRACE");let e=await nn.Chrome.Storage.getLocal(t);if(typeof t=="string"){e=e||{};let n=e[t];(typeof n>"u"||n===null)&&(n=await this.getFromLocalStorageBackup(t)),ct("getLocal",t+" retrieved from local storage:",n,"TRACE");const i={};return i[t]=n,this.setCached(i),n}else return ct("getLocal","Data retrieved from local storage:",e,"TRACE"),e},getFromLocalStorageBackup:async function(t){ct("getFromLocalStorageBackup","Getting "+t+" from HTML5 localStorage",null,"TRACE");let e=null;const n=await chrome.storage.local.get(t);if(n==null)return null;const i=n[t];if(typeof i<"u"&&i!==null){ct("getLocal",t+" found in HTML5 localStorage:",i,"TRACE");try{e=JSON.parse(i)}catch{e=i}const a={};a[t]=e,await this.setLocal(a)}return e},removeLocal:async function(t){ct("removeLocal","Removing "+t+" from Chrome local storage",null,"TRACE"),this.removeCached(t),await nn.Chrome.Storage.removeLocal(t)},isArray:function(t){return typeof t=="object"&&t!==null&&typeof t.length=="number"}},qt=ft.createScopedLog("Settings");let Ka;const Uh={MAX_BACKUP_VERSIONS:5,keys:["activeDays","activeHours","activeHoursQueue","blacklist","challengeRequired","challengeText","customStayFocusdMsg","disableActivityMonitor","disableSync","disableUpdatePopup","firstInstallDate","firstInstallAllowanceExpiration","hideAllowSiteLink","maxTimeAllowed","notificationSettings","nuclearOptionSettings","productivityBypass","resetTimeQueue","resetTimestamp","resetTime","whitelist","hasAcceptedToS","hasAcceptedPrivacyPolicy","explicitlyDeclinedPrivacyPolicy","is18OrOlder","age","isNewUser","promptBirthYearAt","promptBirthYearInterval","promptReview","promptReviewAt","promptReviewInterval","promptSurvey","promptSurveyAt","promptSurveyInterval","debugActivityMonitor","blockedGroups","isBlockAllWebsites","blockAllWebsitesAllowedTime","blockAllWebsitesElapsedTime","showedInitialTutorial","desktopPromoDismissed","whitelistNew","activated","isActivateSwitchShown"],cache:{},backupKeys:[],initialized:!1,initAPI:function(t){return Ka=t,Ka.mixin("Settings",{init:this.init.bind(this),initAsync:this.initAsync.bind(this),get:this.get.bind(this),set:this.set.bind(this),setAsync:this.setAsync.bind(this),refresh:this.refresh.bind(this),remove:this.remove.bind(this),restoreBackup:this.restoreBackup.bind(this),isInitialized:this.isInitialized.bind(this)})},init:function(t){this.initialized?(qt("init","Settings already initialized",this.keys,"DEBUG"),typeof t=="function"&&t()):(qt("init","Initializing Settings",this.keys,"DEBUG"),this.initialized=!0,this.cache={},Rt.init(()=>{this.initBackups(),this.refresh(t)}))},initAsync(){return new Promise(t=>this.init(t))},refresh:function(t){qt("refresh","Refreshing Settings",this.keys,"TRACE");let e=0;const n=this.keys.length,i=a=>{Rt.refresh(a).then(u=>{this.cache[a]=typeof u<"u"?u:null,e++,e===n&&(qt("refresh","Settings refreshed",null,"TRACE"),typeof t=="function"&&t())})};for(let a=0;a<n;a++)i(this.keys[a])},get:function(t,e){if(!this.inCache(t))throw new Error("[Settings.get()] "+t+" is not registered as a key in Settings.js");return this.cache[t]!==null?this.cache[t]:e},set(t,e,n,i){this.saveBackup();for(const a in t){const u=a;if(t.hasOwnProperty(u)){if(!this.inCache(u)&&!i)throw new Error("[Settings.get()] "+u+" is not registered as a key in Settings.js");this.cache[u]=t[u]}}Rt.set(t,n).then(()=>{typeof e=="function"&&e()})},setAsync(t,e,n){return new Promise(i=>this.set(t,i,e,n))},remove:function(t){this.inCache(t)&&(this.cache[t]=null),Rt.remove(t)},initBackups:function(){Rt.get("backupKeys").then(t=>{this.backupKeys=typeof t=="string"?JSON.parse(t):[],this.deleteOrphanedBackups(this.backupKeys)})},saveBackup:async function(){const t="backup-"+new Date().getTime();qt("saveBackup","Saving backup: "+t,this.cache,"TRACE"),this.backupKeys.length>=this.MAX_BACKUP_VERSIONS&&this.pruneBackups(),this.backupKeys.unshift(t);const e={};e[t]=JSON.stringify(this.cache),e.backupKeys=JSON.stringify(this.backupKeys),await Rt.setBucket(t),await Rt.set(e),qt("saveBackup","Backup saved",null,"TRACE")},restoreBackup:function(t=void 0){const e=t||this.backupKeys.shift();return e?(qt("restoreBackup","Restoring backup",e,"DEBUG"),Rt.get(e).then(n=>{if(qt("restoreBackup","Backup loaded",e,"DEBUG"),typeof n=="string")try{const i=JSON.parse(n);Rt.set(i).then(async()=>{await Rt.remove(e),qt("restoreBackup","Backup restored",e,"DEBUG"),await Rt.set({backupKeys:JSON.stringify(this.backupKeys)}),Ka.Chrome.Extension.reload()})}catch{qt("restoreBackup","Backup failed. Error parsing backup JSON.",e,"DEBUG"),this.restoreBackup()}else qt("restoreBackup","Backup failed. Backup wasn't a string.",e,"DEBUG"),this.restoreBackup()}),!0):(qt("restoreBackup","No backup available to restore",null,"WARN"),!1)},pruneBackups:function(){if(this.isArray(this.backupKeys)){const t=this.backupKeys.pop();qt("pruneBackups","Pruning backup: "+t,null,"TRACE"),Rt.remove(t)}},deleteOrphanedBackups:function(t){qt("deleteOrphanedBackups","Deleting orphaned backups",null,"TRACE");const e={};for(let n=0;n<t.length;n++)e[t[n]]=1;Rt.get("storageMap").then(n=>{let i=!1;for(const a in n)n.hasOwnProperty(a)&&a.indexOf("backup-")===0&&!(a in e)&&(delete n[a],i=!0);i&&Rt.saveMap(n)})},inCache:function(t){return typeof this.cache[t]<"u"},isArray:function(t){return typeof t=="object"&&t!==null&&typeof t.length=="number"},isInitialized(){return this.initialized}},Wl=1e3,pr=60*Wl,Ns=60*pr,jh=24*Ns,ii=60,Br=60*ii,Vl=ii*10,si={getToday(){return si.getStartOfDay(new Date)},getEndOfToday(){return si.getEndOfDay(new Date)},getStartOfDay(t){const e=new Date(t);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.getTime()},getEndOfDay(t){const e=new Date(t);return e.setMilliseconds(999),e.setSeconds(59),e.setMinutes(59),e.setHours(23),e.getTime()},formatDurationInSeconds(t){if(t===0||t<0)return"00:00";const e=Math.floor(t/Br),n=Math.floor((t-e*Br)/60),i=Math.floor(t-(e*Br+n*60)),a=ee.Date.toTwoDigits(e),u=ee.Date.toTwoDigits(n),d=ee.Date.toTwoDigits(i);return(a=="00"?"":`${a}:`)+`${u}:${d}`},formatTimeToString(t){return t>=0&&t<10?`0${t}`:t},getTimeFromSeconds(t){if(t<0)return{hours:0,minutes:0,seconds:0};const e=Math.floor(t/Br),n=Math.floor((t-e*Br)/60),i=t-(e*Br+n*60);return{hours:e,minutes:n,seconds:i}},getTimeFromMilliseconds(t){const e=t/pr,n=e<60?0:Math.floor(e/60);let i=0;return n>0?i=e-n*60:i=Math.floor(e),{hours:n,minutes:i}},getTimeInMilliseconds(t,e){return t*Ns+e*pr},getTimeInSeconds(t,e){return t*Br+e*ii}},at=ft.createScopedLog("RemoteConfig");let Is;const Fh={cache:{},initialized:!1,defaults:{onboardingEnabledPercentInt2:0,defaultAmplitudeSampling:.1,amplitudeSampling:{},newTabTimeout:3*jh,uploadWebUsage:!0,usageUploadBatchSize:500,pageViewAllowlist:[],incrementalRollout:{},bugsnagSampling:.01,bugsnagIgnoreMatches:["Extension context invalidated.","Could not establish connection. Receiving end does not exist.","The browser is shutting down.",'{\\s*"?isTrusted"?:\\s*true\\s*}',"Failed to execute 'abort' on 'IDBTransaction': The transaction has finished.","Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.","^IO error: \\.\\.\\.\\/.+?: .*? \\(ChromeMethodBFE: .*\\)$","Cannot access contents of the page. Extension manifest must request permission to access the respective host.","The extensions gallery cannot be scripted."],instacartSelectors:{productSelector:['div[aria-label="Product"]'],sponsoredRegex:["/s\\s*p\\s*o\\s*n\\s*s\\s*o\\s*r\\s*/i"],companyName:[".e-1f1gsmn",".e-1opt332"],searchTerm:["#search-bar-input"],productTitle:[".e-th3ch3",".e-u2e78b",".e-1exr31r",".e-wrmemy"],productSize:[".e-k9ly30",".e-owckh2",".e-1hb8rq9",".e-1188c9v"],productPrice:[".e-1jioxed > span.screen-reader-only",".e-1ybpdrh > span.screen-reader-only",".e-1ghw7u1 > span.screen-reader-only",".e-hlbpyw > span.screen-reader-only",".e-t5lw1y > span.e-13d1dsr"]},forbiddenPromptWords:["drug","alcohol","porn"],chatGptUrl:"https://chatgpt.com/",chatGptConversationUrl:"https://chatgpt.com/c/"},url:"https://stayfocusd.st-panel-api.com/v1/remote_config/stayfocusd",sharedConfigUrl:"https://stayfocusd.st-panel-api.com/v1/remote_config/shared-web-config",storageKey:"remote-config",initAPI(t){return Is=t,Is.mixin("RemoteConfig",{storageKey:this.storageKey,init:this.init.bind(this),get:this.get.bind(this),refresh:this.refresh.bind(this)})},async init(){if(this.initialized){at==null||at("init","RemoteConfig already initialized",this.cache,"DEBUG");return}at==null||at("init","Initializing RemoteConfig",this.defaults,"DEBUG"),this.initialized=!0,this.cache={...this.defaults},this.cache={...this.cache,...await Is.Storage.get(this.storageKey)},at==null||at("init","Initialized",this.cache,"DEBUG")},async refresh(){at==null||at("refresh","Refreshing...",{currentConfig:this.cache},"DEBUG");try{const t=await fetch(this.url).then(n=>n.json()),e=await fetch(this.sharedConfigUrl).then(n=>n.json());at==null||at("refresh","Fetched config",t,"DEBUG"),this.cache={...this.defaults,...t,...e},await Is.Storage.set({[this.storageKey]:this.cache}),at==null||at("refresh","Saved config",this.cache,"DEBUG")}catch(t){at==null||at("refresh","Failed to fetch remote config",t,"WARN")}},get(t){if(!this.inCache(t))throw new Error("[RemoteConfig.get()] "+t+" is not registered as a key in RemoteConfig.js");return this.cache[t]},inCache(t){return typeof this.cache[t]<"u"}};var $h=Object.defineProperty,Wh=(t,e,n)=>e in t?$h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yt=(t,e,n)=>(Wh(t,typeof e!="symbol"?e+"":e,n),n),Ya=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},oe=(t,e,n)=>(Ya(t,e,"read from private field"),n?n.call(t):e.get(t)),zt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ut=(t,e,n,i)=>(Ya(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Vi=(t,e,n)=>(Ya(t,e,"access private method"),n),Ue;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const u={};for(const d of a)u[d]=d;return u},t.getValidEnumValues=a=>{const u=t.objectKeys(a).filter(y=>typeof a[a[y]]!="number"),d={};for(const y of u)d[y]=a[y];return t.objectValues(d)},t.objectValues=a=>t.objectKeys(a).map(function(u){return a[u]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const u=[];for(const d in a)Object.prototype.hasOwnProperty.call(a,d)&&u.push(d);return u},t.find=(a,u)=>{for(const d of a)if(u(d))return d},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function i(a,u=" | "){return a.map(d=>typeof d=="string"?`'${d}'`:d).join(u)}t.joinValues=i,t.jsonStringifyReplacer=(a,u)=>typeof u=="bigint"?u.toString():u})(Ue||(Ue={}));const de=Ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mr=t=>{switch(typeof t){case"undefined":return de.undefined;case"string":return de.string;case"number":return isNaN(t)?de.nan:de.number;case"boolean":return de.boolean;case"function":return de.function;case"bigint":return de.bigint;case"symbol":return de.symbol;case"object":return Array.isArray(t)?de.array:t===null?de.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?de.promise:typeof Map<"u"&&t instanceof Map?de.map:typeof Set<"u"&&t instanceof Set?de.set:typeof Date<"u"&&t instanceof Date?de.date:de.object;default:return de.unknown}},ce=Ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vh=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Qn extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(u){return u.message},i={_errors:[]},a=u=>{for(const d of u.issues)if(d.code==="invalid_union")d.unionErrors.map(a);else if(d.code==="invalid_return_type")a(d.returnTypeError);else if(d.code==="invalid_arguments")a(d.argumentsError);else if(d.path.length===0)i._errors.push(n(d));else{let y=i,h=0;for(;h<d.path.length;){const p=d.path[h];h===d.path.length-1?(y[p]=y[p]||{_errors:[]},y[p]._errors.push(n(d))):y[p]=y[p]||{_errors:[]},y=y[p],h++}}};return a(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(e(a))):i.push(e(a));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Qn.create=t=>new Qn(t);const Hi=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===de.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ue.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ue.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ue.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${Ue.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ue.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(t.minimum)}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(t.maximum)}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ue.assertNever(t)}return{message:n}};let Hl=Hi;function Hh(t){Hl=t}function Ms(){return Hl}const Ls=t=>{const{data:e,path:n,errorMaps:i,issueData:a}=t,u=[...n,...a.path||[]],d={...a,path:u};let y="";const h=i.filter(p=>!!p).slice().reverse();for(const p of h)y=p(d,{data:e,defaultError:y}).message;return{...a,path:u,message:a.message||y}},qh=[];function me(t,e){const n=Ls({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ms(),Hi].filter(i=>!!i)});t.common.issues.push(n)}let rn=class Ku{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const a of n){if(a.status==="aborted")return Oe;a.status==="dirty"&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const a of n)i.push({key:await a.key,value:await a.value});return Ku.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const a of n){const{key:u,value:d}=a;if(u.status==="aborted"||d.status==="aborted")return Oe;u.status==="dirty"&&e.dirty(),d.status==="dirty"&&e.dirty(),(typeof d.value<"u"||a.alwaysSet)&&(i[u.value]=d.value)}return{status:e.value,value:i}}};const Oe=Object.freeze({status:"aborted"}),ql=t=>({status:"dirty",value:t}),Ct=t=>({status:"valid",value:t}),Xa=t=>t.status==="aborted",Qa=t=>t.status==="dirty",Rs=t=>t.status==="valid",Bs=t=>typeof Promise!==void 0&&t instanceof Promise;var Me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));let Fn=class{constructor(e,n,i,a){this.parent=e,this.data=n,this._path=i,this._key=a}get path(){return this._path.concat(this._key)}};const zl=(t,e)=>{if(Rs(e))return{success:!0,data:e.value};{if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new Qn(t.common.issues)}}};function Ne(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:a}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,d)=>u.code!=="invalid_type"?{message:d.defaultError}:typeof d.data>"u"?{message:i??d.defaultError}:{message:n??d.defaultError},description:a}}class Pe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return mr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:mr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rn,ctx:{common:e.parent.common,data:e.data,parsedType:mr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Bs(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const a={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mr(e)},u=this._parseSync({data:e,path:a.path,parent:a});return zl(a,u)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mr(e)},a=this._parse({data:e,path:i.path,parent:i}),u=await(Bs(a)?a:Promise.resolve(a));return zl(i,u)}refine(e,n){const i=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,u)=>{const d=e(a),y=()=>u.addIssue({code:ce.custom,...i(a)});return typeof Promise<"u"&&d instanceof Promise?d.then(h=>h?!0:(y(),!1)):d?!0:(y(),!1)})}refinement(e,n){return this._refinement((i,a)=>e(i)?!0:(a.addIssue(typeof n=="function"?n(i,a):n),!1))}_refinement(e){return new Sn({schema:this,typeName:Se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return $n.create(this)}nullable(){return $r.create(this)}nullish(){return this.optional().nullable()}array(){return xn.create(this)}promise(){return ci.create(this)}or(e){return Ki.create([this,e])}and(e){return Yi.create(this,e)}transform(e){return new Sn({schema:this,typeName:Se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ns({innerType:this,defaultValue:n,typeName:Se.ZodDefault})}brand(){return new Kl({typeName:Se.ZodBranded,type:this,...Ne(void 0)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Hs({innerType:this,defaultValue:n,typeName:Se.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return rs.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zh=/^c[^\s-]{8,}$/i,Gh=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Zh=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,Kh=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}:\\d{2})|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}:\\d{2})|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");class Jn extends Pe{constructor(){super(...arguments),this._regex=(e,n,i)=>this.refinement(a=>e.test(a),{validation:n,code:ce.invalid_string,...Me.errToObj(i)}),this.nonempty=e=>this.min(1,Me.errToObj(e)),this.trim=()=>new Jn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==de.string){const a=this._getOrReturnCtx(e);return me(a,{code:ce.invalid_type,expected:de.string,received:a.parsedType}),Oe}const n=new rn;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),me(i,{code:ce.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),me(i,{code:ce.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const u=e.data.length>a.value,d=e.data.length<a.value;(u||d)&&(i=this._getOrReturnCtx(e,i),u?me(i,{code:ce.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):d&&me(i,{code:ce.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Zh.test(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{validation:"email",code:ce.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Gh.test(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{validation:"uuid",code:ce.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")zh.test(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{validation:"cuid",code:ce.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),me(i,{validation:"url",code:ce.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{validation:"regex",code:ce.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),me(i,{code:ce.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),me(i,{code:ce.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Kh(a).test(e.data)||(i=this._getOrReturnCtx(e,i),me(i,{code:ce.invalid_string,validation:"datetime",message:a.message}),n.dirty()):Ue.assertNever(a);return{status:n.value,value:e.data}}_addCheck(e){return new Jn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Me.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(n)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Me.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Me.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Me.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Jn.create=t=>{var e;return new Jn({checks:[],typeName:Se.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ne(t)})};function Yh(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,a=n>i?n:i,u=parseInt(t.toFixed(a).replace(".","")),d=parseInt(e.toFixed(a).replace(".",""));return u%d/Math.pow(10,a)}class yr extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==de.number){const a=this._getOrReturnCtx(e);return me(a,{code:ce.invalid_type,expected:de.number,received:a.parsedType}),Oe}let n;const i=new rn;for(const a of this._def.checks)a.kind==="int"?Ue.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:ce.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ce.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ce.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Yh(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),me(n,{code:ce.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:ce.not_finite,message:a.message}),i.dirty()):Ue.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,i,a){return new yr({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Me.toString(a)}]})}_addCheck(e){return new yr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}}yr.create=t=>new yr({checks:[],typeName:Se.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ne(t)});class qi extends Pe{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==de.bigint){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.bigint,received:n.parsedType}),Oe}return Ct(e.data)}}qi.create=t=>{var e;return new qi({typeName:Se.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ne(t)})};class zi extends Pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==de.boolean){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.boolean,received:n.parsedType}),Oe}return Ct(e.data)}}zi.create=t=>new zi({typeName:Se.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ne(t)});class Ur extends Pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==de.date){const a=this._getOrReturnCtx(e);return me(a,{code:ce.invalid_type,expected:de.date,received:a.parsedType}),Oe}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return me(a,{code:ce.invalid_date}),Oe}const n=new rn;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),me(i,{code:ce.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),me(i,{code:ce.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):Ue.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ur({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ur.create=t=>new Ur({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Se.ZodDate,...Ne(t)});class Us extends Pe{_parse(e){if(this._getType(e)!==de.symbol){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.symbol,received:n.parsedType}),Oe}return Ct(e.data)}}Us.create=t=>new Us({typeName:Se.ZodSymbol,...Ne(t)});class Gi extends Pe{_parse(e){if(this._getType(e)!==de.undefined){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.undefined,received:n.parsedType}),Oe}return Ct(e.data)}}Gi.create=t=>new Gi({typeName:Se.ZodUndefined,...Ne(t)});class Zi extends Pe{_parse(e){if(this._getType(e)!==de.null){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.null,received:n.parsedType}),Oe}return Ct(e.data)}}Zi.create=t=>new Zi({typeName:Se.ZodNull,...Ne(t)});class ai extends Pe{constructor(){super(...arguments),this._any=!0}_parse(e){return Ct(e.data)}}ai.create=t=>new ai({typeName:Se.ZodAny,...Ne(t)});class jr extends Pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ct(e.data)}}jr.create=t=>new jr({typeName:Se.ZodUnknown,...Ne(t)});let er=class extends Pe{_parse(e){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.never,received:n.parsedType}),Oe}};er.create=t=>new er({typeName:Se.ZodNever,...Ne(t)});class js extends Pe{_parse(e){if(this._getType(e)!==de.undefined){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.void,received:n.parsedType}),Oe}return Ct(e.data)}}js.create=t=>new js({typeName:Se.ZodVoid,...Ne(t)});class xn extends Pe{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),a=this._def;if(n.parsedType!==de.array)return me(n,{code:ce.invalid_type,expected:de.array,received:n.parsedType}),Oe;if(a.exactLength!==null){const d=n.data.length>a.exactLength.value,y=n.data.length<a.exactLength.value;(d||y)&&(me(n,{code:d?ce.too_big:ce.too_small,minimum:y?a.exactLength.value:void 0,maximum:d?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(me(n,{code:ce.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(me(n,{code:ce.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),n.common.async)return Promise.all(n.data.map((d,y)=>a.type._parseAsync(new Fn(n,d,n.path,y)))).then(d=>rn.mergeArray(i,d));const u=n.data.map((d,y)=>a.type._parseSync(new Fn(n,d,n.path,y)));return rn.mergeArray(i,u)}get element(){return this._def.type}min(e,n){return new xn({...this._def,minLength:{value:e,message:Me.toString(n)}})}max(e,n){return new xn({...this._def,maxLength:{value:e,message:Me.toString(n)}})}length(e,n){return new xn({...this._def,exactLength:{value:e,message:Me.toString(n)}})}nonempty(e){return this.min(1,e)}}xn.create=(t,e)=>new xn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Se.ZodArray,...Ne(e)});var Fs;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Fs||(Fs={}));const Gl=t=>e=>new et({...t,shape:()=>({...t.shape(),...e})});function oi(t){if(t instanceof et){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=$n.create(oi(i))}return new et({...t._def,shape:()=>e})}else return t instanceof xn?xn.create(oi(t.element)):t instanceof $n?$n.create(oi(t.unwrap())):t instanceof $r?$r.create(oi(t.unwrap())):t instanceof vr?vr.create(t.items.map(e=>oi(e))):t}class et extends Pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Gl(this._def),this.extend=Gl(this._def)}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ue.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==de.object){const h=this._getOrReturnCtx(e);return me(h,{code:ce.invalid_type,expected:de.object,received:h.parsedType}),Oe}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:u}=this._getCached(),d=[];if(!(this._def.catchall instanceof er&&this._def.unknownKeys==="strip"))for(const h in i.data)u.includes(h)||d.push(h);const y=[];for(const h of u){const p=a[h],v=i.data[h];y.push({key:{status:"valid",value:h},value:p._parse(new Fn(i,v,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof er){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of d)y.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(h==="strict")d.length>0&&(me(i,{code:ce.unrecognized_keys,keys:d}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of d){const v=i.data[p];y.push({key:{status:"valid",value:p},value:h._parse(new Fn(i,v,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of y){const v=await p.key;h.push({key:v,value:await p.value,alwaysSet:p.alwaysSet})}return h}).then(h=>rn.mergeObjectSync(n,h)):rn.mergeObjectSync(n,y)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new et({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var a,u,d,y;const h=(d=(u=(a=this._def).errorMap)===null||u===void 0?void 0:u.call(a,n,i).message)!==null&&d!==void 0?d:i.defaultError;return n.code==="unrecognized_keys"?{message:(y=Me.errToObj(e).message)!==null&&y!==void 0?y:h}:{message:h}}}:{}})}strip(){return new et({...this._def,unknownKeys:"strip"})}passthrough(){return new et({...this._def,unknownKeys:"passthrough"})}setKey(e,n){return this.augment({[e]:n})}merge(e){return new et({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Fs.mergeShapes(this._def.shape(),e._def.shape()),typeName:Se.ZodObject})}catchall(e){return new et({...this._def,catchall:e})}pick(e){const n={};return Ue.objectKeys(e).map(i=>{this.shape[i]&&(n[i]=this.shape[i])}),new et({...this._def,shape:()=>n})}omit(e){const n={};return Ue.objectKeys(this.shape).map(i=>{Ue.objectKeys(e).indexOf(i)===-1&&(n[i]=this.shape[i])}),new et({...this._def,shape:()=>n})}deepPartial(){return oi(this)}partial(e){const n={};if(e)return Ue.objectKeys(this.shape).map(i=>{Ue.objectKeys(e).indexOf(i)===-1?n[i]=this.shape[i]:n[i]=this.shape[i].optional()}),new et({...this._def,shape:()=>n});for(const i in this.shape){const a=this.shape[i];n[i]=a.optional()}return new et({...this._def,shape:()=>n})}required(e){const n={};if(e)Ue.objectKeys(this.shape).map(i=>{if(Ue.objectKeys(e).indexOf(i)===-1)n[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof $n;)a=a._def.innerType;n[i]=a}});else for(const i in this.shape){let a=this.shape[i];for(;a instanceof $n;)a=a._def.innerType;n[i]=a}return new et({...this._def,shape:()=>n})}keyof(){return Zl(Ue.objectKeys(this.shape))}}et.create=(t,e)=>new et({shape:()=>t,unknownKeys:"strip",catchall:er.create(),typeName:Se.ZodObject,...Ne(e)}),et.strictCreate=(t,e)=>new et({shape:()=>t,unknownKeys:"strict",catchall:er.create(),typeName:Se.ZodObject,...Ne(e)}),et.lazycreate=(t,e)=>new et({shape:t,unknownKeys:"strip",catchall:er.create(),typeName:Se.ZodObject,...Ne(e)});class Ki extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function a(u){for(const y of u)if(y.result.status==="valid")return y.result;for(const y of u)if(y.result.status==="dirty")return n.common.issues.push(...y.ctx.common.issues),y.result;const d=u.map(y=>new Qn(y.ctx.common.issues));return me(n,{code:ce.invalid_union,unionErrors:d}),Oe}if(n.common.async)return Promise.all(i.map(async u=>{const d={...n,common:{...n.common,issues:[]},parent:null};return{result:await u._parseAsync({data:n.data,path:n.path,parent:d}),ctx:d}})).then(a);{let u;const d=[];for(const h of i){const p={...n,common:{...n.common,issues:[]},parent:null},v=h._parseSync({data:n.data,path:n.path,parent:p});if(v.status==="valid")return v;v.status==="dirty"&&!u&&(u={result:v,ctx:p}),p.common.issues.length&&d.push(p.common.issues)}if(u)return n.common.issues.push(...u.ctx.common.issues),u.result;const y=d.map(h=>new Qn(h));return me(n,{code:ce.invalid_union,unionErrors:y}),Oe}}get options(){return this._def.options}}Ki.create=(t,e)=>new Ki({options:t,typeName:Se.ZodUnion,...Ne(e)});const $s=t=>t instanceof Qi?$s(t.schema):t instanceof Sn?$s(t.innerType()):t instanceof Ji?[t.value]:t instanceof es?t.options:t instanceof ts?Object.keys(t.enum):t instanceof ns?$s(t._def.innerType):t instanceof Gi?[void 0]:t instanceof Zi?[null]:null;class Ws extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==de.object)return me(n,{code:ce.invalid_type,expected:de.object,received:n.parsedType}),Oe;const i=this.discriminator,a=n.data[i],u=this.optionsMap.get(a);return u?n.common.async?u._parseAsync({data:n.data,path:n.path,parent:n}):u._parseSync({data:n.data,path:n.path,parent:n}):(me(n,{code:ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Oe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const a=new Map;for(const u of n){const d=$s(u.shape[e]);if(!d)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const y of d){if(a.has(y))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(y)}`);a.set(y,u)}}return new Ws({typeName:Se.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:a,...Ne(i)})}}function Ja(t,e){const n=mr(t),i=mr(e);if(t===e)return{valid:!0,data:t};if(n===de.object&&i===de.object){const a=Ue.objectKeys(e),u=Ue.objectKeys(t).filter(y=>a.indexOf(y)!==-1),d={...t,...e};for(const y of u){const h=Ja(t[y],e[y]);if(!h.valid)return{valid:!1};d[y]=h.data}return{valid:!0,data:d}}else if(n===de.array&&i===de.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let u=0;u<t.length;u++){const d=t[u],y=e[u],h=Ja(d,y);if(!h.valid)return{valid:!1};a.push(h.data)}return{valid:!0,data:a}}else return n===de.date&&i===de.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Yi extends Pe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),a=(u,d)=>{if(Xa(u)||Xa(d))return Oe;const y=Ja(u.value,d.value);return y.valid?((Qa(u)||Qa(d))&&n.dirty(),{status:n.value,value:y.data}):(me(i,{code:ce.invalid_intersection_types}),Oe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([u,d])=>a(u,d)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Yi.create=(t,e,n)=>new Yi({left:t,right:e,typeName:Se.ZodIntersection,...Ne(n)});let vr=class Yu extends Pe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==de.array)return me(i,{code:ce.invalid_type,expected:de.array,received:i.parsedType}),Oe;if(i.data.length<this._def.items.length)return me(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Oe;!this._def.rest&&i.data.length>this._def.items.length&&(me(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=i.data.map((u,d)=>{const y=this._def.items[d]||this._def.rest;return y?y._parse(new Fn(i,u,i.path,d)):null}).filter(u=>!!u);return i.common.async?Promise.all(a).then(u=>rn.mergeArray(n,u)):rn.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Yu({...this._def,rest:e})}};vr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vr({items:t,typeName:Se.ZodTuple,rest:null,...Ne(e)})};class Xi extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==de.object)return me(i,{code:ce.invalid_type,expected:de.object,received:i.parsedType}),Oe;const a=[],u=this._def.keyType,d=this._def.valueType;for(const y in i.data)a.push({key:u._parse(new Fn(i,y,i.path,y)),value:d._parse(new Fn(i,i.data[y],i.path,y))});return i.common.async?rn.mergeObjectAsync(n,a):rn.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Pe?new Xi({keyType:e,valueType:n,typeName:Se.ZodRecord,...Ne(i)}):new Xi({keyType:Jn.create(),valueType:e,typeName:Se.ZodRecord,...Ne(n)})}}class Vs extends Pe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==de.map)return me(i,{code:ce.invalid_type,expected:de.map,received:i.parsedType}),Oe;const a=this._def.keyType,u=this._def.valueType,d=[...i.data.entries()].map(([y,h],p)=>({key:a._parse(new Fn(i,y,i.path,[p,"key"])),value:u._parse(new Fn(i,h,i.path,[p,"value"]))}));if(i.common.async){const y=new Map;return Promise.resolve().then(async()=>{for(const h of d){const p=await h.key,v=await h.value;if(p.status==="aborted"||v.status==="aborted")return Oe;(p.status==="dirty"||v.status==="dirty")&&n.dirty(),y.set(p.value,v.value)}return{status:n.value,value:y}})}else{const y=new Map;for(const h of d){const p=h.key,v=h.value;if(p.status==="aborted"||v.status==="aborted")return Oe;(p.status==="dirty"||v.status==="dirty")&&n.dirty(),y.set(p.value,v.value)}return{status:n.value,value:y}}}}Vs.create=(t,e,n)=>new Vs({valueType:e,keyType:t,typeName:Se.ZodMap,...Ne(n)});class Fr extends Pe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==de.set)return me(i,{code:ce.invalid_type,expected:de.set,received:i.parsedType}),Oe;const a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(me(i,{code:ce.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(me(i,{code:ce.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const u=this._def.valueType;function d(h){const p=new Set;for(const v of h){if(v.status==="aborted")return Oe;v.status==="dirty"&&n.dirty(),p.add(v.value)}return{status:n.value,value:p}}const y=[...i.data.values()].map((h,p)=>u._parse(new Fn(i,h,i.path,p)));return i.common.async?Promise.all(y).then(h=>d(h)):d(y)}min(e,n){return new Fr({...this._def,minSize:{value:e,message:Me.toString(n)}})}max(e,n){return new Fr({...this._def,maxSize:{value:e,message:Me.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Fr.create=(t,e)=>new Fr({valueType:t,minSize:null,maxSize:null,typeName:Se.ZodSet,...Ne(e)});class li extends Pe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==de.function)return me(n,{code:ce.invalid_type,expected:de.function,received:n.parsedType}),Oe;function i(y,h){return Ls({data:y,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ms(),Hi].filter(p=>!!p),issueData:{code:ce.invalid_arguments,argumentsError:h}})}function a(y,h){return Ls({data:y,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ms(),Hi].filter(p=>!!p),issueData:{code:ce.invalid_return_type,returnTypeError:h}})}const u={errorMap:n.common.contextualErrorMap},d=n.data;return this._def.returns instanceof ci?Ct(async(...y)=>{const h=new Qn([]),p=await this._def.args.parseAsync(y,u).catch(m=>{throw h.addIssue(i(y,m)),h}),v=await d(...p);return await this._def.returns._def.type.parseAsync(v,u).catch(m=>{throw h.addIssue(a(v,m)),h})}):Ct((...y)=>{const h=this._def.args.safeParse(y,u);if(!h.success)throw new Qn([i(y,h.error)]);const p=d(...h.data),v=this._def.returns.safeParse(p,u);if(!v.success)throw new Qn([a(p,v.error)]);return v.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new li({...this._def,args:vr.create(e).rest(jr.create())})}returns(e){return new li({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new li({args:e||vr.create([]).rest(jr.create()),returns:n||jr.create(),typeName:Se.ZodFunction,...Ne(i)})}}class Qi extends Pe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Qi.create=(t,e)=>new Qi({getter:t,typeName:Se.ZodLazy,...Ne(e)});class Ji extends Pe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_literal,expected:this._def.value}),Oe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ji.create=(t,e)=>new Ji({value:t,typeName:Se.ZodLiteral,...Ne(e)});function Zl(t,e){return new es({values:t,typeName:Se.ZodEnum,...Ne(e)})}class es extends Pe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return me(n,{expected:Ue.joinValues(i),received:n.parsedType,code:ce.invalid_type}),Oe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return me(n,{received:n.data,code:ce.invalid_enum_value,options:i}),Oe}return Ct(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}}es.create=Zl;class ts extends Pe{_parse(e){const n=Ue.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==de.string&&i.parsedType!==de.number){const a=Ue.objectValues(n);return me(i,{expected:Ue.joinValues(a),received:i.parsedType,code:ce.invalid_type}),Oe}if(n.indexOf(e.data)===-1){const a=Ue.objectValues(n);return me(i,{received:i.data,code:ce.invalid_enum_value,options:a}),Oe}return Ct(e.data)}get enum(){return this._def.values}}ts.create=(t,e)=>new ts({values:t,typeName:Se.ZodNativeEnum,...Ne(e)});class ci extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==de.promise&&n.common.async===!1)return me(n,{code:ce.invalid_type,expected:de.promise,received:n.parsedType}),Oe;const i=n.parsedType===de.promise?n.data:Promise.resolve(n.data);return Ct(i.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ci.create=(t,e)=>new ci({type:t,typeName:Se.ZodPromise,...Ne(e)});let Sn=class extends Pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),a=this._def.effect||null;if(a.type==="preprocess"){const d=a.transform(i.data);return i.common.async?Promise.resolve(d).then(y=>this._def.schema._parseAsync({data:y,path:i.path,parent:i})):this._def.schema._parseSync({data:d,path:i.path,parent:i})}const u={addIssue:d=>{me(i,d),d.fatal?n.abort():n.dirty()},get path(){return i.path}};if(u.addIssue=u.addIssue.bind(u),a.type==="refinement"){const d=y=>{const h=a.refinement(y,u);if(i.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return y};if(i.common.async===!1){const y=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return y.status==="aborted"?Oe:(y.status==="dirty"&&n.dirty(),d(y.value),{status:n.value,value:y.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(y=>y.status==="aborted"?Oe:(y.status==="dirty"&&n.dirty(),d(y.value).then(()=>({status:n.value,value:y.value}))))}if(a.type==="transform")if(i.common.async===!1){const d=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Rs(d))return d;const y=a.transform(d.value,u);if(y instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:y}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(d=>Rs(d)?Promise.resolve(a.transform(d.value,u)).then(y=>({status:n.value,value:y})):d);Ue.assertNever(a)}};Sn.create=(t,e,n)=>new Sn({schema:t,typeName:Se.ZodEffects,effect:e,...Ne(n)}),Sn.createWithPreprocess=(t,e,n)=>new Sn({schema:e,effect:{type:"preprocess",transform:t},typeName:Se.ZodEffects,...Ne(n)});class $n extends Pe{_parse(e){return this._getType(e)===de.undefined?Ct(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$n.create=(t,e)=>new $n({innerType:t,typeName:Se.ZodOptional,...Ne(e)});class $r extends Pe{_parse(e){return this._getType(e)===de.null?Ct(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$r.create=(t,e)=>new $r({innerType:t,typeName:Se.ZodNullable,...Ne(e)});class ns extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===de.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ns.create=(t,e)=>new ns({innerType:t,typeName:Se.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ne(e)});class Hs extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.innerType._parse({data:n.data,path:n.path,parent:n});return Bs(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.defaultValue()})):{status:"valid",value:i.status==="valid"?i.value:this._def.defaultValue()}}removeDefault(){return this._def.innerType}}Hs.create=(t,e)=>new Hs({innerType:t,typeName:Se.ZodCatch,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ne(e)});class qs extends Pe{_parse(e){if(this._getType(e)!==de.nan){const n=this._getOrReturnCtx(e);return me(n,{code:ce.invalid_type,expected:de.nan,received:n.parsedType}),Oe}return{status:"valid",value:e.data}}}qs.create=t=>new qs({typeName:Se.ZodNaN,...Ne(t)});const Xh=Symbol("zod_brand");class Kl extends Pe{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class rs extends Pe{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Oe:a.status==="dirty"?(n.dirty(),ql(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Oe:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(e,n){return new rs({in:e,out:n,typeName:Se.ZodPipeline})}}const Yl=(t,e={},n)=>t?ai.create().superRefine((i,a)=>{if(!t(i)){const u=typeof e=="function"?e(i):e,d=typeof u=="string"?{message:u}:u;a.addIssue({code:"custom",...d,fatal:n})}}):ai.create(),Qh={object:et.lazycreate};var Se;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(Se||(Se={}));const Jh=(t,e={message:`Input not instance of ${t.name}`})=>Yl(n=>n instanceof t,e,!0),kt=Jn.create,it=yr.create,ef=qs.create,tf=qi.create,zs=zi.create,nf=Ur.create,rf=Us.create,sf=Gi.create,af=Zi.create,Xl=ai.create,of=jr.create,lf=er.create,cf=js.create,uf=xn.create,dn=et.create,df=et.strictCreate,eo=Ki.create,hf=Ws.create,ff=Yi.create,gf=vr.create,Ql=Xi.create,pf=Vs.create,mf=Fr.create,yf=li.create,vf=Qi.create,bf=Ji.create,ui=es.create,wf=ts.create,Af=ci.create,Jl=Sn.create,xf=$n.create,Sf=$r.create,_f=Sn.createWithPreprocess,Tf=rs.create;var hn=Object.freeze({__proto__:null,defaultErrorMap:Hi,setErrorMap:Hh,getErrorMap:Ms,makeIssue:Ls,EMPTY_PATH:qh,addIssueToContext:me,ParseStatus:rn,INVALID:Oe,DIRTY:ql,OK:Ct,isAborted:Xa,isDirty:Qa,isValid:Rs,isAsync:Bs,get util(){return Ue},ZodParsedType:de,getParsedType:mr,ZodType:Pe,ZodString:Jn,ZodNumber:yr,ZodBigInt:qi,ZodBoolean:zi,ZodDate:Ur,ZodSymbol:Us,ZodUndefined:Gi,ZodNull:Zi,ZodAny:ai,ZodUnknown:jr,ZodNever:er,ZodVoid:js,ZodArray:xn,get objectUtil(){return Fs},ZodObject:et,ZodUnion:Ki,ZodDiscriminatedUnion:Ws,ZodIntersection:Yi,ZodTuple:vr,ZodRecord:Xi,ZodMap:Vs,ZodSet:Fr,ZodFunction:li,ZodLazy:Qi,ZodLiteral:Ji,ZodEnum:es,ZodNativeEnum:ts,ZodPromise:ci,ZodEffects:Sn,ZodTransformer:Sn,ZodOptional:$n,ZodNullable:$r,ZodDefault:ns,ZodCatch:Hs,ZodNaN:qs,BRAND:Xh,ZodBranded:Kl,ZodPipeline:rs,custom:Yl,Schema:Pe,ZodSchema:Pe,late:Qh,get ZodFirstPartyTypeKind(){return Se},coerce:{string:t=>Jn.create({...t,coerce:!0}),number:t=>yr.create({...t,coerce:!0}),boolean:t=>zi.create({...t,coerce:!0}),bigint:t=>qi.create({...t,coerce:!0}),date:t=>Ur.create({...t,coerce:!0})},any:Xl,array:uf,bigint:tf,boolean:zs,date:nf,discriminatedUnion:hf,effect:Jl,enum:ui,function:yf,instanceof:Jh,intersection:ff,lazy:vf,literal:bf,map:pf,nan:ef,nativeEnum:wf,never:lf,null:af,nullable:Sf,number:it,object:dn,oboolean:()=>zs().optional(),onumber:()=>it().optional(),optional:xf,ostring:()=>kt().optional(),pipeline:Tf,preprocess:_f,promise:Af,record:Ql,set:mf,strictObject:df,string:kt,symbol:rf,transformer:Jl,tuple:gf,undefined:sf,union:eo,unknown:of,void:cf,NEVER:Oe,ZodIssueCode:ce,quotelessJson:Vh,ZodError:Qn});const Gs=()=>kt().uuid(),Ef=/^(?=.{1,255}$)[0-9A-Za-z_](?:(?:[0-9A-Za-z_]|-){0,61}[0-9A-Za-z_])?(?:\.[0-9A-Za-z_](?:(?:[0-9A-Za-z_]|-){0,61}[0-9A-Za-z_])?)*\.?$/,ec=()=>kt().regex(Ef);dn({id:Gs(),host:ec(),startedAt:it().positive(),endedAt:it().nullable().optional()}).strict();const tc=dn({id:Gs(),sessionId:Gs(),adUrl:kt().url(),timestamp:it().positive().describe("The time in ms since 1970 that this ad was seen at")}).strict(),Cf=tc.extend({type:ui(["image"]),additionalDetails:dn({width:it().nonnegative(),height:it().nonnegative()})}).strict(),kf=tc.extend({type:ui(["iframe"]),additionalDetails:dn({width:it().nonnegative(),height:it().nonnegative()})}).strict();eo([Cf,kf]);const to=Gs,nc=ec,no=()=>zs().nullable().optional(),ro=()=>zs().nullable().optional();dn({id:to(),host:nc(),startedAt:it().positive(),endedAt:it().nullable().optional(),imported:no(),generated:ro()}).strict();const rc=dn({id:kt(),sessionId:to(),timestamp:it().positive().describe("The time in ms since 1970 that this ad was seen at"),imported:no()}).strict(),Of=rc.extend({type:ui(["basic-display"]),details:dn({type:ui(["image","iframe"]),url:kt().url().describe("The URL the ad is accessible at"),width:it().nonnegative(),height:it().nonnegative()}).strict()}),Pf=()=>Ql(kt(),Xl()),Df=rc.extend({type:ui(["youtube/hulu/vast","pathmatics"]),details:Pf()}),Nf=eo([Of,Df]),io=to,so=no,If=ro,ao=()=>nc().describe("The mobile app bundle ID or website hostname"),Mf=dn({id:io(),appId:ao(),createdBy:kt({description:"The install id that created the session"}),startedAt:it().positive(),endedAt:it(),imported:so(),generated:If()}).strict(),Lf=dn({id:io(),appId:ao(),createdBy:kt(),startedAt:it().positive(),endedAt:it().nullable().optional(),imported:so(),generated:ro()}).strict(),Rf=Nf,ic=io,sc=so,ac=ao,Bf=Mf,Uf=Lf,jf=dn({id:ic(),appId:ac(),path:kt().startsWith("/"),referrer:kt().nullish(),createdBy:kt(),startedAt:it().positive(),endedAt:it(),imported:sc()}).strict(),Ff=dn({id:ic(),appId:ac(),path:kt().startsWith("/"),referrer:kt().nullish(),createdBy:kt(),startedAt:it().positive(),endedAt:it().nullish(),imported:sc()}).strict(),$f=Rf,Wf=Bf,oc=Uf,Vf=jf,Hf=Ff,lc=$f;class oo{constructor(e,n){this.db=e,this.storeName=n}async deleteAll(){const e=(await this.db).transaction(this.storeName,"readwrite");let n=await e.objectStore(this.storeName).openCursor();for(;n;)await n.delete(),n=await n.continue();await e.done}async findAll(){return await(await this.db).getAll(this.storeName)}}const is=class extends oo{constructor(t){super(t.db,is.STORE_NAME_LATEST),this.config=t}async findAds(t,e){return await(await this.db).getAllFromIndex(this.storeName,is.INDEX_TIMESTAMP,IDBKeyRange.bound(t,e,!1,!0))}async findAdsForSession(t){return await(await this.db).getAllFromIndex(this.storeName,is.INDEX_SESSION_ID,t)}async upsertAd(t){var e,n;const i=await this.db,a=lc.parse(t);return(n=(e=this.config).onAdUpserted)==null||n.call(e,a),await i.put(this.storeName,a),a}};let dt=is;dt.STORE_NAME_1="ads",dt.STORE_NAME_2="ads-2",dt.STORE_NAME_LATEST=is.STORE_NAME_2,dt.INDEX_SESSION_ID="idx_ad_sessionId",dt.INDEX_TIMESTAMP="idx_ad_timestamp";let Zs;const qf=new Uint8Array(16);function zf(){if(!Zs&&(Zs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zs(qf)}const xt=[];for(let t=0;t<256;++t)xt.push((t+256).toString(16).slice(1));function Gf(t,e=0){return(xt[t[e+0]]+xt[t[e+1]]+xt[t[e+2]]+xt[t[e+3]]+"-"+xt[t[e+4]]+xt[t[e+5]]+"-"+xt[t[e+6]]+xt[t[e+7]]+"-"+xt[t[e+8]]+xt[t[e+9]]+"-"+xt[t[e+10]]+xt[t[e+11]]+xt[t[e+12]]+xt[t[e+13]]+xt[t[e+14]]+xt[t[e+15]]).toLowerCase()}const Zf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cc={randomUUID:Zf};function ss(t,e,n){if(cc.randomUUID&&!e&&!t)return cc.randomUUID();t=t||{};const i=t.random||(t.rng||zf)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let a=0;a<16;++a)e[n+a]=i[a];return e}return Gf(i)}const lo=-1;function Kf(t){var e;return{id:t.id,appId:t.appId,path:t.path,referrer:t.referrer,createdBy:t.createdBy,endedAt:(e=t.endedAt)!=null?e:lo,startedAt:t.startedAt,imported:t.imported}}function co(t){return{id:t.id,appId:t.appId,path:t.path,referrer:t.referrer,createdBy:t.createdBy,endedAt:t.endedAt===lo?null:t.endedAt,startedAt:t.startedAt,imported:t.imported}}const as=class extends oo{constructor(t){super(t.db,as.STORE_NAME_LATEST),this.config=t}async startPageView(t){const e=await this.db,n=Hf.parse({...t,id:ss(),createdBy:await this.config.getInstallId(),endedAt:void 0}),i=Kf(n);return await e.add(this.storeName,i),n}async endPageView(t,e){const n=await this.db,i=await n.get(this.storeName,t.id);if(i==null)throw Error(`Cannot update: PageView not found with id=${t.id}`);const a={...i,endedAt:e};return await n.put(this.storeName,a),co(a)}async getActivePageViews(){return(await(await this.db).getAllFromIndex(this.storeName,as.INDEX_ENDED_AT,lo)).map(co)}async findPageViewsByEndedAt(t,e){return(await(await this.db).getAllFromIndex(this.storeName,as.INDEX_ENDED_AT,IDBKeyRange.bound(t,e,!1,!0))).map(co)}async deleteAllGeneratedPageViews(){const t=(await this.db).transaction(this.storeName,"readwrite");let e=await t.store.openCursor();for(;e;)e.value.imported&&await e.delete(),e=await e.continue();await t.done}};let tr=as;tr.STORE_NAME_1="page_views",tr.STORE_NAME_LATEST=as.STORE_NAME_1,tr.INDEX_ENDED_AT="idx_page_view_endedAt",tr.INDEX_STARTED_AT="idx_page_view_startedAt";function uc(t,e,n,i){function a(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function y(v){try{p(i.next(v))}catch(m){d(m)}}function h(v){try{p(i.throw(v))}catch(m){d(m)}}function p(v){v.done?u(v.value):a(v.value).then(y,h)}p((i=i.apply(t,e||[])).next())})}function dc(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(u=p[0]&2?a.return:p[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,p[1])).done)return u;switch(a=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){n.label=p[1];break}if(p[0]===6&&n.label<u[1]){n.label=u[1],u=p;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(p);break}u[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(v){p=[6,v],a=0}finally{i=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Yf=new Error("request for lock canceled"),Xf=function(){function t(e,n){n===void 0&&(n=Yf),this._value=e,this._cancelError=n,this._weightedQueues=[],this._weightedWaiters=[]}return t.prototype.acquire=function(e){var n=this;if(e===void 0&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise(function(i,a){n._weightedQueues[e-1]||(n._weightedQueues[e-1]=[]),n._weightedQueues[e-1].push({resolve:i,reject:a}),n._dispatch()})},t.prototype.runExclusive=function(e,n){return n===void 0&&(n=1),uc(this,void 0,void 0,function(){var i,a,u;return dc(this,function(d){switch(d.label){case 0:return[4,this.acquire(n)];case 1:i=d.sent(),a=i[0],u=i[1],d.label=2;case 2:return d.trys.push([2,,4,5]),[4,e(a)];case 3:return[2,d.sent()];case 4:return u(),[7];case 5:return[2]}})})},t.prototype.waitForUnlock=function(e){var n=this;if(e===void 0&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));return new Promise(function(i){n._weightedWaiters[e-1]||(n._weightedWaiters[e-1]=[]),n._weightedWaiters[e-1].push(i),n._dispatch()})},t.prototype.isLocked=function(){return this._value<=0},t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(e){this._value=e,this._dispatch()},t.prototype.release=function(e){if(e===void 0&&(e=1),e<=0)throw new Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatch()},t.prototype.cancel=function(){var e=this;this._weightedQueues.forEach(function(n){return n.forEach(function(i){return i.reject(e._cancelError)})}),this._weightedQueues=[]},t.prototype._dispatch=function(){for(var e,n=this._value;n>0;n--){var i=(e=this._weightedQueues[n-1])===null||e===void 0?void 0:e.shift();if(i){var a=this._value,u=n;this._value-=n,n=this._value+1,i.resolve([a,this._newReleaser(u)])}}this._drainUnlockWaiters()},t.prototype._newReleaser=function(e){var n=this,i=!1;return function(){i||(i=!0,n.release(e))}},t.prototype._drainUnlockWaiters=function(){for(var e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(function(n){return n()}),this._weightedWaiters[e-1]=[])},t}(),hc=function(){function t(e){this._semaphore=new Xf(1,e)}return t.prototype.acquire=function(){return uc(this,void 0,void 0,function(){var e,n;return dc(this,function(i){switch(i.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=i.sent(),n=e[1],[2,n]}})})},t.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},t.prototype.isLocked=function(){return this._semaphore.isLocked()},t.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},t.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},t.prototype.cancel=function(){return this._semaphore.cancel()},t}(),os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fc={exports:{}};(function(t,e){(function(n,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:os,function(n){var i,a;if(!((a=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&a.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const u="The message port closed before a response was received.",d=y=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(M,N=void 0){super(N),this.createItem=M}get(M){return this.has(M)||this.set(M,this.createItem(M)),super.get(M)}}const v=C=>C&&typeof C=="object"&&typeof C.then=="function",m=(C,M)=>(...N)=>{y.runtime.lastError?C.reject(new Error(y.runtime.lastError.message)):M.singleCallbackArg||N.length<=1&&M.singleCallbackArg!==!1?C.resolve(N[0]):C.resolve(N)},g=C=>C==1?"argument":"arguments",A=(C,M)=>function(N,...J){if(J.length<M.minArgs)throw new Error(`Expected at least ${M.minArgs} ${g(M.minArgs)} for ${C}(), got ${J.length}`);if(J.length>M.maxArgs)throw new Error(`Expected at most ${M.maxArgs} ${g(M.maxArgs)} for ${C}(), got ${J.length}`);return new Promise((fe,L)=>{if(M.fallbackToNoCallback)try{N[C](...J,m({resolve:fe,reject:L},M))}catch(z){console.warn(`${C} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,z),N[C](...J),M.fallbackToNoCallback=!1,M.noCallback=!0,fe()}else M.noCallback?(N[C](...J),fe()):N[C](...J,m({resolve:fe,reject:L},M))})},o=(C,M,N)=>new Proxy(M,{apply(J,fe,L){return N.call(fe,C,...L)}});let S=Function.call.bind(Object.prototype.hasOwnProperty);const P=(C,M={},N={})=>{let J=Object.create(null),fe={has(z,T){return T in C||T in J},get(z,T,q){if(T in J)return J[T];if(!(T in C))return;let K=C[T];if(typeof K=="function")if(typeof M[T]=="function")K=o(C,C[T],M[T]);else if(S(N,T)){let le=A(T,N[T]);K=o(C,C[T],le)}else K=K.bind(C);else if(typeof K=="object"&&K!==null&&(S(M,T)||S(N,T)))K=P(K,M[T],N[T]);else if(S(N,"*"))K=P(K,M[T],N["*"]);else return Object.defineProperty(J,T,{configurable:!0,enumerable:!0,get(){return C[T]},set(le){C[T]=le}}),K;return J[T]=K,K},set(z,T,q,K){return T in J?J[T]=q:C[T]=q,!0},defineProperty(z,T,q){return Reflect.defineProperty(J,T,q)},deleteProperty(z,T){return Reflect.deleteProperty(J,T)}},L=Object.create(C);return new Proxy(L,fe)},R=C=>({addListener(M,N,...J){M.addListener(C.get(N),...J)},hasListener(M,N){return M.hasListener(C.get(N))},removeListener(M,N){M.removeListener(C.get(N))}}),$=new p(C=>typeof C!="function"?C:function(M){const N=P(M,{},{getContent:{minArgs:0,maxArgs:0}});C(N)}),O=new p(C=>typeof C!="function"?C:function(M,N,J){let fe=!1,L,z=new Promise(le=>{L=function(se){fe=!0,le(se)}}),T;try{T=C(M,N,L)}catch(le){T=Promise.reject(le)}const q=T!==!0&&v(T);return T!==!0&&!q&&!fe?!1:((le=>{le.then(se=>{J(se)},se=>{let pe;se&&(se instanceof Error||typeof se.message=="string")?pe=se.message:pe="An unexpected error occurred",J({__mozWebExtensionPolyfillReject__:!0,message:pe})}).catch(se=>{console.error("Failed to send onMessage rejected reply",se)})})(q?T:z),!0)}),D=({reject:C,resolve:M},N)=>{y.runtime.lastError?y.runtime.lastError.message===u?M():C(new Error(y.runtime.lastError.message)):N&&N.__mozWebExtensionPolyfillReject__?C(new Error(N.message)):M(N)},G=(C,M,N,...J)=>{if(J.length<M.minArgs)throw new Error(`Expected at least ${M.minArgs} ${g(M.minArgs)} for ${C}(), got ${J.length}`);if(J.length>M.maxArgs)throw new Error(`Expected at most ${M.maxArgs} ${g(M.maxArgs)} for ${C}(), got ${J.length}`);return new Promise((fe,L)=>{const z=D.bind(null,{resolve:fe,reject:L});J.push(z),N.sendMessage(...J)})},j={devtools:{network:{onRequestFinished:R($)}},runtime:{onMessage:R(O),onMessageExternal:R(O),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":Z},services:{"*":Z},websites:{"*":Z}},P(y,j,h)};n.exports=d(chrome)}else n.exports=globalThis.browser})})(fc);const ze=fc.exports;class Qf{constructor(e,n=Date.now()){this.logMethod=e,this.startedAt=n}log(e){const n=Date.now()-this.startedAt;this.logMethod(e.replace(/\{duration\}/g,`${(n/1e3).toFixed(3)}s`))}}const di=1e3,uo=60*di,Jf=60*uo;function Ks(t){return Math.round(t/1e3)}function eg(){return new Promise(t=>setTimeout(t,0))}function tg(t){const e=new hc;return(...n)=>e.runExclusive(()=>t(...n))}async function ho(t){return(await ze.storage.local.get(t))[t]}async function ls(t,e){e===void 0?await ze.storage.local.remove(t):await ze.storage.local.set({[t]:e})}function ng(t,e){const n=typeof e=="string",i=a=>n?a[e]:e(a);return t.reduce((a,u)=>{var d,y;const h=i(u);return a[h]=(y=(d=a[h])==null?void 0:d.concat(u))!=null?y:[u],a},{})}function rg(t,e){const n=typeof e=="string",i=a=>n?a[e]:e(a);return t.reduce((a,u)=>{const d=i(u);return a[d]=u,a},{})}function ig(){let t,e;return[new Promise((n,i)=>{t=n,e=i}),t,e]}function sg(t){return t.state!=="docked"&&t.state!=="minimized"}function ag(t,e,n,i){return i&&t.audible||t.active&&e.focused&&sg(e)&&n}function gc(t){const e=t.objectStoreNames.length,n=[];for(let i=0;i<e;i++){const a=t.objectStoreNames.item(i);a&&n.push(a)}return n}const fo=-1;function pc(t){var e;return{id:t.id,appId:t.appId,createdBy:t.createdBy,endedAt:(e=t.endedAt)!=null?e:fo,startedAt:t.startedAt,imported:t.imported,generated:t.generated}}function Wr(t){return{id:t.id,appId:t.appId,createdBy:t.createdBy,endedAt:t.endedAt===fo?null:t.endedAt,startedAt:t.startedAt,imported:t.imported,generated:t.generated}}const nr=class extends oo{constructor(t){super(t.db,nr.STORE_NAME_LATEST),this.config=t}async startSession(t){const e=await this.db,n=oc.parse({...t,id:ss(),createdBy:await this.config.getInstallId(),endedAt:void 0}),i=pc(n);return await e.add(this.storeName,i),n}async createSessions(t){const e=await this.db,n=await this.config.getInstallId(),i=e.transaction(nr.STORE_NAME_LATEST,"readwrite"),a=i.objectStore(nr.STORE_NAME_LATEST),u=t.map(y=>oc.parse({...y,id:ss(),createdBy:n})),d=u.map(pc);return await Promise.all([...d.map(y=>a.add(y)),i.done]),u}async endSession(t,e){var n,i;const a=await this.db;e-t.startedAt>=6*Jf&&((i=(n=this.config).onLongSessionDetected)==null||i.call(n,t,e),e=t.startedAt+10*uo);const u=await a.get(this.storeName,t.id);if(u==null)throw Error(`Cannot update: Session not found with id=${t.id}`);const d={...u,endedAt:e};return await a.put(this.storeName,d),Wr(d)}async findAllSessions(){return(await super.findAll()).map(Wr)}async findSessions(t,e){return(await(await this.db).getAllFromIndex(this.storeName,nr.INDEX_STARTED_AT,IDBKeyRange.bound(t,e,!1,!0))).map(Wr)}async findSessionsByEndedAt(t,e){return(await(await this.db).getAllFromIndex(this.storeName,nr.INDEX_ENDED_AT,IDBKeyRange.bound(t,e,!1,!0))).map(Wr)}async findOldestSession(){const t=(await(await this.db).getAllFromIndex(this.storeName,nr.INDEX_STARTED_AT,IDBKeyRange.lowerBound(0,!0))).shift();return t?Wr(t):void 0}async getSession(t){const e=await(await this.db).get(this.storeName,t);if(e==null)throw Error(`No session with id=${t} was found`);return Wr(e)}async getActiveSessions(){return(await(await this.db).getAllFromIndex(this.storeName,nr.INDEX_ENDED_AT,fo)).map(Wr)}async deleteAllGeneratedSessions(){const t=(await this.db).transaction(this.storeName,"readwrite");let e=await t.store.openCursor();for(;e;){const n=e.value;(n.imported||n.generated)&&await e.delete(),e=await e.continue()}await t.done}};let ot=nr;ot.STORE_NAME_1="sessions",ot.STORE_NAME_2="sessions_2",ot.STORE_NAME_LATEST=nr.STORE_NAME_2,ot.INDEX_ENDED_AT="idx_session_endedAt",ot.INDEX_STARTED_AT="idx_session_startedAt";var St=(t=>(t[t.V2=2]="V2",t[t.V3=3]="V3",t[t.V4=4]="V4",t[t.V5=5]="V5",t[t.V6=6]="V6",t[t.V7=7]="V7",t[t.V8=8]="V8",t))(St||{});const og=hn.object({version:hn.nativeEnum(St),stores:hn.object({[ot.STORE_NAME_LATEST]:hn.array(Wf).optional(),[tr.STORE_NAME_LATEST]:hn.array(Vf).optional(),[dt.STORE_NAME_LATEST]:hn.array(lc).optional()})});hn.object({version:hn.nativeEnum(St),stores:hn.record(hn.string(),hn.array(hn.any()))});async function lg(t){const e=await t,n={version:e.version,stores:{}},i=gc(e),a=e.transaction(i,"readonly");for(const u of i){const d=await a.objectStore(u).getAll();d.forEach(y=>{delete y.imported}),n.stores[u]=d}return await a.done,n}function cg(t,e){return{...t,id:ss(),sessionId:e}}function ug(t){return{...t,id:ss()}}function mc(t){return{id:t.id,sessionId:t.sessionId,timestamp:t.timestamp,type:"basic-display",details:{type:t.type,height:t.additionalDetails.height,width:t.additionalDetails.width,url:t.adUrl}}}function Ys(t,e){var n;return{id:t.id,appId:t.host,createdBy:e,startedAt:t.startedAt,endedAt:(n=t.endedAt)!=null?n:-1,imported:t.imported,generated:t.generated}}async function dg({dbPromise:t,usageBackup:e,logger:n,getInstallId:i}){const a=await t;n==null||n.debug("[import-backup] Importing...",e);const u=await i(),d=await og.parseAsync(await yc(e,a.version,{installId:u})),y=gc(a),h=a.transaction(y,"readwrite");for(const p of y){const v=d.stores[p];if(v!=null&&v.length){const m=h.objectStore(p);for(const g of v)n==null||n.debug(`[import-backup]: ${p}:`,g),await m.put({...g,imported:!0})}}await h.done}const go=t=>e=>({...e,version:t}),hg=()=>t=>t,fg=t=>{var e;return{version:St.V4,stores:{[ot.STORE_NAME_2]:t.stores[ot.STORE_NAME_2],[dt.STORE_NAME_2]:(e=t.stores[dt.STORE_NAME_2])==null?void 0:e.map(mc)}}},gg=(t,{installId:e})=>{var n;return{version:St.V6,stores:{[ot.STORE_NAME_2]:(n=t.stores[ot.STORE_NAME_2])==null?void 0:n.map(i=>Ys(i,e)),[dt.STORE_NAME_2]:t.stores[dt.STORE_NAME_2]}}},pg=(t,{installId:e})=>{var n;return{version:St.V7,stores:{[ot.STORE_NAME_2]:(n=t.stores[ot.STORE_NAME_2])==null?void 0:n.map(i=>"host"in i?Ys(i,e):i),[dt.STORE_NAME_2]:t.stores[dt.STORE_NAME_2]}}},mg={[St.V2]:go(St.V3),[St.V3]:fg,[St.V4]:go(St.V5),[St.V5]:gg,[St.V6]:pg,[St.V7]:go(St.V8),[St.V8]:hg()};async function yc(t,e,n){if(t.version===e)return t;const i=mg[t.version];if(i==null)throw Error(`Failed to upgrade backup version ${t.version}, version not supported`);const a=await i(t,n);return await yc(a,e,n)}const yg=(t,e)=>e.some(n=>t instanceof n);let vc,bc;function vg(){return vc||(vc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bg(){return bc||(bc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wc=new WeakMap,po=new WeakMap,Ac=new WeakMap,mo=new WeakMap,yo=new WeakMap;function wg(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",u),t.removeEventListener("error",d)},u=()=>{n(br(t.result)),a()},d=()=>{i(t.error),a()};t.addEventListener("success",u),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&wc.set(n,t)}).catch(()=>{}),yo.set(e,t),e}function Ag(t){if(po.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",d),t.removeEventListener("abort",d)},u=()=>{n(),a()},d=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",u),t.addEventListener("error",d),t.addEventListener("abort",d)});po.set(t,e)}let vo={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return po.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ac.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xg(t){vo=t(vo)}function Sg(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(bo(this),e,...n);return Ac.set(i,e.sort?e.sort():[e]),br(i)}:bg().includes(t)?function(...e){return t.apply(bo(this),e),br(wc.get(this))}:function(...e){return br(t.apply(bo(this),e))}}function _g(t){return typeof t=="function"?Sg(t):(t instanceof IDBTransaction&&Ag(t),yg(t,vg())?new Proxy(t,vo):t)}function br(t){if(t instanceof IDBRequest)return wg(t);if(mo.has(t))return mo.get(t);const e=_g(t);return e!==t&&(mo.set(t,e),yo.set(e,t)),e}const bo=t=>yo.get(t);function Tg(t,e,{blocked:n,upgrade:i,blocking:a,terminated:u}={}){const d=indexedDB.open(t,e),y=br(d);return i&&d.addEventListener("upgradeneeded",h=>{i(br(d.result),h.oldVersion,h.newVersion,br(d.transaction),h)}),n&&d.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),y.then(h=>{u&&h.addEventListener("close",()=>u()),a&&h.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),y}const Eg=["get","getKey","getAll","getAllKeys","count"],Cg=["put","add","delete","clear"],wo=new Map;function xc(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wo.get(e))return wo.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=Cg.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||Eg.includes(n)))return;const u=async function(d,...y){const h=this.transaction(d,a?"readwrite":"readonly");let p=h.store;return i&&(p=p.index(y.shift())),(await Promise.all([p[n](...y),a&&h.done]))[0]};return wo.set(e,u),u}xg(t=>({...t,get:(e,n,i)=>xc(e,n)||t.get(e,n,i),has:(e,n)=>!!xc(e,n)||t.has(e,n)}));async function kg({db:t,tx:e}){const n=e.objectStore(ot.STORE_NAME_1),i=e.objectStore(ot.STORE_NAME_2),a=e.objectStore(dt.STORE_NAME_1),u=e.objectStore(dt.STORE_NAME_2),d=await n.index(ot.INDEX_STARTED_AT).getAll();for(const y of d){const h=ug(y);await i.add(h);const p=await a.index(dt.INDEX_SESSION_ID).getAll(y.id);for(const v of p){const m=cg(v,h.id);await u.add(m)}}t.deleteObjectStore(n.name),t.deleteObjectStore(a.name)}async function Og({tx:t}){const e=t.objectStore(dt.STORE_NAME_2),n=await e.getAll();for(const i of n){const a=mc(i);await e.put(a)}}async function Pg({tx:t,ctx:e}){const n=t.objectStore(ot.STORE_NAME_2),i=await n.getAll();for(const a of i){const u=Ys(a,e.installId);await n.put(u)}}async function Dg({tx:t,ctx:e}){const n=t.objectStore(ot.STORE_NAME_2),i=await n.getAll();for(const a of i)if("host"in a){const u=Ys(a,e.installId);await n.put(u)}}const Xs=()=>{},Ng=[Xs,Xs,Xs,kg,Og,Xs,Pg,Dg];async function Ig(t,{logger:e}){if(t.oldVersion===0||t.newVersion==null){e==null||e.debug("[usage-database] Skipping migrations for new databases",{oldVersion:t.oldVersion,newVersion:t.newVersion});return}const n=t.oldVersion+1,i=t.newVersion,a=Ng.slice(n,i+1);if(a.length===0){e==null||e.log("[usage-database] No migrations to run");return}e==null||e.log(`[usage-database] Running migrations ${n} -> ${i}`);for(const u of a)await u(t)}function hi(t,e,n,i){return t.indexNames.contains(e)?t.index(e):t.createIndex(e,n,i)}function Ao({db:t,tx:e},n,i){return t.objectStoreNames.contains(n)?e.objectStore(n):t.createObjectStore(n,i)}const Mg=St.V8;async function Lg(t){const e=await t.getInstallId();return Tg("UsageSdkDb",Mg,{async upgrade(n,i,a,u){const d={db:n,oldVersion:i,newVersion:a,tx:u,ctx:{installId:e}};Rg(d),await Ig(d,{logger:null})}})}function Rg(t){const e=Ao(t,ot.STORE_NAME_LATEST,{keyPath:"id"});hi(e,ot.INDEX_STARTED_AT,"startedAt",{unique:!1}),hi(e,ot.INDEX_ENDED_AT,"endedAt",{unique:!1});const n=Ao(t,tr.STORE_NAME_LATEST,{keyPath:"id"});hi(n,tr.INDEX_STARTED_AT,"startedAt",{unique:!1}),hi(n,tr.INDEX_ENDED_AT,"endedAt",{unique:!1});const i=Ao(t,dt.STORE_NAME_LATEST,{keyPath:"id"});hi(i,dt.INDEX_SESSION_ID,"sessionId",{unique:!1}),hi(i,dt.INDEX_TIMESTAMP,"timestamp",{unique:!1})}function Bg(t){const e=Lg(t),n=t.logger===void 0?console:t.logger;return{indexedDb:e,sessionsRepo:new ot({db:e,...t}),pageViewsRepo:new tr({db:e,...t}),adsRepo:new dt({db:e,...t}),exportBackup:()=>lg(e),importBackup:i=>dg({dbPromise:e,usageBackup:i,getInstallId:t.getInstallId,logger:n})}}var xo={exports:{}};(function(t,e){var n=200,i="__lodash_hash_undefined__",a=1,u=2,d=9007199254740991,y="[object Arguments]",h="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",m="[object Date]",g="[object Error]",A="[object Function]",o="[object GeneratorFunction]",S="[object Map]",P="[object Number]",R="[object Null]",$="[object Object]",O="[object Promise]",D="[object Proxy]",G="[object RegExp]",j="[object Set]",Z="[object String]",C="[object Symbol]",M="[object Undefined]",N="[object WeakMap]",J="[object ArrayBuffer]",fe="[object DataView]",L="[object Float32Array]",z="[object Float64Array]",T="[object Int8Array]",q="[object Int16Array]",K="[object Int32Array]",le="[object Uint8Array]",se="[object Uint8ClampedArray]",pe="[object Uint16Array]",ge="[object Uint32Array]",Fe=/[\\^$.*+?()[\]{}|]/g,Zt=/^\[object .+?Constructor\]$/,yn=/^(?:0|[1-9]\d*)$/,Re={};Re[L]=Re[z]=Re[T]=Re[q]=Re[K]=Re[le]=Re[se]=Re[pe]=Re[ge]=!0,Re[y]=Re[h]=Re[J]=Re[v]=Re[fe]=Re[m]=Re[g]=Re[A]=Re[S]=Re[P]=Re[$]=Re[G]=Re[j]=Re[Z]=Re[N]=!1;var an=typeof os=="object"&&os&&os.Object===Object&&os,sr=typeof self=="object"&&self&&self.Object===Object&&self,jt=an||sr||Function("return this")(),Sr=e&&!e.nodeType&&e,qn=Sr&&!0&&t&&!t.nodeType&&t,vn=qn&&qn.exports===Sr,Kt=vn&&an.process,on=function(){try{return Kt&&Kt.binding&&Kt.binding("util")}catch{}}(),bn=on&&on.isTypedArray;function Gr(k,U){for(var ne=-1,he=k==null?0:k.length,qe=0,Ce=[];++ne<he;){var Xe=k[ne];U(Xe,ne,k)&&(Ce[qe++]=Xe)}return Ce}function Zr(k,U){for(var ne=-1,he=U.length,qe=k.length;++ne<he;)k[qe+ne]=U[ne];return k}function ar(k,U){for(var ne=-1,he=k==null?0:k.length;++ne<he;)if(U(k[ne],ne,k))return!0;return!1}function _r(k,U){for(var ne=-1,he=Array(k);++ne<k;)he[ne]=U(ne);return he}function Ei(k){return function(U){return k(U)}}function or(k,U){return k.has(U)}function kn(k,U){return k==null?void 0:k[U]}function Pt(k){var U=-1,ne=Array(k.size);return k.forEach(function(he,qe){ne[++U]=[qe,he]}),ne}function On(k,U){return function(ne){return k(U(ne))}}function lr(k){var U=-1,ne=Array(k.size);return k.forEach(function(he){ne[++U]=he}),ne}var De=Array.prototype,Be=Function.prototype,be=Object.prototype,je=jt["__core-js_shared__"],Yt=Be.toString,tt=be.hasOwnProperty,Le=function(){var k=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),we=be.toString,Xt=RegExp("^"+Yt.call(tt).replace(Fe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cr=vn?jt.Buffer:void 0,ur=jt.Symbol,ma=jt.Uint8Array,Ft=be.propertyIsEnumerable,Xo=De.splice,Pn=ur?ur.toStringTag:void 0,pt=Object.getOwnPropertySymbols,Qo=cr?cr.isBuffer:void 0,ya=On(Object.keys,Object),Ci=Qt(jt,"DataView"),Tr=Qt(jt,"Map"),Kr=Qt(jt,"Promise"),ki=Qt(jt,"Set"),ps=Qt(jt,"WeakMap"),Dn=Qt(Object,"create"),va=Kn(Ci),ba=Kn(Tr),wa=Kn(Kr),Aa=Kn(ki),Oi=Kn(ps),zn=ur?ur.prototype:void 0,Nn=zn?zn.valueOf:void 0;function dr(k){var U=-1,ne=k==null?0:k.length;for(this.clear();++U<ne;){var he=k[U];this.set(he[0],he[1])}}function xa(){this.__data__=Dn?Dn(null):{},this.size=0}function ms(k){var U=this.has(k)&&delete this.__data__[k];return this.size-=U?1:0,U}function Jo(k){var U=this.__data__;if(Dn){var ne=U[k];return ne===i?void 0:ne}return tt.call(U,k)?U[k]:void 0}function el(k){var U=this.__data__;return Dn?U[k]!==void 0:tt.call(U,k)}function tl(k,U){var ne=this.__data__;return this.size+=this.has(k)?0:1,ne[k]=Dn&&U===void 0?i:U,this}dr.prototype.clear=xa,dr.prototype.delete=ms,dr.prototype.get=Jo,dr.prototype.has=el,dr.prototype.set=tl;function In(k){var U=-1,ne=k==null?0:k.length;for(this.clear();++U<ne;){var he=k[U];this.set(he[0],he[1])}}function nl(){this.__data__=[],this.size=0}function Sa(k){var U=this.__data__,ne=Xr(U,k);if(ne<0)return!1;var he=U.length-1;return ne==he?U.pop():Xo.call(U,ne,1),--this.size,!0}function _a(k){var U=this.__data__,ne=Xr(U,k);return ne<0?void 0:U[ne][1]}function Ta(k){return Xr(this.__data__,k)>-1}function Ea(k,U){var ne=this.__data__,he=Xr(ne,k);return he<0?(++this.size,ne.push([k,U])):ne[he][1]=U,this}In.prototype.clear=nl,In.prototype.delete=Sa,In.prototype.get=_a,In.prototype.has=Ta,In.prototype.set=Ea;function Gn(k){var U=-1,ne=k==null?0:k.length;for(this.clear();++U<ne;){var he=k[U];this.set(he[0],he[1])}}function Ca(){this.size=0,this.__data__={hash:new dr,map:new(Tr||In),string:new dr}}function ka(k){var U=Li(this,k).delete(k);return this.size-=U?1:0,U}function Dt(k){return Li(this,k).get(k)}function Er(k){return Li(this,k).has(k)}function Pi(k,U){var ne=Li(this,k),he=ne.size;return ne.set(k,U),this.size+=ne.size==he?0:1,this}Gn.prototype.clear=Ca,Gn.prototype.delete=ka,Gn.prototype.get=Dt,Gn.prototype.has=Er,Gn.prototype.set=Pi;function Di(k){var U=-1,ne=k==null?0:k.length;for(this.__data__=new Gn;++U<ne;)this.add(k[U])}function Oa(k){return this.__data__.set(k,i),this}function rl(k){return this.__data__.has(k)}Di.prototype.add=Di.prototype.push=Oa,Di.prototype.has=rl;function ln(k){var U=this.__data__=new In(k);this.size=U.size}function Yr(){this.__data__=new In,this.size=0}function Pa(k){var U=this.__data__,ne=U.delete(k);return this.size=U.size,ne}function Ni(k){return this.__data__.get(k)}function Da(k){return this.__data__.has(k)}function il(k,U){var ne=this.__data__;if(ne instanceof In){var he=ne.__data__;if(!Tr||he.length<n-1)return he.push([k,U]),this.size=++ne.size,this;ne=this.__data__=new Gn(he)}return ne.set(k,U),this.size=ne.size,this}ln.prototype.clear=Yr,ln.prototype.delete=Pa,ln.prototype.get=Ni,ln.prototype.has=Da,ln.prototype.set=il;function sl(k,U){var ne=Qr(k),he=!ne&&Ma(k),qe=!ne&&!he&&Jr(k),Ce=!ne&&!he&&!qe&&ja(k),Xe=ne||he||qe||Ce,lt=Xe?_r(k.length,String):[],ht=lt.length;for(var Qe in k)(U||tt.call(k,Qe))&&!(Xe&&(Qe=="length"||qe&&(Qe=="offset"||Qe=="parent")||Ce&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||cl(Qe,ht)))&&lt.push(Qe);return lt}function Xr(k,U){for(var ne=k.length;ne--;)if(Ri(k[ne][0],U))return ne;return-1}function al(k,U,ne){var he=U(k);return Qr(k)?he:Zr(he,ne(k))}function wn(k){return k==null?k===void 0?M:R:Pn&&Pn in Object(k)?Zn(k):Ia(k)}function ys(k){return Cr(k)&&wn(k)==y}function Mn(k,U,ne,he,qe){return k===U?!0:k==null||U==null||!Cr(k)&&!Cr(U)?k!==k&&U!==U:vs(k,U,ne,he,Mn,qe)}function vs(k,U,ne,he,qe,Ce){var Xe=Qr(k),lt=Qr(U),ht=Xe?h:Ln(k),Qe=lt?h:Ln(U);ht=ht==y?$:ht,Qe=Qe==y?$:Qe;var $t=ht==$,s=Qe==$,l=ht==Qe;if(l&&Jr(k)){if(!Jr(U))return!1;Xe=!0,$t=!1}if(l&&!$t)return Ce||(Ce=new ln),Xe||ja(k)?Na(k,U,ne,he,qe,Ce):bs(k,U,ht,ne,he,qe,Ce);if(!(ne&a)){var c=$t&&tt.call(k,"__wrapped__"),f=s&&tt.call(U,"__wrapped__");if(c||f){var b=c?k.value():k,w=f?U.value():U;return Ce||(Ce=new ln),qe(b,w,ne,he,Ce)}}return l?(Ce||(Ce=new ln),ws(k,U,ne,he,qe,Ce)):!1}function hr(k){if(!Ua(k)||dl(k))return!1;var U=Ra(k)?Xt:Zt;return U.test(Kn(k))}function Ii(k){return Cr(k)&&Ba(k.length)&&!!Re[wn(k)]}function ol(k){if(!hl(k))return ya(k);var U=[];for(var ne in Object(k))tt.call(k,ne)&&ne!="constructor"&&U.push(ne);return U}function Na(k,U,ne,he,qe,Ce){var Xe=ne&a,lt=k.length,ht=U.length;if(lt!=ht&&!(Xe&&ht>lt))return!1;var Qe=Ce.get(k);if(Qe&&Ce.get(U))return Qe==U;var $t=-1,s=!0,l=ne&u?new Di:void 0;for(Ce.set(k,U),Ce.set(U,k);++$t<lt;){var c=k[$t],f=U[$t];if(he)var b=Xe?he(f,c,$t,U,k,Ce):he(c,f,$t,k,U,Ce);if(b!==void 0){if(b)continue;s=!1;break}if(l){if(!ar(U,function(w,x){if(!or(l,x)&&(c===w||qe(c,w,ne,he,Ce)))return l.push(x)})){s=!1;break}}else if(!(c===f||qe(c,f,ne,he,Ce))){s=!1;break}}return Ce.delete(k),Ce.delete(U),s}function bs(k,U,ne,he,qe,Ce,Xe){switch(ne){case fe:if(k.byteLength!=U.byteLength||k.byteOffset!=U.byteOffset)return!1;k=k.buffer,U=U.buffer;case J:return!(k.byteLength!=U.byteLength||!Ce(new ma(k),new ma(U)));case v:case m:case P:return Ri(+k,+U);case g:return k.name==U.name&&k.message==U.message;case G:case Z:return k==U+"";case S:var lt=Pt;case j:var ht=he&a;if(lt||(lt=lr),k.size!=U.size&&!ht)return!1;var Qe=Xe.get(k);if(Qe)return Qe==U;he|=u,Xe.set(k,U);var $t=Na(lt(k),lt(U),he,qe,Ce,Xe);return Xe.delete(k),$t;case C:if(Nn)return Nn.call(k)==Nn.call(U)}return!1}function ws(k,U,ne,he,qe,Ce){var Xe=ne&a,lt=Mi(k),ht=lt.length,Qe=Mi(U),$t=Qe.length;if(ht!=$t&&!Xe)return!1;for(var s=ht;s--;){var l=lt[s];if(!(Xe?l in U:tt.call(U,l)))return!1}var c=Ce.get(k);if(c&&Ce.get(U))return c==U;var f=!0;Ce.set(k,U),Ce.set(U,k);for(var b=Xe;++s<ht;){l=lt[s];var w=k[l],x=U[l];if(he)var E=Xe?he(x,w,l,U,k,Ce):he(w,x,l,k,U,Ce);if(!(E===void 0?w===x||qe(w,x,ne,he,Ce):E)){f=!1;break}b||(b=l=="constructor")}if(f&&!b){var F=k.constructor,W=U.constructor;F!=W&&"constructor"in k&&"constructor"in U&&!(typeof F=="function"&&F instanceof F&&typeof W=="function"&&W instanceof W)&&(f=!1)}return Ce.delete(k),Ce.delete(U),f}function Mi(k){return al(k,gl,ll)}function Li(k,U){var ne=k.__data__;return ul(U)?ne[typeof U=="string"?"string":"hash"]:ne.map}function Qt(k,U){var ne=kn(k,U);return hr(ne)?ne:void 0}function Zn(k){var U=tt.call(k,Pn),ne=k[Pn];try{k[Pn]=void 0;var he=!0}catch{}var qe=we.call(k);return he&&(U?k[Pn]=ne:delete k[Pn]),qe}var ll=pt?function(k){return k==null?[]:(k=Object(k),Gr(pt(k),function(U){return Ft.call(k,U)}))}:As,Ln=wn;(Ci&&Ln(new Ci(new ArrayBuffer(1)))!=fe||Tr&&Ln(new Tr)!=S||Kr&&Ln(Kr.resolve())!=O||ki&&Ln(new ki)!=j||ps&&Ln(new ps)!=N)&&(Ln=function(k){var U=wn(k),ne=U==$?k.constructor:void 0,he=ne?Kn(ne):"";if(he)switch(he){case va:return fe;case ba:return S;case wa:return O;case Aa:return j;case Oi:return N}return U});function cl(k,U){return U=U??d,!!U&&(typeof k=="number"||yn.test(k))&&k>-1&&k%1==0&&k<U}function ul(k){var U=typeof k;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?k!=="__proto__":k===null}function dl(k){return!!Le&&Le in k}function hl(k){var U=k&&k.constructor,ne=typeof U=="function"&&U.prototype||be;return k===ne}function Ia(k){return we.call(k)}function Kn(k){if(k!=null){try{return Yt.call(k)}catch{}try{return k+""}catch{}}return""}function Ri(k,U){return k===U||k!==k&&U!==U}var Ma=ys(function(){return arguments}())?ys:function(k){return Cr(k)&&tt.call(k,"callee")&&!Ft.call(k,"callee")},Qr=Array.isArray;function La(k){return k!=null&&Ba(k.length)&&!Ra(k)}var Jr=Qo||pl;function fl(k,U){return Mn(k,U)}function Ra(k){if(!Ua(k))return!1;var U=wn(k);return U==A||U==o||U==p||U==D}function Ba(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=d}function Ua(k){var U=typeof k;return k!=null&&(U=="object"||U=="function")}function Cr(k){return k!=null&&typeof k=="object"}var ja=bn?Ei(bn):Ii;function gl(k){return La(k)?sl(k):ol(k)}function As(){return[]}function pl(){return!1}t.exports=fl})(xo,xo.exports);const Ug=xo.exports;function Sc(t,e){var n;if(typeof t=="string"&&(t=jg(t.trim())),!t)return;let i=(n=e==null?void 0:e.removeGenericPrefixes)!=null?n:!0,a=t.hostname;return i&&(a=a.replace(/^(m|mobile|amp|www|www1|www2|www3|tab|item|checkout|secure|user|account|accounts|web|app|open|i|v|preview|cdn|l|id|nid|user|sso|signin|login|auth0|play|api|click|detail|dashboard|console|manage|support|help)\./,"").replace(/.*\.zoom\.us/,"zoom.us").replace(/.*\.slack\.com/,"slack.com").replace(/.*\.wikipedia\.org/,"wikipedia.org").replace(/.*\.amazonaws\.com/,"amazonaws.com").replace(/.*\.netsuite\.com/,"netsuite.com")),{hostname:a,path:Fg(t.pathname)}}function jg(t){if(!t)return;let e=n=>{let i=new URL(n);if(!/^https?:/.test(i.protocol))throw Error("Invalid URL, ignored protocol found");if(!i.hostname)throw Error("Invalid URL, no hostname");if(i.hostname.lastIndexOf(".")>=i.hostname.length-2)throw Error("Invalid URL, bad domain ending");return i};try{return e(t)}catch{}if(!t.includes("://"))try{return e("https://"+t)}catch{}}function Fg(t){return t.endsWith("/")?t.substring(0,Math.max(1,t.length-1)):t}const Qs="tab-history-map",_c=class{constructor(t){this.tabHistoryMap=this.restoreTabHistory(),this.lock=new hc;let e=0;ze.tabs.onCreated.addListener(n=>this.lock.runExclusive(async()=>{var i;if(n.id!=null&&(t==null||t.debug(`[referrer] ${e++} tabs.onCreated`,n),n.openerTabId!=null)){const a=(i=(await this.tabHistoryMap)[n.openerTabId])==null?void 0:i[0];a&&await this.addHistory(n.id,a)}})),ze.webNavigation.onCommitted.addListener(n=>this.lock.runExclusive(async()=>{t==null||t.debug(`[referrer] ${e++} webNavigation.onCommitted`,n);const{frameId:i,tabId:a,url:u,transitionQualifiers:d}=n;i===0&&((d.includes("forward_back")||d.includes("from_address_bar"))&&await this.addHistory(a,void 0),await this.addHistory(a,u))})),ze.runtime.onStartup.addListener(()=>this.resetHistory()),ze.runtime.onSuspend.addListener(()=>this.resetHistory()),ze.tabs.onRemoved.addListener(n=>this.removeHistory(n))}async restoreTabHistory(){const t=await ho(Qs);return t??{}}async addHistory(t,e){var n;const i=await this.tabHistoryMap,a=(n=i[t])!=null?n:i[t]=[];e!==a[0]&&a.unshift(this.sanatizeReferrerUrl(e)),a.splice(_c.MAX_HISTORY_COUNT_PER_TAB),await ls(Qs,i)}sanatizeReferrerUrl(t){if(t)try{const e=new URL(t);return e.search="",e.username="",e.password="",e.hash="",e.href}catch{return}}getReferrerFor(t,e){return this.lock.runExclusive(async()=>{if(t==null||!e)return;const n=(await this.tabHistoryMap)[t];if(n==null)return;const i=n.findIndex(a=>a===e);return i===-1?void 0:n[i+1]})}resetHistory(){return ls(Qs,{})}async removeHistory(t){const e=await this.tabHistoryMap;delete e[t],await ls(Qs,e)}};let Tc=_c;Tc.MAX_HISTORY_COUNT_PER_TAB=10;class Ec{constructor(){this.map={}}markAsProcessed(e){e.forEach(n=>this.map[n.id]=!0)}isProcessed(e){var n;return(n=this.map[e.id])!=null?n:!1}}const Wn=class{constructor(t,e){this.wakeUpTimeoutDisabled=!1,this.hasRecentUserActivity=!0,this.sessionUpdatedListeners=[],this.pageViewUpdatedListeners=[],this.checkSessionsListeners=[],this.latestTriggerId=0,this.updateSessions=tg(async a=>{var u,d,y;const h=`[update-sessions] [${a.triggerId}]`;if((u=this.logger)==null||u.debug(`${h} Waiting for startup to stop previous sessions...`),await this.startupPromise,(d=this.logger)==null||d.debug(`${h} Processing @ ${new Date(a.timestamp).toLocaleTimeString()}`),this.pingLastAliveAt(),this.invokeCheckSessionsListeners(),await this.config.enabled()){const p=this.logger?new Qf(this.logger.debug.bind(this.logger)):void 0,v=await this.getComputeDependencies();p==null||p.log(`${h} Got required data after {duration}`);const m=this.findSessionChanges(a,v);p==null||p.log(`${h} Computed session changes after {duration}`);const g=await this.findPageViewChanges(a,v);p==null||p.log(`${h} Computed page view changes after {duration}`),await this.saveSessionChanges(a.timestamp,m),p==null||p.log(`${h} Session changes committed to the database after {duration}`),await this.savePageViewChanges(a.timestamp,g),p==null||p.log(`${h} Page view changes committed to the database after {duration}`)}(y=this.logger)==null||y.log(`${h} Done`)}),this.config=e,this.sessionsRepo=t.sessionsRepo,this.pageViewsRepo=t.pageViewsRepo,this.updateSessions=this.updateSessions.bind(this),e.logger===void 0?this.logger=console:this.logger=e.logger;const[n,i]=ig();this.startupPromise=n,this.allowSessionUpdates=i}setupTriggers(){var t,e;this.referrers=new Tc(this.logger),(e=(t=this.config).setupCustomTriggers)==null||e.call(t,{triggerSessionChangeCheck:this.basicTrigger.bind(this),setHasRecentUserActivity:this.setHasRecentUserActivity.bind(this)}),this.setupExtensionApiTriggers(),this.setupIdleTriggers(),this.setupStartupTriggers()}addSessionUpdatedListener(t){this.sessionUpdatedListeners.push(t)}addPageViewUpdatedListener(t){this.pageViewUpdatedListeners.push(t)}addCheckSessionsListener(t){this.checkSessionsListeners.push(t)}setupExtensionApiTriggers(){ze.webNavigation.onCompleted.addListener(async t=>{t.frameId>0||await this.basicTrigger("webNavigation.onCompleted",Math.floor(t.timeStamp))}),ze.tabs.onCreated.addListener(()=>this.basicTrigger("tabs.onCreated")),ze.tabs.onUpdated.addListener(()=>this.basicTrigger("tabs.onUpdated")),ze.tabs.onActivated.addListener(()=>this.basicTrigger("tabs.onActivated")),ze.tabs.onRemoved.addListener(()=>this.basicTrigger("tabs.onRemoved")),ze.windows.onCreated.addListener(()=>this.basicTrigger("windows.onCreated")),ze.windows.onFocusChanged.addListener(()=>this.basicTrigger("windows.onFocusChanged")),ze.windows.onRemoved.addListener(()=>this.basicTrigger("windows.onRemoved")),this.onWindowStateChanged(t=>this.basicTrigger("SessionMonitor.onWindowStateChanged",t))}setupIdleTriggers(){}setupStartupTriggers(){const t=Date.now();this.config.isOnStartupAvailable()?(ze.runtime.onStartup.addListener(()=>{this.wakeUpTimeoutDisabled=!0,this.startupFlow({cleanupSessions:!0,trigger:"runtime.onStartup",timestamp:t})}),setTimeout(()=>{this.wakeUpTimeoutDisabled||this.startupFlow({cleanupSessions:!1,trigger:"setTimeout",timestamp:t})},Wn.ALWAYS_STARTUP_AFTER_MS)):(ze.alarms.clear("ping-last-alive-at"),ze.alarms.create("ping-last-alive-at",{delayInMinutes:Wn.LAST_ALIVE_AT_INTERVAL_MS/di,periodInMinutes:Wn.LAST_ALIVE_AT_INTERVAL_MS/di}),ze.alarms.onAlarm.addListener(n=>{if(n.name==="ping-last-alive-at")return this.pingLastAliveAt()}),this.getLastAliveAt().then(n=>{this.wakeUpTimeoutDisabled=!0;const i=n!=null&&Date.now()-n>2*Wn.LAST_ALIVE_AT_INTERVAL_MS;this.startupFlow({cleanupSessions:i,trigger:i?"time since last alive at > 2 * lastAliveInterval":"time since last alive at <= 2 * lastAliveInterval",timestamp:t})})),ze.runtime.onInstalled.addListener(n=>{this.wakeUpTimeoutDisabled=!0,this.startupFlow({cleanupSessions:n.reason!=="install",trigger:"runtime.onInstalled",timestamp:t})});const{onSuspend:e}=ze.runtime;e==null||e.addListener(()=>this.endAllActiveSessions(Date.now()))}basicTrigger(t,e=Date.now()){var n;const i=this.latestTriggerId++;return(n=this.logger)==null||n.log(`[update-sessions] [${i}] Queued by ${t} @ ${new Date(e).toLocaleTimeString()}`),this.updateSessions({timestamp:e,triggerId:i,triggeredBy:t})}onWindowStateChanged(t){let e={};this.getWindowStates().then(n=>{e=n}),setInterval(async()=>{const n=Date.now(),i=await this.getWindowStates();Ug(e,i)||(t(n),e=i)},Wn.WINDOW_STATE_POLLING_INTERVAL_MS)}async getWindowStates(){return(await ze.windows.getAll()).reduce((t,e)=>(e.id!=null&&(t[e.id]=e.state),t),{})}async startupFlow({cleanupSessions:t,trigger:e,timestamp:n}){t&&await this.cleanupActiveSessionsOnStartup(n),await this.pingLastAliveAt(),await eg().then(()=>this.allowSessionUpdates()),await this.basicTrigger(e,n)}async cleanupActiveSessionsOnStartup(t){var e,n,i,a;const u=await this.getLastAliveAt();if((e=this.logger)==null||e.debug("[on-startup] onStartup()",{lastActivity:u&&new Date(u).toISOString(),now:new Date(t).toISOString()}),u==null)throw Error("lastActivity was not set yet");(n=this.logger)==null||n.log("[on-startup] Ending sessions after quit...");const d=u+Wn.LAST_ALIVE_AT_POLL_INTERVAL_MS,y=Math.min(t,d);(i=this.logger)==null||i.log("[on-startup] Timing details:",{lastActivity:new Date(u).toISOString(),now:new Date(t).toISOString(),quitAt:new Date(d).toISOString(),endAt:new Date(y).toISOString()}),await this.endAllActiveSessions(y),(a=this.logger)==null||a.log("[on-startup] Startup finished!")}async getComputeDependencies(){const[t,e]=await Promise.all([ze.windows.getAll(),ze.tabs.query({})]),n=await this.sessionsRepo.getActiveSessions(),i=await this.pageViewsRepo.getActivePageViews();return{isTabActiveWhenPlayingAudio:await this.config.isTabActiveWhenPlayingAudio(),hostnameToTabsMap:e.reduce((a,u)=>{var d,y;const h=(d=Sc(u.url))==null?void 0:d.hostname;return h&&(a[h]!=null||(a[h]=[]),(y=a[h])==null||y.push(u)),a},{}),allActiveSessions:n,allActivePageViews:i,appIdToActiveSessionMap:ng(n??[],"appId"),windowIdToWindowMap:rg(t,"id"),processedActiveSessionCache:new Ec,processedActivePageViewCache:new Ec}}findSessionChanges(t,e){var n,i,a;const u=[],d=[];for(const[y,h]of Object.entries(e.hostnameToTabsMap))if(y)try{if(!(h!=null&&h.length))throw Error("This shouldn't be possible");const p=e.appIdToActiveSessionMap[y],v=!!(p!=null&&p.length),m=!!h.find(g=>this.isTabActive(g,e));!v&&m?u.push({appId:y,startedAt:t.timestamp}):v&&!m&&d.push(...p),v&&e.processedActiveSessionCache.markAsProcessed(p)}catch(p){(n=this.logger)==null||n.error(`[update-sessions] Failed find sessions to change for ${y}:`,p)}return((a=(i=e.allActiveSessions)==null?void 0:i.filter(y=>!e.processedActiveSessionCache.isProcessed(y)))!=null?a:[]).forEach(y=>d.push(y)),{toStart:u,toEnd:d,count:u.length+d.length}}async findPageViewChanges(t,e){var n;const i=Object.values(e.hostnameToTabsMap).flat().filter(d=>!!d&&this.isTabActive(d,e)),a=[],u=[...e.allActivePageViews];for(const d of i){const y=Sc(d.url);if(y==null)continue;const h=e.allActivePageViews.filter(p=>p.appId===(y==null?void 0:y.hostname)&&p.path===y.path);if(h.length>0)for(const p of h){const v=u.findIndex(m=>m.id===p.id);v>=0&&u.splice(v,1)}else a.push({appId:y.hostname,path:y.path,startedAt:t.timestamp,referrer:await((n=this.referrers)==null?void 0:n.getReferrerFor(d.id,d.url))})}return{toStart:a,toEnd:u,count:a.length+u.length}}async saveSessionChanges(t,e){const n=e.toEnd.map(d=>{var y;const h=new Date(t).toLocaleTimeString();return(y=this.logger)==null||y.log(`[change-session] Stop session ${d.appId} @ ${h} (${t-d.startedAt}ms)`),this.sessionsRepo.endSession(d,t)}),i=e.toStart.map(d=>{var y;return(y=this.logger)==null||y.log(`[change-session] Start session ${d.appId} @ ${new Date(d.startedAt).toLocaleTimeString()}`,{session:d}),this.sessionsRepo.startSession(d)}),a=await Promise.allSettled(n),u=await Promise.allSettled(i);this.logSettledErrors("sessions","ending",a),this.logSettledErrors("sessions","starting",u),e.count>0&&this.invokeSessionUpdatedListeners()}async savePageViewChanges(t,e){const n=e.toEnd.map(d=>{var y;const h=new Date(t).toLocaleTimeString();return(y=this.logger)==null||y.log(`[change-session] Stop page view ${d.appId}${d.path} @ ${h} (${t-d.startedAt}ms)`),this.pageViewsRepo.endPageView(d,t)}),i=e.toStart.map(d=>{var y;return(y=this.logger)==null||y.log(`[change-session] Start page view ${d.appId}${d.path} @ ${new Date(d.startedAt).toLocaleTimeString()}`,{session:d}),this.pageViewsRepo.startPageView(d)}),a=await Promise.allSettled(n),u=await Promise.allSettled(i);this.logSettledErrors("page views","ending",a),this.logSettledErrors("page views","starting",u),e.count>0&&this.invokePageViewUpdatedListeners()}logSettledErrors(t,e,n){var i;const a=n.map(u=>{if(u.status==="rejected")return u.reason}).filter(u=>u!=null);a.length>0&&((i=this.logger)==null||i.warn(`[update-sessions] ${a.length}/${n.length} transactions failed when ${e} ${t}`,a))}isTabActive(t,e){var n;if(t.windowId==null)return(n=this.logger)==null||n.warn("[update-sessions] Checking if tab without a windowId is active"),!1;const i=e.windowIdToWindowMap[t.windowId];return!!i&&ag(t,i,this.hasRecentUserActivity,e.isTabActiveWhenPlayingAudio)}async endAllActiveSessions(t){var e,n,i;const a=await this.sessionsRepo.getActiveSessions();if(a.length===0){(e=this.logger)==null||e.log("[stop-active-sessions] No active sessions to stop");return}(n=this.logger)==null||n.log("[stop-active-sessions] Stopping all active sessions:",{activeSessions:a,timestamp:t}),await this.saveSessionChanges(t,{toStart:[],toEnd:a,count:a.length}),(i=this.logger)==null||i.log("[stop-active-sessions] All active sessions stopped!")}async pingLastAliveAt(){var t;const e=Date.now();(t=this.logger)==null||t.debug("[SessionMonitor] Updating last time browser was known to be open",e),await ls(Wn.LAST_ALIVE_AT_KEY,e),clearTimeout(this.lastAlivePing),this.lastAlivePing=setTimeout(()=>this.pingLastAliveAt(),Wn.LAST_ALIVE_AT_POLL_INTERVAL_MS)}getLastAliveAt(){return ho(Wn.LAST_ALIVE_AT_KEY)}invokeCheckSessionsListeners(){this.checkSessionsListeners.forEach(t=>t())}invokeSessionUpdatedListeners(){this.sessionUpdatedListeners.forEach(t=>t())}invokePageViewUpdatedListeners(){this.pageViewUpdatedListeners.forEach(t=>t())}setHasRecentUserActivity(t){this.hasRecentUserActivity=t}};let fi=Wn;fi.LAST_ALIVE_AT_KEY="last-activity-time-ms",fi.LAST_ALIVE_AT_INTERVAL_MS=uo,fi.LAST_ALIVE_AT_POLL_INTERVAL_MS=30*di,fi.ALWAYS_STARTUP_AFTER_MS=5*di,fi.WINDOW_STATE_POLLING_INTERVAL_MS=5*di;function $g(t){const e=new fi(t.db,t);return e.setupTriggers(),{sessionMonitor:e}}var Cc=1/0,kc=9007199254740991,Wg=17976931348623157e292,Oc=0/0,Vg="[object Function]",Hg="[object GeneratorFunction]",qg="[object Symbol]",zg=/^\s+|\s+$/g,Gg=/^[-+]0x[0-9a-f]+$/i,Zg=/^0b[01]+$/i,Kg=/^0o[0-7]+$/i,Yg=/^(?:0|[1-9]\d*)$/,Xg=parseInt,Qg=Object.prototype,Pc=Qg.toString,Jg=Math.ceil,ep=Math.max;function tp(t,e,n){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),n=n>a?a:n,n<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var u=Array(a);++i<a;)u[i]=t[i+e];return u}function np(t,e){return e=e??kc,!!e&&(typeof t=="number"||Yg.test(t))&&t>-1&&t%1==0&&t<e}function rp(t,e,n){if(!Js(n))return!1;var i=typeof e;return(i=="number"?ap(n)&&np(e,n.length):i=="string"&&e in n)?sp(n[e],t):!1}function ip(t,e,n){(n?rp(t,e,n):e===void 0)?e=1:e=ep(hp(e),0);var i=t?t.length:0;if(!i||e<1)return[];for(var a=0,u=0,d=Array(Jg(i/e));a<i;)d[u++]=tp(t,a,a+=e);return d}function sp(t,e){return t===e||t!==t&&e!==e}function ap(t){return t!=null&&lp(t.length)&&!op(t)}function op(t){var e=Js(t)?Pc.call(t):"";return e==Vg||e==Hg}function lp(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=kc}function Js(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function cp(t){return!!t&&typeof t=="object"}function up(t){return typeof t=="symbol"||cp(t)&&Pc.call(t)==qg}function dp(t){if(!t)return t===0?t:0;if(t=fp(t),t===Cc||t===-Cc){var e=t<0?-1:1;return e*Wg}return t===t?t:0}function hp(t){var e=dp(t),n=e%1;return e===e?n?e-n:e:0}function fp(t){if(typeof t=="number")return t;if(up(t))return Oc;if(Js(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Js(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(zg,"");var n=Zg.test(t);return n||Kg.test(t)?Xg(t.slice(2),n?2:8):Gg.test(t)?Oc:+t}var gp=ip;const pp=100;function mp(t){const e=t.logger===void 0?console:t.logger;async function n(){var u;const[d,y,h]=await Promise.all([t.getAppId(),t.getInstallId(),(u=t.getBirthYear)==null?void 0:u.call(t)]);return{appId:d,installId:y,birthYear:h}}async function i(u,d){var y,h;let p;try{e==null||e.log(`[${u.label}-uploader] Beginning upload @ ${new Date(d).toISOString()}`);const[v,m,g]=await Promise.all([u.getLastUploadedAt(),t.db,t.enabled()]);if(!g){e==null||e.log(`[${u.label}-uploader] Uploads are disabled`);return}const A=await u.getModelsToUpload({db:m,lastUploadedAt:v,uploadStartedAt:d}),o=(h=await((y=t.getUploadBatchSize)==null?void 0:y.call(t)))!=null?h:pp,S=gp(A,o),P=await n();p={models:A,batches:S,body:P},e==null||e.debug(`[${u.label}-uploader] Data`,p);for(const $ of S){e==null||e.debug(`[${u.label}-uploader] Uploading`,{batch:$,requestSkipped:!!t.dev}),t.dev||await u.upload(P,$);const O=$[$.length-1];(O==null?void 0:O.endedAt)!=null&&await u.setLastUploadedAt(O.endedAt)}await u.setLastUploadedAt(d);const R=(Date.now()-d)/1e3;e==null||e.log(`[${u.label}-uploader] Uploaded ${A.length} items in ${S.length} batches in ${R}s`),u.onSuccess({total:A.length,batches:S.length,batchSize:o,durationInSec:R})}catch(v){e==null||e.error(`[${u.label}-uploader] Failed to upload`,v,p),u.onFailure(v)}}async function a(){const u=Date.now();await Promise.allSettled(t.uploaders.map(d=>i(d,u)))}return{uploadAll:a}}function yp({api:t,onSuccess:e,onFailure:n,lastUploadedAtStorageKey:i}){return{label:"sessions",onSuccess:e,onFailure:n,async getLastUploadedAt(){const a=await ho(i);return a??1},setLastUploadedAt(a){return ls(i,a)},async getModelsToUpload({db:a,lastUploadedAt:u,uploadStartedAt:d}){return(await a.sessionsRepo.findSessionsByEndedAt(u,d)).filter(y=>!y.imported)},async upload(a,u){const d=u.reduce((y,h)=>{var p;if(h.endedAt==null)throw Error("Cannot upload a session that is in progress");const v={duration:Ks(h.endedAt-h.startedAt),timestamp:Ks(h.startedAt)};return v.duration>0&&(y[p=h.appId]!=null||(y[p]={sessions:[]}),y[h.appId].sessions.push(v)),y},{});await t.uploadSessions({...a,websites:d})}}}var vp=Dc;function Dc(t,e,n){t instanceof RegExp&&(t=Nc(t,n)),e instanceof RegExp&&(e=Nc(e,n));var i=Ic(t,e,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+t.length,i[1]),post:n.slice(i[1]+e.length)}}function Nc(t,e){var n=e.match(t);return n?n[0]:null}Dc.range=Ic;function Ic(t,e,n){var i,a,u,d,y,h=n.indexOf(t),p=n.indexOf(e,h+1),v=h;if(h>=0&&p>0){if(t===e)return[h,p];for(i=[],u=n.length;v>=0&&!y;)v==h?(i.push(v),h=n.indexOf(t,v+1)):i.length==1?y=[i.pop(),p]:(a=i.pop(),a<u&&(u=a,d=p),p=n.indexOf(e,v+1)),v=h<p&&h>=0?h:p;i.length&&(y=[u,d])}return y}var Mc=vp,bp=xp,Lc="\0SLASH"+Math.random()+"\0",Rc="\0OPEN"+Math.random()+"\0",So="\0CLOSE"+Math.random()+"\0",Bc="\0COMMA"+Math.random()+"\0",Uc="\0PERIOD"+Math.random()+"\0";function _o(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function wp(t){return t.split("\\\\").join(Lc).split("\\{").join(Rc).split("\\}").join(So).split("\\,").join(Bc).split("\\.").join(Uc)}function Ap(t){return t.split(Lc).join("\\").split(Rc).join("{").split(So).join("}").split(Bc).join(",").split(Uc).join(".")}function jc(t){if(!t)return[""];var e=[],n=Mc("{","}",t);if(!n)return t.split(",");var i=n.pre,a=n.body,u=n.post,d=i.split(",");d[d.length-1]+="{"+a+"}";var y=jc(u);return u.length&&(d[d.length-1]+=y.shift(),d.push.apply(d,y)),e.push.apply(e,d),e}function xp(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),cs(wp(t),!0).map(Ap)):[]}function Sp(t){return"{"+t+"}"}function _p(t){return/^-?0\d/.test(t)}function Tp(t,e){return t<=e}function Ep(t,e){return t>=e}function cs(t,e){var n=[],i=Mc("{","}",t);if(!i)return[t];var a=i.pre,u=i.post.length?cs(i.post,!1):[""];if(/\$$/.test(i.pre))for(var d=0;d<u.length;d++){var y=a+"{"+i.body+"}"+u[d];n.push(y)}else{var h=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),v=h||p,m=i.body.indexOf(",")>=0;if(!v&&!m)return i.post.match(/,.*\}/)?(t=i.pre+"{"+i.body+So+i.post,cs(t)):[t];var g;if(v)g=i.body.split(/\.\./);else if(g=jc(i.body),g.length===1&&(g=cs(g[0],!1).map(Sp),g.length===1))return u.map(function(N){return i.pre+g[0]+N});var A;if(v){var o=_o(g[0]),S=_o(g[1]),P=Math.max(g[0].length,g[1].length),R=g.length==3?Math.abs(_o(g[2])):1,$=Tp,O=S<o;O&&(R*=-1,$=Ep);var D=g.some(_p);A=[];for(var G=o;$(G,S);G+=R){var j;if(p)j=String.fromCharCode(G),j==="\\"&&(j="");else if(j=String(G),D){var Z=P-j.length;if(Z>0){var C=new Array(Z+1).join("0");G<0?j="-"+C+j.slice(1):j=C+j}}A.push(j)}}else{A=[];for(var M=0;M<g.length;M++)A.push.apply(A,cs(g[M],!1))}for(var M=0;M<A.length;M++)for(var d=0;d<u.length;d++){var y=a+A[M]+u[d];(!e||v||y)&&n.push(y)}}return n}const Cp=1024*64,ea=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Cp)throw new TypeError("pattern is too long")},kp={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},us=t=>t.replace(/[[\]\\-]/g,"\\$&"),Op=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Fc=t=>t.join(""),Pp=(t,e)=>{const n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");const i=[],a=[];let u=n+1,d=!1,y=!1,h=!1,p=!1,v=n,m="";e:for(;u<t.length;){const o=t.charAt(u);if((o==="!"||o==="^")&&u===n+1){p=!0,u++;continue}if(o==="]"&&d&&!h){v=u+1;break}if(d=!0,o==="\\"&&!h){h=!0,u++;continue}if(o==="["&&!h){for(const[S,[P,R,$]]of Object.entries(kp))if(t.startsWith(S,u)){if(m)return["$.",!1,t.length-n,!0];u+=S.length,$?a.push(P):i.push(P),y=y||R;continue e}}if(h=!1,m){o>m?i.push(us(m)+"-"+us(o)):o===m&&i.push(us(o)),m="",u++;continue}if(t.startsWith("-]",u+1)){i.push(us(o+"-")),u+=2;continue}if(t.startsWith("-",u+1)){m=o,u+=2;continue}i.push(us(o)),u++}if(v<u)return["",!1,0,!1];if(!i.length&&!a.length)return["$.",!1,t.length-n,!0];if(a.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!p){const o=i[0].length===2?i[0].slice(-1):i[0];return[Op(o),!1,v-n,!1]}const g="["+(p?"^":"")+Fc(i)+"]",A="["+(p?"":"^")+Fc(a)+"]";return[i.length&&a.length?"("+g+"|"+A+")":i.length?g:A,y,v-n,!0]},ds=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),Dp=new Set(["!","?","+","*","@"]),$c=t=>Dp.has(t),Np="(?!\\.\\.?(?:$|/))",To="(?!\\.)",Ip=new Set(["[","."]),Mp=new Set(["..","."]),Lp=new Set("().*{}+?[]^$\\!"),Rp=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Eo="[^/]",Wc=Eo+"*?",Vc=Eo+"+?";var vt,_t,wr,rt,gt,Vr,gi,Hr,_n,pi,ta,Co,Hc,hs,na,ko,qc;const sn=class{constructor(e,n,i={}){zt(this,Co),yt(this,"type"),zt(this,vt,void 0),zt(this,_t,void 0),zt(this,wr,!1),zt(this,rt,[]),zt(this,gt,void 0),zt(this,Vr,void 0),zt(this,gi,void 0),zt(this,Hr,!1),zt(this,_n,void 0),zt(this,pi,void 0),zt(this,ta,!1),this.type=e,e&&ut(this,_t,!0),ut(this,gt,n),ut(this,vt,oe(this,gt)?oe(oe(this,gt),vt):this),ut(this,_n,oe(this,vt)===this?i:oe(oe(this,vt),_n)),ut(this,gi,oe(this,vt)===this?[]:oe(oe(this,vt),gi)),e==="!"&&!oe(oe(this,vt),Hr)&&oe(this,gi).push(this),ut(this,Vr,oe(this,gt)?oe(oe(this,gt),rt).length:0)}get hasMagic(){if(oe(this,_t)!==void 0)return oe(this,_t);for(const e of oe(this,rt))if(typeof e!="string"&&(e.type||e.hasMagic))return ut(this,_t,!0);return oe(this,_t)}toString(){return oe(this,pi)!==void 0?oe(this,pi):this.type?ut(this,pi,this.type+"("+oe(this,rt).map(e=>String(e)).join("|")+")"):ut(this,pi,oe(this,rt).map(e=>String(e)).join(""))}push(...e){for(const n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof sn&&oe(n,gt)===this))throw new Error("invalid part: "+n);oe(this,rt).push(n)}}toJSON(){var e;const n=this.type===null?oe(this,rt).slice().map(i=>typeof i=="string"?i:i.toJSON()):[this.type,...oe(this,rt).map(i=>i.toJSON())];return this.isStart()&&!this.type&&n.unshift([]),this.isEnd()&&(this===oe(this,vt)||oe(oe(this,vt),Hr)&&((e=oe(this,gt))==null?void 0:e.type)==="!")&&n.push({}),n}isStart(){var e;if(oe(this,vt)===this)return!0;if(!((e=oe(this,gt))!=null&&e.isStart()))return!1;if(oe(this,Vr)===0)return!0;const n=oe(this,gt);for(let i=0;i<oe(this,Vr);i++){const a=oe(n,rt)[i];if(!(a instanceof sn&&a.type==="!"))return!1}return!0}isEnd(){var e,n,i;if(oe(this,vt)===this||((e=oe(this,gt))==null?void 0:e.type)==="!")return!0;if(!((n=oe(this,gt))!=null&&n.isEnd()))return!1;if(!this.type)return(i=oe(this,gt))==null?void 0:i.isEnd();const a=oe(this,gt)?oe(oe(this,gt),rt).length:0;return oe(this,Vr)===a-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const n=new sn(this.type,e);for(const i of oe(this,rt))n.copyIn(i);return n}static fromGlob(e,n={}){var i;const a=new sn(null,void 0,n);return Vi(i=sn,hs,na).call(i,e,a,0,n),a}toMMPattern(){if(this!==oe(this,vt))return oe(this,vt).toMMPattern();const e=this.toString(),[n,i,a,u]=this.toRegExpSource();if(!(a||oe(this,_t)||oe(this,_n).nocase&&!oe(this,_n).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;const d=(oe(this,_n).nocase?"i":"")+(u?"u":"");return Object.assign(new RegExp(`^${n}$`,d),{_src:n,_glob:e})}toRegExpSource(){var e;if(oe(this,vt)===this&&Vi(this,Co,Hc).call(this),!this.type){const u=this.isStart()&&this.isEnd(),d=oe(this,rt).map(p=>{var v;const[m,g,A,o]=typeof p=="string"?Vi(v=sn,ko,qc).call(v,p,oe(this,_t),u):p.toRegExpSource();return ut(this,_t,oe(this,_t)||A),ut(this,wr,oe(this,wr)||o),m}).join("");let y="";if(this.isStart()&&typeof oe(this,rt)[0]=="string"&&!(oe(this,rt).length===1&&Mp.has(oe(this,rt)[0]))){const p=Ip,v=oe(this,_n).dot&&p.has(d.charAt(0))||d.startsWith("\\.")&&p.has(d.charAt(2))||d.startsWith("\\.\\.")&&p.has(d.charAt(4)),m=!oe(this,_n).dot&&p.has(d.charAt(0));y=v?Np:m?To:""}let h="";return this.isEnd()&&oe(oe(this,vt),Hr)&&((e=oe(this,gt))==null?void 0:e.type)==="!"&&(h="(?:$|\\/)"),[y+d+h,ds(d),ut(this,_t,!!oe(this,_t)),oe(this,wr)]}const n=this.type==="!"?"(?:(?!(?:":"(?:",i=oe(this,rt).map(u=>{if(typeof u=="string")throw new Error("string type in extglob ast??");const[d,y,h,p]=u.toRegExpSource();return ut(this,wr,oe(this,wr)||p),d}).filter(u=>!(this.isStart()&&this.isEnd())||!!u).join("|");if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){const u=this.toString();return ut(this,rt,[u]),this.type=null,ut(this,_t,void 0),[u,ds(this.toString()),!1,!1]}let a="";if(this.type==="!"&&oe(this,ta))a=(this.isStart()&&!oe(this,_n).dot?To:"")+Vc;else{const u=this.type==="!"?"))"+(this.isStart()&&!oe(this,_n).dot?To:"")+Wc+")":this.type==="@"?")":`)${this.type}`;a=n+i+u}return[a,ds(i),ut(this,_t,!!oe(this,_t)),oe(this,wr)]}};let ra=sn;vt=new WeakMap,_t=new WeakMap,wr=new WeakMap,rt=new WeakMap,gt=new WeakMap,Vr=new WeakMap,gi=new WeakMap,Hr=new WeakMap,_n=new WeakMap,pi=new WeakMap,ta=new WeakMap,Co=new WeakSet,Hc=function(){if(this!==oe(this,vt))throw new Error("should only call on root");if(oe(this,Hr))return this;this.toString(),ut(this,Hr,!0);let t;for(;t=oe(this,gi).pop();){if(t.type!=="!")continue;let e=t,n=oe(e,gt);for(;n;){for(let i=oe(e,Vr)+1;!n.type&&i<oe(n,rt).length;i++)for(const a of oe(t,rt)){if(typeof a=="string")throw new Error("string part in extglob AST??");a.copyIn(oe(n,rt)[i])}e=n,n=oe(e,gt)}}return this},hs=new WeakSet,na=function(t,e,n,i){var a,u;let d=!1,y=!1,h=-1,p=!1;if(e.type===null){let o=n,S="";for(;o<t.length;){const P=t.charAt(o++);if(d||P==="\\"){d=!d,S+=P;continue}if(y){o===h+1?(P==="^"||P==="!")&&(p=!0):P==="]"&&!(o===h+2&&p)&&(y=!1),S+=P;continue}else if(P==="["){y=!0,h=o,p=!1,S+=P;continue}if(!i.noext&&$c(P)&&t.charAt(o)==="("){e.push(S),S="";const R=new sn(P,e);o=Vi(a=sn,hs,na).call(a,t,R,o,i),e.push(R);continue}S+=P}return e.push(S),o}let v=n+1,m=new sn(null,e);const g=[];let A="";for(;v<t.length;){const o=t.charAt(v++);if(d||o==="\\"){d=!d,A+=o;continue}if(y){v===h+1?(o==="^"||o==="!")&&(p=!0):o==="]"&&!(v===h+2&&p)&&(y=!1),A+=o;continue}else if(o==="["){y=!0,h=v,p=!1,A+=o;continue}if($c(o)&&t.charAt(v)==="("){m.push(A),A="";const S=new sn(o,m);m.push(S),v=Vi(u=sn,hs,na).call(u,t,S,v,i);continue}if(o==="|"){m.push(A),A="",g.push(m),m=new sn(null,e);continue}if(o===")")return A===""&&oe(e,rt).length===0&&ut(e,ta,!0),m.push(A),A="",e.push(...g,m),v;A+=o}return e.type=null,ut(e,_t,void 0),ut(e,rt,[t.substring(n-1)]),v},ko=new WeakSet,qc=function(t,e,n=!1){let i=!1,a="",u=!1;for(let d=0;d<t.length;d++){const y=t.charAt(d);if(i){i=!1,a+=(Lp.has(y)?"\\":"")+y;continue}if(y==="\\"){d===t.length-1?a+="\\\\":i=!0;continue}if(y==="["){const[h,p,v,m]=Pp(t,d);if(v){a+=h,u=u||p,d+=v-1,e=e||m;continue}}if(y==="*"){n&&t==="*"?a+=Vc:a+=Wc,e=!0;continue}if(y==="?"){a+=Eo,e=!0;continue}a+=Rp(y)}return[a,ds(t),!!e,u]},zt(ra,hs),zt(ra,ko);const Bp=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),Ot=(t,e,n={})=>(ea(e),!n.nocomment&&e.charAt(0)==="#"?!1:new ia(e,n).match(t)),Up=/^\*+([^+@!?\*\[\(]*)$/,jp=t=>e=>!e.startsWith(".")&&e.endsWith(t),Fp=t=>e=>e.endsWith(t),$p=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Wp=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Vp=/^\*+\.\*+$/,Hp=t=>!t.startsWith(".")&&t.includes("."),qp=t=>t!=="."&&t!==".."&&t.includes("."),zp=/^\.\*+$/,Gp=t=>t!=="."&&t!==".."&&t.startsWith("."),Zp=/^\*+$/,Kp=t=>t.length!==0&&!t.startsWith("."),Yp=t=>t.length!==0&&t!=="."&&t!=="..",Xp=/^\?+([^+@!?\*\[\(]*)?$/,Qp=([t,e=""])=>{const n=zc([t]);return e?(e=e.toLowerCase(),i=>n(i)&&i.toLowerCase().endsWith(e)):n},Jp=([t,e=""])=>{const n=Gc([t]);return e?(e=e.toLowerCase(),i=>n(i)&&i.toLowerCase().endsWith(e)):n},em=([t,e=""])=>{const n=Gc([t]);return e?i=>n(i)&&i.endsWith(e):n},tm=([t,e=""])=>{const n=zc([t]);return e?i=>n(i)&&i.endsWith(e):n},zc=([t])=>{const e=t.length;return n=>n.length===e&&!n.startsWith(".")},Gc=([t])=>{const e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},Zc=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Kc={win32:{sep:"\\"},posix:{sep:"/"}},nm=Zc==="win32"?Kc.win32.sep:Kc.posix.sep;Ot.sep=nm;const fn=Symbol("globstar **");Ot.GLOBSTAR=fn;const rm="[^/]",im=rm+"*?",sm="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",am="(?:(?!(?:\\/|^)\\.).)*?",om=(t,e={})=>n=>Ot(n,t,e);Ot.filter=om;const gn=(t,e={})=>Object.assign({},t,e),lm=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ot;const e=Ot;return Object.assign((n,i,a={})=>e(n,i,gn(t,a)),{Minimatch:class extends e.Minimatch{constructor(n,i={}){super(n,gn(t,i))}static defaults(n){return e.defaults(gn(t,n)).Minimatch}},AST:class extends e.AST{constructor(n,i,a={}){super(n,i,gn(t,a))}static fromGlob(n,i={}){return e.AST.fromGlob(n,gn(t,i))}},unescape:(n,i={})=>e.unescape(n,gn(t,i)),escape:(n,i={})=>e.escape(n,gn(t,i)),filter:(n,i={})=>e.filter(n,gn(t,i)),defaults:n=>e.defaults(gn(t,n)),makeRe:(n,i={})=>e.makeRe(n,gn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,gn(t,i)),match:(n,i,a={})=>e.match(n,i,gn(t,a)),sep:e.sep,GLOBSTAR:fn})};Ot.defaults=lm;const Yc=(t,e={})=>(ea(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:bp(t));Ot.braceExpand=Yc;const cm=(t,e={})=>new ia(t,e).makeRe();Ot.makeRe=cm;const um=(t,e,n={})=>{const i=new ia(e,n);return t=t.filter(a=>i.match(a)),i.options.nonull&&!t.length&&t.push(e),t};Ot.match=um;const Xc=/[?*]|[+@!]\(.*?\)|\[|\]/,dm=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class ia{constructor(e,n={}){yt(this,"options"),yt(this,"set"),yt(this,"pattern"),yt(this,"windowsPathsNoEscape"),yt(this,"nonegate"),yt(this,"negate"),yt(this,"comment"),yt(this,"empty"),yt(this,"preserveMultipleSlashes"),yt(this,"partial"),yt(this,"globSet"),yt(this,"globParts"),yt(this,"nocase"),yt(this,"isWindows"),yt(this,"platform"),yt(this,"windowsNoMagicRoot"),yt(this,"regexp"),ea(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||Zc,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){const e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...u)=>console.error(...u)),this.debug(this.pattern,this.globSet);const i=this.globSet.map(u=>this.slashSplit(u));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let a=this.globParts.map((u,d,y)=>{if(this.isWindows&&this.windowsNoMagicRoot){const h=u[0]===""&&u[1]===""&&(u[2]==="?"||!Xc.test(u[2]))&&!Xc.test(u[3]),p=/^[a-z]:/i.test(u[0]);if(h)return[...u.slice(0,4),...u.slice(4).map(v=>this.parse(v))];if(p)return[u[0],...u.slice(1).map(v=>this.parse(v))]}return u.map(h=>this.parse(h))});if(this.debug(this.pattern,a),this.set=a.filter(u=>u.indexOf(!1)===-1),this.isWindows)for(let u=0;u<this.set.length;u++){const d=this.set[u];d[0]===""&&d[1]===""&&this.globParts[u][2]==="?"&&typeof d[3]=="string"&&/^[a-z]:$/i.test(d[3])&&(d[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let a=0;a<e[i].length;a++)e[i][a]==="**"&&(e[i][a]="*");const{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a!==i&&n.splice(i,a-i)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((i,a)=>{const u=i[i.length-1];return a==="**"&&u==="**"?i:a===".."&&u&&u!==".."&&u!=="."&&u!=="**"?(i.pop(),i):(i.push(a),i)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let a=1;a<e.length-1;a++){const u=e[a];a===1&&u===""&&e[0]===""||(u==="."||u==="")&&(n=!0,e.splice(a,1),a--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){const a=e[i-1];a&&a!=="."&&a!==".."&&a!=="**"&&(n=!0,e.splice(i-1,2),i-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let i of e){let a=-1;for(;(a=i.indexOf("**",a+1))!==-1;){let d=a;for(;i[d+1]==="**";)d++;d>a&&i.splice(a+1,d-a);let y=i[a+1];const h=i[a+2],p=i[a+3];if(y!==".."||!h||h==="."||h===".."||!p||p==="."||p==="..")continue;n=!0,i.splice(a,1);const v=i.slice(0);v[a]="**",e.push(v),a--}if(!this.preserveMultipleSlashes){for(let d=1;d<i.length-1;d++){const y=i[d];d===1&&y===""&&i[0]===""||(y==="."||y==="")&&(n=!0,i.splice(d,1),d--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(n=!0,i.pop())}let u=0;for(;(u=i.indexOf("..",u+1))!==-1;){const d=i[u-1];if(d&&d!=="."&&d!==".."&&d!=="**"){n=!0;const y=u===1&&i[u+1]==="**"?["."]:[];i.splice(u-1,2,...y),i.length===0&&i.push(""),u-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let i=n+1;i<e.length;i++){const a=this.partsMatch(e[n],e[i],!this.preserveMultipleSlashes);!a||(e[n]=a,e[i]=[])}return e.filter(n=>n.length)}partsMatch(e,n,i=!1){let a=0,u=0,d=[],y="";for(;a<e.length&&u<n.length;)if(e[a]===n[u])d.push(y==="b"?n[u]:e[a]),a++,u++;else if(i&&e[a]==="**"&&n[u]===e[a+1])d.push(e[a]),a++;else if(i&&n[u]==="**"&&e[a]===n[u+1])d.push(n[u]),u++;else if(e[a]==="*"&&n[u]&&(this.options.dot||!n[u].startsWith("."))&&n[u]!=="**"){if(y==="b")return!1;y="a",d.push(e[a]),a++,u++}else if(n[u]==="*"&&e[a]&&(this.options.dot||!e[a].startsWith("."))&&e[a]!=="**"){if(y==="a")return!1;y="b",d.push(n[u]),a++,u++}else return!1;return e.length===n.length&&d}parseNegate(){if(this.nonegate)return;const e=this.pattern;let n=!1,i=0;for(let a=0;a<e.length&&e.charAt(a)==="!";a++)n=!n,i++;i&&(this.pattern=e.slice(i)),this.negate=n}matchOne(e,n,i=!1){const a=this.options;if(this.isWindows){const S=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),P=n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]);if(S&&P){const R=e[3],$=n[3];R.toLowerCase()===$.toLowerCase()&&(e[3]=$)}else if(P&&typeof e[0]=="string"){const R=n[3],$=e[0];R.toLowerCase()===$.toLowerCase()&&(n[3]=$,n=n.slice(3))}else if(S&&typeof n[0]=="string"){const R=e[3];R.toLowerCase()===n[0].toLowerCase()&&(n[0]=R,e=e.slice(3))}}const{optimizationLevel:u=1}=this.options;u>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var d=0,y=0,h=e.length,p=n.length;d<h&&y<p;d++,y++){this.debug("matchOne loop");var v=n[y],m=e[d];if(this.debug(n,v,m),v===!1)return!1;if(v===fn){this.debug("GLOBSTAR",[n,v,m]);var g=d,A=y+1;if(A===p){for(this.debug("** at the end");d<h;d++)if(e[d]==="."||e[d]===".."||!a.dot&&e[d].charAt(0)===".")return!1;return!0}for(;g<h;){var o=e[g];if(this.debug(`
globstar while`,e,g,n,A,o),this.matchOne(e.slice(g),n.slice(A),i))return this.debug("globstar found match!",g,h,o),!0;if(o==="."||o===".."||!a.dot&&o.charAt(0)==="."){this.debug("dot detected!",e,g,n,A);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,g,n,A),g===h))}let S;if(typeof v=="string"?(S=m===v,this.debug("string match",v,m,S)):(S=v.test(m),this.debug("pattern match",v,m,S)),!S)return!1}if(d===h&&y===p)return!0;if(d===h)return i;if(y===p)return d===h-1&&e[d]==="";throw new Error("wtf?")}braceExpand(){return Yc(this.pattern,this.options)}parse(e){ea(e);const n=this.options;if(e==="**")return fn;if(e==="")return"";let i,a=null;(i=e.match(Zp))?a=n.dot?Yp:Kp:(i=e.match(Up))?a=(n.nocase?n.dot?Wp:$p:n.dot?Fp:jp)(i[1]):(i=e.match(Xp))?a=(n.nocase?n.dot?Jp:Qp:n.dot?em:tm)(i):(i=e.match(Vp))?a=n.dot?qp:Hp:(i=e.match(zp))&&(a=Gp);const u=ra.fromGlob(e,this.options).toMMPattern();return a?Object.assign(u,{test:a}):u}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const n=this.options,i=n.noglobstar?im:n.dot?sm:am,a=new Set(n.nocase?["i"]:[]);let u=e.map(h=>{const p=h.map(v=>{if(v instanceof RegExp)for(const m of v.flags.split(""))a.add(m);return typeof v=="string"?dm(v):v===fn?fn:v._src});return p.forEach((v,m)=>{const g=p[m+1],A=p[m-1];v!==fn||A===fn||(A===void 0?g!==void 0&&g!==fn?p[m+1]="(?:\\/|"+i+"\\/)?"+g:p[m]=i:g===void 0?p[m-1]=A+"(?:\\/|"+i+")?":g!==fn&&(p[m-1]=A+"(?:\\/|\\/"+i+"\\/)"+g,p[m+1]=fn))}),p.filter(v=>v!==fn).join("/")}).join("|");const[d,y]=e.length>1?["(?:",")"]:["",""];u="^"+d+u+y+"$",this.negate&&(u="^(?!"+u+").+$");try{this.regexp=new RegExp(u,[...a].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;const i=this.options;this.isWindows&&(e=e.split("\\").join("/"));const a=this.slashSplit(e);this.debug(this.pattern,"split",a);const u=this.set;this.debug(this.pattern,"set",u);let d=a[a.length-1];if(!d)for(let y=a.length-2;!d&&y>=0;y--)d=a[y];for(let y=0;y<u.length;y++){const h=u[y];let p=a;if(i.matchBase&&h.length===1&&(p=[d]),this.matchOne(p,h,n))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return Ot.defaults(e).Minimatch}}Ot.AST=ra,Ot.Minimatch=ia,Ot.escape=Bp,Ot.unescape=ds;function hm({api:t,onSuccess:e,onFailure:n,lastUploadedAtStorageKey:i,getUploadAllowlist:a}){return{label:"page-views",onSuccess:e,onFailure:n,async getLastUploadedAt(){const u=(await ze.storage.local.get(i))[i];return u??1},setLastUploadedAt(u){return ze.storage.local.set({[i]:u})},async getModelsToUpload({db:u,lastUploadedAt:d,uploadStartedAt:y}){var h;const p=await u.pageViewsRepo.findPageViewsByEndedAt(d,y),v=(h=await a())!=null?h:[];return p.filter(m=>m.imported?!1:!!v.find(g=>Ot(m.appId+m.path,g)))},async upload(u,d){const y=d.reduce((h,p)=>{var v,m,g;if(p.endedAt==null)throw Error("Cannot upload a page view that is in progress");const A={duration:Ks(p.endedAt-p.startedAt),timestamp:Ks(p.startedAt),referrer:p.referrer};return A.duration>0&&(h[v=p.appId]!=null||(h[v]={}),(m=h[p.appId])[g=p.path]!=null||(m[g]={page_views:[]}),h[p.appId][p.path].page_views.push(A)),h},{});await t.uploadPageViews({...u,websites:y})}}}function fm(t){const e=yp({api:t.api,...t.sessions}),n=hm({api:t.api,...t.pageViews});return mp({...t,uploaders:[e,n]})}const Oo={APP_ID:"laankejkbhbdhmipfmgcngdelahlfoji",INSTALL_ID_KEY:"install-id"};var gm=Object.defineProperty,pm=(t,e,n)=>e in t?gm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mi=(t,e,n)=>(pm(t,typeof e!="symbol"?e+"":e,n),n);const mm='"use strict";(()=>{var Pe=Object.create;var Ht=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var Fe=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var Le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var De=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Oe(t))!Ue.call(e,s)&&s!==r&&Ht(e,s,{get:()=>t[s],enumerable:!(o=Me(t,s))||o.enumerable});return e};var Vt=(e,t,r)=>(r=e!=null?Pe(Fe(e)):{},De(t||!e||!e.__esModule?Ht(r,"default",{value:e,enumerable:!0}):r,e));var vt=Le((Bt,Wt)=>{"use strict";(function(e){if(typeof Bt=="object")Wt.exports=e();else if(typeof define=="function"&&define.amd)define(e);else{var t;try{t=window}catch{t=self}t.SparkMD5=e()}})(function(e){"use strict";var t=function(d,l){return d+l&4294967295},r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(d,l,i,n,c,a){return l=t(t(l,d),t(n,a)),t(l<<c|l>>>32-c,i)}function s(d,l){var i=d[0],n=d[1],c=d[2],a=d[3];i+=(n&c|~n&a)+l[0]-680876936|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[1]-389564586|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[2]+606105819|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[3]-1044525330|0,n=(n<<22|n>>>10)+c|0,i+=(n&c|~n&a)+l[4]-176418897|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[5]+1200080426|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[6]-1473231341|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[7]-45705983|0,n=(n<<22|n>>>10)+c|0,i+=(n&c|~n&a)+l[8]+1770035416|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[9]-1958414417|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[10]-42063|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[11]-1990404162|0,n=(n<<22|n>>>10)+c|0,i+=(n&c|~n&a)+l[12]+1804603682|0,i=(i<<7|i>>>25)+n|0,a+=(i&n|~i&c)+l[13]-40341101|0,a=(a<<12|a>>>20)+i|0,c+=(a&i|~a&n)+l[14]-1502002290|0,c=(c<<17|c>>>15)+a|0,n+=(c&a|~c&i)+l[15]+1236535329|0,n=(n<<22|n>>>10)+c|0,i+=(n&a|c&~a)+l[1]-165796510|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[6]-1069501632|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[11]+643717713|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[0]-373897302|0,n=(n<<20|n>>>12)+c|0,i+=(n&a|c&~a)+l[5]-701558691|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[10]+38016083|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[15]-660478335|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[4]-405537848|0,n=(n<<20|n>>>12)+c|0,i+=(n&a|c&~a)+l[9]+568446438|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[14]-1019803690|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[3]-187363961|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[8]+1163531501|0,n=(n<<20|n>>>12)+c|0,i+=(n&a|c&~a)+l[13]-1444681467|0,i=(i<<5|i>>>27)+n|0,a+=(i&c|n&~c)+l[2]-51403784|0,a=(a<<9|a>>>23)+i|0,c+=(a&n|i&~n)+l[7]+1735328473|0,c=(c<<14|c>>>18)+a|0,n+=(c&i|a&~i)+l[12]-1926607734|0,n=(n<<20|n>>>12)+c|0,i+=(n^c^a)+l[5]-378558|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[8]-2022574463|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[11]+1839030562|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[14]-35309556|0,n=(n<<23|n>>>9)+c|0,i+=(n^c^a)+l[1]-1530992060|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[4]+1272893353|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[7]-155497632|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[10]-1094730640|0,n=(n<<23|n>>>9)+c|0,i+=(n^c^a)+l[13]+681279174|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[0]-358537222|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[3]-722521979|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[6]+76029189|0,n=(n<<23|n>>>9)+c|0,i+=(n^c^a)+l[9]-640364487|0,i=(i<<4|i>>>28)+n|0,a+=(i^n^c)+l[12]-421815835|0,a=(a<<11|a>>>21)+i|0,c+=(a^i^n)+l[15]+530742520|0,c=(c<<16|c>>>16)+a|0,n+=(c^a^i)+l[2]-995338651|0,n=(n<<23|n>>>9)+c|0,i+=(c^(n|~a))+l[0]-198630844|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[7]+1126891415|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[14]-1416354905|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[5]-57434055|0,n=(n<<21|n>>>11)+c|0,i+=(c^(n|~a))+l[12]+1700485571|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[3]-1894986606|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[10]-1051523|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[1]-2054922799|0,n=(n<<21|n>>>11)+c|0,i+=(c^(n|~a))+l[8]+1873313359|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[15]-30611744|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[6]-1560198380|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[13]+1309151649|0,n=(n<<21|n>>>11)+c|0,i+=(c^(n|~a))+l[4]-145523070|0,i=(i<<6|i>>>26)+n|0,a+=(n^(i|~c))+l[11]-1120210379|0,a=(a<<10|a>>>22)+i|0,c+=(i^(a|~n))+l[2]+718787259|0,c=(c<<15|c>>>17)+a|0,n+=(a^(c|~i))+l[9]-343485551|0,n=(n<<21|n>>>11)+c|0,d[0]=i+d[0]|0,d[1]=n+d[1]|0,d[2]=c+d[2]|0,d[3]=a+d[3]|0}function u(d){var l=[],i;for(i=0;i<64;i+=4)l[i>>2]=d.charCodeAt(i)+(d.charCodeAt(i+1)<<8)+(d.charCodeAt(i+2)<<16)+(d.charCodeAt(i+3)<<24);return l}function h(d){var l=[],i;for(i=0;i<64;i+=4)l[i>>2]=d[i]+(d[i+1]<<8)+(d[i+2]<<16)+(d[i+3]<<24);return l}function f(d){var l=d.length,i=[1732584193,-271733879,-1732584194,271733878],n,c,a,x,O,L;for(n=64;n<=l;n+=64)s(i,u(d.substring(n-64,n)));for(d=d.substring(n-64),c=d.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<c;n+=1)a[n>>2]|=d.charCodeAt(n)<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(s(i,a),n=0;n<16;n+=1)a[n]=0;return x=l*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),O=parseInt(x[2],16),L=parseInt(x[1],16)||0,a[14]=O,a[15]=L,s(i,a),i}function p(d){var l=d.length,i=[1732584193,-271733879,-1732584194,271733878],n,c,a,x,O,L;for(n=64;n<=l;n+=64)s(i,h(d.subarray(n-64,n)));for(d=n-64<l?d.subarray(n-64):new Uint8Array(0),c=d.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<c;n+=1)a[n>>2]|=d[n]<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(s(i,a),n=0;n<16;n+=1)a[n]=0;return x=l*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),O=parseInt(x[2],16),L=parseInt(x[1],16)||0,a[14]=O,a[15]=L,s(i,a),i}function m(d){var l="",i;for(i=0;i<4;i+=1)l+=r[d>>i*8+4&15]+r[d>>i*8&15];return l}function g(d){var l;for(l=0;l<d.length;l+=1)d[l]=m(d[l]);return d.join("")}g(f("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(d,l){var i=(d&65535)+(l&65535),n=(d>>16)+(l>>16)+(i>>16);return n<<16|i&65535}),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function d(l,i){return l=l|0||0,l<0?Math.max(l+i,0):Math.min(l,i)}ArrayBuffer.prototype.slice=function(l,i){var n=this.byteLength,c=d(l,n),a=n,x,O,L,Dt;return i!==e&&(a=d(i,n)),c>a?new ArrayBuffer(0):(x=a-c,O=new ArrayBuffer(x),L=new Uint8Array(O),Dt=new Uint8Array(this,c,x),L.set(Dt),O)}}();function w(d){return/[\\u0080-\\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),d}function v(d,l){var i=d.length,n=new ArrayBuffer(i),c=new Uint8Array(n),a;for(a=0;a<i;a+=1)c[a]=d.charCodeAt(a);return l?c:n}function R(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function b(d,l,i){var n=new Uint8Array(d.byteLength+l.byteLength);return n.set(new Uint8Array(d)),n.set(new Uint8Array(l),d.byteLength),i?n:n.buffer}function q(d){var l=[],i=d.length,n;for(n=0;n<i-1;n+=2)l.push(parseInt(d.substr(n,2),16));return String.fromCharCode.apply(String,l)}function A(){this.reset()}return A.prototype.append=function(d){return this.appendBinary(w(d)),this},A.prototype.appendBinary=function(d){this._buff+=d,this._length+=d.length;var l=this._buff.length,i;for(i=64;i<=l;i+=64)s(this._hash,u(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},A.prototype.end=function(d){var l=this._buff,i=l.length,n,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a;for(n=0;n<i;n+=1)c[n>>2]|=l.charCodeAt(n)<<(n%4<<3);return this._finish(c,i),a=g(this._hash),d&&(a=q(a)),this.reset(),a},A.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},A.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},A.prototype.setState=function(d){return this._buff=d.buff,this._length=d.length,this._hash=d.hash,this},A.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},A.prototype._finish=function(d,l){var i=l,n,c,a;if(d[i>>2]|=128<<(i%4<<3),i>55)for(s(this._hash,d),i=0;i<16;i+=1)d[i]=0;n=this._length*8,n=n.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(n[2],16),a=parseInt(n[1],16)||0,d[14]=c,d[15]=a,s(this._hash,d)},A.hash=function(d,l){return A.hashBinary(w(d),l)},A.hashBinary=function(d,l){var i=f(d),n=g(i);return l?q(n):n},A.ArrayBuffer=function(){this.reset()},A.ArrayBuffer.prototype.append=function(d){var l=b(this._buff.buffer,d,!0),i=l.length,n;for(this._length+=d.byteLength,n=64;n<=i;n+=64)s(this._hash,h(l.subarray(n-64,n)));return this._buff=n-64<i?new Uint8Array(l.buffer.slice(n-64)):new Uint8Array(0),this},A.ArrayBuffer.prototype.end=function(d){var l=this._buff,i=l.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c,a;for(c=0;c<i;c+=1)n[c>>2]|=l[c]<<(c%4<<3);return this._finish(n,i),a=g(this._hash),d&&(a=q(a)),this.reset(),a},A.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},A.ArrayBuffer.prototype.getState=function(){var d=A.prototype.getState.call(this);return d.buff=R(d.buff),d},A.ArrayBuffer.prototype.setState=function(d){return d.buff=v(d.buff,!0),A.prototype.setState.call(this,d)},A.ArrayBuffer.prototype.destroy=A.prototype.destroy,A.ArrayBuffer.prototype._finish=A.prototype._finish,A.ArrayBuffer.hash=function(d,l){var i=p(new Uint8Array(d)),n=g(i);return l?q(n):n},A})});var T=class e{constructor(t,r){this.operation=t;this.data=r}static NONCE="z3ZCw_12v";nonce=e.NONCE;static fromObject(t){return!t||t.nonce!==e.NONCE?null:new e(t.operation,t.data)}validate(){return this.nonce===e.NONCE}};var X=class{crawlId;installId;zys;dateCrawlStarted;dateCrawled;crawlUrl;fragmentIndex;youTubeChannelId;youTubeChannelName;youTubeVideoId;constructor(t,r,o,s,u,h,f,p){this.crawlId=t,this.installId=r,this.zys=o,this.dateCrawlStarted=s,this.dateCrawled=u,this.crawlUrl=h,this.fragmentIndex=f,Object.assign(this,p)}get ads(){return this.zys}set ads(t){this.zys=t}};var ct=Vt(vt(),1);var _=class{x;y;width;height;text;sourceUrls;hash;hashOverride;type;typeOverride;canvases;svgs;depth;adRuleId;dedupeKey;duration;language;youTubeId;netflixData;twitterData;vastData;outerHtml;static minWidth=120;static minHeight=28;static minimumVideoToAdAreaRatio=.5;static minimumImageToAdAreaRatio=.05;constructor(t){this.x=t.x??0,this.y=t.y??0,this.width=t.width,this.height=t.height,this.text=t.text??"",this.sourceUrls=t.sourceUrls??[],this.hash=t.hash??"",this.type=t.type,this.canvases=[],this.svgs=[],this.depth=0,this.adRuleId=t.adRuleId,this.duration=t.duration,this.language=t.language,this.youTubeId=t.youTubeId,this.netflixData=t.netflixData,this.twitterData=t.twitterData,this.vastData=t.vastData}};var y=class e{u;t;h;d;width;height;constructor(t){this.u=e.qualifyURL(t.url,t.doc),this.t=t.urlType,this.d=t.depth,this.width=t.width,this.height=t.height}get url(){return this.u}set url(t){this.u=t}get urlType(){return this.t}set urlType(t){this.t=t}get depth(){return this.d}set depth(t){this.d=t}get hash(){return this.h}set hash(t){this.h=t}static SourceUrlTags=new Set(["A","DIV","IFRAME","IMG","LINK","SCRIPT","SPAN","VIDEO"]);static qualifyURL(t,r){if(!t||new RegExp("^(?:\\\\w+-extension)|(?:about)|(?:blob)|(?:javascript):").test(t))return"";r=r||document;let o=r.createElement("a");return o.href=t,o.href}};async function Q(e,t){if(!e)return[];let r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u=>y.SourceUrlTags.has(u.nodeName)||u?.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),o=[],s=r.currentNode;for(;s;){o.push(...await He(s,t));let u=s?.shadowRoot;u&&o.push(...await Q(u?.firstElementChild,t)),s=r.nextNode()}return o.filter(u=>u.url)}async function He(e,t){if(!e||!y.SourceUrlTags.has(e.nodeName))return[];if(e.nodeName=="IMG")return[await qt(e,t)];if(e.nodeName=="DIV"||e.nodeName=="SPAN"){let s=/url\\([\'"]?([^\'"]+)[\'"]?\\)/gi,u=getComputedStyle(e).getPropertyValue("background-image");return Promise.all(Array.from(u.matchAll(s)).filter(h=>h).map(h=>h[1]).map(async h=>{try{let f=new Image;return f.src=h,await f.decode(),qt(f,t)}catch{return new y({url:h,urlType:7,depth:t,doc:e?.ownerDocument})}}))}if(e.nodeName==="VIDEO"){if(e=e.hasAttribute("src")?e:e.querySelector("source"),!e)return[];let s=e.getBoundingClientRect(),u=Math.round(s.width),h=Math.round(s.height);return[new y({url:e.getAttribute("src"),urlType:4,depth:t,width:u,height:h,doc:e.ownerDocument})]}if(e.nodeName==="IFRAME")return[new y({url:e.getAttribute("src"),urlType:1,depth:t,width:e.offsetWidth,height:e.offsetHeight,doc:e.ownerDocument})];let r=null,o=0;switch(e.nodeName){case"SCRIPT":r=e.getAttribute("src"),o=6;break;case"LINK":r=e.getAttribute("href"),o=6;break;case"A":r=e.getAttribute("href"),o=8;break}return[new y({url:r,urlType:o,depth:t,doc:e.ownerDocument})]}async function qt(e,t){let r=e.getAttribute("src"),o=e.getBoundingClientRect(),s=Math.round(e.naturalWidth||o.width),u=Math.round(e.naturalHeight||o.height);if(!(s||u)&&r)try{let f=new Image;f.src=r,await f.decode(),s=f.naturalWidth,u=f.naturalHeight}catch{}let h=0;return(o.width||s)<2&&(o.height||u)<2||s===43&&u===22||o.y+window.scrollY<5&&(o.width||s)<85&&(o.height||u)<=20?h=7:h=3,new y({url:r,urlType:h,depth:t,width:o.width||s,height:o.height||u,doc:e.ownerDocument})}async function ut(e,t){e.sourceUrls=lt(e.sourceUrls,h=>h.u);let r=e.sourceUrls.filter(h=>h.t===3||h.t===4),s=r.filter(h=>h.t===3).sort((h,f)=>(h.width||0)*(h.height||0)-(f.width||0)*(f.height||0)).pop(),u=r.filter(h=>h.t===4);if(e.type=e.typeOverride??(r.length===1&&(r[0].width||0)>=e.width-2&&(r[0].height||0)>=e.height-2?r[0].t===3?1:3:u.length===1&&(u[0].width||0)*(u[0].height||0)>=e.width*e.height*_.minimumVideoToAdAreaRatio?3:7),e.hashOverride)return e.hash=e.hashOverride;if(e.type===7&&!u.length&&(s?.width||0)*(s?.height||0)<e.width*e.height*_.minimumImageToAdAreaRatio)return e.hash="";for(let h of r)h.h=await j(h.u||"",t);if(e.hash=r.filter(h=>h.h).reduce((h,f)=>z(h,f.h),"")||"",e.type===3&&!e.hash&&(e.hash=k(r[0].u??"",!0)),e.type===7&&e.text){let h=k(e.text.toLowerCase(),!0);e.hash=z(e.hash,h)}if(e.hash||(e.canvases?.length&&(e.hash=e.canvases.reduce((h,f)=>z(k(f),h),e.hash)),e.svgs?.length&&(e.hash=e.svgs.reduce((h,f)=>z(k(f),h),e.hash))),e.type===7&&e.hash){let h=k(Be(kt(Math.round(e.height)),kt(Math.round(e.width))),!0);e.hash=z(e.hash,h)}r.forEach(h=>{h.h&&(h.h=btoa(h.h))}),e.hash=btoa(e.hash)}async function j(e,t){try{return k(await t(e))}catch(r){return S(r),""}}function k(e,t){if(Ve(e)==="arraybuffer"){let r=e;return r.byteLength===0?"":ct.default.ArrayBuffer.hash(r,!0)}else{let r=e;return t?ct.default.hash(r,!0):ct.default.hashBinary(r,!0)}}function Ve(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function z(e,t){if(!t)return e||"";if(!e)return t;if(e.length<t.length){let u=e;e=t,t=u}let r=e.length,o=t.length,s="";for(let u=0;u<o;u++)s+=String.fromCharCode(e.charCodeAt(u)^t.charCodeAt(u));for(let u=o;u<r;u++)s+=String.fromCharCode(e.charCodeAt(u));return s}function kt(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!0),t}function Be(e,t){let r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}var V=3e3;var Et="pc",Ct="ca",et=72e5,Z=null;function S(...e){Z&&(e=e||[],e=e.map(t=>t?.stack&&t.message?{error:t.message,stack:t.stack}:t),e=e.map(t=>typeof t!="object"||t instanceof String?t:JSON.stringify(t)),e.length==1?Z(e[0]):Z(e))}function Jt(e){Z=e||Z}var ht=class{constructor(t,r,o,s){let u=Xt(t);u==="object"?(this.left=0,Object.assign(this,t)):u==="number"&&(this.left=Math.round(Math.max(t||0,0))||0,this.top=Math.round(Math.max(r||0,0))||0,this.width=Math.round(Math.max(o||0,0))||0,this.height=Math.round(Math.max(s||0,0))||0)}get bottom(){return this.top+this.height}get right(){return this.left+this.width}toString(){return`${this.width}x${this.height}@${this.left},${this.top}`}};function We(){return([1e7]+-1e3+-1e3+-1e3+-1e11).replace(/[01]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function Xt(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function qe(e,t){let r={},o=Object.keys(t);for(let s=0,u=o.length;s<u;s++){let h=o[s];if(t.hasOwnProperty(h)){let f=t[h];if(f==null||f===""&&e[h]||f instanceof Array&&!f.length&&e[h]?.length||(h==="top"||h==="left"||h==="X"||h==="Y")&&e[h]>0)continue;r[h]=t[h]}}return Object.assign(e,t)}function E(e){try{return e()}catch{return null}}var $r=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").map(e=>e.charCodeAt(0));function zt(e){return e.tagName?.toUpperCase?.()||E(()=>e.outerHTML.substr(1,e.outerHTML.indexOf(" ")-1).toUpperCase())||""}function jt(e){let t=0,r="",o={" ":1,"\\f":1,"\\n":1,"\\r":1,"	":1,"\\v":1,"\\xA0":1,"\\u2028":1,"\\u2029":1};for(let s=0,u=e.length;s<u;s++)o[e.charAt(s)]?(t||(r+=" "),t=1):(t=0,r+=e.charAt(s));return r.trim()}function F(){return ke(C.location.hostname)}function ke(e){return e.split(".").slice(e.endsWith(".uk")||e.endsWith(".jp")?-3:-2).join(".")}function pt(){let e=new Set(["aarp.org","abc.com","aol.com","attn.com","atttvnow.com","brainly.com","bravotv.com","cartoonnetwork.com","cbs.com","cbssports.com","chron.com","citationmachine.net","cnet.com","cnn.com","crunchyroll.com","dailymail.co.uk","delish.com","discoveryplus.com","easybib.com","espn.com","fandom.com","foxbusiness.com","foxnews.com","fubo.tv","genius.com","go.cnn.com","go.com","goodhousekeeping.com","happykids.tv","hulu.com","imdb.com","investigationdiscovery.com","linkedin.com","locast.org","mlb.com","msn.com","music.amazon.com","music.apple.com","music.youtube.com","mytuner-radio.com","nexusmods.com","nfl.com","nhl.com","nypost.com","nytimes.com","paramountplus.com","pch.com","philo.com","playstation.com","pluto.tv","rawstory.com","realtor.com","refinery29.com","seattlepi.com","sfgate.com","sling.com","spanishdict.com","sporcle.com","steampowered.com","tablotv.com","therokuchannel.roku.com","try.frndlytv.com","tubitv.com","tv.apple.com","tv.youtube.com","twitch.tv","uproxx.com","usatoday.com","vudu.com","washingtonpost.com","watch.hgtv.com","watch.spectrum.net","weather.com","www3.nhk.or.jp","xbox.com","xfinity.com","yahoo.com","yelp.com","youtubekids.com"]);return I&&(e.has(C.location.hostname)||e.has(F()))}function U(e){e.documentElement&&(e=e.documentElement);let t=zt(e);if(e.offsetParent===null&&t!=="BODY"&&t!=="HTML"&&t!=="FRAME")return new ht;let o=(e.ownerDocument||document).defaultView||C,s=e.getBoundingClientRect();return new ht(s.left+o.scrollX,s.top+o.scrollY,s.width,s.height)}var Gt=["background-image","display","visibility","z-index","border-top-width","border-left-width","border-bottom-width","border-right-width","padding-top","padding-left","padding-bottom","padding-right","position","width","height","top","bottom","left","right","font-size"];function je(e){if(e._pm_st)return e.style&&(e._pm_st=qe(e._pm_st,JSON.parse(JSON.stringify(e.style,Gt)))),e._pm_st;let t=e.ownerDocument?.defaultView;typeof window<"u"&&(!t||!t.opener)&&(t=window);let r=JSON.parse(JSON.stringify(t.getComputedStyle(e),Gt));return e._pm_st=r,r}function Kt(e,t){let r=e.nodeName,o=je(e),s=U(e);if(o?.display!=="none"&&s&&s.width>20&&s.height>20)if(r==="CANVAS"&&!e.matches(".__pm_marker"))try{t.canvases.push(e.toDataURL("image/jpeg",.2))}catch{}else r==="SVG"&&t.svgs.push(e.outerHTML)}function mt(e){if(!e)return"";let t=e?.ownerDocument||document,r=t.defaultView.NodeFilter;if(Xt(e)==="htmldocument"&&e.body&&(e=e.body),!e)return"";let o={SCRIPT:1,NOSCRIPT:1,STYLE:1},s=zt(e);if(s==="HTML"&&(e=e.querySelector("body")),!e)return"";let u=function(m){try{return m.nodeType===3?r.FILTER_ACCEPT:!m.tagName||o[m.tagName]||m.offsetParent===null?r.FILTER_REJECT:r.FILTER_ACCEPT}catch{return r.FILTER_REJECT}};if(e.nodeType!==3&&(!s||o[s]))return"";let h=t.createTreeWalker(e,r.SHOW_ELEMENT|r.SHOW_TEXT,{acceptNode:u},!0),f={"LEARN MORE":1,REPLAY:1},p=[];for(;e;){if(e.nodeType===3){let m=jt(e.nodeValue||"");!f[m.toUpperCase()]&&!p.includes(m)&&p.push(m)}e=h.nextNode()}return p.length?jt(p.join(" ")):""}function P(e,t){return C.requestIdleCallback?{id:C.requestIdleCallback(e,{timeout:t}),isIdleCallback:!0}:{id:setTimeout(e,t),isIdleCallback:!1}}var tt=null;function G(e){tt=e||tt}function It(){tt=null}function Yt(){if(typeof window>"u")return;let e=function(f,p,m,g){P(()=>{!tt||!f||tt(f,p,m,g)},1e4)},t=f=>new TextDecoder("utf-8").decode(new Uint8Array(f)),r=function(f,p){try{if(p=f.currentTarget||p,p=p._datadog_xhr||p,p.readyState===4&&p.status>=200&&p.status<=210){let m=E(()=>p.responseXML),g=E(()=>p.responseText)||E(()=>t(p.response))||E(()=>m.documentElement.outerHTML);(g||m)&&e(g,m,p.reponseType==="json",p.responseURL)}}catch{}},o=XMLHttpRequest.prototype.send;function s(){let f=this.onreadystatechange,p=arguments;this.onreadystatechange=function(m){return r(m,this),f?.apply?.(this,arguments)},o.apply(this,p)}XMLHttpRequest.prototype.send=s;let u=C.fetch,h=function(){return u.apply(this,arguments).then(f=>{let p=f.headers.get("Content-Type");if(p&&(p.includes("text")||p.includes("json")||p.includes("xml")||p.includes("javascript"))){let m=f.clone();P(()=>{m.text().then(g=>e(g,null,p.includes("json"),f.url))},5e3)}return f})};C.fetch=h}function Tt(e){if(!e)return null;let t=null;return e=(e+"").trim(),e=="start"?t=0:e.indexOf(":")>=0?t=E(()=>Math.round(e.split(":").reduce((r,o,s,u)=>r+parseFloat(o)*Math.pow(60,u.length-s-1),0)))||t:isNaN(e)||(t=Math.round(parseFloat(e))),t}var Qt,$,Zt,St,H,dt,ft;function te(e){H[e.dedupeKey]?.depth>e.depth||H[e.dedupeKey]?.depth===e.depth&&H[e.dedupeKey].adRuleId<e.adRuleId||(H[e.dedupeKey]=e)}function Ge(){let e=C.location;return e.href.indexOf("youtube.com/watch")===-1?e.origin+e.pathname:e.href}async function $e(e){await Promise.all(e.map(t=>ut(t,M)))}async function Je(){let e=Object.values(H),t=Object.values(dt);return H={},dt={},await $e(e),new X(Qt,gt,e.concat(t).filter(r=>r.hash),$-(D?.TimeOffset||0),Date.now()-(D?.TimeOffset||0),St,Zt++,ft)}function N(e,t){if(!I){W(top,new T(Et,[e,t]));return}e.forEach(r=>dt[r.hash]=r),ft=t||ft,B()}var $t=0;async function B(){let e=Date.now();if(e-$t>V){$t=e;let t=await Je();Nt?.(JSON.stringify(t))}}function ee(){if(!I)return;Qt=We(),$=Date.now(),Zt=0;let e=D?.ParsedSiteConfigs[F()];if(e){let t=new RegExp(e).exec(location.href);St=t?t.slice(1).join(""):location.protocol+"://"+location.hostname}else St=Ge();H={},dt={},ft=void 0}function Xe(e,t){return e.reduce(function(r,o){return(r[t(o)]=r[t(o)]||[]).push(o),r},{})}function lt(e,t){return Object.values(Xe(e,t)).map(r=>r[0])}function W(e,t){e.postMessage(t,"*")}var re=null;function ne(){let e=document.querySelector("video.ad-video-player,video#ad-video-player"),t=document.querySelector(".AdUnitView a"),r=e&&e.src;if(e&&t&&r&&re!==r&&r.endsWith(".mp4")&&r.indexOf("bumper")===-1&&(r.indexOf("ads")>=0||r.indexOf("Ads")>=0)){if(!e.duration||isNaN(e.duration))return;re=r,P(()=>{j(r,M).then(o=>N([new _({width:1920,height:1080,sourceUrls:[new y({url:r,urlType:4}),new y({url:t.href,urlType:8})],hash:btoa(o),type:3,duration:Math.round(e.duration)})]))});return}}var yt={},ie=!1;function oe(){if(S("NETFLIX AD CAPTURE"),!(typeof window>"u")){if(!ie){let e=Object.defineProperty;Object.defineProperty=function(r,o,s){return Date.now()-$<et&&P(()=>{if(Object.hasOwn(r,"isAd")&&r.isAd){let u=ze(r);u&&(yt[u.hash]=u)}}),e(r,o,s)},ie=!0}N(Object.values(yt)),yt={}}}function ze(e){let t=e.movieId;if(!t||yt[t])return;let r=e.video_tracks[0].streams[0],o=r.res_w,s=r.res_h,u=e.audio_tracks[0].streams[0];return new _({hash:("n+++"+t).padEnd(t.length+4+(t.length+4)*6%8/2,"=").replace("===","A=="),type:3,sourceUrls:[new y({url:r.urls[0].url,urlType:4,width:o,height:s}),new y({url:u.urls[0].url,urlType:9})],width:o,height:s,duration:e.duration,language:u.language,netflixData:{id:t}})}var rt=[];async function Rt(){S("TWITTER AD CAPTURE"),G((e,t,r,o)=>{try{if(!o||!o.includes("HomeTimeline")&&!(o.includes("/conversation/")&&o.includes("/"+/\\d+$/.exec(window.location.pathname)[0]+".json")))return;let s=Ke(e);rt=rt.concat(s)}catch{}}),await Ye()}function Ke(e){let t=JSON.parse(e);return([].concat.apply([],t?.data?.home?.home_timeline_urt?.instructions?.filter?.(s=>s?.type=="TimelineAddEntries")?.map?.(s=>s.entries))||[]).map(s=>s.content?.itemContent).filter(s=>s?.promotedMetadata).map(s=>{let u=s.tweet_results?.result?.card?.legacy?.binding_values?.filter?.(f=>f?.key=="unified_card")?.map?.(f=>JSON.parse(f.value?.string_value))?.[0],h=u?.destination_objects?.browser_1?.data?.url_data?.url||u?.destination_objects?.browser_with_docked_media_1?.url_data?.url;return{id_str:s?.tweet_results?.result?.rest_id,screen_name:s?.tweet_results?.result?.core?.user_results?.result?.legacy?.screen_name,cardDestination:h,advertiserId:s?.promotedMetadata?.advertiser_results?.result?.rest_id,user_id_str:s?.tweet_results?.result?.legacy?.user_id_str}}).filter(s=>s.id_str&&s.screen_name)}async function Ye(){if(!nt)return;let e=await Qe(document,rt),t=e.map(r=>r.twitterData.tid);rt=rt.filter(r=>!t.includes(r.id_str)),N(e)}async function Qe(e,t){let r="div.tweet.promoted-tweet",o=Array.from(e.querySelectorAll(r));o.length||(o=Array.from(e.querySelectorAll("article div>svg")).map(u=>u.parentElement.querySelector("span")).filter(u=>u?.textContent&&u.textContent.length<50).map(u=>u.closest("article"))),o.length||(o=Array.from(document.querySelectorAll("span")).filter(u=>u.textContent==="Ad").map(u=>u.closest("article")));let s=[];for(let u=0;u<o.length;u++){let h=o[u],f=Array.from(h.querySelectorAll("div>span,a span")).map(b=>b.textContent).filter(b=>b?.startsWith("@"))[0];f=f.startsWith("@")?f.substring(1):f;let p=null,m=null;for(m of t)if(m.screen_name==f&&(p=m.id_str,p))break;if(!p)continue;let g=mt(h);g&&(g=g.replace(new RegExp("# (\\\\w)","gi"),"#$1"));let w=U(h),v=new _({x:w.left,y:w.top,width:w.width,height:w.height,text:g,sourceUrls:(await Q(h.querySelector(".tweet-details-fixer")||h)).concat([new y({url:m.cardDestination,urlType:8})]).filter(b=>b.url&&!b.url.includes("/profile_images/")&&!b.url.includes(p+"/retweets")&&!b.url.includes(p+"/likes")&&!b.url.includes("/using-twitter/how-to")),hash:("t+++"+p).padEnd(p.length+4+(p.length+4)*6%8/2,"=").replace("===","A=="),type:h.querySelector("video")||h.querySelector(".PlayableMedia")?105:Array.from(h.querySelectorAll("img")).filter(b=>b.naturalWidth>200&&b.naturalHeight>40).length?104:h.querySelector("iframe")?102:103,twitterData:{taid:m.advertiserId||m.user_id_str||0,tid:p,tsn:f}}),R=(v.sourceUrls||[]).filter(b=>b?.url);v.sourceUrls=lt(R,b=>b.url),s.push(v)}return s}function Pt(){S("VAST AD CAPTURE"),G((e,t,r)=>{try{let o=e.substring(0,500),s=o.indexOf(\'"ad_id":\')>=0||o.indexOf(\'"ad_type"\')>=0,u=[];if(r||s)Ze(e,u);else if(o.indexOf("<VAST ")>=0||o.indexOf("<vmap:AdBreak ")>=0){let h=E(()=>t?.documentElement||e&&new DOMParser().parseFromString(e,"application/xml").documentElement);tr(h,u)}else return;Promise.allSettled(u).then(h=>{S("Ads found.",h.map(f=>f.value)),N(h.map(f=>f.value).filter(f=>f))})}catch(o){S(o)}})}function Ze(e,t){let r=E,o=r(()=>e&&JSON.parse(e)),s=r(()=>o.items);s?.length&&Array.from(s).forEach(u=>{let h=r(()=>u.media.streamurl);if(!h)return;let f=r(()=>u.clickthrough),p=r(()=>u.media.duration),m=r(()=>u.ad_id||u.ad_video_id),g=r(()=>u.title);m&&F()==="peacocktv.com"&&(m=m.split(".")[0]);let w=r(()=>u.system);t.push(j(h,M).then(v=>new _({width:1920,height:1080,sourceUrls:[new y({url:h,urlType:4}),new y({url:f,urlType:8}),new y({url:"http://"+w,urlType:1})].filter(b=>b.url),hash:btoa(v)||m,type:3,duration:Math.round(p),vastData:{Id:m,Title:g,System:w}})))})}function tr(e,t){let r=E,o=r(()=>e?.querySelectorAll("VAST Ad"));o&&Array.from(o).forEach(s=>{let u=s.querySelector("Creatives Creative");if(!u)return;let h=u.querySelector("MediaFiles");if(!h)return;let f=r(()=>u.querySelector("VideoClicks ClickThrough").textContent.trim())||r(()=>document.querySelector(".AdUnitView a").href.trim()),p=r(()=>Tt(u.querySelector("Duration").textContent)),m=r(()=>h.querySelector("MediaFile[type=\'video/mp4\'],MediaFile[type=\'application/dash+xml\'],MediaFile[type=\'video/mpd\']").textContent.trim());if(!m){let l=u.querySelector("AdParameters"),i={},n,c=new RegExp("<(\\\\w+)>([^<]+)</\\\\1>","gi");for(;(n=c.exec(l.textContent))!==null;)i[n[1]]=n[2];p=r(()=>Tt(i.adDuration)),f=r(()=>i.clickUrl);let a=i.JsParameters;if(!a)return;let x=JSON.parse(a);m=r(()=>x.videos[0].url),m&&(p=p||x.duration,f=f||x.clickThruUrl||x.clickThroughUrl)}if(!m)return;let g=u.getAttribute("AdID")||u.getAttribute("AdId")||u.getAttribute("adid")||s.getAttribute("id");if(!g)return;F()==="peacocktv.com"&&(g=g.split(".")[0]);let w=r(()=>s.querySelector("AdTitle").textContent.trim()),v=r(()=>s.querySelector("AdSystem").textContent.trim()),R=s.querySelector("Extension"),b=r(()=>R.querySelector("CreativeParameter[name=\'_fw_advertiser_name\']").textContent.trim())||r(()=>R.querySelector("CreativeParameter[name=\'fw_advertiser_name\']").textContent.trim())||r(()=>R.querySelector("CreativeParameter[name=\'fw_advertiser\']").textContent.trim()),q=r(()=>R.querySelector("CreativeParameter[name=\'fw_brand\']").textContent.trim()),A=r(()=>R.querySelector("CreativeParameter[name=\'industry\']").textContent.trim()),d=r(()=>R.querySelector("CreativeParameter[name=\'ccr_measurement\']").textContent.trim());t.push(j(m,M).then(l=>new _({width:1920,height:1080,sourceUrls:[new y({url:m,urlType:4}),new y({url:f,urlType:8}),new y({url:d,urlType:0})].filter(i=>i.url),hash:btoa(l)||g,type:3,duration:Math.round(p),vastData:{Id:g,Adv:b,Brand:q,Cat:A,Title:w,System:v}})))})}var ae=Vt(vt(),1);function er(e){return e?new URL(e).searchParams.get("v"):null}var Mt;function wt(){return Mt||(Mt=document.querySelector("#movie_player")),Mt}function rr(){return E(()=>{let e=JSON.parse(wt().getDebugText());return e.ad_debug_videoId||e.addebug_videoId||e.ad_videoId})}function nr(){return E(()=>{let e=document.querySelector("#upload-info a.yt-simple-endpoint"),t=e.href.split("/");return{youTubeChannelId:t[t.length-1],youTubeChannelName:e.textContent.trim(),youTubeVideoId:E(()=>er(window.location.href))}})}function ir(){let e=E(()=>document.querySelector(".ytp-ad-player-overlay-instream-info .ytp-ad-button-text").textContent);if(e&&ar.test(e)){let t=e.indexOf("http://")===0||e.indexOf("https://")===0?e:"https://"+e.toLowerCase();return new y({url:t,urlType:8})}return null}function or(e){return e?btoa(ae.default.hash("YouTube+"+e,!0)):null}function sr(){return E(()=>wt().getAdState()>0||JSON.parse(wt().getDebugText()).addebug_videoId)}var ar=new RegExp("^(?:https?://)?[a-z0-9.-]+(\\\\.[a-z]+)+(?:$|/)"),ce={};function se(e){[e?.playerAds??[],e?.adPlacements??[]].flat().map(t=>(t.adPlacementRenderer?.renderer?.linearAdSequenceRenderer?.linearAds?.map(r=>r?.instreamVideoAdRenderer)??[]).concat([t.adPlacementRenderer?.renderer?.instreamVideoAdRenderer])).flat().filter(t=>t).map(function(t){let r=t?.playerOverlay?.instreamAdPlayerOverlayRenderer?.visitAdvertiserRenderer?.buttonRenderer?.navigationEndpoint?.urlEndpoint?.url;return r?{videoId:t.externalVideoId,lp:r}:null}).filter(t=>t).reduce((t,r)=>Object.assign(t,{[r.videoId]:new y({url:r.lp,urlType:8})}),ce)}function ue(){try{if(G((p,m,g,w)=>{try{if(!w||!w.includes("/ad_break?")&&!w.includes("/player?"))return;se(JSON.parse(p))}catch(v){S(v)}}),!sr())return B();se(window.ytInitialPlayerResponse);let e=0,t=640,r=360,o=0,s=0,u=wt(),h=u.querySelector("a.ytp-title-link"),f=u.querySelector("video");if(f){e=f.duration||0;let p=U(f);t=p?.width||t,r=p?.height||r,o=p?.left||o,s=p?.top||s}P(()=>{let p=rr()||void 0,m=ce[p]??ir(),g=nr(),w=m?[m]:[],v=new _({x:o,y:s,width:t,height:r,text:h?.textContent,sourceUrls:w,hash:or(p),type:3,duration:Math.round(e),youTubeId:p});N([v],g)})}catch(e){S(e)}}var it=class{constructor(t=null){this.log=t,this.#t.log=t??(()=>{})}simplifyTree(t){let r;for(;;){if(r=this.#t[t.r],!r)throw new Error(`Rule ${t.r} not implemented.`);if(r!==this.#t.PassOn||!t.c||!t.c.length)break;t=t.c[0]}return t.c&&t.c.length&&(t.c=t.c.map(o=>this.simplifyTree(o))),t}debugPrintParseTree(t,r=0){this.log(`${" ".repeat(r*2)}${t.r}: ${this.#t.GetText(t)}`),t.c&&t.c.length&&t.c.forEach(o=>this.debugPrintParseTree(o,r+1))}isValidRuleName(t){return t.indexOf("TerminalNode")===0||!!this.#t[t]}evaluate(t,r){return this.#t.evaluate(t,r)}#t=class{static#s=0;static evaluate(t,r,o){try{if(!this[t.r])throw new Error(t.r+" is not a parser rule function.");return this[t.r](t,r,o)}catch(s){this.log("Error "+t.r+\' at "\'+this.GetText(t)+\'": \'+s)}}static#i=new RegExp(`(?:^[\'"])|(?:[\'"]$)`,"g");static#o=new RegExp("\\\\s+","g");static#a=this;static PassOn(t,r){return this.evaluate(t.c[0],r)}static NoOp(t){this.log(`Unimplemented rule: ${t.r} at "${this.GetText(t.t)}".`)}static ExpStmt=this.PassOn;static ExpSequence=this.PassOn;static LitExp=this.PassOn;static Literal=this.PassOn;static ArrayLitExp=this.PassOn;static ArrayLit=this.PassOn;static ArrowFuncBody=this.PassOn;static ObjectLitExp=this.PassOn;static IdName=this.PassOn;static MultOperator=this.NoOp;static AdditionOperator=this.NoOp;static RelationalOperator=this.NoOp;static EqualityOperator=this.NoOp;static ReservedWord=this.NoOp;static AssignExp=this.NoOp;static VarModifier=this.NoOp;static FormalParameterList=this.NoOp;static FormalParameterArg=this.NoOp;static PropAssign=this.NoOp;static Exp=this.NoOp;static Assignable=this.NoOp;static AnonFunc=this.NoOp;static ArrowFuncParameters=this.NoOp;static PropName(t){return t.c?t.c[0].t:this.#r(t.t)}static ObjectLit(t,r){let o={};return t.c.forEach(s=>this.PropExpAssign(s,r,o)),o}static PropExpAssign(t,r,o){let s=this.evaluate(t.c[0],r),u=this.evaluate(t.c[1],r);o[s]=u}static#r(t){return t?.replaceAll(this.#i,"")}static StrLit(t){return this.#r(t?.t)}static NumLit(t){return Number.parseFloat(t?.t)}static IntLit(t){return Number.parseInt(t?.t)}static BoolLit(t){return t.t&&t.t=="true"}static NullLit(){return null}static IdExp(t,r){return this.evaluate(t.c[0],r)}static Id(t,r){return r[t.t]}static FuncExp(t,r){return this.evaluate(t.c[0],r)}static ArrowFunc(t,r){let o=t.c[0]?.c?.map(u=>this.#e(u)).flat(),s=this;return function(...u){o.forEach((f,p)=>{r[f]=u[p]});let h=s.evaluate(t.c[1],r);return o.forEach(f=>{delete r[f]}),h}}static AnonFuncDecl(t,r){let o=t.c[0]?.c?.map(u=>this.#e(u)).flat(),s=this;return function(...u){o.forEach((f,p)=>{r[f]=u[p]});let h=s.evaluate(t.c[1],r);return o.forEach(f=>{delete r[f]}),h}}static#e(t,r=null){return r=r??[],t.c?.forEach(o=>this.#e(o,r)),t.t&&r.push(t.t),r}static#c(t,r=0){this.log(`${"  ".repeat(r)}${t.r}: ${this.GetText(t)}`)}static GetText(t){return this.#e(t).join(" ")}static ElementList(t,r){return t.c.map(o=>this.evaluate(o,r))}static ArrayElem=this.PassOn;static ArgsExp(t,r){let o=t.c[0],s=this.evaluate(t.c[1],r),u=this.evaluate(o,r,s);return typeof u=="function"&&(u=u.apply(o._this??null,s)),delete o._this,u}static Args(t,r){return t.c.map(o=>this.evaluate(o,r))}static Arg(t,r){return this.evaluate(t.c[0],r)}static MemberDotExp(t,r,o){return this.#n(t,r,o,!0)}static MemberIndexExp(t,r,o){return this.#n(t,r,o)}static#n(t,r,o,s){let u=this.evaluate(t.c[0],r),h=s?t.c[1].t:this.evaluate(t.c[1],r);return this["_x_"+h]?this["_x_"+h](u,...o??[]):(t._this=u,u[h])}static ErrorNodeImpl(t){this.log(`Error parsing ${t.r} at ${t.t} (unexpected token?)`)}static AdditiveExp(t,r){switch(t.c[1].t){case"+":return this.evaluate(t.c[0],r)+this.evaluate(t.c[2],r);case"-":return this.evaluate(t.c[0],r)-this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static MultiplicativeExp(t,r){switch(t.c[1].t){case"*":return this.evaluate(t.c[0],r)*this.evaluate(t.c[2],r);case"/":return this.evaluate(t.c[0],r)/this.evaluate(t.c[2],r);case"%":return this.evaluate(t.c[0],r)%this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static RelationalExp(t,r){switch(t.c[1].t){case">":return this.evaluate(t.c[0],r)>this.evaluate(t.c[2],r);case"<":return this.evaluate(t.c[0],r)<this.evaluate(t.c[2],r);case">=":return this.evaluate(t.c[0],r)>=this.evaluate(t.c[2],r);case"<=":return this.evaluate(t.c[0],r)<=this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static EqualityExp(t,r){switch(t.c[1].t){case"==":return this.evaluate(t.c[0],r)==this.evaluate(t.c[2],r);case"!=":return this.evaluate(t.c[0],r)!=this.evaluate(t.c[2],r);case"===":return this.evaluate(t.c[0],r)===this.evaluate(t.c[2],r);case"!==":return this.evaluate(t.c[0],r)!==this.evaluate(t.c[2],r);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static TernaryExp(t,r){return this.evaluate(t.c[0],r)?this.evaluate(t.c[1],r):this.evaluate(t.c[2],r)}static CoalesceExp(t,r){return this.evaluate(t.c[0],r)??this.evaluate(t.c[1],r)}static InstanceofExp(t,r){return this.evaluate(t.c[0],r)instanceof this.evaluate(t.c[1],r)}static LogicalAndExp(t,r){return this.evaluate(t.c[0],r)&&this.evaluate(t.c[1],r)}static LogicalOrExp(t,r){return this.evaluate(t.c[0],r)||this.evaluate(t.c[1],r)}static UnaryPlusExp(t,r){return+this.evaluate(t.c[0],r)}static UnaryMinusExp(t,r){return-this.evaluate(t.c[0],r)}static BitNotExp(t,r){return~this.evaluate(t.c[0],r)}static NotExp(t,r){return!this.evaluate(t.c[0],r)}static ParenthesizedExp(t,r){return this.evaluate(t.c[0],r)}static Eos(){return null}static _x_query(t,r){return Array.from(t?.querySelectorAll(r)??[])}static _x_where(t,r){return t?.filter(r)}static _x_select(t,...r){let o=r.length;if(!r||o===0)throw new Error("Method \'select\' expects on or more arrow functions.");return t?.map((s,u)=>{if(o>1){let h=[];for(let f=0;f<o-1;f++)h[f]=r[f](s,...f==0?[u]:h);return r[o-1](s,...h)}else return r[0](s,u)})}static _x_width(t){return t?.offsetWidth}static _x_height(t){return t?.offsetHeight}static _x_text(t){return t?.textContent?.trim()?.replaceAll(this.#o," ")}static _x_parent(t){return t?.parentNode}static _x_matchRegExp(t,r,o){return t.match(new RegExp(r,o))}}};function Ot(e){if(e.checkVisibility&&!e.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}))return!1;let t=e.ownerDocument,r=t.defaultView,o=r?.getComputedStyle(e);if(o&&(o.opacity==="0"||o.visibility==="hidden"))return!1;let s=e.getBoundingClientRect();if(!s||s.width<=0||s.height<=0)return!1;let{top:u,left:h,right:f,bottom:p}=s;if(f<0||p<0)return!1;let m=r?.innerWidth||t.documentElement.clientWidth,g=r?.innerHeight||t.documentElement.clientHeight;if(u>g||h>m)return!1;let w=e.parentNode;if(w&&w instanceof Element&&getComputedStyle(w).overflow==="hidden"){let v=w.getBoundingClientRect();if(p<v.top||u>v.bottom||f<v.left||h>v.right)return!1}return!0}function le(e,t){return r=>new Promise(o=>{let s=e+"-response",u=Math.random(),h=p=>{let{type:m,payload:g,nonce:w}=p.data??{};m!==s||w!==u||(o(g),f())},f=()=>{window.removeEventListener("message",h)};window.addEventListener("message",h),s==="getFrameId-response"?r.postMessage(new T("getFrameId",u),"*"):window.postMessage({type:e,nonce:u,payload:r},"*"),t&&setTimeout(o,t)})}var de,fe,pe,J,_t=new Set,bt=new Set,Ft=new Set,at=!1,Ut=[],me=[],Nt,M,D,gt,nt,C=typeof window>"u"?{location:{hostname:""}}:window,I=C.top===C.self,cr=(Math.random()+1).toString(36).substring(2),ur=2e3,ge=7e3,lr=5*ge,hr=2e3;function st(e,t,...r){let o=setTimeout(e,t,...r);return _t.add(o),o}function ot(e,t,...r){let o=setInterval(e,t,...r);return bt.add(o),o}function Lt(e,t){let r=P(e,t);return r.isIdleCallback?Ft.add(r.id):_t.add(r.id),r}var dr={"hulu.com":[ne],"netflix.com":[oe],"twitter.com":[Rt],"x.com":[Rt],"youtube.com":[ue]};at||(typeof F<"u"&&(J=F()),typeof pt<"u"&&(pt()||ye())&&Yt());function ye(){return dr[J]}function fr(){if(!I||!nt)return;if(pt()){Pt();let s=new Set,u=()=>{let h=Array.from(C.frames).concat(Array.from(document.querySelectorAll("frame,iframe")).map(f=>E(f.contentWindow)).filter(f=>f));for(let f=0;f<h.length;f++)try{let p=h[f];if(!p||s.has(p))continue;W(p,new T(Ct,et-(Date.now()-$))),s.add(p)}catch(p){S(p)}};u(),ot(u,5e3)}let e=Date.now(),t=ye(),r=function(s){e=Date.now(),Lt(async()=>{for(let u=0,h=t?.length;t&&u<h;u++)await t[u].call();I&&(t||s)&&B()},V-500)},o=ot(r,V);r(!0),ot(()=>{Date.now()-e>V*5&&(clearInterval(o),bt.delete(o),o=ot(r,V),r(!0))},V)}function we(){I&&(J=F(),_t=new Set,bt=new Set,Ft=new Set,ee(),B())}function pr(){if(!I)return;let e=D.AdRules.filter(o=>!o.Hostnames||o.Hostnames.startsWith("^")&&!o.Hostnames.includes(J)),t=D.AdRules.filter(o=>o.Hostnames&&!o.Hostnames.startsWith("^")&&o.Hostnames.includes(J)),r=e.concat(t);st(()=>{Pr();let o=ot(()=>{he(r)},ge);he(r),st(()=>{t.length?r=t:clearInterval(o)},lr)},ur)}var mr=new Set(["facebook.com","hulu.com","netflix.com","twitter.com","x.com"]);function Ae(){fr(),mr.has(J)||pr(),st(wr,et)}function gr(e){if(!I)return;let t=C.location.href.split("#")[0];setInterval(()=>{let r=C.location.href.split("#")[0];r!==t&&(t=r,e())},1e3)}function _e(){_t.forEach(e=>clearTimeout(e)),bt.forEach(e=>clearInterval(e)),Ft.forEach(e=>cancelIdleCallback(e))}function yr(){_e(),we(),Ae()}function wr(){It(),_e()}function Ar(e){at?ut(e,M).then(()=>window.dispatchEvent(new CustomEvent("displayAdFound",{detail:e}))):te(e)}async function _r(e){try{let t=T.fromObject(e.data);if(!t)return;let r=t.data;switch(t.operation){case Ct:r>0&&(Pt(),st(It,r));break;case Et:N(r[0],r[1]);break;case"extractDisplayAd":I||await At(document.documentElement,r);break;case"displayAdFound":I&&Ar(r);break;case"getFrameId":W(e.source,{type:"getFrameId-response",payload:cr,nonce:r});break}}catch(t){S(t);return}}function br(){function e(){C.addEventListener("message",_r,!0)}e();let t=setInterval(e,200);setTimeout(clearInterval,1e4,t)}function xr(e){fe=e.getInstallId,at=e.isRuleEditor,Nt=e.sendData,M=e.fetchHttpResponse,de=e.getExternalConfiguration?t=>e.getExternalConfiguration(t):null,Jt(e.pm_log)}function be(e){pe=le("getFrameId",1e3),M=e.fetchHttpResponse,br(),I&&(xr(e),fe().then(t=>gt=t).then(t=>de()).then(t=>D=t||{EnabledPct:0}).then(t=>{nt=Array.from(gt).map(r=>r.charCodeAt(0)).reduce((r,o)=>r+o,0)%100<D.EnabledPct,nt&&(we(),Ae(),gr(yr))}))}async function vr(e,t){at||(I||(t.dedupeKey=await pe(e.ownerDocument.defaultView)),t.dedupeKey??=`${t.width}x${t.height} @ ${t.x},${t.y}`),W(top,new T("displayAdFound",t))}async function Sr(e,t){if(e){let r=U(e);(t.isFromIFrame||e.nodeName!=="IFRAME")&&(t.x+=r.left,t.y+=r.top),t.sourceUrls.push(...await Q(e,t.depth)),t.text+=mt(e)+" ";let o=Array.from(e.querySelectorAll("canvas, svg"));o.length&&o.forEach(s=>Kt(s,t))}}async function At(e,t){if(await Sr(e,t),e.nodeName==="IFRAME"){t.depth++,t.outerHtml=e.outerHTML;try{await At(e.contentWindow.document.documentElement,t)}catch{W(e.contentWindow,new T("extractDisplayAd",t));try{var r=e.contentWindow.frames;for(let s=0,u=r.length;s<u;s++)try{W(r[s],new T("extractDisplayAd",t))}catch(h){S(h)}}catch(s){S(s)}}}else{e.nodeName==="HTML"&&(t.outerHtml+=`<!-- IFRAME Content -->${e.outerHTML}`);let o;if(t.isFromIFrame){if(e.scrollWidth<=t.width-5||e.scrollHeight<=t.height-5)return;o=Array.from(e.querySelectorAll("iframe")).filter(s=>(s.scrollWidth>=t.width||s.scrollHeight>=t.height)&&s.scrollWidth>=_.minWidth&&s.scrollHeight>=_.minHeight&&Ot(s))}else o=Array.from(e.querySelectorAll("iframe")).filter(s=>Ot(s)).sort((s,u)=>s.scrollWidth*s.scrollHeight-u.scrollWidth*u.scrollHeight).slice(0,1);o?.length?await Promise.allSettled(o.map(s=>{let u={...t,width:Math.min(t.width,s.offsetWidth),height:Math.min(t.height,s.offsetHeight),sourceUrls:t.sourceUrls.map(h=>h)};return At(s,u)})):(t.text=t.textOverride??t.text.trim(),vr(e,t))}}function Er(e,t,r){try{let o=new it,s=o.evaluate(t,{doc:document});Ut.forEach(u=>s.push(...o.evaluate(t,{doc:u}))),me.forEach(u=>{u.doc.defaultView&&s.push(...o.evaluate(t,{doc:u.doc}).map(h=>xe(h)?(h.x??=u.x,h.y??=u.y,h.depth??=u.depth,h):{element:h,x:u.x,y:u.y,depth:u.depth}))}),s&&s.forEach(async u=>await Ir(e,u,r))}catch{}}function Cr(e){e.forEach(t=>Er(t.Id,t.ParseTree))}async function Ir(e,t,r){let o={};xe(t)&&(o=t,t=t.element,delete o.element);let s=new _({width:t.offsetWidth,height:t.offsetHeight,adRuleId:e});s.isFromIFrame=t.nodeName==="IFRAME",at&&(s.adRuleName=r,s.tabUrl=location.href),Object.assign(s,o),await At(t,s)}function he(e){I&&Lt(t=>{t.didTimeout||(Cr(e),st(B,hr))},4e3)}function Tr(e){let t=Date.now(),r=null;for(;r=e[0];){for(var o=null;o=r.nextNode();)if(o.shadowRoot&&(e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)),Ut.push(o.shadowRoot)),Date.now()-t>50)return!1;e.shift()}return!0}function Nr(){Ut=[];let e=[];try{e.push(document.createTreeWalker(document.body,NodeFilter.SHOW_ELEMENT))}catch{}let t=!1,r=0;for(;!t&&r++<100;)Lt(()=>t||=Tr(e))}function Rr(){me=Array.from(document.querySelectorAll("iframe")).filter(e=>e.src&&new URL(e.src).origin==top.location.origin&&e.offsetWidth>=_.minWidth&&e.offsetHeight>=_.minHeight).map(e=>{try{let t=e.contentWindow,r=U(e),o=r.left,s=r.top,u=1;for(;t?.parent&&t.parent!==top;)t=t.parent,r=U(t.frameElement),o+=r.left,s+=r.top,u++;return{doc:e.contentDocument,x:o,y:s,depth:u}}catch{return null}}).filter(e=>e)}function Pr(){Nr(),Rr()}function xe(e){return!(e instanceof Node)&&e.element}function ve(...e){console.log("[injected-script]",...Array.isArray(e)?e:[e])}function xt(e,t){return r=>new Promise(o=>{let s=t+"-response",u=Math.random(),h=p=>{let{type:m,payload:g,nonce:w}=p.data??{};m!==s||w!==u||(e?.("Got response:",{name:t,payload:r,response:g}),o(g),f())},f=()=>{window.removeEventListener("message",h)};window.addEventListener("message",h),e?.("Sending message:",{name:t,payload:r}),window.postMessage({type:t,payload:r,nonce:u},"*")})}function Se(e,t){return r=>{e?.("Sending message:",{type:t,payload:r}),window.postMessage({type:t,payload:r},"*")}}var Ee="ads#INIT",Ce="ads#SEND_DATA",Ie="ads#GET_INSTALL_ID",Te="ads#GET_EXTERNAL_CONFIG",Ne="ads#FETCH_HTTP_RESPONSE";function Re(e){let t=e.enableLogs?ve:void 0;t?.("Recieved init event",{config:e});let r=Se(t,Ce),o=xt(t,Ie),s=xt(t,Te),u=xt(t,Ne);be({getInstallId:o,fetchHttpResponse:u,sendData:r,pm_log:t,getExternalConfiguration:s})}function Mr(){window.addEventListener("message",({data:e})=>{e?.type===Ee&&Re(e.payload)})}Mr();})();\n';var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Po(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jc={exports:{}};(function(t,e){(function(n,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Qc,function(n){var i,a;if(!((a=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&a.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const u="The message port closed before a response was received.",d=y=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(M,N=void 0){super(N),this.createItem=M}get(M){return this.has(M)||this.set(M,this.createItem(M)),super.get(M)}}const v=C=>C&&typeof C=="object"&&typeof C.then=="function",m=(C,M)=>(...N)=>{y.runtime.lastError?C.reject(new Error(y.runtime.lastError.message)):M.singleCallbackArg||N.length<=1&&M.singleCallbackArg!==!1?C.resolve(N[0]):C.resolve(N)},g=C=>C==1?"argument":"arguments",A=(C,M)=>function(N,...J){if(J.length<M.minArgs)throw new Error(`Expected at least ${M.minArgs} ${g(M.minArgs)} for ${C}(), got ${J.length}`);if(J.length>M.maxArgs)throw new Error(`Expected at most ${M.maxArgs} ${g(M.maxArgs)} for ${C}(), got ${J.length}`);return new Promise((fe,L)=>{if(M.fallbackToNoCallback)try{N[C](...J,m({resolve:fe,reject:L},M))}catch(z){console.warn(`${C} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,z),N[C](...J),M.fallbackToNoCallback=!1,M.noCallback=!0,fe()}else M.noCallback?(N[C](...J),fe()):N[C](...J,m({resolve:fe,reject:L},M))})},o=(C,M,N)=>new Proxy(M,{apply(J,fe,L){return N.call(fe,C,...L)}});let S=Function.call.bind(Object.prototype.hasOwnProperty);const P=(C,M={},N={})=>{let J=Object.create(null),fe={has(z,T){return T in C||T in J},get(z,T,q){if(T in J)return J[T];if(!(T in C))return;let K=C[T];if(typeof K=="function")if(typeof M[T]=="function")K=o(C,C[T],M[T]);else if(S(N,T)){let le=A(T,N[T]);K=o(C,C[T],le)}else K=K.bind(C);else if(typeof K=="object"&&K!==null&&(S(M,T)||S(N,T)))K=P(K,M[T],N[T]);else if(S(N,"*"))K=P(K,M[T],N["*"]);else return Object.defineProperty(J,T,{configurable:!0,enumerable:!0,get(){return C[T]},set(le){C[T]=le}}),K;return J[T]=K,K},set(z,T,q,K){return T in J?J[T]=q:C[T]=q,!0},defineProperty(z,T,q){return Reflect.defineProperty(J,T,q)},deleteProperty(z,T){return Reflect.deleteProperty(J,T)}},L=Object.create(C);return new Proxy(L,fe)},R=C=>({addListener(M,N,...J){M.addListener(C.get(N),...J)},hasListener(M,N){return M.hasListener(C.get(N))},removeListener(M,N){M.removeListener(C.get(N))}}),$=new p(C=>typeof C!="function"?C:function(M){const N=P(M,{},{getContent:{minArgs:0,maxArgs:0}});C(N)}),O=new p(C=>typeof C!="function"?C:function(M,N,J){let fe=!1,L,z=new Promise(le=>{L=function(se){fe=!0,le(se)}}),T;try{T=C(M,N,L)}catch(le){T=Promise.reject(le)}const q=T!==!0&&v(T);return T!==!0&&!q&&!fe?!1:((le=>{le.then(se=>{J(se)},se=>{let pe;se&&(se instanceof Error||typeof se.message=="string")?pe=se.message:pe="An unexpected error occurred",J({__mozWebExtensionPolyfillReject__:!0,message:pe})}).catch(se=>{console.error("Failed to send onMessage rejected reply",se)})})(q?T:z),!0)}),D=({reject:C,resolve:M},N)=>{y.runtime.lastError?y.runtime.lastError.message===u?M():C(new Error(y.runtime.lastError.message)):N&&N.__mozWebExtensionPolyfillReject__?C(new Error(N.message)):M(N)},G=(C,M,N,...J)=>{if(J.length<M.minArgs)throw new Error(`Expected at least ${M.minArgs} ${g(M.minArgs)} for ${C}(), got ${J.length}`);if(J.length>M.maxArgs)throw new Error(`Expected at most ${M.maxArgs} ${g(M.maxArgs)} for ${C}(), got ${J.length}`);return new Promise((fe,L)=>{const z=D.bind(null,{resolve:fe,reject:L});J.push(z),N.sendMessage(...J)})},j={devtools:{network:{onRequestFinished:R($)}},runtime:{onMessage:R(O),onMessageExternal:R(O),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Z={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":Z},services:{"*":Z},websites:{"*":Z}},P(y,j,h)};n.exports=d(chrome)}else n.exports=globalThis.browser})})(Jc);var ym=Jc.exports;const yi=Po(ym);var Do={exports:{}};Do.exports,function(t){var e=function(){var n=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={};function d(h,p){if(!u[h]){u[h]={};for(var v=0;v<h.length;v++)u[h][h.charAt(v)]=v}return u[h][p]}var y={compressToBase64:function(h){if(h==null)return"";var p=y._compress(h,6,function(v){return i.charAt(v)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:y._decompress(h.length,32,function(p){return d(i,h.charAt(p))})},compressToUTF16:function(h){return h==null?"":y._compress(h,15,function(p){return n(p+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:y._decompress(h.length,16384,function(p){return h.charCodeAt(p)-32})},compressToUint8Array:function(h){for(var p=y.compress(h),v=new Uint8Array(p.length*2),m=0,g=p.length;m<g;m++){var A=p.charCodeAt(m);v[m*2]=A>>>8,v[m*2+1]=A%256}return v},decompressFromUint8Array:function(h){if(h==null)return y.decompress(h);for(var p=new Array(h.length/2),v=0,m=p.length;v<m;v++)p[v]=h[v*2]*256+h[v*2+1];var g=[];return p.forEach(function(A){g.push(n(A))}),y.decompress(g.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":y._compress(h,6,function(p){return a.charAt(p)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),y._decompress(h.length,32,function(p){return d(a,h.charAt(p))}))},compress:function(h){return y._compress(h,16,function(p){return n(p)})},_compress:function(h,p,v){if(h==null)return"";var m,g,A={},o={},S="",P="",R="",$=2,O=3,D=2,G=[],j=0,Z=0,C;for(C=0;C<h.length;C+=1)if(S=h.charAt(C),Object.prototype.hasOwnProperty.call(A,S)||(A[S]=O++,o[S]=!0),P=R+S,Object.prototype.hasOwnProperty.call(A,P))R=P;else{if(Object.prototype.hasOwnProperty.call(o,R)){if(R.charCodeAt(0)<256){for(m=0;m<D;m++)j=j<<1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++;for(g=R.charCodeAt(0),m=0;m<8;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1}else{for(g=1,m=0;m<D;m++)j=j<<1|g,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=0;for(g=R.charCodeAt(0),m=0;m<16;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1}$--,$==0&&($=Math.pow(2,D),D++),delete o[R]}else for(g=A[R],m=0;m<D;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1;$--,$==0&&($=Math.pow(2,D),D++),A[P]=O++,R=String(S)}if(R!==""){if(Object.prototype.hasOwnProperty.call(o,R)){if(R.charCodeAt(0)<256){for(m=0;m<D;m++)j=j<<1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++;for(g=R.charCodeAt(0),m=0;m<8;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1}else{for(g=1,m=0;m<D;m++)j=j<<1|g,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=0;for(g=R.charCodeAt(0),m=0;m<16;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1}$--,$==0&&($=Math.pow(2,D),D++),delete o[R]}else for(g=A[R],m=0;m<D;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1;$--,$==0&&($=Math.pow(2,D),D++)}for(g=2,m=0;m<D;m++)j=j<<1|g&1,Z==p-1?(Z=0,G.push(v(j)),j=0):Z++,g=g>>1;for(;;)if(j=j<<1,Z==p-1){G.push(v(j));break}else Z++;return G.join("")},decompress:function(h){return h==null?"":h==""?null:y._decompress(h.length,32768,function(p){return h.charCodeAt(p)})},_decompress:function(h,p,v){var m=[],g=4,A=4,o=3,S="",P=[],R,$,O,D,G,j,Z,C={val:v(0),position:p,index:1};for(R=0;R<3;R+=1)m[R]=R;for(O=0,G=Math.pow(2,2),j=1;j!=G;)D=C.val&C.position,C.position>>=1,C.position==0&&(C.position=p,C.val=v(C.index++)),O|=(D>0?1:0)*j,j<<=1;switch(O){case 0:for(O=0,G=Math.pow(2,8),j=1;j!=G;)D=C.val&C.position,C.position>>=1,C.position==0&&(C.position=p,C.val=v(C.index++)),O|=(D>0?1:0)*j,j<<=1;Z=n(O);break;case 1:for(O=0,G=Math.pow(2,16),j=1;j!=G;)D=C.val&C.position,C.position>>=1,C.position==0&&(C.position=p,C.val=v(C.index++)),O|=(D>0?1:0)*j,j<<=1;Z=n(O);break;case 2:return""}for(m[3]=Z,$=Z,P.push(Z);;){if(C.index>h)return"";for(O=0,G=Math.pow(2,o),j=1;j!=G;)D=C.val&C.position,C.position>>=1,C.position==0&&(C.position=p,C.val=v(C.index++)),O|=(D>0?1:0)*j,j<<=1;switch(Z=O){case 0:for(O=0,G=Math.pow(2,8),j=1;j!=G;)D=C.val&C.position,C.position>>=1,C.position==0&&(C.position=p,C.val=v(C.index++)),O|=(D>0?1:0)*j,j<<=1;m[A++]=n(O),Z=A-1,g--;break;case 1:for(O=0,G=Math.pow(2,16),j=1;j!=G;)D=C.val&C.position,C.position>>=1,C.position==0&&(C.position=p,C.val=v(C.index++)),O|=(D>0?1:0)*j,j<<=1;m[A++]=n(O),Z=A-1,g--;break;case 2:return P.join("")}if(g==0&&(g=Math.pow(2,o),o++),m[Z])S=m[Z];else if(Z===A)S=$+$.charAt(0);else return null;P.push(S),m[A++]=$+S.charAt(0),g--,$=S,g==0&&(g=Math.pow(2,o),o++)}}};return y}();t!=null&&(t.exports=e)}(Do);var vm=Do.exports;const No=Po(vm);function bm(t){const e=No.decompressFromUint8Array(new Uint8Array(t));if(e==null)throw Error("Failed to convert string to ArrayBuffer");return e}async function eu(t){if(!t.byteLength)return"";const e=new Blob([t]),n=await new Promise((i,a)=>{const u=new FileReader;u.onload=()=>{typeof u.result=="string"&&i(u.result),a(Error("Failed to read buffer as string, got "+typeof u.result))},u.onerror=()=>a(u.error),u.onabort=()=>a("FileReader aborted"),u.readAsDataURL(e)});return(n==null?void 0:n.split(",").pop())||""}function wm(t){if(!t)return Promise.resolve(new ArrayBuffer(0));try{const e="data:application/octet-binary;base64,"+t;return fetch(e).then(n=>n.arrayBuffer(),()=>new ArrayBuffer(0))}catch{return Promise.resolve(new ArrayBuffer(0))}}var qr=(t=>(t.UPLOAD_CRAWL="ads#CRAWL",t.GET_PM_EXTERNAL_CONFIG="ads#GET_EXTERNAL_CONFIGURATION",t.FETCH_HTTP_RESPONSE="ads#FETCH_HTTP_RESPONSE",t))(qr||{});function sa(t){try{return JSON.parse(t)}catch{return}}async function Am(t){return(await yi.storage.local.get(t))[t]}async function tu(t,e){const n={};n[t]=e,await yi.storage.local.set(n)}async function nu(t,e,n){let i=await(n?null:Am(t));return i==null&&(i=await e(),await tu(t,i)),i}function ru(t){return t.split(".").slice(t.endsWith(".uk")||t.endsWith(".jp")?-3:-2).join(".")}async function iu(t){const e=await nu("configTs",Date.now),n=Date.now()-e>18e5;return nu("config",async()=>{const i=await t({type:qr.GET_PM_EXTERNAL_CONFIG,payload:void 0}),a=sa(i);if(a!=null)return a.TimeOffset=a.Now&&Date.now()-a.Now||0,xm(a),Sm(a),_m(a),tu("configTs",Date.now()),a},n)}function xm(t){var e;(e=t.AdRules)==null||e.filter(n=>{const i=No.decompressFromUTF16(n.ParseTreeString||"")??"";return n.ParseTree=sa(i),n.ParseTree==null?!1:(delete n.ParseTreeString,!0)})}function Sm(t){var e;t.ParsedSiteConfigs=(e=t.SiteConfigs)==null?void 0:e.reduce((n,i)=>(n[i.d]=i.r,n),{}),delete t.SiteConfigs}function _m(t){var e;t.ParsedUrlBlackList=(e=t.UrlBlackList)==null?void 0:e.filter(n=>n.BlockAllAds).reduce((n,i)=>{var a;return(n[a=ru(i.Hostname)]??(n[a]=[])).push(i.UrlRegex),n},{}),delete t.UrlBlackList}function su(){return window.self===window.top}class Tm{constructor(e){this.config=e}async inject(e){return new Promise((n,i)=>{const a=this.defineOnCspError(i),u=()=>{var d,y;try{document.addEventListener("securitypolicyviolation",a);const h=document.createElement(e),p=()=>{var g,A;this.config.keepInDom||h.remove(),(A=(g=this.config).onInjected)==null||A.call(g)},v=this.getManifestVersion();v===3?h.onload=p:setTimeout(p),this.setSrc(h,v),(d=this.config.logger)==null||d.log(h);const m=(y=document.documentElement)==null?void 0:y.firstElementChild;m==null||m.insertBefore(h,m.firstChild),document.removeEventListener("securitypolicyviolation",a),n()}catch(h){i(h)}finally{document.removeEventListener("DOMContentLoaded",u)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u()})}defineOnCspError(e){return n=>{e==null||e(Error("Blocked by CSP: "+JSON.stringify({host:window.location.hostname,blockedUri:n.blockedURI,violatedDirective:n.violatedDirective,originalPolicy:n.originalPolicy})))}}getManifestVersion(){return 3}setSrc(e,n){if(n===3){if(!this.config.mv3Path)throw Error("mv3Path config must be passed for Manifest V3 extensions");e.src=yi.runtime.getURL(this.config.mv3Path)}else if(n===2){if(!this.config.mv2Content)throw Error("mv2Content config must be passed for Manifest V2 extensions");e.innerHTML=this.config.mv2Content}else throw Error(`Unsupported manifest version ${n}`)}}class Em{constructor(e){this.config=e}sendMessage(e,n,i,a){const u={type:e,payload:n,nonce:a};window.postMessage(u,"*",i)}onMessage(e,n){window.addEventListener("message",async i=>{var a,u;const{type:d,payload:y,nonce:h}=i.data??{};if(d!==e)return;(a=this.config.logger)==null||a.debug("[ad-finder-custom-event] Recieved message:",{type:d,payload:y});const p=await n(y);if(p===void 0)return;const{response:v,transferables:m}=p;(u=this.config.logger)==null||u.debug("[ad-finder-custom-event] Sending response:",{name:d,payload:y,response:v}),this.sendMessage(d+this.config.responseSuffix,v,m,h)})}}const Cm="ads#INIT",km="ads#SEND_DATA",Om="ads#GET_INSTALL_ID",Pm="ads#GET_EXTERNAL_CONFIG",Dm="ads#FETCH_HTTP_RESPONSE",Io=class qa{constructor(e){mi(this,"injector"),mi(this,"messenger"),this.config=e,this.injector=new Tm({logger:e.logger,keepInDom:e.keepPathmaticsInDom,mv2Content:mm,mv3Path:e.mv3PathmaticsPath,onInjected:this.initPathmaticsScript.bind(this)}),this.messenger=new Em({logger:e.logger,responseSuffix:qa.MESSENGER_SUFFIX})}async isSupportedSite(){var e,n;const i=ru(location.hostname);if(!su())return!(location.hostname===qa.GOOGLE_AUTH_HOSTNAME||qa.SUBFRAME_DOMAIN_BLOCKLIST.has(i));const a=await iu(this.config.sendMessageToBackground);return a!=null?!((n=(e=a.ParsedUrlBlackList)==null?void 0:e[i])!=null&&n.some(u=>new RegExp(u).test(location.href))):!1}async start(){var e,n,i,a,u,d;if(!document.documentElement){(e=this.config.logger)==null||e.log("Page is blank, stopping pathmatics",window.location.hostname);return}const y=await this.isSupportedSite();if((n=this.config.logger)==null||n.log("Is supported site?",y),!y){(i=this.config.logger)==null||i.log("Not supported site, stopping pathmatics",window.location.hostname);return}try{(a=this.config.logger)==null||a.log("Starting Pathmatics ad-finder...",{url:window.location.href}),this.setupMessageListeners(),await this.injector.inject("script"),(u=this.config.logger)==null||u.log("Pathmatics ad-finder injected!")}catch(h){(d=this.config.logger)==null||d.error("Failed to start Pathmatics ad-finder",h)}}setupMessageListeners(){if(yi.storage==null)throw Error("The storage permission is required for pathmatics' ad-finder");this.messenger.onMessage(Dm,async e=>{const n=await this.config.sendMessageToBackground({type:qr.FETCH_HTTP_RESPONSE,payload:e}),i=await wm(n);return{response:i,transferables:[i]}}),su()&&(this.messenger.onMessage(Om,async()=>({response:await this.config.getInstallId()})),this.messenger.onMessage(km,async e=>{var n,i,a,u,d;const y=sa(e);if(y==null)return;const h=y.crawlId;let p=y.zys??[];if(typeof p=="string"&&(p=sa(p)),p==null)return;const v=Date.now();for(const m of p){const g={id:`${h}-${m.hash}`,type:"pathmatics",timestamp:v,details:m};(n=this.config.logger)==null||n.log("Ad detected",g);try{await((a=(i=this.config).onAdDetected)==null?void 0:a.call(i,g))}catch(A){(u=this.config.logger)==null||u.error("onAdDetected failed",{err:A})}}await this.config.sendMessageToBackground({type:qr.UPLOAD_CRAWL,payload:y}).catch((d=this.config.logger)==null?void 0:d.error)}),this.messenger.onMessage(Pm,async()=>({response:await iu(this.config.sendMessageToBackground)})))}initPathmaticsScript(){var e;(e=this.config.logger)==null||e.log("Initializing script");const n={enableLogs:this.config.enablePathmaticsLogs??!1};this.messenger.sendMessage(Cm,n)}};mi(Io,"MESSENGER_SUFFIX","-response"),mi(Io,"SUBFRAME_DOMAIN_BLOCKLIST",new Set(["google.com","okta.com","amazon.com"])),mi(Io,"GOOGLE_AUTH_HOSTNAME","accounts.youtube.com");function Nm(t){return{...t,logger:t.logger===void 0?console:t.logger??void 0}}var au={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(Qc,function(){var n=function(u,d){if(d=d||{},typeof u!="function")throw new a("fetch must be a function");if(typeof d!="object")throw new a("defaults must be an object");if(d.retries!==void 0&&!i(d.retries))throw new a("retries must be a positive integer");if(d.retryDelay!==void 0&&!i(d.retryDelay)&&typeof d.retryDelay!="function")throw new a("retryDelay must be a positive integer or a function returning a positive integer");if(d.retryOn!==void 0&&!Array.isArray(d.retryOn)&&typeof d.retryOn!="function")throw new a("retryOn property expects an array or function");var y={retries:3,retryDelay:1e3,retryOn:[]};return d=Object.assign(y,d),function(h,p){var v=d.retries,m=d.retryDelay,g=d.retryOn;if(p&&p.retries!==void 0)if(i(p.retries))v=p.retries;else throw new a("retries must be a positive integer");if(p&&p.retryDelay!==void 0)if(i(p.retryDelay)||typeof p.retryDelay=="function")m=p.retryDelay;else throw new a("retryDelay must be a positive integer or a function returning a positive integer");if(p&&p.retryOn)if(Array.isArray(p.retryOn)||typeof p.retryOn=="function")g=p.retryOn;else throw new a("retryOn property expects an array or function");return new Promise(function(A,o){var S=function(R){var $=typeof Request<"u"&&h instanceof Request?h.clone():h;u($,p).then(function(O){if(Array.isArray(g)&&g.indexOf(O.status)===-1)A(O);else if(typeof g=="function")try{return Promise.resolve(g(R,null,O)).then(function(D){D?P(R,null,O):A(O)}).catch(o)}catch(D){o(D)}else R<v?P(R,null,O):A(O)}).catch(function(O){if(typeof g=="function")try{Promise.resolve(g(R,O,null)).then(function(D){D?P(R,O,null):o(O)}).catch(function(D){o(D)})}catch(D){o(D)}else R<v?P(R,O,null):o(O)})};function P(R,$,O){var D=typeof m=="function"?m(R,$,O):m;setTimeout(function(){S(++R)},D)}S(0)})}};function i(u){return Number.isInteger(u)&&u>=0}function a(u){this.name="ArgumentError",this.message=u}return n})})(au);var Im=au.exports;const Mm=Po(Im);function Lm(t){return Math.random()*t+t/2}function Rm(t){return Mm(fetch,{retryOn(e,n,i){var a;if(n!==null||i.status>=500)return(a=t.logger)==null||a.log(`retrying, attempt number ${e+1}`),!0},retries:5,retryDelay(e){const n=Math.pow(2,e)*500;return Lm(n)}})}class Bm{constructor(e){mi(this,"fetch"),this.config=e,this.fetch=Rm(e)}async upload(e){var n,i,a;if(!await this.config.isEnabled())return;const u=this.prepareData(e);(n=this.config.logger)==null||n.log("Uploading data:",u);const d=await this.fetch(this.config.crawlUploadUrl,{method:"POST",body:No.compressToUint8Array(JSON.stringify(u)),headers:{"Content-Type":"application/octet-stream"}}).then(y=>{var h;return(h=this.config.logger)==null?void 0:h.log({status:y.status})}).catch((i=this.config.logger)==null?void 0:i.error);(a=this.config.logger)==null||a.log("Response:",d)}prepareData(e){return{...e,PartnerVersion:yi.runtime.getManifest().version,ExtensionId:yi.runtime.id,ExtensionVersion:this.config.extensionVersion,UserAgent:navigator.userAgent,BrowserLanguage:navigator.language,BlankZys:null,PanelPartnerId:this.config.panelPartnerId}}}async function Um(t){const e=await fetch(t).then(n=>n.arrayBuffer());return bm(e)}function jm(t){const e=Nm(t),n=new Bm(e);return{async processAdFinderMessage(i){const a=u=>{var d;throw(d=e.logger)==null||d.error("Error handling message from ad-finder: "+JSON.stringify(i),u),u};switch(i.type){case qr.UPLOAD_CRAWL:return n.upload(i.payload).catch(a);case qr.GET_PM_EXTERNAL_CONFIG:return Um(`${t.pmExternalConfigUrl}?installId=${await t.getInstallId()}`).catch(a);case qr.FETCH_HTTP_RESPONSE:return fetch(i.payload).then(u=>{const d=parseInt(u.headers.get("Content-Length")??"");return!isNaN(d)&&d>1<<25?new ArrayBuffer(0):u.arrayBuffer()}).then(u=>u.byteLength>1<<25?eu(new ArrayBuffer(0)):eu(u))}}}}const aa=ft.createScopedLog("WebUsage");let vi;const Fm="https://api-pm.stayfocusd.st-panel-api.com/Ajax0001/IPD",$m="https://api-pm.stayfocusd.st-panel-api.com/Ajax0001/Config",Wm=33,Vm={initialized:null,usageDatabase:null,initAPI(t){return vi=t,vi.mixin("WebUsage",{init:this.init.bind(this),getUsageDatabase:this.getUsageDatabase.bind(this)})},async init(){if(this.initialized!=null)aa("init","WebUsage already initialized",{sessionId:""},"DEBUG");else{const t=async()=>await vi.Storage.get("hasAcceptedToS",!0)??!1,e=vi.Storage.get("install-id",!0),{promise:n,resolve:i}=vi.Utils.getDecoupledPromise();this.initialized=n,this.usageDatabase=Bg({getInstallId:()=>e}),$g({db:this.usageDatabase,enabled:t,isOnStartupAvailable:()=>!0,isTabActiveWhenPlayingAudio:()=>!0,logger:null}),i(),aa==null||aa("init","Initialized WebUsage",this,"INFO");const{processAdFinderMessage:a}=await jm({isEnabled:t,getInstallId:()=>e,extensionVersion:vi.Chrome.Extension.getVersion(),extensionId:Oo.APP_ID,crawlUploadUrl:Fm,pmExternalConfigUrl:$m,panelPartnerId:Wm});chrome.runtime.onConnect.addListener(u=>{u.name=="ad-finder"&&u.onMessage.addListener(async d=>{var y,h,p,v;if(d.message=="forward-message.request"){const m=await a(d.payload);u.postMessage({message:"forward-message.response",payload:m,nonce:d.nonce})}if(d.message=="ad-found"){const m=Ch(d.payload.hostname);if(!m)return;const g=d.payload.ad,A=await((h=(y=this.usageDatabase)==null?void 0:y.sessionsRepo)==null?void 0:h.getActiveSessions()),o=A==null?void 0:A.find(S=>S.appId===m.hostname);if(!o)return;await((v=(p=this.usageDatabase)==null?void 0:p.adsRepo)==null?void 0:v.upsertAd({...g,sessionId:o.id}))}})})}},async getUsageDatabase(){if(await this.initialized,this.usageDatabase==null)throw Error("WebUsage not initialized");return this.usageDatabase}},Hm=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,qm=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,zm=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Gm(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Zm(t);return}return e}function Zm(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Km(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return n.slice(1,-1);if(n.length<=9){const i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!zm.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Hm.test(t)||qm.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Gm)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}const Ym=/#/g,Xm=/&/g,Qm=/\//g,Jm=/=/g,Mo=/\+/g,ey=/%5e/gi,ty=/%60/gi,ny=/%7c/gi,ry=/%20/gi;function iy(t){return encodeURI(""+t).replace(ny,"|")}function Lo(t){return iy(typeof t=="string"?t:JSON.stringify(t)).replace(Mo,"%2B").replace(ry,"+").replace(Ym,"%23").replace(Xm,"%26").replace(ty,"`").replace(ey,"^").replace(Qm,"%2F")}function Ro(t){return Lo(t).replace(Jm,"%3D")}function ou(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function sy(t){return ou(t.replace(Mo," "))}function ay(t){return ou(t.replace(Mo," "))}function oy(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const i=n.match(/([^=]+)=?(.*)/)||[];if(i.length<2)continue;const a=sy(i[1]);if(a==="__proto__"||a==="constructor")continue;const u=ay(i[2]||"");e[a]===void 0?e[a]=u:Array.isArray(e[a])?e[a].push(u):e[a]=[e[a],u]}return e}function ly(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Ro(t)}=${Lo(n)}`).join("&"):`${Ro(t)}=${Lo(e)}`:Ro(t)}function cy(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>ly(e,t[e])).filter(Boolean).join("&")}const uy=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,dy=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,hy=/^([/\\]\s*){2,}[^/\\]/,fy=/\/$|\/\?|\/#/,gy=/^\.?\//;function lu(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?uy.test(t):dy.test(t)||(e.acceptRelative?hy.test(t):!1)}function Bo(t="",e){return e?fy.test(t):t.endsWith("/")}function py(t="",e){if(!e)return(Bo(t)?t.slice(0,-1):t)||"/";if(!Bo(t,!0))return t||"/";let n=t,i="";const a=t.indexOf("#");a>=0&&(n=t.slice(0,a),i=t.slice(a));const[u,...d]=n.split("?");return((u.endsWith("/")?u.slice(0,-1):u)||"/")+(d.length>0?`?${d.join("?")}`:"")+i}function my(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Bo(t,!0))return t||"/";let n=t,i="";const a=t.indexOf("#");if(a>=0&&(n=t.slice(0,a),i=t.slice(a),!n))return i;const[u,...d]=n.split("?");return u+"/"+(d.length>0?`?${d.join("?")}`:"")+i}function yy(t,e){if(by(e)||lu(t))return t;const n=py(e);return t.startsWith(n)?t:Ay(n,t)}function vy(t,e){const n=uu(t),i={...oy(n.search),...e};return n.search=cy(i),xy(n)}function by(t){return!t||t==="/"}function wy(t){return t&&t!=="/"}function Ay(t,...e){let n=t||"";for(const i of e.filter(a=>wy(a)))if(n){const a=i.replace(gy,"");n=my(n)+a}else n=i;return n}const cu=Symbol.for("ufo:protocolRelative");function uu(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,m,g=""]=n;return{protocol:m.toLowerCase(),pathname:g,href:m+g,auth:"",host:"",search:"",hash:""}}if(!lu(t,{acceptRelative:!0}))return e?uu(e+t):du(t);const[,i="",a,u=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,d="",y=""]=u.match(/([^#/?]*)(.*)?/)||[],{pathname:h,search:p,hash:v}=du(y.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:i.toLowerCase(),auth:a?a.slice(0,Math.max(0,a.length-1)):"",host:d,pathname:h,search:p,hash:v,[cu]:!i}}function du(t=""){const[e="",n="",i=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:i}}function xy(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",i=t.hash||"",a=t.auth?t.auth+"@":"",u=t.host||"";return(t.protocol||t[cu]?(t.protocol||"")+"//":"")+a+u+e+n+i}class Sy extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function _y(t){var h,p,v,m,g;const e=((h=t.error)==null?void 0:h.message)||((p=t.error)==null?void 0:p.toString())||"",n=((v=t.request)==null?void 0:v.method)||((m=t.options)==null?void 0:m.method)||"GET",i=((g=t.request)==null?void 0:g.url)||String(t.request)||"/",a=`[${n}] ${JSON.stringify(i)}`,u=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",d=`${a}: ${u}${e?` ${e}`:""}`,y=new Sy(d,t.error?{cause:t.error}:void 0);for(const A of["request","options","response"])Object.defineProperty(y,A,{get(){return t[A]}});for(const[A,o]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(y,A,{get(){return t.response&&t.response[o]}});return y}const Ty=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function hu(t="GET"){return Ty.has(t.toUpperCase())}function Ey(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const Cy=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ky=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Oy(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return ky.test(e)?"json":Cy.has(e)||e.startsWith("text/")?"text":"blob"}function Py(t,e,n=globalThis.Headers){const i={...e,...t};if(e!=null&&e.params&&(t!=null&&t.params)&&(i.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&(t!=null&&t.query)&&(i.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&(t!=null&&t.headers)){i.headers=new n((e==null?void 0:e.headers)||{});for(const[a,u]of new n((t==null?void 0:t.headers)||{}))i.headers.set(a,u)}return i}const Dy=new Set([408,409,425,429,500,502,503,504]),Ny=new Set([101,204,205,304]);function fu(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:i=globalThis.AbortController}=t;async function a(y){const h=y.error&&y.error.name==="AbortError"&&!y.options.timeout||!1;if(y.options.retry!==!1&&!h){let v;typeof y.options.retry=="number"?v=y.options.retry:v=hu(y.options.method)?0:1;const m=y.response&&y.response.status||500;if(v>0&&(Array.isArray(y.options.retryStatusCodes)?y.options.retryStatusCodes.includes(m):Dy.has(m))){const g=y.options.retryDelay||0;return g>0&&await new Promise(A=>setTimeout(A,g)),u(y.request,{...y.options,retry:v-1})}}const p=_y(y);throw Error.captureStackTrace&&Error.captureStackTrace(p,u),p}const u=async function(h,p={}){var A;const v={request:h,options:Py(p,t.defaults,n),response:void 0,error:void 0};v.options.method=(A=v.options.method)==null?void 0:A.toUpperCase(),v.options.onRequest&&await v.options.onRequest(v),typeof v.request=="string"&&(v.options.baseURL&&(v.request=yy(v.request,v.options.baseURL)),(v.options.query||v.options.params)&&(v.request=vy(v.request,{...v.options.params,...v.options.query}))),v.options.body&&hu(v.options.method)&&(Ey(v.options.body)?(v.options.body=typeof v.options.body=="string"?v.options.body:JSON.stringify(v.options.body),v.options.headers=new n(v.options.headers||{}),v.options.headers.has("content-type")||v.options.headers.set("content-type","application/json"),v.options.headers.has("accept")||v.options.headers.set("accept","application/json")):("pipeTo"in v.options.body&&typeof v.options.body.pipeTo=="function"||typeof v.options.body.pipe=="function")&&("duplex"in v.options||(v.options.duplex="half")));let m;if(!v.options.signal&&v.options.timeout){const o=new i;m=setTimeout(()=>o.abort(),v.options.timeout),v.options.signal=o.signal}try{v.response=await e(v.request,v.options)}catch(o){return v.error=o,v.options.onRequestError&&await v.options.onRequestError(v),await a(v)}finally{m&&clearTimeout(m)}if(v.response.body&&!Ny.has(v.response.status)&&v.options.method!=="HEAD"){const o=(v.options.parseResponse?"json":v.options.responseType)||Oy(v.response.headers.get("content-type")||"");switch(o){case"json":{const S=await v.response.text(),P=v.options.parseResponse||Km;v.response._data=P(S);break}case"stream":{v.response._data=v.response.body;break}default:v.response._data=await v.response[o]()}}return v.options.onResponse&&await v.options.onResponse(v),!v.options.ignoreResponseError&&v.response.status>=400&&v.response.status<600?(v.options.onResponseError&&await v.options.onResponseError(v),await a(v)):v.response},d=async function(h,p){return(await u(h,p))._data};return d.raw=u,d.native=(...y)=>e(...y),d.create=(y={})=>fu({...t,defaults:{...t.defaults,...y}}),d}const Uo=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Iy=Uo.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),My=Uo.Headers,Ly=Uo.AbortController,Ry=fu({fetch:Iy,Headers:My,AbortController:Ly});var By=(t=>(t.Notification="notification",t.Block="block",t.Popup="popup",t))(By||{}),Uy=(t=>(t.UsageTime="usage-time",t.SessionCount="session-count",t))(Uy||{}),jy=(t=>(t.Android="android",t.Windows="windows",t.Mac="mac",t.Linux="linux",t.Web="web",t.Category="category",t.Brand="brand",t))(jy||{}),Fy=class extends Error{constructor(){super("Invalid code entered")}},$y=class extends Error{constructor(){super("Both devices already belong to a device group")}},Wy=class extends Error{constructor(){super("Forbidden")}},oa=(zr=class extends Error{static matchesMessage(e){return e instanceof Error?e.message===zr.message:!1}constructor(){super(zr.message)}},xe(zr,"message","Not in a device group"),zr);function fs(t,e){return Object.entries(t).flatMap(([n,i])=>i.sessions.map(a=>({appId:n,startedAt:a.timestamp*1e3,endedAt:(a.timestamp+a.duration)*1e3,installId:a.install_id,platform:e})))}function gu(t){return new Date(t).toISOString()}function Vy(t){let e=Ry.create({retry:3,...t==null?void 0:t.ofetchDefaults}),n=(t==null?void 0:t.formatDeviceName)??(L=>L),i=t==null?void 0:t.logger;function a(L){return e("/v1/android/apps",{query:{app_ids:L.appIds.join(",")}})}async function u(L){let z=await e("/v1/sync/pairing/generate",{method:"POST",retry:0,query:{install_id:L.installId}});return{code:z.code,expiration:new Date(z.expiration*1e3).getTime()}}function d(L){return e("/v1/sync/pairing/validate",{method:"POST",retry:0,query:{install_id:L.installId,code:L.code}}).catch(z=>{var T;let q=(T=z.response)==null?void 0:T.status;throw q===403?new $y:q===404?new Fy:z})}function y(L){return e("/v1/sync/pairing/check",{query:{install_id:L.installId}}).catch(z=>{var T;if(((T=z.response)==null?void 0:T.status)!==404)throw z})}async function h(L){return e("/v1/sync/devices",{query:{key:L.deviceGroupKey}}).catch(z=>{var T;throw((T=z.response)==null?void 0:T.status)===404?new oa:z})}async function p(L){await e("/v1/sync/devices/remove",{method:"POST",retry:0,query:{key:L.deviceGroupKey,install_id:L.installIdToRemove}})}async function v(L){return(await e.raw("/v1/sync/devices/sessions",{method:"HEAD",query:{key:L.deviceGroupKey,install_id:L.installId}}).catch(z=>{var T;throw((T=z.response)==null?void 0:T.status)===404?new oa:z})).headers.get("Last-Modified")??void 0}async function m(L){return e("/v1/analytics/avg_usage",{query:{app_ids:L.appIds.join(","),gender:L.gender,country_code:L.countryCode}})}async function g(L){return e("/v1/analytics/avg_web_usage",{query:{websites:L.appIds.join(","),gender:L.gender,country_code:L.countryCode}})}async function A(L){var z;let{android_apps:T,websites:q,windows_apps:K,mac_apps:le,linux_apps:se}=await e("/v1/sync/devices/sessions",{query:{key:L.deviceGroupKey,install_id:L.installId,start_time:gu(L.startTime),end_time:gu(L.endTime),app_ids:(z=L.appIds)==null?void 0:z.join(",")}}).catch(pe=>{var ge;throw((ge=pe.response)==null?void 0:ge.status)===404?new oa:pe});return[...fs(T,"android"),...fs(K??{},"windows"),...fs(le??{},"mac"),...fs(se??{},"linux"),...fs(q,"web")].sort((pe,ge)=>pe.startedAt-ge.startedAt)}async function o(L){var z;if(!L.appId.trim()){let{websites:K,diffPrivateWebsites:le,...se}=L;throw i==null||i.error("Missing required parameter 'appId'",se),Error("Missing required parameter 'appId'")}if(!L.installId.trim()){let{websites:K,diffPrivateWebsites:le,...se}=L;throw i==null||i.error("Missing required parameter 'installId'",se),Error("Missing required parameter 'installId'")}let T=Za(navigator==null?void 0:navigator.userAgent),q={app_id:L.appId,install_id:L.installId,time_zone:Wi(),country_code:Ds(),device_name:n((z=T.browser)==null?void 0:z.name),device_type:T.os.name,birth_year:L.birthYear,websites:L.websites,diff_private_websites:L.diffPrivateWebsites};await e("/v1/web/upload",{method:"POST",retry:0,body:q})}async function S(L){var z;if(!L.appId.trim()){let{websites:K,diffPrivateWebsites:le,...se}=L;throw i==null||i.error("Missing required parameter 'appId'",se),Error("Missing required parameter 'appId'")}if(!L.installId.trim()){let{websites:K,diffPrivateWebsites:le,...se}=L;throw i==null||i.error("Missing required parameter 'installId'",se),Error("Missing required parameter 'installId'")}let T=Za(navigator==null?void 0:navigator.userAgent),q={app_id:L.appId,install_id:L.installId,time_zone:Wi(),country_code:Ds(),device_name:n((z=T.browser)==null?void 0:z.name),device_type:T.os.name,birth_year:L.birthYear,websites:L.websites,diff_private_websites:L.diffPrivateWebsites};await e("/v1/page_views/upload",{method:"POST",retry:0,body:q})}async function P(L){if(!L.appId.trim()){let{apps:T,...q}=L;throw i==null||i.error("Missing required parameter 'appId'",q),Error("Missing required parameter 'appId'")}if(!L.installId.trim()){let{apps:T,...q}=L;throw i==null||i.error("Missing required parameter 'installId'",q),Error("Missing required parameter 'installId'")}let z={app_id:L.appId,install_id:L.installId,time_zone:Wi(),country_code:Ds(),device_name:n("App"),device_type:L.platform,birth_year:L.birthYear,apps:L.apps};await e("/v1/desktop/upload",{method:"POST",retry:0,body:z})}function R(L){return o({appId:L.appId,installId:L.installId,websites:{}})}function $(L){return P({appId:L.appId,installId:L.installId,platform:L.platform})}function O(L){return e("/v1/brands",{query:{install_id:L.installId}}).catch(z=>{var T;throw((T=z.response)==null?void 0:T.status)===403?new Wy:z})}function D(L){return e("/v1/sync/config",{query:{key:L.deviceGroupKey}}).catch(z=>{var T;throw((T=z.response)==null?void 0:T.status)===404?new oa:z})}async function G(L){await e("/v1/sync/config/reset_time",{method:"POST",retry:0,body:L})}async function j(L){await e("/v1/sync/config/ignore_list/remove",{method:"POST",retry:0,body:L})}async function Z(L){await e("/v1/sync/config/ignore_list/add",{method:"POST",retry:0,body:L})}async function C(L){await e("/v1/sync/config/usage_limit/add",{method:"POST",retry:0,body:L})}async function M(L){let z={key:L.key,limit_ids:L.limitIds};await e("/v1/sync/config/usage_limit/remove",{method:"POST",retry:0,body:z})}async function N(L){let z={app_id:L.appId,install_id:L.installId,time_zone:Wi(),country_code:Ds(),ads:L.ads};await e("/v1/desktop/retail/"+L.website,{method:"POST",retry:0,body:z})}async function J(L){let z={app_id:L.appId,country_code:L.countryCode,time_zone:Wi(),prompts:L.prompts};await e("/v1/ai/analytics",{method:"POST",retry:0,body:z})}async function fe(L){let z={app_id:L.appId,service:L.service,install_id:L.installId,status:L.status,country_code:L.countryCode,timestamp:Math.round(Date.now()/1e3)};await e("/v1/subscriptions/status",{method:"POST",retry:0,body:z})}return{getAndroidAppInfo:a,createPairingCode:u,validatePairingCode:d,getMyDeviceGroup:y,getSessionsLastUploadedAt:v,getAverageAppUsage:m,getAverageWebUsage:g,listDeviceGroupDevices:h,removeDeviceFromDeviceGroup:p,listDeviceGroupSessions:A,uploadSessions:o,uploadPageViews:S,uploadDesktopUsage:P,createDevice:R,createDesktopDevice:$,getBrandMapping:O,getGroupConfig:D,setResetTime:G,removeFromIgnoreList:j,addToIgnoreList:Z,addUsageLimit:C,removeUsageLimit:M,uploadRetailAds:N,uploadPrompts:J,uploadSubscriptionStatus:fe}}const Hy=ft.createScopedLog("ScheduleJobs");let Bt;const pu={UploadWebUsage:"@alarm/upload-web-usage"},qy="@stayfocusd/sessions-last-uploaded-at-key",zy="@stayfocusd/page-views-last-uploaded-at-key",Gy={initAPI(t){return Bt=t,Bt.mixin("ScheduleJobs",{init:this.init.bind(this)})},init(){Bt.Chrome.Alarms.addListener("onAlarm",async t=>{t.name===pu.UploadWebUsage&&(Hy("Alarm fired",t.name),await this.uploadWebUsageJob())}),Bt.Chrome.Alarms.ensure(pu.UploadWebUsage,{periodInMinutes:Ns/pr})},async uploadWebUsageJob(){const t=await Bt.WebUsage.getUsageDatabase(),e=Vy({ofetchDefaults:{baseURL:"https://stayfocusd.st-panel-api.com"}});await fm({db:t,enabled:async()=>{const i=await Bt.RemoteConfig.get("uploadWebUsage"),a=await Bt.Storage.get("hasAcceptedPrivacyPolicy",!0);return i&&a},getAppId:()=>Oo.APP_ID,dev:!1,getInstallId:()=>Bt.Storage.get(Oo.INSTALL_ID_KEY),getBirthYear:()=>Bt.Settings.get("age")??void 0,logger:null,getUploadBatchSize:()=>Bt.RemoteConfig.get("usageUploadBatchSize"),api:e,sessions:{lastUploadedAtStorageKey:qy,onFailure:()=>Bt.Analytics.event("WEB_USAGE_UPLOAD_FAILED"),onSuccess:i=>Bt.Analytics.event("WEB_USAGE_UPLOAD_COMPLETED",i)},pageViews:{lastUploadedAtStorageKey:zy,onFailure:()=>Bt.Analytics.event("PAGE_VIEWS_UPLOAD_FAILED"),onSuccess:i=>Bt.Analytics.event("PAGE_VIEWS_UPLOAD_COMPLETED",i),getUploadAllowlist:()=>Bt.RemoteConfig.get("pageViewAllowlist")}}).uploadAll()}};/** @license DropletJS.PubSub | MIT License | https://github.com/wmbenedetto/DropletJS.PubSub#mit-license */const mu=function(t,e){var n,n=function(){};typeof Function.prototype.bind!="function"&&(Function.prototype.bind=function(h){var p=this;return function(){return p.apply(h,arguments)}});var i=function(h){return typeof h=="object"&&h!==null&&typeof h.length=="number"},a=function(h){return typeof h=="object"&&h!==null&&typeof h.length!="number"},u=function(h,p){try{delete h[p]}catch{h[p]=e}},d=function(p){if(this.namespace=this.DEFAULT_NS,p.indexOf(":")>-1&&(this.namespace=p.substr(0,p.indexOf(":")),p=p.substr(p.indexOf(":")+1,p.length)),p.indexOf(".")>-1){var v=p.split(".");this.msgArray=[v[0]||"*",v[1]||"*",v[2]||"*",v[3]||"*"],this.msgString=this.msgArray.join(".")}else this.msgArray=[p],this.msgString=p};d.prototype={DEFAULT_NS:"__default",matches:function(h){if(this.msgString===h)return!0;var p=this.msgArray,v=h.split(".");if(p.length!==v.length)return!1;for(var m="",g="",A=p.length>=v.length?p.length:v.length,o=0;o<A;o++){if(p[o]!=="*"&&v[o]!=="*"&&p[o]!==v[o])return!1;m+=p[o]==="*"?"0":"1",g+=v[o]==="*"?"0":"1"}return m>=g},toString:function(){return this.msgString}};var y={handlers:{},subscribers:{before:[],after:[]},getAPI:function(){return{clear:this.clear.bind(this),listen:this.listen.bind(this),once:this.once.bind(this),publish:this.publish.bind(this),stop:this.stop.bind(this),subscribe:this.subscribe.bind(this),unsubscribe:this.unsubscribe.bind(this)}},listen:function(){var h=this.processListenArgs(Array.prototype.slice.call(arguments));if(this.log("listen","Adding listener",h),i(h.message))return this.each(h,this.listen.bind(this)),null;this.addHandler(h)},once:function(){var h=this.processListenArgs(Array.prototype.slice.call(arguments));if(h.limit=1,this.log("once","Adding one-time listener",h),i(h.message))return this.each(h,this.once.bind(this)),null;this.addHandler(h)},stop:function(h){if(h)throw new Error("Message(s) must be passed to stop()");var p={message:this.toMessage(h)};if(this.log("stop","Stopping listener",p),i(p.message))return this.each(p,this.stop.bind(this)),null;this.removeHandlers(p)},subscribe:function(){var h=this.processSubscribeArgs(Array.prototype.slice.call(arguments)),p=h.phase;this.log("subscribe","Adding subscriber",h),this.subscribers[p]=this.subscribers[p]||[],this.subscribers[p].push(h)},unsubscribe:function(){var h=this.processUnsubscribeArgs(Array.prototype.slice.call(arguments));if(!h.phase)return this.unsubscribe(h.namespace,"before"),this.unsubscribe(h.namespace,"after"),null;var p=h.namespace,v=h.phase,m=this.subscribers[v];if(this.log("unsubscribe","Unsubscribe from "+v+" phase"+(p?" in "+p+" namespace":""),h),i(m))for(var g=0;g<m.length;g++)(!p||m[g].namespace===p)&&m.splice(g,1)},publish:function(){var h=this.processPublishArgs(Array.prototype.slice.call(arguments));if(i(h.message)){var p=h.onComplete;return h.onComplete=null,this.each(h,this.publish.bind(this),p),null}var v=h.message.toString();this.log("publish","# START publishing "+v,h);for(var m=h.message,g=h.payload,A=h.onPublish,o=this.subscribers.before.concat(this.getHandlers(m)).concat(this.subscribers.after),S=0;S<o.length;S++){if(o[S].limit===null||o[S].count<o[S].limit){var P=o[S].async?o[S].handler(m,g,A):o[S].handler(m,g);o[S].async!==!0&&typeof A=="function"&&A(P),o[S].count+=1}typeof o[S].limit=="number"&&o[S].count===o[S].limit&&this.removeHandlers(h,S)}this.log("publish","# END publishing "+v,h),typeof h.onComplete=="function"&&h.onComplete()},getHandlers:function(h){var p=[];for(var v in this.handlers)this.handlers.hasOwnProperty(v)&&h.matches(v)&&(p=p.concat(this.handlers[v]));return p},clear:function(){this.log("clear","Clearing PubSub"),this.handlers={},this.subscribers={before:[],after:[]}},each:function(h,p,v){for(var m=0;m<h.message.length;m++){var g={};for(var A in h)h.hasOwnProperty(A)&&A!=="message"&&(g[A]=h[A]);g.message=h.message[m],p(g)}typeof v=="function"&&v()},addHandler:function(h){var p=h.message.toString();this.log("addHandler","Adding handler for "+p+" message",null,"TRACE"),this.handlers[p]=this.handlers[p]||[],this.handlers[p].push({namespace:h.message.namespace,handler:h.handler,async:h.async,limit:typeof h.limit=="number"?h.limit:null,count:0})},removeHandlers:function(h,p){var v=h.message.toString(),m=h.message.namespace,g=this.handlers;if(g&&g[v]){var A="Removing handler for "+v+" message";if(A+=m!==h.message.DEFAULT_NS?" in "+m+" namespace":"",this.log("removeHandlers",A,null,"TRACE"),typeof p=="number")g[v][p].namespace===m&&g[v].splice(p,1);else for(var o=0;o<g[v].length;o++)g[v][o].namespace===m&&g[v].splice(o,1);g[v].length===0&&u(g,v)}},processListenArgs:function(h){var p={};if(a(h[0])?p=h[0]:(p.message=typeof h[0]=="string"||i(h[0])?h[0]:null,p.handler=typeof h[1]=="function"?h[1]:null),!p.message||typeof p.handler!="function")throw new Error("Message(s) and handler function must be passed to listen() and/or once()");return p.message=this.toMessage(p.message),p},processSubscribeArgs:function(h){var p={};if(a(h[0])?p=h[0]:p.handler=typeof h[0]=="function"?h[0]:null,typeof p.handler!="function")throw new Error("Handler must be passed to subscribe()");if(p.phase=p.phase||"after",p.limit=null,p.count=0,p.phase&&!(p.phase in{before:1,after:1}))throw new Error(p.phase+" is not a valid phase for subscribe().");return p},processUnsubscribeArgs:function(h){var p={};if(a(h[0])?p=h[0]:(p.namespace=typeof h[0]=="string"?h[0]:null,p.phase=typeof h[1]=="string"?h[1]:null),p.phase&&!(p.phase in{before:1,after:1}))throw new Error(p.phase+" is not a valid phase for unsubscribe().");return p},processPublishArgs:function(h){var p={};if(a(h[0])?p=h[0]:(p.message=typeof h[0]=="string"||i(h[0])?h[0]:null,p.payload=typeof h[1]<"u"?h[1]:null),!p.message)throw new Error("Message(s) must be passed to publish()");return p.message=this.toMessage(p.message),p.async&&typeof p.onPublish!="function"&&(p.onPublish=function(){}),p},toMessage:function(h){if(i(h)){for(var p=[],v=0;v<h.length;v++)h[v]instanceof d||(p[v]=new d(h[v]));h=p}else h&&!(h instanceof d)&&(h=new d(h));return h},log:function(h,p,v,m){n("DropletJS.PubSub."+h,p,v,m)},setLogLevel:function(h){}};return y}(),la=ft.createScopedLog("Notification");let Tn;const bi={settings:[300,60,10],NOTIFICATION_TTL:5e3,initAPI:function(t){return Tn=t,Tn.mixin("Notification",{initAsync:this.initAsync.bind(this),get:this.get.bind(this),saveSettings:this.saveSettings.bind(this)})},init:function(t){la("init","Initializing Notification",null,"DEBUG"),this.loadSettings(),typeof t=="function"&&t()},initAsync(){return new Promise(t=>this.init(t))},get:function(){return this.settings},show:function(t){la("show","Showing "+t+" notification");let e="",n="",i=0;t==="nuclear"?(i=Tn.NuclearOption.getSecondsUntilActive(),e="/common/img/icon-nuclear-48.png",n=Tn.Chrome.Translation.get("nuclearNotification")||"The Nuclear Option will start blocking sites in"):t==="block"&&(i=Tn.StayFocusd.getTotalSecondsRemaining(),e="/common/img/icon-red-48.png",n=Tn.Chrome.Translation.get("blockNotification")||"StayFocusd will start blocking your Blocked Sites in"),n+=i>60?" "+Tn.Date.secondsToMinsAndSecs(i):" "+i+" seconds";const a={type:"basic",title:"StayFocusd",iconUrl:e,message:n};Tn.Chrome.Notification.create("",a,u=>{u!=null&&setTimeout(()=>{Tn.Chrome.Notification.clear(u)},this.NOTIFICATION_TTL)})},isset:function(t){return this.settings.inArray(t)},saveSettings:function(t){la("saveSettings","Saving settings",t,"TRACE"),this.settings=t,Tn.Settings.set({notificationSettings:t})},loadSettings:function(){la("loadSettings","Loading settings",null,"TRACE");const t=Tn.Settings.get("notificationSettings");t&&(this.settings=t)}};var gs=(t=>(t.RED="#FF0000",t.YELLOW="#FDD017",t.GREEN="#009933",t.BLACK="#000000",t))(gs||{}),wi=(t=>(t.ONBOARDING="/common/img/icon-red-dot-24.png",t.ALLOWED="/common/img/icon-green-24.png",t.BLOCKED="/common/img/icon-red-24.png",t.DEFAULT="/common/img/icon-24.png",t.NUCLEAR="/common/img/icon-nuclear-24.png",t.DEACTIVATED="/common/img/icon-disabled-24.png",t))(wi||{});const ca=function(t,e,n,i){un.log(`BadgeIcons.${t}`,e,n,i)};function yu(){function t(d,y,h){const p=d||"",v=h||void 0;ca("showBadge","Showing badge",{text:p,iconColor:y,tabID:v},"DEBUG"),y&&i(y,v),a(p,v)}function e(d){d=d||void 0,a("",d)}async function n(d,y){y=y||void 0,ca("setIcon","Setting icon",d,"TRACE"),await u()?chrome.action.setIcon({tabId:y,path:"/common/img/icon-red-dot-24.png"}):chrome.action.setIcon({tabId:y,path:d})}function i(d,y){ca("setBadgeColor","Setting badge color",d,"TRACE"),y=y||void 0,chrome.action.setBadgeBackgroundColor({tabId:y,color:d})}function a(d,y){ca("setBadgeText","Setting badge text",d,"TRACE"),y=y||void 0,chrome.action.setBadgeText({tabId:y,text:d})}async function u(){return!1}return{showBadge:t,hideBadge:e,setIcon:n}}const Zy=yu(),rr=ft.createScopedLog("NuclearOption");let Gt;const pn={timer:null,interval:1,settings:{},initialized:!1,initAPI:function(t){return Gt=t,Gt.mixin("NuclearOption",{init:this.init.bind(this),initAsync:this.initAsync.bind(this),activate:this.activate.bind(this),isActive:this.isActive.bind(this),getBlockLength:this.getBlockLength.bind(this),getBlockType:this.getBlockType.bind(this),getContentType:this.getContentType.bind(this),getExpiration:this.getExpiration.bind(this),getFrequency:this.getFrequency.bind(this),getSecondsUntilActive:this.getSecondsUntilActive.bind(this),getSmartBomb:this.getSmartBomb.bind(this),getStartAmPm:this.getStartAmPm.bind(this),getStartHour:this.getStartHour.bind(this),getStartMin:this.getStartMin.bind(this),getStartType:this.getStartType.bind(this),saveSettings:this.saveSettings.bind(this),updateActiveDays:this.updateActiveDays.bind(this)})},init:function(t){rr("init","Initializing NuclearOption",null,"DEBUG"),this.loadSettings(),this.timer=setInterval(this.tick.bind(this),this.interval*1e3),this.initialized=!0,typeof t=="function"&&t(),Gt.PubSub.listen("Settings.data.refreshed",(e,n)=>{n.changes.nuclearOptionSettings&&this.loadSettings()})},initAsync(){return new Promise(t=>this.init(t))},saveSettings:function(t){this.settings=t,t.activeDays=this.calculateActiveDays(t),rr("saveSettings","Saving settings",t,"DEBUG"),Gt.Settings.set({nuclearOptionSettings:t})},calculateActiveDays:function(t){let e=[];return t.frequency==="activeDays"?e=Gt.StayFocusd.getActiveDays(!0):typeof t.frequency<"u"&&(e[0]=t.frequency==="everyDay",e[1]=t.frequency.indexOf("every")>-1,e[2]=t.frequency.indexOf("every")>-1,e[3]=t.frequency.indexOf("every")>-1,e[4]=t.frequency.indexOf("every")>-1,e[5]=t.frequency.indexOf("every")>-1,e[6]=t.frequency==="everyDay"),rr("calculateActiveDays","Calculating active days",e,"DEBUG"),e},updateActiveDays:function(t){rr("updateActiveDays","Updating active days",t,"DEBUG"),this.initialized||this.init(()=>{this.updateActiveDays(t)}),this.settings.activeDays=t,this.saveSettings(this.settings)},loadSettings:function(){rr("loadSettings","Loading settings",this.settings,"DEBUG");const t=Gt.Settings.get("nuclearOptionSettings");t&&(this.settings=t)},isActive:function(){this.isCurrentlyActive()?this.isExpired()&&this.deactivate():this.isStarted()&&this.activate();const t=this.isCurrentlyActive();return rr("isActive","Is Nuclear Option active?",t?"YES":"NO","TRACE"),t},isActiveToday:function(){const t=this.getFrequency(),e=this.getLastActiveDate(),n=this.getLastExpiredDate(),i=new Date().toDateString();if(t==="todayOnly"&&(e===i||e===null)&&n!==i)return!0;const a=new Date().getDay(),u=this.getActiveDays();return u.length===0?!1:u[a]},isStarted:function(){const t=this.getStartType(),e=this.getLastActiveDate(),n=this.getLastExpiredDate(),i=new Date().toDateString();if(!this.isActiveToday()||n===i)if(t==="atScheduledTime"){const a=new Date(i+" "+this.getStartHour()+":"+this.getStartMin()+" "+this.getStartAmPm());if(new Date(this.getExpiration())>a)return!1}else return!1;if(t==="now")return e===i;if(this.isActiveToday()){if(t==="atScheduledTime")return Gt.Date.hasTimePassed(this.getStartHour(),this.getStartMin(),this.getStartAmPm());if(t==="whenMaxTimeAllowedExceeded")return!!Gt.BlockedAllWebsites.isMaxTimeAllowedExceeded()}return!1},activate:function(){Gt.Analytics.event("TOGGLE_NUCLEAR_OPTION",{enabled:!0}),rr("activate","Activating Nuclear Option");const t=this.hasScheduledTime()?Gt.Date.getTodayDateObj(this.getStartHour(),this.getStartMin(),this.getStartAmPm()):new Date;this.settings.expiration=t.getTime()+this.getBlockLength(),this.settings.lastActiveDate=new Date().toDateString(),this.settings.lastExpiredDate=null,this.settings.isCurrentlyActive=!0,this.saveSettings(this.settings),Zy.hideBadge()},deactivate:function(){Gt.Analytics.event("TOGGLE_NUCLEAR_OPTION",{enabled:!1}),rr("deactivate","Deactivating Nuclear Option"),this.settings.lastExpiredDate=new Date().toDateString(),this.settings.isCurrentlyActive=!1,this.saveSettings(this.settings)},isExpired:function(){if(this.getExpiration()===null)return!0;const t=new Date;return new Date(this.getExpiration())<t},isBlockable:function(t,e){if(this.isActive()===!1)return!1;switch(this.getBlockType()){case"all":return!0;case"allExceptAllowed":return!e;case"blocked":return t&&!e;default:return!1}},hasScheduledTime:function(){return this.getStartType()==="atScheduledTime"},getSecondsUntilActive:function(){return Gt.Date.secondsUntilTime(this.getStartHour(),this.getStartMin(),this.getStartAmPm())},hasSmartBomb:function(){return this.getContentType()==="smartBomb"},isCurrentlyActive:function(){return typeof this.settings.isCurrentlyActive>"u"?!1:this.settings.isCurrentlyActive},getSmartBomb:function(){return this.settings.smartBomb??{}},getContentType:function(){return typeof this.settings.contentType>"u"?"wholeSite":this.settings.contentType},getExpiration:function(){return typeof this.settings.expiration>"u"?null:Number(this.settings.expiration)},getLastActiveDate:function(){return typeof this.settings.lastActiveDate>"u"?null:this.settings.lastActiveDate},getLastExpiredDate:function(){return typeof this.settings.lastExpiredDate>"u"?null:this.settings.lastExpiredDate},getBlockType:function(){return typeof this.settings.blockType>"u"?"blocked":this.settings.blockType},getBlockLength:function(){if(typeof this.settings.blockLength>"u")return Ns;{const t=this.settings.blockLength;return Number(t)===t&&t%1!==0||t<pr?Math.floor(t*60)*pr:t}},getStartType:function(){return typeof this.settings.startType>"u"?"now":this.settings.startType},getStartHour:function(){return this.settings.startHour??"00"},getStartMin:function(){return this.settings.startMin??"00"},getStartAmPm:function(){return this.settings.startAmPm??"am"},getFrequency:function(){return this.settings.frequency??null},getActiveDays:function(){return this.settings.activeDays??[]},tick:function(){if(this.hasScheduledTime()&&!this.isActive()){const t=this.getSecondsUntilActive();rr("tick",t+" seconds until Nuclear Option",null,"TRACE"),bi.isset(t)&&bi.show("nuclear"),this.updateBadge()}else this.isActive()&&this.updatePopupTimer();return!0},updatePopupTimer(){Gt.StayFocusd.postTimerUpdatedMessage()},updateBadge:function(){const t=this.getSecondsUntilActive();t>0&&t<60&&Gt.StayFocusd.updateBadge(this.getSecondsUntilActive(),!0)}},ua=ft.createScopedLog("WebUsage"),Ky=1e3;let mn;const Yy={_timer:null,_isNewDay:null,_killPageAction:null,_updateBadgeAction:null,_postTimerUpdatedMessage:null,_showNotification:null,initAPI(t){return mn=t,mn.mixin("BlockedGroupsTimer",{init:this.init.bind(this),startCountdown:this.startCountdown.bind(this),stopCountdown:this.stopCountdown.bind(this),tick:this.tick.bind(this),isMaxTimeAllowedExceeded:this.isMaxTimeAllowedExceeded.bind(this),getTotalSecondsRemaining:this.getTotalSecondsRemaining.bind(this)})},async init(t,e,n,i,a){this._isNewDay=t,this._killPageAction=e,this._updateBadgeAction=n,this._postTimerUpdatedMessage=i,this._showNotification=a},startCountdown(t){if(this._timer&&this.stopCountdown(),!mn.Settings.get("activated",!0)){ua("startCountdown","Extension is not activated");return}ua("startCountdown","Starting countdown"),this._timer=setInterval(async()=>await this.tick(t),Ky)},stopCountdown(){ua("stopCountdown","Stopping countdown"),this._timer&&clearInterval(this._timer),this._timer=null},async tick(t){var n;(n=this._isNewDay)!=null&&n.call(this)&&mn.BlockedGroupsRepository.clearElapsedTime();const e=mn.BlockedAllWebsites.getTime();if(e!=null)await mn.Storage.set({blockAllWebsitesElapsedTime:e.elapsedTime+1}),this.actionsAfterCheckingTime(t,e.elapsedTime,e.allowedTime-e.elapsedTime);else{const i=mn.BlockedGroupsRepository.getBlockedGroupByDomain(t);if(!i)return;await mn.BlockedGroupsRepository.incrementElapsedTime(i.groupName);const a=i.maxTimeAllowed-i.elapsedTime;this.actionsAfterCheckingTime(t,i.elapsedTime,a)}},actionsAfterCheckingTime(t,e,n){var i,a,u,d;if(ua("tick",`Elapsed time: ${e}. Time remaining: ${n}`,null,"DEBUG"),(i=this._showNotification)==null||i.call(this,n),n<=0){(a=this._killPageAction)==null||a.call(this,t);return}(u=this._postTimerUpdatedMessage)==null||u.call(this),(d=this._updateBadgeAction)==null||d.call(this,n)},isMaxTimeAllowedExceeded(t){const e=mn.BlockedAllWebsites.isMaxTimeAllowedExceeded();if(e!=null)return e;{const n=mn.BlockedGroupsRepository.getBlockedGroupByDomain(t);if(n)return n.elapsedTime>=n.maxTimeAllowed}return!1},getTotalSecondsRemaining(t){const e=mn.BlockedAllWebsites.getTotalSecondsRemaining();if(e!=null)return e;{const n=mn.BlockedGroupsRepository.getBlockedGroupByDomain(t);if(n!=null)return n.maxTimeAllowed-n.elapsedTime}}};let Ai;const Xy={initAPI(t){return Ai=t,Ai.mixin("BlockedAllWebsites",{getTime:this.getTime.bind(this),isMaxTimeAllowedExceeded:this.isMaxTimeAllowedExceeded.bind(this),getTotalSecondsRemaining:this.getTotalSecondsRemaining.bind(this),clearElapsedTime:this.clearElapsedTime.bind(this)})},getTime(){if(Ai.Settings.get("isBlockAllWebsites")??!1){const e=Ai.Settings.get("blockAllWebsitesAllowedTime")??ii*10,n=Ai.Settings.get("blockAllWebsitesElapsedTime")??0;return{allowedTime:e,elapsedTime:n}}return null},isMaxTimeAllowedExceeded(){const t=this.getTime();return t!=null?t.elapsedTime>=t.allowedTime:null},getTotalSecondsRemaining(){const t=this.getTime();return t!=null?t.allowedTime-t.elapsedTime:null},async clearElapsedTime(){await Ai.Storage.set({blockAllWebsitesElapsedTime:0})}};function da(t,e){return ee.Domain.isMoreGeneralURL(t,e)||ee.Domain.matchesWildcard(t,e)}const Vn="blockedGroups",vu="blacklist",bu="maxTimeAllowed",jo="Default";let Tt,Ut=[];const Qy={initAPI(t){return Tt=t,Tt.mixin("BlockedGroupsRepository",{init:this.init.bind(this),add:this.add.bind(this),get:this.get.bind(this),getByName:this.getByName.bind(this),update:this.update.bind(this),updateWebsites:this.updateWebsites.bind(this),addWebsite:this.addWebsite.bind(this),clearElapsedTime:this.clearElapsedTime.bind(this),incrementElapsedTime:this.incrementElapsedTime.bind(this),delete:this.delete.bind(this),isBlockable:this.isBlockable.bind(this),getBlockedGroupByDomain:this.getBlockedGroupByDomain.bind(this),getBlockedGroupsByDomain:this.getBlockedGroupsByDomain.bind(this),migrate:this.migrate.bind(this),importBlockedsites:this.importBlockedsites.bind(this)})},async init(){if(ee.Settings.get("disableSync")===!0){const n=!!(await Tt.Chrome.Storage.getSync(Vn))[Vn];await Tt.Storage.setBucket(Vn,"LOCAL",!n)}else{const n=!!(await Tt.Chrome.Storage.getLocal(Vn))[Vn];await Tt.Storage.setBucket(Vn,"SYNC",!n)}this.getGroups(),this.addListeners()},async getGroups(){const t=Tt.Settings.get(Vn);Ut=t??[]},async add(t,e,n,i){if(Ut.find(u=>u.groupName==t)==null){const u={groupName:t,maxTimeAllowed:e,websites:n,elapsedTime:i??0};Ut.push(u),await this.saveChanges(),ee.Analytics.event("CREATE_BLOCKED_GROUP")}},get(){return Ut},getByName(t){return Ut.find(e=>e.groupName==t)},async update(t,e,n,i){const a=Ut.find(u=>u.groupName==t);typeof a>"u"||(a.groupName!=e&&ee.Analytics.event("UPDATE_BLOCKED_GROUP_NAME"),a.groupName!="Default"&&(a.groupName=e),a.maxTimeAllowed!=n&&ee.Analytics.event("UPDATE_BLOCKED_GROUP_MAX_TIME_ALLOWED",{minutes:n/60}),a.maxTimeAllowed=n,a.websites=i,await this.saveChanges())},async updateWebsites(t,e){const n=Ut.find(i=>i.groupName==t);typeof n>"u"||(n.websites=e,await this.saveChanges())},async addWebsite(t,e){const n=Ut.find(i=>i.groupName==t);if(!(typeof n>"u"))return n.websites.find(i=>i==e)==null?(n.websites.push(e),await this.saveChanges(),!0):!1},async clearElapsedTime(){this.get().forEach(e=>e.elapsedTime=0),await this.saveChanges(),await Tt.BlockedAllWebsites.clearElapsedTime()},async delete(t){const e=Ut.findIndex(n=>n.groupName==t);e>-1&&(Ut.splice(e,1),await this.saveChanges(),ee.Analytics.event("DELETE_BLOCKED_GROUP"))},isBlockable(t){return t=t.toLowerCase(),Ut.find(e=>e.websites.find(n=>da(n,t)))!=null},getBlockedGroupByDomain(t){return t==null?null:(t=t.toLowerCase(),Ut.find(e=>e.websites.find(n=>da(n,t))))},getBlockedGroupsByDomain(t){return Ut.filter(e=>e.websites.find(n=>da(n,t)))},async migrate(){if(this.needMigrate()){const t=Tt.Settings.get(vu);let e=Tt.Settings.get(bu);e==null?e=Vl:e=e*ii;let n=await Tt.Storage.get("elapsedTime");if((isNaN(n)||n==null)&&(n=0),t!=null){const i=Object.keys(t);await this.add(jo,e,i,n)}else await this.add(jo,e,[],n)}},needMigrate(){return Tt.Settings.get(Vn)==null},async importBlockedsites(){Ut=[];const t=Tt.Settings.get(vu);if(t!=null){const e=Object.keys(t);let n=Tt.Settings.get(bu);n==null?n=Vl:n=n*ii,await this.add(jo,n,e,0)}},async incrementElapsedTime(t){const e=this.getByName(t);e&&(e.elapsedTime+=1,await this.saveChanges())},async saveChanges(){await Tt.Storage.set({blockedGroups:Ut})},addListeners(){ee.PubSub.listen("Settings.data.refreshed",async(t,e)=>{(e.changes.blockedGroups||e.changes.disableSync)&&(e.changes.disableSync&&(e.disableSync===!1?await Tt.Storage.setBucket(Vn,"SYNC"):await Tt.Storage.setBucket(Vn,"LOCAL")),this.getGroups())})}},ha=ft.createScopedLog("Message");class Jy{constructor(e){xe(this,"DEFAULT_NS","__default");xe(this,"msgArray",null);xe(this,"msgString",null);xe(this,"namespace",null);if(this.namespace=this.DEFAULT_NS,e.indexOf(":")>-1&&(this.namespace=e.substr(0,e.indexOf(":")),e=e.substr(e.indexOf(":")+1,e.length)),e.indexOf(".")>-1){const n=e.split(".");this.msgArray=[n[0]||"*",n[1]||"*",n[2]||"*",n[3]||"*"],this.msgString=this.msgArray.join(".")}else this.msgArray=[e],this.msgString=e}matches(e){if(this.msgString===e)return ha("matches",this.msgString+" matches "+e+"?","YES","TRACE"),!0;const n=this.msgArray,i=e.split(".");if((n==null?void 0:n.length)!==i.length)return ha("matches",this.msgString+" matches "+e+"?","NO","TRACE"),!1;let a="",u="";const d=n.length>=i.length?n.length:i.length;for(let y=0;y<d;y++){if(n[y]!=="*"&&i[y]!=="*"&&n[y]!==i[y])return ha("matches",this.msgString+" matches "+e+"?","NO","TRACE"),!1;a+=n[y]==="*"?"0":"1",u+=i[y]==="*"?"0":"1"}return ha("matches",this.msgString+" matches "+e+"?",a>=u?"YES":"NO","TRACE"),a>=u}toString(){return this.msgString}getOriginator(){var e,n;return((e=this.msgArray)==null?void 0:e[0])==="*"?null:(n=this.msgArray)==null?void 0:n[0]}getDescriptor(){var e,n;return((e=this.msgArray)==null?void 0:e[3])==="*"?null:(n=this.msgArray)==null?void 0:n[3]}}const Ge=ft.createScopedLog("StayFocusd"),xi=yu();let Q;const wu="onboarding-opened-at",ev={firstInstallAllowance:60,interval:1,timer:null,apiURL:"https://www.stayfocusd.com",redirectURL:"https://www.stayfocusd.com/blocked/",uninstallUrl:"https://www.stayfocusd.com/goodbye/",onboardingUrl:"https://www.stayfocusd.com/extension-get-started",currentURL:null,version:null,selectedTabID:null,active:null,popupPort:null,initAPI:function(t){return Q=t,Q.mixin("StayFocusd",{getActiveDays:this.getActiveDays.bind(this),getActiveHours:this.getActiveHours.bind(this),getActiveHoursQueue:this.getActiveHoursQueue.bind(this),getAPIURL:()=>this.apiURL,getCurrentURL:()=>this.currentURL,getResetTime:this.getResetTime.bind(this),getResetTimeQueue:this.getResetTimeQueue.bind(this),getTotalSecondsRemaining:this.getTotalSecondsRemaining.bind(this),isActive:this.isActive.bind(this),isFirstInstallAllowanceActive:this.isFirstInstallAllowanceActive.bind(this),isUpdatePopupDisabled:this.isUpdatePopupDisabled.bind(this),localizeHTML:this.localizeHTML.bind(this),setActiveDays:this.setActiveDays.bind(this),setActiveHoursQueue:this.setActiveHoursQueue.bind(this),setResetTimeQueue:this.setResetTimeQueue.bind(this),updateBadge:this.updateBadge.bind(this),hideBadge:this.hideBadge.bind(this),postTimerUpdatedMessage:this.postTimerUpdatedMessage.bind(this),onInstalled:this.onInstalled.bind(this),onUpdated:this.onUpdated.bind(this),activated:this.activated.bind(this),setActivated:this.setActivated.bind(this),isActivateSwitchShown:this.isActivateSwitchShown.bind(this),setActivateSwitchShown:this.setActivateSwitchShown.bind(this)})},async init(){Ge("init","Initializing StayFocusd",null,"DEBUG"),this.initCheckingTab(),await this.initSettings(),await this.initRemoteConfig(),this.initAnalytics(),this.initBugsnag(),await this.initRequirements(),await this.initBlockedGroups(),this.initBlockedGroupTimer(),await this.initWhitelist(),await this.initNuclearOption(),await this.initNotification(),this.initListeners(),this.initUninstallURL(),await this.initWebUsageCollect(),this.initScheduleJobs(),await this.forceOnboardingOnNewTab()},initBlockedGroupTimer(){const t=()=>this.isNewDay(),e=u=>this.killPage(u),n=u=>this.updateBadge(u),i=()=>this.postTimerUpdatedMessage(),a=u=>this.showNotification(u);Q.BlockedGroupsTimer.init(t,e,n,i,a)},async initSettings(){await Q.Settings.initAsync(),await Q.Storage.setBucket(["backupKeys","disableUpdatePopup","isUpdated","previousVersion","productivityBypass"]),Q.Storage.addOnChangeListener(async(t,e)=>{Ge("init",e+" storage changed",t),Q.Settings.refresh(()=>{Q.PubSub.publish("Settings.data.refreshed",{areaName:e,changes:t})})}),this.isFirstInstall()&&this.setFirstInstallAllowance()},async initRemoteConfig(){await Q.RemoteConfig.init(),await Q.Chrome.Alarms.ensure("remote-config",{periodInMinutes:30}),Q.Chrome.Alarms.addListener("onAlarm",async t=>{t.name==="remote-config"&&await Q.RemoteConfig.refresh()}),await Q.RemoteConfig.refresh()},initAnalytics(){Q.Analytics.init()},initBugsnag(){Q.Bugsnag.init("background")},async initWebUsageCollect(){await Q.WebUsage.init(),chrome.runtime.onConnect.addListener(t=>{t.name=="getUsageSummaryData"&&t.onMessage.addListener(async e=>{if(e.message=="usage.getUsageSummaryData.request"){const n=await Q.WebUsage.getUsageDatabase(),i=await n.sessionsRepo.findSessions(e.startDate,e.endDate),a=await n.adsRepo.findAds(e.startDate,e.endDate);t.postMessage({message:"usage.getUsageSummaryData.response",startDate:e.startDate,endDate:e.endDate,sessions:i,ads:a})}})})},initCheckingTab(){setInterval(()=>{Q.Chrome.Tab.getSelected(void 0,t=>{t&&Q.PubSub.publish("StayFocusd.tab.activity",{tabID:t.id,tab:t})})},1e3)},initScheduleJobs(){Q.ScheduleJobs.init()},async initRequirements(){await Q.Requirements.init()},async initBlockedGroups(){await Q.BlockedGroupsRepository.init(),await Q.BlockedGroupsRepository.migrate(),this.isNewDay()===!0&&Q.BlockedGroupsRepository.clearElapsedTime()},async initWhitelist(){Ge("initWhitelist","Initializing whitelist",null,"DEBUG"),await Q.WhitelistRepository.init(),await Q.WhitelistRepository.migrate()},async initNuclearOption(){Ge("initNuclearOption","Initializing Nuclear Option",null,"DEBUG"),await pn.initAsync(),Ge("initNuclearOption","Nuclear Option initialized",null,"DEBUG")},async initNotification(){Ge("initNotification","Initializing Notification",null,"DEBUG"),await bi.initAsync(),Ge("initNotification","Notification initialized",null,"DEBUG")},showNotification(t){bi.isset(t)&&bi.show("block")},initListeners(){Ge("initListeners","Initializing listeners",null,"DEBUG"),Q.PubSub.subscribe({async:!0,handler:async(t,e,n)=>{var d;function i(y){return chrome.runtime.lastError&&Ge("initListeners","runtime.lastError",chrome.runtime.lastError),y!=null&&typeof y=="function"?y:()=>!0}if(n=i(n),!e||!e.tabID||(d=e.sender)!=null&&d.tab)return!0;const a=await Q.Chrome.Tab.get(e.tabID);if(!a||a.status==="loading")return!0;const u=(a.url==""?a.pendingUrl:a.url)??"";return/^about:|^chrome-extension:|^chrome:\/\//i.test(u)||Q.Chrome.Message.sendToTab(e.tabID,{message:t.toString(),payload:e},n),!0}}),Q.Chrome.Message.on.addListener((t,e,n)=>(t.payload=t.payload||{},t.payload.sender=e||{},/^proxy-service.*$/.test(t.type)||e.tab&&Q.PubSub.publish({message:t.message,payload:t.payload,onPublish:typeof n=="function"?n:()=>{}}),!0)),Q.PubSub.listen("ActivityMonitor.component.initialized",()=>{Q.Chrome.Tab.getSelected(void 0,t=>{t&&Q.PubSub.publish("StayFocusd.tab.selected",{tab:t,tabID:t.id,blockable:this.isBlockable(t.url??"")})})}),Q.PubSub.listen({message:"ActivityMonitor.overlay.hidden",async:!0,handler:(t,e,n)=>{const i={countdownStarted:Q.BlockedGroupsTimer.startCountdown(this.currentURL)};typeof n=="function"&&n(i)}}),Q.PubSub.listen({message:"ActivityMonitor.overlay.shown",async:!0,handler:(t,e,n)=>{const i={countdownStopped:Q.BlockedGroupsTimer.stopCountdown()};typeof n=="function"&&n(i)}}),Q.Chrome.Extension.addListener("onConnect",t=>{t.name==="popup"&&this.onPopupConnected(t)}),Q.Chrome.Tab.getSelected(void 0,async t=>{await this.onTabStateChange(t)}),Q.Chrome.Tab.addListener("onActivated",()=>{Q.Chrome.Tab.getSelected(void 0,async t=>{await this.onTabStateChange(t)})}),Q.Chrome.Tab.addListener("onUpdated",()=>{Q.Chrome.Tab.getSelected(void 0,async t=>{await this.onTabStateChange(t)})}),Q.Chrome.Tab.addListener("onRemoved",()=>{Q.Chrome.Tab.getSelected(void 0,t=>{typeof t>"u"&&Q.BlockedGroupsTimer.stopCountdown()})}),Q.Chrome.Window.addListener("onRemoved",()=>{Q.BlockedGroupsTimer.stopCountdown()}),Q.Chrome.Window.addListener("onFocusChanged",()=>{Q.Chrome.Tab.getSelected(void 0,async t=>{await this.onTabStateChange(t)})})},async onInstalled(t){await chrome.tabs.create({url:this.onboardingUrl,active:!0}),Ge("onInstalled","Installed extension",t,"INFO");const{promise:e,resolve:n}=ft.getDecoupledPromise();chrome.runtime.onConnect.addListener(i=>{i.name=="startOnboardingAfterInstall"&&i.onMessage.addListener(async a=>{a.message=="start-onboarding"&&n()})}),await e,Q.Settings.set({isNewUser:!0}),await this.openOnboarding()},async onUpdated(t){if(!t.previousVersion)return;const e=await Q.Storage.get("previousVersion"),n=await Q.Storage.get("disableUpdatePopup");e!==t.previousVersion&&(n!=="true"&&n!==!0&&xi.showBadge("NEW",gs.GREEN),Q.Storage.set({isUpdated:!0,previousVersion:t.previousVersion}))},async openOnboarding(){Ge("openOnboarding","Opening onboarding in new tab",void 0,"INFO"),await Q.Storage.set({[wu]:Date.now()}),await Q.Chrome.Tab.update({url:this.getOptionsPage(),active:!0})},async forceOnboardingOnNewTab(){Ge("initOnboarding","initializing...",void 0,"INFO");const t=await this.getFirstSensorTowerInstallDate();Q.Chrome.Tab.addListener("onCreated",async e=>{if(Date.now()-t<pr)return;Ge("initOnboarding","tab.onCreated",e,"DEBUG");const n=Q.RemoteConfig.get("newTabTimeout"),i=await Q.Requirements.isOnboardingCompleted(),a=await Q.Storage.get(wu)??0,u=Date.now()>=a+n;!i&&u&&(await Q.Analytics.event("OPENING_ONBOARDING_ON_TAB_CREATED"),await this.openOnboarding())})},initUninstallURL(){Q.Chrome.Extension.setUninstallURL(this.uninstallUrl)},onPopupConnected(t){Ge("onPopupConnected","Popup connected",t,"DEBUG"),this.popupPort=t,t.onMessage.addListener(async e=>{const n=new Jy(e.message);if(n.matches("*.domain.add.BLACKLIST")){const i=e.payload.groupName,a=e.payload.domain,u=await Q.BlockedGroupsRepository.addWebsite(i,a);t.postMessage({message:"StayFocusd.domain.added."+n.getDescriptor(),payload:{success:u}}),await this.checkURL(e.payload.domain)}if(n.matches("*.domain.add.WHITELIST")){const i=[e.payload.domain],a=await Q.WhitelistRepository.add(i);t.postMessage({message:"StayFocusd.domain.added."+n.getDescriptor(),payload:{success:a}}),await this.checkURL(e.payload.domain)}if(n.matches("PopupController.toggle.*.*")){const{value:i}=e.payload;this.setActivated(i),t.postMessage({message:"StayFocusd.toggled",payload:{value:this.activated()}}),Q.Chrome.Tab.getSelected(void 0,async a=>{await this.onTabStateChange(a)})}return!0}),t.onDisconnect.addListener(()=>{this.popupPort=null}),this.postTimerUpdatedMessage()},postTimerUpdatedMessage:function(){Q.PubSub.publish("StayFocusd.timer.updated",{tabID:this.selectedTabID,displayTimer:this.getDisplayTimer()}),this.popupPort&&this.popupPort.postMessage({message:"StayFocusd.timer.updated",payload:{displayTimer:this.getDisplayTimer()}})},onTabStateChange:async function(t){if(typeof t>"u")return;Ge("onTabStateChange","Tab state changed",t),this.currentURL=t.url,this.selectedTabID=t.id,await this.checkURL(t.url);const e=this.isBlockable(t.url);Q.PubSub.publish("StayFocusd.tab.selected",{tab:t,tabID:t.id,blockable:e})},checkURL:async function(t){t=typeof t>"u"||typeof t=="string"&&t.length===0?this.currentURL:t,Ge("checkURL","Checking url: ",t),this.isNewDay()===!0&&Q.BlockedGroupsRepository.clearElapsedTime(),Q.BlockedGroupsTimer.stopCountdown(),this.isBlockable(t)?(Q.Chrome.Tab.getSelected(void 0,e=>{this.setBadgeIcon(e,wi.BLOCKED)}),this.isKillable(t)?this.killPage(t):Q.BlockedGroupsTimer.startCountdown(t)):Q.WhitelistRepository.isExists(t)?Q.Chrome.Tab.getSelected(void 0,n=>{this.setBadgeIcon(n,wi.ALLOWED)}):Q.Chrome.Tab.getSelected(void 0,n=>{this.setBadgeIcon(n,wi.DEFAULT)})},setBadgeIcon(t,e){t&&(this.activated()?pn.isActive()?xi.setIcon(wi.NUCLEAR,t.id):xi.setIcon(e,t.id):xi.setIcon(wi.DEACTIVATED,t.id))},isKillable:function(t){return Q.BlockedGroupsTimer.isMaxTimeAllowedExceeded(t)||pn.isActive()},isProtectedURL:function(t){return t===null||typeof t>"u"||t.length===0?!1:t.indexOf(this.redirectURL)===0||t.indexOf("rescueMe")>=0||t.indexOf("chrome")>=0&&t.indexOf("chrome")<t.indexOf("://")&&(t.indexOf("sf")>-1||t.indexOf("devtools")>-1)},isBlockable:function(t){if(!this.activated()||this.isProtectedURL(t)||t===null||typeof t>"u"||t===""||this.isActive()===!1)return!1;const e=Q.BlockedGroupsRepository.isBlockable(t),n=Q.WhitelistRepository.isExists(t),i=pn.isBlockable(e,n);if(Q.Settings.get("isBlockAllWebsites")&&!n||i||e&&!n)return!0;if(e&&n){const u=Q.BlockedGroupsRepository.getBlockedGroupByDomain(t),d=(u==null?void 0:u.websites.find(p=>Q.Domain.isMoreGeneralURL(p,t)))??"",h=Q.WhitelistRepository.isExists(t)?t:"";return d===t&&h!==t?!0:d!==t&&h===t?!1:Fl.isMoreGeneralURL(h,d)}return n||pn.isActive()&&!i,!1},isNewDay:function(){let t=!1;const e=new Date;let n=e.getTime(),i=Q.Settings.get("resetTimestamp"),a=this.getResetTime();if(/null/.test(a)&&(a="00:00",this.setResetTime(a)),typeof i>"u"||i===null||i===""){const u=a.split(":"),d=Math.floor(u[0]),y=Math.floor(u[1]);i=new Date(e.toDateString()+" "+d+":"+y).getTime(),this.updateResetTimestamp(a)}return i=Math.floor(i),n=Math.floor(n),n>i&&(t=!0,this.updateResetTimestamp(a)),t},updateBadge:function(t,e=!1){let n=!1,i;const a=Math.floor(t),u=a.toString();e&&a<=60?(n=!0,i=gs.BLACK):a<=30?(n=!0,i=gs.RED):a<=60&&(n=!0,i=gs.YELLOW),n?xi.showBadge(u,i,this.selectedTabID??void 0):this.hideBadge()},hideBadge(){xi.hideBadge(this.selectedTabID??void 0)},killPage:function(t){return Ge("killPage","Killing page",null,"INFO"),Q.BlockedGroupsTimer.stopCountdown(),Q.Chrome.Window.getLastFocused(e=>{typeof e<"u"&&Q.Chrome.Tab.getAllInWindow(e.id,n=>{for(const i in n)if(n[i].highlighted)if(Q.BlockedGroupsTimer.isMaxTimeAllowedExceeded(t)||pn.isActive()&&!pn.hasSmartBomb()){const a=Q.Settings.get("customStayFocusdMsg")||"";Q.Chrome.Tab.update(n[i].id,{url:this.redirectURL+"?background&customMsg="+encodeURIComponent(a)})}else pn.isActive()&&pn.hasSmartBomb()&&Q.PubSub.publish("StayFocusd.smartBomb.activate",{tabID:n[i].id,smartBomb:pn.getSmartBomb()})})}),!1},getTotalSecondsRemaining:function(){return Q.BlockedGroupsTimer.getTotalSecondsRemaining(this.currentURL)},getDisplayTimer:function(){function t(){const i="Default",a=ee.BlockedGroupsRepository.getByName(i);return{groupName:i,time:si.formatDurationInSeconds(a.maxTimeAllowed-a.elapsedTime),nuclear:!1}}if(ee.NuclearOption.isActive()){const i=ee.NuclearOption.getExpiration();if(i){const a=(i-Date.now())/Wl;return{groupName:ee.Chrome.Translation.get("nuclear"),time:si.formatDurationInSeconds(a),nuclear:!0}}}const e=Q.BlockedAllWebsites.getTime();if(e!=null)return{groupName:null,time:si.formatDurationInSeconds(e.allowedTime-e.elapsedTime),nuclear:!1};if(this.currentURL==null||this.currentURL=="")return t();const n=Q.BlockedGroupsRepository.getBlockedGroupByDomain(this.currentURL);return n==null?t():{groupName:n.groupName,time:si.formatDurationInSeconds(n.maxTimeAllowed-n.elapsedTime),nuclear:!1}},getDateString:function(){const t=new Date,e=t.getMonth()+1,n=t.getDate();return t.getFullYear()+"-"+e+"-"+n},setActiveDays:function(t){let e=null;t.length===0?e="none":e=t.join("|"),Ge("setActiveDays","Setting active days",t),Q.Settings.set({activeDays:e}),Q.NuclearOption.updateActiveDays(this.getActiveDays(!0))},getActiveDays:function(t=!1){const e=Q.Settings.get("activeDays");if(e==="none")return[];if(typeof e>"u"||e===null||e.length===0)return this.setActiveDays([0,1,2,3,4,5,6]),[0,1,2,3,4,5,6];if(typeof e!="string"||e.indexOf("|")===-1)return[Number(e)];const n=e.split("|"),i=[];for(let a=0;a<n.length;a++)i[a]=Number(n[a]);return t?this.getActiveDaysAsWeekArray(i):i},getActiveDaysAsWeekArray:function(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];e[i]=!0}for(let n=0;n<7;n++)e[n]=e[n]||!1;return e},isActiveDay:function(){const e=new Date().getDay(),n=this.getActiveDays();return typeof n>"u"||n===null||n.length===0?!1:n.inArray(e)},setActiveHours:function(t,e){Ge("setActiveHours","Setting active hours",{startTime:t,endTime:e}),Q.Settings.set({activeHours:t+"|"+e})},getActiveHours:function(){let t=!1,e=!1;const n=this.getActiveHoursQueue();if(n!==!1){const u=n;(new Date().getTime()>u.timestamp||this.isFirstInstallAllowanceActive())&&(t=u.startTime,e=u.endTime,this.clearActiveHoursQueue(),this.setActiveHours(t,e))}if(t===!1&&e===!1){let u=Q.Settings.get("activeHours");(typeof u>"u"||u===null||u==="")&&(this.setActiveHours("00:00","23:59"),u=Q.Settings.get("activeHours"));const d=u.split("|");t=d[0],e=d[1]}const i=t.split(":"),a=e.split(":");return{startTime:t,endTime:e,startHour:i[0],startMin:i[1],startHourInt:parseInt(i[0],10),startMinInt:parseInt(i[1],10),endHour:a[0],endMin:a[1],endHourInt:parseInt(a[0],10),endMinInt:parseInt(a[1],10)}},isActiveHour:function(){const t=this.getActiveHours(),e=new Date,n=e.getHours(),i=e.getMinutes();return this.isStartTimeLater(t)===!0?this.isBetween(n,i,t.startHourInt,t.startMinInt,23,59)||this.isBetween(n,i,0,0,t.endHourInt,t.endMinInt):this.isBetween(n,i,t.startHourInt,t.startMinInt,t.endHourInt,t.endMinInt)},isBetween:function(t,e,n,i,a,u){return t>n&&t<a?!0:t===n&&t===a?e>=i&&e<=u:t===n&&e>=i||t===a&&e<=u},isStartTimeLater:function(t){return t.startHourInt===t.endHourInt&&t.startMinInt>=t.endMinInt?!0:t.startHourInt>t.endHourInt},setActiveHoursQueue:function(t,e){const a=new Date().getTime()+Q.Date.hoursToMilliseconds(24)+"|"+t+"|"+e;Ge("setActiveHoursQueue","Setting active hours queue",a),Q.Settings.set({activeHoursQueue:a})},getActiveHoursQueue:function(){const t=Q.Settings.get("activeHoursQueue");if(typeof t>"u"||t===null||t==="")return!1;const e=t.split("|");return{timestamp:parseInt(e[0]),startTime:e[1],endTime:e[2]}},clearActiveHoursQueue:function(){Ge("clearActiveHoursQueue","Clearing active hours queue"),Q.Settings.remove("activeHoursQueue")},isActive:function(){return pn.isActive()===!0?!0:this.isActiveDay()===!0&&this.isActiveHour()===!0},activated:function(){return Q.Settings.get("activated",!0)},setActivated:function(t){if(t===!1){if(!confirm(ee.Chrome.Translation.get("areYouSure"))||!confirm(ee.Chrome.Translation.get("disableExtension1"))||!confirm(ee.Chrome.Translation.get("disableExtension2"))||!confirm(ee.Chrome.Translation.get("disableExtension3"))||!confirm(ee.Chrome.Translation.get("disableExtension4"))||!confirm(ee.Chrome.Translation.get("disableExtension5"))||!confirm(ee.Chrome.Translation.get("disableExtension6"))||!confirm(ee.Chrome.Translation.get("disableExtension7"))||!confirm(ee.Chrome.Translation.get("disableExtension8"))||!confirm(ee.Chrome.Translation.get("disableFinalWarning")))return!1;alert(ee.Chrome.Translation.get("extensionDisabled"))}return Q.Settings.set({activated:t}),this.checkURL(),Q.Analytics.event(t?"EXTENSION_ACTIVATED":"EXTENSION_DEACTIVATED"),!0},isActivateSwitchShown:function(){return Q.Settings.get("isActivateSwitchShown",!0)},setActivateSwitchShown:function(t){Q.Settings.set({isActivateSwitchShown:t})},updateResetTimestamp:function(t){const e=t.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),u=new Date(new Date().toDateString()+" "+n+":"+i).getTime()+864e5;Ge("updateResetTimestamp","Updating reset timestamp to: "+u),Q.Settings.set({resetTimestamp:u})},setResetTime:function(t){Ge("setResetTime","Setting reset time to: "+t),Q.Settings.set({resetTime:t})},getResetTime:function(){let t=Q.Settings.get("resetTime");const e=this.getResetTimeQueue(),n="00:00";if(e!==!1){const a=new Date().getTime(),u=e;(a>u.timestamp||this.isFirstInstallAllowanceActive())&&(t=u.resetTime,this.clearResetTimeQueue(),this.setResetTime(t),this.updateResetTimestamp(t))}return(typeof t>"u"||t===null||t==="")&&(this.setResetTime(n),t=n,this.updateResetTimestamp(t)),t},setResetTimeQueue:function(t){const i=new Date().getTime()+Q.Date.hoursToMilliseconds(24)+"|"+t;Ge("setResetTimeQueue","Setting reset time queue: "+i),Q.Settings.set({resetTimeQueue:i})},getResetTimeQueue:function(){const t=Q.Settings.get("resetTimeQueue");if(ft.isEmpty(t))return!1;const e=t.split("|");return{timestamp:e[0],resetTime:e[1]}},clearResetTimeQueue:function(){Ge("clearResetTimeQueue","Clearing reset time queue"),Q.Settings.remove("resetTimeQueue")},isFirstInstall:function(){return typeof Q.Settings.get("firstInstallDate")!="string"},async getFirstSensorTowerInstallDate(){let t=await Q.Storage.get("firstSensorTowerInstallDate");return typeof t!="number"&&(t=Date.now(),await Q.Storage.set({firstSensorTowerInstallDate:t})),t},getOptionsPage:function(){return Ht.runtime.getURL("options.html")},isUpdatePopupDisabled:function(){const t=Q.Settings.get("disableUpdatePopup");return t===!0||t==="true"},setFirstInstallAllowance:function(){const t=new Date;Q.Settings.set({firstInstallDate:t.toDateString()}),t.setMinutes(t.getMinutes()+this.firstInstallAllowance),Ge("setFirstInstallAllowance","Setting first install allowance to: "+t.getTime()),Q.Settings.set({firstInstallAllowanceExpiration:t.getTime()})},isFirstInstallAllowanceActive:function(){const t=new Date;return Q.Settings.get("firstInstallAllowanceExpiration")>t.getTime()},localizeHTML:function(t){Ge("localizeHTML","Localizing HTML");const e=t.getElementsByTagName("*");for(let n=0;n<e.length;n++)e[n].dataset&&e[n].dataset.i18n&&(e[n].innerHTML=Q.Chrome.Translation.get(e[n].dataset.i18n))}};Array.prototype.inArray=function(t){for(const e in this)if(this.hasOwnProperty(e)&&this[e]==t)return!0;return!1};const Au="whitelist",En="whitelistNew";let Cn,ir=[];const xu=[ee,jl,Nh,Ir,Ih,Mh,Fl,ft,Rh,Xn,Bh,Rt,Uh,Fh,Vm,Gy,mu,bi,pn,Qy,Xy,Yy,{initAPI(t){return Cn=t,Cn.mixin("WhitelistRepository",{init:this.init.bind(this),add:this.add.bind(this),getAll:this.getAll.bind(this),isExists:this.isExists.bind(this),delete:this.delete.bind(this),migrate:this.migrate.bind(this),importWhitelist:this.importWhitelist.bind(this)})},async init(){if(await ee.Settings.get("disableSync")===!0){const n=!!(await Cn.Chrome.Storage.getSync(En))[En];await ee.Storage.setBucket(En,"LOCAL",!n)}else{const n=!!(await Cn.Chrome.Storage.getLocal(En))[En];await ee.Storage.setBucket(En,"SYNC",!n)}this.getWhitelist(),this.addListeners()},getWhitelist(){const t=Cn.Settings.get(En);ir=t??[]},async add(t){let e=!1;for(let n=0;n<t.length;n++){const i=t[n];i&&ir.find(a=>a==i)==null&&(e=!0,ir.push(i),await this.saveChanges())}return e},getAll(){return ir},async delete(t){const e=ir.findIndex(n=>n==t);e>-1&&(ir.splice(e,1),await this.saveChanges())},isExists(t){return t==null?!1:(t=t.toLowerCase(),ir.find(e=>da(e,t))!=null)},async migrate(){if(this.needMigrate()){const t=Cn.Settings.get(Au);if(t!=null){const e=Object.keys(t);await this.add(e)}}},needMigrate(){return Cn.Settings.get(En)==null},async importWhitelist(){ir=[];const t=Cn.Settings.get(Au);if(t!=null){const e=Object.keys(t);await this.add(e)}},async saveChanges(){await Cn.Storage.set({[En]:ir})},addListeners(){ee.PubSub.listen("Settings.data.refreshed",async(t,e)=>{(e.changes.whitelistNew||e.changes.disableSync)&&(e.changes.disableSync&&(e.disableSync===!1?await Cn.Storage.setBucket(En,"SYNC"):await Cn.Storage.setBucket(En,"LOCAL")),this.getWhitelist())})}},ev];ee.mixin({mixin:ee.mixin.bind(ee),PubSub:mu});for(let t=0;t<xu.length;t++){const e=xu[t];typeof e=="object"&&e!==null&&typeof e.initAPI=="function"&&e.initAPI(ee)}jl.initAPI(ee),Ir.initAPI(ee);const Si=ft.createScopedLog("SmartBomb"),tv={timer:null,interval:1,smartBomb:{},init:function(){this.addListeners()},activate:function(t){Si("activate","Activating SmartBomb",null,"DEBUG"),this.smartBomb=t,clearInterval(this.timer),this.timer=setInterval(this.tick.bind(this),this.interval*1e3)},addListeners:function(){ee.PubSub.listen({message:"*.smartBomb.activate",handler:(t,e)=>{this.activate(e.smartBomb)}})},bomb:function(){Si("bomb","Bombing"),this.smartBomb.multimedia&&this.bombMultimedia(),this.smartBomb.images&&this.bombImages(),this.smartBomb.forms&&this.bombForms(),this.smartBomb.logins&&this.bombLogins()},bombMultimedia:function(){Si("bombMultimedia","- Bombing multimedia"),Et("embed,object,applet,canvas,video,iframe").each((t,e)=>{this.replace(Et(e))})},bombImages:function(){Si("bombImages","- Bombing images"),Et("img").each((t,e)=>{this.replace(Et(e))})},bombForms:function(){Si("bombForms","- Bombing forms"),Et("input,select,textarea").each((t,e)=>{this.replace(Et(e))})},bombLogins:function(){Si("bombLogins","- Bombing logins"),Et("input[type=password]").each((t,e)=>{this.replace(Et(e))})},replace:function(t){if(t.attr("class")==="StayFocusd-smartBombed")return!1;const e=t.width(),n=t.height();if(t.css("display")==="none")return!1;const a='<div style="height:'+n+"px;width:"+e+"px;background:url("+Ht.runtime.getURL("common/img/smartBombBG.png")+') #000" class="StayFocusd-smartBombed"></div>';return t.replaceWith(a),!0},tick:function(){this.bomb()}},nv=ee.Chrome.Extension.getID();function rv(){ee.Chrome.Message.on.addListener(function(t,e,n){return t.payload=t.payload||{},t.payload.sender=e||{},e.tab||ee.PubSub.publish({message:t.message,payload:t.payload,onPublish:typeof n=="function"?n:function(){}}),!0}),ee.PubSub.subscribe({async:!0,handler:function(t,e,n){e=e||{};function i(a){return chrome.runtime.lastError&&un.log("Content.js subscribe to all messages","runtime.lastError",chrome.runtime.lastError),a!=null&&typeof a=="function"?()=>a:()=>!0}return n=i(n),(!e.sender||e.sender.id!==nv)&&ee.Chrome.Message.send(null,{message:t.toString(),payload:e},null,n),!0}})}const $b="",iv=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(t=>[t.name,t]),sv=new Map(iv);class Fo extends Error{constructor(n){super(Fo._prepareSuperMessage(n));xe(this,"name","NonError")}static _prepareSuperMessage(n){try{return JSON.stringify(n)}catch{return String(n)}}}const av=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],$o=new WeakSet,ov=t=>{$o.add(t);const e=t.toJSON();return $o.delete(t),e},Su=t=>sv.get(t)??Error,Wo=({from:t,seen:e,to:n,forceEnumerable:i,maxDepth:a,depth:u,useToJSON:d,serialize:y})=>{if(!n)if(Array.isArray(t))n=[];else if(!y&&_u(t)){const p=Su(t.name);n=new p}else n={};if(e.push(t),u>=a)return n;if(d&&typeof t.toJSON=="function"&&!$o.has(t))return ov(t);const h=p=>Wo({from:p,seen:[...e],forceEnumerable:i,maxDepth:a,depth:u,useToJSON:d,serialize:y});for(const[p,v]of Object.entries(t)){if(v&&v instanceof Uint8Array&&v.constructor.name==="Buffer"){n[p]="[object Buffer]";continue}if(v!==null&&typeof v=="object"&&typeof v.pipe=="function"){n[p]="[object Stream]";continue}if(typeof v!="function"){if(!v||typeof v!="object"){try{n[p]=v}catch{}continue}if(!e.includes(t[p])){u++,n[p]=h(t[p]);continue}n[p]="[Circular]"}}for(const{property:p,enumerable:v}of av)typeof t[p]<"u"&&t[p]!==null&&Object.defineProperty(n,p,{value:_u(t[p])?h(t[p]):t[p],enumerable:i?!0:v,configurable:!0,writable:!0});return n};function lv(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY,useToJSON:i=!0}=e;return typeof t=="object"&&t!==null?Wo({from:t,seen:[],forceEnumerable:!0,maxDepth:n,depth:0,useToJSON:i,serialize:!0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t}function cv(t,e={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(uv(t)){const i=Su(t.name);return Wo({from:t,seen:[],to:new i,maxDepth:n,depth:0,serialize:!1})}return new Fo(t)}function _u(t){return!!t&&typeof t=="object"&&"name"in t&&"message"in t&&"stack"in t}function uv(t){return!!t&&typeof t=="object"&&"message"in t&&!Array.isArray(t)}var dv=Object.defineProperty,hv=Object.defineProperties,fv=Object.getOwnPropertyDescriptors,Tu=Object.getOwnPropertySymbols,gv=Object.prototype.hasOwnProperty,pv=Object.prototype.propertyIsEnumerable,Eu=(t,e,n)=>e in t?dv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cu=(t,e)=>{for(var n in e||(e={}))gv.call(e,n)&&Eu(t,n,e[n]);if(Tu)for(var n of Tu(e))pv.call(e,n)&&Eu(t,n,e[n]);return t},ku=(t,e)=>hv(t,fv(e)),mv=(t,e,n)=>new Promise((i,a)=>{var u=h=>{try{y(n.next(h))}catch(p){a(p)}},d=h=>{try{y(n.throw(h))}catch(p){a(p)}},y=h=>h.done?i(h.value):Promise.resolve(h.value).then(u,d);y((n=n.apply(t,e)).next())});function yv(t){let e,n={};function i(){Object.entries(n).length===0&&(e==null||e(),e=void 0)}let a=Math.floor(Math.random()*1e4);function u(){return a++}return{sendMessage(d,y,...h){return mv(this,null,function*(){var p,v;const m={id:u(),type:d,data:y,timestamp:Date.now()};(p=t.logger)==null||p.debug(`[messaging] sendMessage {id=${m.id}} âá`,m,...h);const g=yield t.sendMessage(m,...h),{res:A,err:o}=g??{err:new Error("No response")};if((v=t.logger)==null||v.debug(`[messaging] sendMessage {id=${m.id}} áâ`,{res:A,err:o}),o!=null)throw cv(o);return A})},onMessage(d,y){var h,p,v;if(e==null&&((h=t.logger)==null||h.debug(`[messaging] "${d}" initialized the message listener for this context`),e=t.addRootListener(m=>{var g,A;if(typeof m.type!="string"||typeof m.timestamp!="number"){const P=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(m)}`);throw(g=t.logger)==null||g.error(P),P}(A=t==null?void 0:t.logger)==null||A.debug("[messaging] Received message",m);const o=n[m.type];if(o==null)return;const S=o(m);return Promise.resolve(S).then(P=>{var R;return(R=t==null?void 0:t.logger)==null||R.debug(`[messaging] onMessage {id=${m.id}} âá`,{res:P}),{res:P}}).catch(P=>{var R;return(R=t==null?void 0:t.logger)==null||R.debug(`[messaging] onMessage {id=${m.id}} âá`,{err:P}),{err:lv(P)}})})),n[d]!=null){const m=Error(`[messaging] In this JS context, only one listener can be setup for ${d}`);throw(p=t.logger)==null||p.error(m),m}return n[d]=y,(v=t.logger)==null||v.log(`[messaging] Added listener for ${d}`),()=>{delete n[d],i()}},removeAllListeners(){Object.keys(n).forEach(d=>{delete n[d]}),i()}}}function vv(t){return yv(ku(Cu({},t),{sendMessage(e,n){return n==null?Ht.runtime.sendMessage(e):Ht.tabs.sendMessage(n,e)},addRootListener(e){const n=(i,a)=>e(typeof i=="object"?ku(Cu({},i),{sender:a}):i);return Ht.runtime.onMessage.addListener(n),()=>Ht.runtime.onMessage.removeListener(n)}}))}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var bv=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const Ou=bv;var wv=function(t,e,n){if(Ou(n)||(n={default:n}),!Du(t))return typeof n.default<"u"?n.default:t;typeof e=="number"&&(e=String(e));const i=Array.isArray(e),a=typeof e=="string",u=n.separator||".",d=n.joinChar||(typeof u=="string"?u:".");if(!a&&!i)return t;if(a&&e in t)return Vo(e,t,n)?t[e]:n.default;let y=i?e:Av(e,u,n),h=y.length,p=0;do{let v=y[p];for(typeof v=="number"&&(v=String(v));v&&v.slice(-1)==="\\";)v=Pu([v.slice(0,-1),y[++p]||""],d,n);if(v in t){if(!Vo(v,t,n))return n.default;t=t[v]}else{let m=!1,g=p+1;for(;g<h;)if(v=Pu([v,y[g++]],d,n),m=v in t){if(!Vo(v,t,n))return n.default;t=t[v],p=g-1;break}if(!m)return n.default}}while(++p<h&&Du(t));return p===h?t:n.default};function Pu(t,e,n){return typeof n.join=="function"?n.join(t):t[0]+e+t[1]}function Av(t,e,n){return typeof n.split=="function"?n.split(t):t.split(e)}function Vo(t,e,n){return typeof n.isValid=="function"?n.isValid(t,e):!0}function Du(t){return Ou(t)||Array.isArray(t)||typeof t=="function"}const xv=Vt(wv);var Sv=(t,e,n)=>new Promise((i,a)=>{var u=h=>{try{y(n.next(h))}catch(p){a(p)}},d=h=>{try{y(n.throw(h))}catch(p){a(p)}},y=h=>h.done?i(h.value):Promise.resolve(h.value).then(u,d);y((n=n.apply(t,e)).next())});function _v(){if(!Tv())return!1;const t=Ht.runtime.getManifest();return t.background?t.manifest_version===3?kv():Cv():!1}function Tv(){var t;return!!((t=Ht.runtime)!=null&&t.id)}var Ev=["/_generated_background_page.html"];function Cv(){return typeof window<"u"&&Ev.includes(location.pathname)}function kv(){return typeof window>"u"}function Ov(t,e,n){let i;const a=`proxy-service.${t}`,{onMessage:u,sendMessage:d}=vv(n);function y(h){const p=()=>{},v=new Proxy(p,{apply(m,g,A){return Sv(this,null,function*(){return yield d(a,{path:h,args:A})})},get(m,g,A){return g==="__proxy"||typeof g=="symbol"?Reflect.get(m,g,A):y(h==null?g:`${h}.${g}`)}});return v.__proxy=!0,v}return[function(...p){return i=e(...p),u(a,({data:v})=>{const m=v.path==null?i:xv(i??{},v.path);if(m)return Promise.resolve(m.bind(i)(...v.args))}),i},function(){if(!_v())return y();if(i==null)throw Error(`Failed to get an instance of ${t}: in background, but registerService has not been called. Did you forget to call registerService?`);return i}]}const _i=ft.createScopedLog("ComponentFactory");class Pv{constructor(e){xe(this,"_api");xe(this,"_components",{});xe(this,"_instances",{});xe(this,"_definitions",{Challenge:{model:Promise.resolve().then(()=>Ho),view:Promise.resolve().then(()=>Mv),controller:Promise.resolve().then(()=>zo)},ChallengeOptions:{model:Promise.resolve().then(()=>Ho),view:Promise.resolve().then(()=>Uv),controller:Promise.resolve().then(()=>zo)},ChallengeOverlay:{model:Promise.resolve().then(()=>Ho),view:Promise.resolve().then(()=>$v),controller:Promise.resolve().then(()=>zo)},ActivityMonitorOptions:{model:Promise.resolve().then(()=>Ru),view:Promise.resolve().then(()=>qv),controller:Promise.resolve().then(()=>Bu)},ActivityMonitorOverlay:{model:Promise.resolve().then(()=>Ru),view:Promise.resolve().then(()=>tb),controller:Promise.resolve().then(()=>Bu)},OnboardingOverlay:{model:Promise.resolve().then(()=>nb),view:Promise.resolve().then(()=>rb),controller:Promise.resolve().then(()=>sb)},BlockedPageOnboardingRequiredOverlay:{model:Promise.resolve().then(()=>ab),view:Promise.resolve().then(()=>ob),controller:Promise.resolve().then(()=>cb)}});this._api=e}load(e){const n=e.name,i=e.instance||this.createInstanceID(e.name),a=typeof e.onLoaded=="function"?e.onLoaded:null;_i("load","Loading "+i+" instance of "+n+" component",null,"DEBUG");try{const u=this.get(n,i);typeof a=="function"&&a(u)}catch{if(this._components[n]){const d=this.instantiate(this._components[n],i);typeof a=="function"&&a(d)}else this.require(n,i,a)}}loadAsync(e){return new Promise(n=>{this.load({...e,onLoaded:n})})}require(e,n,i){if(_i("require","Requiring "+n+" instance of "+e+" component",null,"DEBUG"),this._definitions[e]===null)throw Error(`Component named ${e} not found. Options ${Object.keys(this._definitions)}`);const{model:a,view:u,controller:d}=this._definitions[e];Promise.all([Promise.resolve().then(()=>db),a,u,d]).then(async([y,h,p,v])=>{_i("require",`${n} instance of ${e} component require complete`,null,"DEBUG"),this._components[e]=new y.default(e,{Model:h.default,View:p.default,Controller:v.default});const m=this.instantiate(this._components[e],n);typeof i=="function"&&i(m)})}instantiate(e,n){const i=e.name;_i("instantiate","Instantiating "+n+" instance of "+i+" component",null,"DEBUG");const a=e.create("Controller",n),u=e.create("Model",n),d=e.create("View",n);let y=null;return typeof a.collection<"u"&&(y=e.create("Collection",n),a.collection=y,d.collection=y),a.model=u,a.view=d,d.model=u,typeof a.initAPI=="function"&&a.initAPI(ee),this._instances[i]=typeof this._instances[i]=="object"&&this._instances[i]!==null?this._instances[i]:{},this._instances[i][n]={controller:a,model:u,view:d,collection:y},this._instances[i][n]}get(e,n){if(_i("get","Getting "+n+" instance of "+e+" component",null,"TRACE"),e)if(e in this._instances){if(!(n in this._instances[e]))throw new Error("[ComponentFactory.get()] "+n+" instance of "+e+" component has not been loaded yet")}else throw new Error("[ComponentFactory.get()] "+e+" component has not been loaded yet");else throw new Error("[ComponentFactory.get()] Must specify component name");return this._instances[e][n]}getAll(e){if(_i("get","Getting all instances of "+e+" component",null,"TRACE"),e){if(!(e in this._instances))throw new Error("[ComponentFactory.getAll()] "+e+" component has not been loaded yet")}else throw new Error("[ComponentFactory.getAll()] Must specify component componentName");return this._instances[e]}getClass(e,n){if(e){if(!(e in this._components))throw new Error("[ComponentFactory.get()] "+e+" component has not been loaded yet")}else throw new Error("[ComponentFactory.get()] Must specify component name");return this._components[e][n]}getClasses(e){if(e){if(!(e in this._components))throw new Error("[ComponentFactory.get()] "+e+" component has not been loaded yet")}else throw new Error("[ComponentFactory.get()] Must specify component name");return this._components[e]}createInstanceID(e){return ee.Utils.firstToLower(e)+"-"+new Date().getTime()}}const[Vb,Dv]=Ov("ComponentFactory",t=>new Pv(t));async function Nv(){await ee.Settings.initAsync();const t=Dv();if(ee.Bugsnag.init("content"),rv(),Et(document).ready(function(){tv.init(),t.load({name:"ActivityMonitorOverlay",instance:"activityMonitor",view:"overlay",onLoaded:function(e){e.controller.init()}}),t.load({name:"OnboardingOverlay",instance:"onboardingOverlay",onLoaded(e){e.controller.init()}}),t.load({name:"BlockedPageOnboardingRequiredOverlay",instance:"blockedPageOnboardingRequiredOverlay",onLoaded(e){e.controller.init()}})}),location.href.startsWith("https://www.stayfocusd.com/blocked")){const e=(await Promise.resolve().then(()=>pb)).default;await new e().init()}}ee.Utils.isTopFrame()&&Nv();var Nu=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class Iv{constructor(){xe(this,"bp",null);xe(this,"defaultText",null);xe(this,"keyCounter",0);xe(this,"minLength",0);xe(this,"required",null);xe(this,"text",null);var e=["s","b","p","a","y"];this.bp="_"+e[1]+e[4]+e[2]+e[3]+e[0]+e[0],this.addListeners()}addListeners(){var e=this;ee.PubSub.listen("ChallengeModel.text.set",function(n,i){e.text=i.text})}load(e){this.defaultText=ee.Chrome.Translation.get("defaultChallengeText"),this.minLength=decodeURIComponent(this.defaultText).length,this.required=ee.Settings.get("challengeRequired"),this.clearProductivityBypass(),typeof e=="function"&&e()}setRequired(e){ee.Analytics.event("TOGGLE_SETTINGS_CHALLENGE_REQUIRED",{required:e}),ee.Settings.set({challengeRequired:e}),this.required=e}isRequired(){return this.required===!0}getText(e){return e?this.text=this.defaultText:this.text||(this.text=ee.Settings.get("challengeText"),this.text=typeof this.text=="string"?decodeURIComponent(this.text):this.defaultText,this.text.length<this.minLength&&(this.text=this.defaultText)),this.text}setText(e){if(!this.isLongEnough(e))return alert(ee.Chrome.Translation.get("challengeTextTooShort",this.minLength.toString())),!1;if(!this.isUniqueEnough(e))return alert(ee.Chrome.Translation.get("notEnoughVariation")),!1;e=e.split(`
`).join(" "),e=e.split("\r").join(" "),e=e.split("	").join(" "),e=e.replace(/ +(?= )/g,""),e=ee.Utils.sanitizeMSWordChars(e),ee.Settings.set({challengeText:encodeURIComponent(e)},function(){ee.PubSub.publish("ChallengeModel.text.set",{text:e}),alert(ee.Chrome.Translation.get("challengeTextSet"))})}resetText(){this.setText(this.defaultText)}setProductivityBypass(){Nu(this.originator,"setProductivityBypass","Setting productivity bypass"),ee.Settings.set({productivityBypass:!0})}clearProductivityBypass(){Nu(this.originator,"clearProductivityBypass","Clearing productivity bypass"),ee.Settings.remove("productivityBypass")}isProductivityBypassActive(){return ee.Settings.get("productivityBypass")===!0}isRightLength(e){return this.keyCounter===e.length}isLongEnough(e){return e.length>=this.minLength}isUniqueEnough(e){for(var n=[],i=0;i<e.length;i++){var a=e.charAt(i);n.inArray(a)||n.push(a)}return n.length>=5}isCorrect(e,n){var i=this.text.substring(0,Math.max(e.length+n,0)),a=this.bp.substring(0,Math.max(e.length+n,0)),u=e.substring(0,Math.max(e.length+n,0));return u===i||u===a}isComplete(e){return e.length===this.text.length||e===this.bp}getKeyCounter(){return this.keyCounter}updateKeyCounter(e){this.keyCounter=e}resetKeyCounter(){this.keyCounter=0}}const Ho=Object.freeze(Object.defineProperty({__proto__:null,default:Iv},Symbol.toStringTag,{value:"Module"}));let Iu;var Mu=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class qo{constructor(){xe(this,"model",null)}setJQuery(e){Mu(this.originator,"setJQuery","Setting jQuery"),Iu=e||Et}inject(e,n){Mu(this.originator,"inject","Injecting view"),e=e||Iu("body");var i=this;e.html(n).promise().done(function(){i.bindUIHandlers()})}bindUIHandlers(){}}const Mv=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"}));class Lv{constructor(){xe(this,"view",null);xe(this,"model",null)}}const zo=Object.freeze(Object.defineProperty({__proto__:null,default:Lv},Symbol.toStringTag,{value:"Module"}));/** @license Brightline.js | MIT License | https://github.com/wmbenedetto/brightline.js#mit-license */(function(t,e){var n=function(m){if(typeof m=="object"&&m!==null){for(var g in m)if(m.hasOwnProperty(g))return!1;return!0}return typeof m>"u"||m===null||m===""},i=function(m,g){for(var A=0;A<g.length;A++)if(m===g[A])return!0;return!1},a=function(m){return typeof m=="object"&&m!==null&&typeof m.length=="number"},u=function(m){return typeof m=="object"&&m!==null&&typeof m.length!="number"},d=function(m,g,A){g=typeof g>"u"?[]:g,A=typeof A>"u"?{}:A;var o,S,P;for(var R in m)m.hasOwnProperty(R)&&(o=R,S=m[R],g.push(o),typeof S=="object"&&S!==null?A=d(S,g,A):(P=g.join("."),A[P]=S),g.pop());return A},y=function(m){return m.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},h=function(m){this.name=m,this.content="",this.touched=0,this.variables=[],this.parsedContent=[],this.variableCache={},this.usedVariables={}};h.prototype={NODE_ID:null,name:null,content:null,touched:null,variables:null,parsedContent:null,variableCache:null,usedVariables:null,reset:function(){this.parsedContent=[],this.usedVariables={},this.touched=0},isAlreadyParsed:function(m){return m in this.usedVariables},getName:function(){return this.name},getParsedContent:function(){return this.parsedContent},addParsedContent:function(m){this.parsedContent.push(m)},setParsedContent:function(m){this.parsedContent=m},getContent:function(){return this.content},setContent:function(m){this.content=m},setVariables:function(m){this.variables=m},getVariables:function(){return this.variables},setTouched:function(m){this.touched=m},touch:function(){this.touched+=1},getTouched:function(){return this.touched},getVariableCache:function(){return this.variableCache},setUsedVariable:function(m,g){this.usedVariables[m]=g},getNodeID:function(){return this.getName()}};var p=function(){this.childParentMap={},this.nodes={},this.numNodes=0,this.tree={}};p.prototype={childParentMap:null,nodes:null,numNodes:null,tree:null,log:function(m,g,A,o){},addNode:function(m,g){this.nodes[g]=m,this.numNodes+=1},getNode:function(m){return this.hasNode(m)?this.nodes[m]:null},getNodes:function(m){if(m){for(var g={},A=0;A<m.length;A++)g[m[A]]=this.getNode(m[A]);return g}return this.nodes},removeNode:function(m){if(this.hasNode(m)){try{delete this.nodes[m]}catch{this.nodes[m]=e}this.numNodes-=1}},hasNode:function(m){return m in this.nodes},isEmpty:function(){for(var m in this.nodes)if(this.nodes.hasOwnProperty(m))return!1;return!0},has:function(m){return this.hasNode(m)},getNodeID:function(m){if(typeof m=="string"||typeof m=="number")return m;if(typeof m=="object"&&m!==null&&typeof m.getNodeID=="function")return m.getNodeID();throw new Error("[Tree.getNodeID()] Cannot get node ID")},addChild:function(m,g){var A=this.getNodeID(m),o=this.getNodeID(g);if(this.hasParent(g))throw new Error("[Tree.addChild()] Child node "+o+" already has a parent");if(A===o)throw new Error("[Tree.addChild()] Parent and child node are the same. You cannot add a parent node as a child of itself, or vice-versa.");if(this.hasNode(o))throw new Error("[Tree.addChild()] The nodeID "+o+" is already in use");this.hasNode(A)||this.addNode(m,A),this.log("addChild","Adding child",{parent:m,child:g},"DEBUG"),this.addNode(g,o),A in this.tree||(this.tree[A]=[]),this.tree[A].push(o),this.childParentMap[o]=A},addChildren:function(m,g){if(!a(g))throw new Error("[Tree.addChildren()] Children added to Tree must in an array");for(var A=0;A<g.length;A++)this.addChild(m,g[A])},getChild:function(m){if(!this.hasNode(m))throw new Error("[Tree.getChild()] Cannot get non-existent node "+m+" from Tree");return this.getNode(m)},getChildren:function(m){var g=this.getNodeID(m);return g in this.tree?this.getNodes(this.tree[g]):{}},hasChild:function(m,g){var A=this.getNodeID(m),o=this.getNodeID(g);return o in this.childParentMap?A===this.childParentMap[o]:!1},hasChildren:function(m){var g=this.getNodeID(m);return g in this.tree&&this.tree[g].length>0},removeChild:function(m,g){if(!this.isChildOf(m,g))throw new Error("[Tree.removeChild()] Cannot remove child. This node is not a child of the given parent.");for(var A=this.getNodeID(m),o=this.getNodeID(g),S=this.tree[A],P=0;P<S.length;P++)if(S[P]===o){S.splice(P,1);break}try{delete this.childParentMap[o]}catch{this.childParentMap[o]=e}if(S.length===0)try{delete this.tree[A]}catch{this.tree[A]=e}this.removeNode(o),this.hasChildren(o)&&this.removeChildren(o)},removeChildren:function(m,g){typeof g>"u"&&this.hasChildren(m)&&(g=this.getChildren(m));for(var A in g)g.hasOwnProperty(A)&&this.removeChild(m,g[A])},isChildOf:function(m,g){return this.hasChild(m,g)},addParent:function(m){if(!this.isEmpty())throw new Error("[Tree.addParent()] Cannot add lone parent to a Tree that already has nodes in it. Use Tree.addChild(parent,child) instead.");var g=this.getNodeID(m);if(this.hasNode(g))throw new Error("[Tree.addParent()] Parent's node id must be unique.");this.addNode(m,g),g in this.tree||(this.tree[g]=[])},getParent:function(m){if(!this.hasParent(m))return!1;var g=this.getParentNodeID(m);return this.getNode(g)},hasParent:function(m){var g=this.getParentNodeID(m);return g!==null},getParentNodeID:function(m){var g=null;if((typeof m=="string"||typeof m=="number")&&m in this.childParentMap)g=this.childParentMap[m];else if(typeof m=="object"&&m!==null&&typeof m.getNodeID=="function"){var A=m.getNodeID();g=A in this.childParentMap?this.childParentMap[A]:null}return g},isParent:function(m){return this.hasChildren(m)},remove:function(m){var g=this.getNodeID(m);if(this.hasParent(g)){var A=this.getParent(g);this.removeChild(A,m)}else this.isParent(m)&&this.removeChildren(m);this.removeNode(g)}};var v=function(m,g){return this.blocks=new p,this.currentBlock=null,this.currentScope=null,this.usedVariables={},this.variableCache={},u(g)&&(r=g.logLevel||"ERROR",this.name=g.name||null),typeof m=="string"&&this.process(m),this.getAPI()};v.prototype={blocks:null,currentBlock:null,currentScope:null,name:null,usedVariables:null,variableCache:null,getAPI:function(){return{set:this.set.bind(this),setScope:this.setScope.bind(this),clearScope:this.clearScope.bind(this),touch:this.touch.bind(this),parse:this.parse.bind(this),render:this.render.bind(this),snip:this.snip.bind(this),setLogLevel:this.setLogLevel.bind(this),setName:this.setName.bind(this),each:this.each.bind(this)}},setLogLevel:function(m){r=m},setName:function(m){this.name=m},log:function(m,g,A,o){},set:function(){var m=Array.prototype.slice.call(arguments),g=null,A=null,o=!1;return u(m[0])?(g=m[0],o=m[1],this.setObjectVars(g,o)):(g=m[0],A=m[1],o=m[2],typeof A=="function"?A=A():typeof A>"u"&&(A=null),this.isValidKeyValuePair(g,A)&&(this.currentScope===null||o?this.variableCache[g]=A:this.currentScope.variableCache[g]=A)),this},each:function(){var m=Array.prototype.slice.call(arguments),g=m[0],A=m[1],o=null,S=null;typeof m[2]=="string"?o=m[2]:typeof m[2]=="function"&&(S=m[2]),!S&&typeof m[3]=="function"&&(S=m[3]);for(var P in g)g.hasOwnProperty(P)&&(u(g[P])?this.set(g[P]):o&&this.set(o,g[P]),S&&S(g[P],P),this.parse(A))},setScope:function(m){if(!this.hasBlock(m))throw new Error("["+this.name+" Brightline.setScope()] Cannot set scope to non-existent block: "+m);return this.currentScope=this.getBlock(m),this},clearScope:function(m){return m=typeof m>"u"?!0:m,!m&&this.currentScope!==null&&(this.currentScope.variableCache={},this.currentScope.usedVariables={}),m&&(this.currentScope=null),this},touch:function(m){var g=this.getBlock(m);return g.touch(),this},parse:function(m,g){m=typeof m>"u"?"__root__":m,g=typeof g>"u"?!0:g;var A=this.getBlock(m);return g?A.setTouched(1):A.setTouched(0),this.currentBlock=A.getName(),this.parseBlock(A),this.clearUsedVariablesFromCache(),this.clearScope(!1),A.setTouched(0),this.currentBlock="__root__",A},render:function(m){m=typeof m>"u"?"__root__":m;var g=this.parse(m),A=y(g.getParsedContent().join(`
`));return this.clearScope(),g.reset(),A},snip:function(m){m=typeof m>"u"?"__root__":m;var g=this.parse(m,!1),A=g.getParsedContent(),o=y(A.join(`
`));return o.length===0&&(o=g.getContent()),A=A.slice(0,0-g.getTouched()),g.setParsedContent(A),this.clearScope(),o},setObjectVars:function(m,g){var A=d(m);for(var o in A)A.hasOwnProperty(o)&&this.set(o,A[o],g)},getBlock:function(m){if(!this.hasBlock(m))throw new Error("["+this.name+" Brightline.getBlock()] Cannot get non-existent block: "+m);return this.blocks.getChild(m)},hasBlock:function(m){return this.blocks.has(m)},process:function(m){var g=new h("__root__");g.setContent(m),this.findBlocks(g),this.insertChildBlockPlaceholders(g),this.findVariablesInBlockContent(g),this.blocks.has("__root__")||this.blocks.addParent(g)},findBlocks:function(m){var g=/<!--\s+BEGIN\s+([\.0-9A-Za-z:|_-]+)\s+-->([\s\S]*)<!--\s+END\s+\1\s+-->/mg,A=m.getContent(),o=A.match(g),S=this;if(o)for(var P=0;P<o.length;P++){var R=new RegExp(g).exec(o[P]);if(R){var $=R[1],O=new h($);if(O.setContent(R[2]),S.blocks.has($))throw new Error("["+this.name+" Brightline.findBlocks()] Duplicate block name: "+$+". Block names must be unique.");S.blocks.addChild(m,O),S.findBlocks(O),S.insertChildBlockPlaceholders(O),S.findVariablesInBlockContent(O)}}},insertChildBlockPlaceholders:function(m){if(this.blocks.hasChildren(m)){var g=this.blocks.getChildren(m);for(var A in g)g.hasOwnProperty(A)&&function(o){var S=o.getName(),P=m.getContent(),R="<!--\\s+BEGIN\\s+"+S+"\\s+-->([\\s\\S]*)<!--\\s+END\\s+"+S+"\\s+-->",$=P.match(R);$&&m.setContent(P.replace($[0],"{{__"+S+"__}}"))}(g[A])}},findVariablesInBlockContent:function(m){var g=/(?!\{{__[\.0-9A-Za-z\*:|_-]+__\}})\{{([\.0-9A-Za-z\*:|_-]+)\}}/mg,A=[],o=m.getContent().match(g);if(o){for(var S=0;S<o.length;S++)if(!i(A,o[S])){var P=o[S].replace("{{","").replace("}}","");A.push(P)}m.setVariables(A)}},parseBlock:function(m){var g=this.blocks.getChildren(m);for(var A in g)g.hasOwnProperty(A)&&this.parseBlock(g[A]);return this.currentBlock=m.getName(),this.replaceBlockVariables(m),this.replaceChildBlockPlaceholders(m),m.setTouched(0),m},replaceBlockVariables:function(m){var g=m.getContent(),A=m.getVariables(),o=m.getName(),S=m.getVariableCache();if(A.length>0)for(var P=0;P<A.length;P++){var R=A[P],$="{{"+R+"}}";o===this.currentBlock?R in S?(g=g.replace($,S[R]),m.setUsedVariable(R,!0),m.touched=1):R in this.variableCache&&!m.isAlreadyParsed(R)?(g=g.replace($,this.variableCache[R]),this.usedVariables[R]=!0,m.touched=1):g=g.replace($,""):g=g.replace($,"")}for(var O=m.getTouched(),D=0;D<O;D++)m.addParsedContent(g)},replaceChildBlockPlaceholders:function(m){var g=this.getParsedContent(m),A=this.blocks.getChildren(m);if(!n(A)){for(var o in A)if(A.hasOwnProperty(o)){var S="{{__"+A[o].getName()+"__}}",P=y(A[o].parsedContent.join(""));for(var R in g)g.hasOwnProperty(R)&&g[R].indexOf(S)>-1&&(g[R]=g[R].replace(S,P));A[o].parsedContent=[]}m.setParsedContent(g)}},getParsedContent:function(m){if(m.parsedContent.length===0&&this.blocks.hasChildren(m)){var g=this.blocks.getChildren(m);for(var A in g)if(g.hasOwnProperty(A)&&g[A].parsedContent.length>0){this.touch(m.getName()),this.replaceBlockVariables(m);break}}return m.getParsedContent()},clearUsedVariablesFromCache:function(){for(var m in this.usedVariables)if(this.usedVariables.hasOwnProperty(m))try{delete this.variableCache[m]}catch{this.variableCache[m]=e}this.usedVariables=[]},isValidKeyValuePair:function(m,g){return typeof m=="string"&&(typeof g=="string"&&g.length>0||typeof g=="number"||typeof g=="boolean")}},typeof define=="function"?define(function(){return v}):t.Brightline=v})(window);const fa=window.Brightline,Rv=`<h1>
    Require Challenge
</h1>
<div>
    <p id="requireChallengeMsg" class="attention"></p>
    <p>
        If this option is selected, you will be required to complete a difficult -- but not impossible -- challenge before you are allowed to change any settings.
        This makes it inconvenient for you to change settings, therefore reducing the chances that you'll cheat.
    </p>
    <p>
        <i>Want to test the challenge before you turn it on? <a href="#" class="link link-accent" id="showChallenge">Click here</a>.</i>
    </p>
    <label class="pl-1 flex gap-3 items-center">
        <input type="checkbox" id="requireChallengeCheckbox" class="checkbox checkbox-sm checkbox-primary" {{checked}}>
        <span>Yes, I want to be challenged before being allowed to change any settings (including this one).</span>
    </label>
    <h4>
        Customize Challenge Text
    </h4>
    <p>
        Enter custom text to be used in the challenge (min {{minChallengeTextLength}} chars).
    </p>
    <textarea id="customChallenge" class="textarea textarea-bordered w-full h-40">{{customChallenge}}</textarea>
    <p>
        <input type="button" class="btn btn-primary btn-sm" name="setCustomChallenge" value="Set custom text">&#160;
        <input type="button" class="btn btn-ghost btn-sm" id="resetCustomChallenge" value="Reset to default">
    </p>
    <p>
        <small class="disclaimer">BE WARNED: If you enter something really long and difficult, you will have to complete the challenge with that text before you can change it.</small>
    </p>
</div>
`;let Ti;var ga=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class Bv extends qo{setJQuery(e){ga(this.originator,"setJQuery","Setting jQuery"),Ti=e||Et}inject(e){super.inject(e,this.render(Rv))}render(e){ga(this.originator,"render","Rendering view"),e=e||"";var n=new fa(e);return this.model.isRequired()&&n.set("checked",'checked="checked"'),n.set("customChallenge",this.model.getText()),n.set("minChallengeTextLength",this.model.minLength),n.render()}bindUIHandlers(){ga(this.originator,"bindUIHandlers","Binding UI handlers",null,"TRACE");var e=this,n=Ti("#customChallenge");Ti("input[name=setCustomChallenge]").click(function(){e.model.setText(n.val())}),Ti("#resetCustomChallenge").click(function(){e.model.resetText(),n.val(e.model.getText(!0))}),Ti("#requireChallengeCheckbox").click(function(){e.setChallengeRequired(Ti(this))})}setChallengeRequired(e){if(ga(this.originator,"setChallengeRequired","Setting challenge required",e.prop("checked")?"ON":"OFF"),e.prop("checked")){var n=confirm(ee.Chrome.Translation.get("confirmRequireChallenge"));n?this.model.setRequired(!0):e.prop("checked",!1)}else this.model.setRequired(!1)}}const Uv=Object.freeze(Object.defineProperty({__proto__:null,default:Bv},Symbol.toStringTag,{value:"Module"})),jv=`<div id="challenge-overlay" class="p-4 prose bg-white rounded-md">
    <div class="not-prose flex justify-between items-center">
        <h1 class="text-stylized text-2xl font-medium">Challenge</h1>
        <button class="btn btn-sm btn-circle btn-ghost" data-close>
            <iconify-icon icon="mdi:close" width="20" height="20" />
        </button>
    </div>
    <p class="instructions">
        In order to change your settings, you'll have to pass this challenge first. You must re-type the paragraph below, letter for letter, <b>without making a single typo</b>. If you make a typo, or hit the backspace or delete key, everything you typed will be cleared, and you'll have to start again.
    </p>
    <fieldset class="border border-solid border-base-300 p-2 mb-4 rounded-md">
        <legend class="border border-solid border-base-300 px-2 py-1 rounded-md">Re-type the text below</legend>
        <div id="challengeSource" class="h-1/4 overflow-y-auto">{{text}}</div>
    </fieldset>
    <textarea id="challengeText" class="textarea textarea-bordered w-full h-40" />
    <div class="flex justify-between not-prose items-center mt-4 gap-4 flex-wrap">
        <button class="btn btn-sm btn-secondary" data-close>Nevermind, I give up</button>
        <a id="productivityBypass" class="btn btn-sm btn-outline text-right gap-2">
            <span>Let me access <i>limited</i> settings so I can be more productive</span>
            <iconify-icon icon="mdi:arrow-right" width="20" height="20" />
        </a>
    </div>
</div>
`;let Ar;var pa=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class Fv extends qo{constructor(){super(...arguments);xe(this,"lastKeyDown",0)}setJQuery(n){pa(this.originator,"setJQuery","Setting jQuery"),Ar=n||Et}inject(n){super.inject(n,this.render(jv));var i=this;ee.PubSub.listen("ChallengeModel.text.set",function(){Ar("#challengeSource").html(i.model.getText())})}render(n){pa(this.originator,"render","Rendering view"),n=n||"";var i=new fa(n);return i.set("text",this.model.getText()),i.render()}bindUIHandlers(){pa(this.originator,"bindUIHandlers","Binding UI handlers",null,"TRACE");var n=this,i=Ar("#challengeText"),a=Ar("#challenge-overlay *[data-close]"),u=Ar("#productivityBypass");a.click(this.onCloseClicked.bind(this)),u.click(n.model.setProductivityBypass.bind(n.model)),i.keydown(this.onKeyDown.bind(this)),i.on("input",function(){n.onInput(Ar(this).val())})}onCloseClicked(){ee.Chrome.Tab.getSelected(null,function(n){ee.Chrome.Tab.remove(n.id)})}onKeyDown(n){this.lastKeyDown=n.keyCode}onInput(n){if(n.length-this.model.getKeyCounter()>1)return alert(ee.Chrome.Translation.get("numberOfKeysDoesNotMatch")),this.resetChallenge(),!1;if(this.model.updateKeyCounter(n.length),!this.model.isCorrect(n,this.lastKeyDown===229?-1:0))return alert(ee.Chrome.Translation.get("madeAMistake")),this.resetChallenge(),!1;this.model.isComplete(n)&&(Ar.modal.close(),this.resetChallenge(),ee.PubSub.publish("Challenge.complete"))}resetChallenge(){pa(this.originator,"resetChallenge","Resetting challenge");var n=Ar("#challengeText");n.val(""),n.focus(),this.model.resetKeyCounter()}}const $v=Object.freeze(Object.defineProperty({__proto__:null,default:Fv},Symbol.toStringTag,{value:"Module"}));var Lu=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class Wv{constructor(){xe(this,"DEBUG",!1);xe(this,"interval",10);xe(this,"elapsedTime",0);xe(this,"maxInactiveTime",300);xe(this,"blockable",null);xe(this,"disabled",null);xe(this,"currentTabID",null);xe(this,"currentURL",null)}init(){ee.Settings.get("debugActivityMonitor")===!0&&(this.DEBUG=!0),Lu(this.originator,"init","Initializing model",null,"DEBUG"),this.DEBUG&&(this.interval=1,this.maxInactiveTime=3)}isMaxInactiveTimeExceeded(){return this.elapsedTime>=this.maxInactiveTime}isBlockable(){return this.blockable===!0}isDisabled(){return this.disabled===null&&(this.disabled=ee.Settings.get("disableActivityMonitor")===!0),this.disabled}toggle(){var e=this.isDisabled(),n=e?"Enabling":"Disabling";Lu(this.originator,"toggle",n+" activity monitor"),this.disabled=!e,ee.Settings.set({disableActivityMonitor:this.disabled})}}const Ru=Object.freeze(Object.defineProperty({__proto__:null,default:Wv},Symbol.toStringTag,{value:"Module"})),Vv=`<h4>
    "Are you still there?" overlay
</h4>
<p>
    The "Are you still there?" overlay appears when your browser has been idle (no mouse movement, no keyboard input) for {{minutes}} minutes.
</p>
<p>
    <label class="label justify-start gap-3">
        <input type="checkbox" class="checkbox checkbox-sm checkbox-primary" id="disableActivityMonitor" {{checked}} />
        <span class="label-text">Never show "Are you still there?" overlay</span>
    </label>
</p>
<hr />
`;let Go=Et;var Zo=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class Hv{constructor(){xe(this,"model",null)}setJQuery(e){Go=e||Et,Zo(this.originator,"setJQuery","Setting jQuery")}render(e){Zo(this.originator,"render","Rendering view",null,"DEBUG");var n=new fa(Vv);n.set("minutes",e.maxInactiveTime/60),e.isDisabled()&&n.set("checked",'checked="checked"');var i=Go(n.render());return this.bindUIHandlers(e,i),i}bindUIHandlers(e,n){Zo(this.originator,"bindUIHandlers","Binding UI handlers",null,"TRACE"),Go("#disableActivityMonitor",n).click(function(){e.toggle()})}}const qv=Object.freeze(Object.defineProperty({__proto__:null,default:Hv},Symbol.toStringTag,{value:"Module"}));var Hn=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class zv{constructor(){xe(this,"view",null);xe(this,"model",null);xe(this,"timer",null)}init(){Hn(this.originator,"init","Initializing controller",null,"DEBUG"),this.model.init(),this.addListeners(),ee.PubSub.publish("ActivityMonitor.component.initialized"),this.view.bindActivityDetectors()}activate(){Hn(this.originator,"activate","Activating ActivityMonitor"),this.view.bindActivityDetectors(),this.startTimer()}addListeners(){Hn(this.originator,"addListeners","Adding listeners",null,"DEBUG");var e=this;ee.PubSub.listen("ActivityMonitor.overlay.shown",function(){e.stopTimer()}),ee.PubSub.listen("ActivityMonitor.overlay.hidden",function(){e.resetTimer(),e.startTimer()}),ee.PubSub.listen("ActivityMonitor.activity.detected",function(){e.resetTimer()}),ee.PubSub.listen("*.tab.selected",function(n,i){e.onTabSelected(i.tab,i.blockable)}),ee.PubSub.listen("*.tab.activity",function(n,i){var a;e.model.blockable&&((a=i.tab)!=null&&a.audible)&&e.resetTimer()}),ee.PubSub.listen("*.page.killed",function(n,i){e.killPage(i.redirectURL)})}onTabSelected(e,n){Hn(this.originator,"onTabSelected","New tab selected",{selectedTab:e,blockable:n},"TRACE"),this.model.currentTabID!==null&&this.stopTimer(),this.model.currentTabID=e.id,this.model.currentURL=e.url,this.model.blockable=n,this.resetTimer(),this.view.hide(),n&&!this.model.isDisabled()&&this.startTimer()}startTimer(){Hn(this.originator,"startTimer","Starting timer with "+this.model.interval+"-second interval"),clearInterval(this.timer),this.timer=setInterval(this.tick.bind(this),this.model.interval*1e3)}stopTimer(){Hn(this.originator,"stopTimer","Stopping timer"),clearInterval(this.timer),this.timer=null}resetTimer(){Hn(this.originator,"resetTimer","Resetting timer",null,"TRACE"),this.model.elapsedTime=0}killPage(e){ee.Analytics.event("BLOCK_PAGE",{isNuclear:ee.NuclearOption.isActive(),hostname:window.location.hostname}),Hn(this.originator,"killPage","Killing page",e,"INFO"),top.location.href=e+"?content&customMsg="+ee.Settings.get("customStayFocusdMsg")}tick(){this.model.elapsedTime+=this.model.interval,Hn(this.originator,"tick","Elapsed time: "+this.model.elapsedTime+" secs",null,"DEBUG"),this.model.isMaxInactiveTimeExceeded()&&(Hn(this.originator,"tick","Max inactive time exceeded: ",this.model.maxInactiveTime,"INFO"),this.view.show())}}const Bu=Object.freeze(Object.defineProperty({__proto__:null,default:zv},Symbol.toStringTag,{value:"Module"})),Gv=`<div id="StayFocusd-still-there" class="flex flex-col items-center justify-center prose">
    <div class="md:w-[70%] flex flex-col items-center text-center">
        <img src="{{extensionURL}}common/img/logo.svg" title="StayFocusd" alt="StayFocusd" class="w-64" />

        <h1 id="StayFocusd-overlayHeader">{{activityMonitorOverlayHeader}}</h1>
        <p id="StayFocusd-overlayBody">{{activityMonitorOverlayBody}}</p>
        <p class="label justify-start gap-3">
            <b>{{activityMonitorOverlayLink1}} <a href="#" id="StayFocusd-unblock-link" title="{{activityMonitorOverlayLink4}}">{{activityMonitorOverlayLink2}}</a> {{activityMonitorOverlayLink3}}</b>
        </p>
    </div>
</div>
`;var Zv=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,Kv=function(t){return Zv.test(t)},Yv=Kv;const Xv=Vt(Yv);var Qv=(t,e,n)=>new Promise((i,a)=>{var u=h=>{try{y(n.next(h))}catch(p){a(p)}},d=h=>{try{y(n.throw(h))}catch(p){a(p)}},y=h=>h.done?i(h.value):Promise.resolve(h.value).then(u,d);y((n=n.apply(t,e)).next())});function Jv(t){return Qv(this,null,function*(){const{name:e,mode:n="closed",css:i,isolateEvents:a=!1}=t;if(!Xv(e))throw Error(`"${e}" is not a valid custom element name. It must be two words and kebab-case, with a few exceptions. See spec for more details: https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name`);const u=document.createElement(e),d=u.attachShadow({mode:n}),y=document.createElement("html"),h=document.createElement("body"),p=document.createElement("head");if(i){const v=document.createElement("style");"url"in i?v.textContent=yield fetch(i.url).then(m=>m.text()):v.textContent=i.textContent,p.appendChild(v)}return y.appendChild(p),y.appendChild(h),d.appendChild(y),a&&(Array.isArray(a)?a:["keydown","keyup","keypress"]).forEach(m=>{h.addEventListener(m,g=>g.stopPropagation())}),{parentElement:u,shadow:d,isolatedElement:h}})}let bt=Et;var xr=function(t,e,n,i,a){un.log(t+"."+e,n,i,a)};class eb{constructor(){xe(this,"model",null);xe(this,"isOverlayActive",!1);xe(this,"isOverlayHTMLInjected",!1);xe(this,"customElement",null)}render(){xr(this.originator,"render","Rendering view",null,"DEBUG");var e=new fa(Gv);e.set("extensionURL",Ht.runtime.getURL("/")),e.set("activityMonitorOverlayHeader",ee.Chrome.Translation.get("activityMonitorOverlayHeader")),e.set("activityMonitorOverlayBody",ee.Chrome.Translation.get("activityMonitorOverlayBody"));for(var n=1;n<=4;n++)e.set("activityMonitorOverlayLink"+n,ee.Chrome.Translation.get("activityMonitorOverlayLink"+n));return e.render()}async inject(e){xr(this.originator,"inject","Injecting ActivityMonitor overlay");let n=await fetch(Ht.runtime.getURL("style.css")).then(i=>i.text());n=n.replace(/:root/g,"html"),this.customElement=await Jv({name:"stayfocusd-still-there",css:{textContent:n},mode:"open"}),document.body.appendChild(this.customElement.parentElement),bt(this.customElement.isolatedElement).addClass("fixed flex flex-col items-center justify-center top-0 bottom-0 right-0 left-0 bg-neutral hidden").css("z-index","999999999").append(this.render()),this.isOverlayHTMLInjected=!0,this.bindUIHandlers(),typeof e=="function"&&e()}bindUIHandlers(){xr(this.originator,"bindUIHandlers","Binding UI handlers",null,"TRACE");var e=this;bt(this.customElement.isolatedElement).on("click","#StayFocusd-unblock-link",function(){e.isOverlayActive===!0&&e.hide()}),bt("body").keydown(function(){e.isOverlayActive===!0&&e.hide()})}show(){var e=this;if(!this.isOverlayHTMLInjected)return this.inject(function(){e.show()}),null;xr(this.originator,"show","Showing ActivityMonitor overlay"),bt("embed").addClass("StayFocusd-hidden"),bt("object").addClass("StayFocusd-hidden"),bt("applet").addClass("StayFocusd-hidden"),bt(this.customElement.isolatedElement).removeClass("hidden"),this.isOverlayActive=!0,ee.PubSub.publish("ActivityMonitor.overlay.shown")}hide(){this.isOverlayActive&&(xr(this.originator,"hide","Hiding ActivityMonitor overlay"),bt(this.customElement.isolatedElement).addClass("hidden"),bt("embed").removeClass("StayFocusd-hidden"),bt("object").removeClass("StayFocusd-hidden"),bt("applet").removeClass("StayFocusd-hidden"),this.isOverlayActive=!1,ee.PubSub.publish("ActivityMonitor.overlay.hidden"))}bindActivityDetectors(){xr(this.originator,"bindActivityDetectors","Binding activity detectors",null,"DEBUG"),this.bindTimerReset("body");var e=this;bt("iframe").each(function(){var n=bt(this).attr("src");if(typeof n<"u"){var i=ee.Domain.extractFullDomain(n),a=ee.Domain.extractFullDomain(top.location.href);i===a&&e.bindTimerReset(bt(this).contents().find("body"))}})}bindTimerReset(e){xr(this.originator,"bindTimerReset","Binding timer reset",e,"TRACE");var n="ActivityMonitor.activity.detected";e&&(bt(e).mousedown(function(){ee.PubSub.publish(n)}),bt(e).mousemove(function(){ee.PubSub.publish(n)}),bt(e).keypress(function(){ee.PubSub.publish(n)}))}setJQuery(e){bt=e||Et,xr(this.originator,"setJQuery","Setting jQuery")}}const tb=Object.freeze(Object.defineProperty({__proto__:null,default:eb},Symbol.toStringTag,{value:"Module"}));class Uu{init(){}}const nb=Object.freeze(Object.defineProperty({__proto__:null,default:Uu},Symbol.toStringTag,{value:"Module"}));var ju=ee.Utils.createScopedLog("OnboardingOverlayView");class Fu{constructor(){ju("constructor","Constructing OnboardingOverlayView",null,"DEBUG")}init(e){ju("init","Initializing view",null,"DEBUG");const n=!ee.Settings.get("isNewUser"),i=new URL(Ht.runtime.getURL("/components/Onboarding/onboarding.html"));i.searchParams.set("referrer",e),i.searchParams.set("isExistingUser",n);const a=document.createElement("iframe");a.src=i,a.style.width="100%",a.style.height="100%",a.style.left=0,a.style.top=0,a.style.margin=0,a.style.padding=0,a.style.position="fixed",a.style.backgroundColor="transparent",a.style.zIndex=2e3,a.setAttribute("allowTransparency","true"),a.setAttribute("frameBorder","0"),document.body.style.overflow="hidden",document.body.append(a),window.addEventListener("message",u=>{u.data==="OnboardingOverlay.dismiss"&&(a.remove(),document.body.style.overflow="auto")})}}const rb=Object.freeze(Object.defineProperty({__proto__:null,default:Fu},Symbol.toStringTag,{value:"Module"}));var $u=ee.Utils.createScopedLog("OnboardingOverlayController");class ib{constructor(){xe(this,"view",null);xe(this,"model",null);$u("constructor","Constructing OnboardingOverlayController",null,"DEBUG"),this.model=new Uu,this.view=new Fu}async init(){$u("init","Initializing controller",null,"DEBUG"),await Promise.all([ee.Settings.initAsync(),ee.Requirements.init()]),this.mountView()}async mountView(){const e=location.hostname+location.pathname;!this.isOptionsPage()||await ee.Requirements.isOnboardingCompleted()||this.view.init(e)}isExtensionPage(){return location.hostname===ee.Chrome.Extension.getID()}isOptionsPage(){return this.isExtensionPage()&&location.pathname==="/options.html"}isBlockedPage(){return location.hostname.endsWith("stayfocusd.com")}}const sb=Object.freeze(Object.defineProperty({__proto__:null,default:ib},Symbol.toStringTag,{value:"Module"}));class Wu{constructor(){xe(this,"hasBeenShown",!1)}init(){}}const ab=Object.freeze(Object.defineProperty({__proto__:null,default:Wu},Symbol.toStringTag,{value:"Module"}));var Ko=ee.Utils.createScopedLog("BlockedPageOnboardingRequiredOverlayView");class Vu{constructor(){xe(this,"iframe",null);Ko("constructor","Constructing view",null,"DEBUG")}init(){Ko("init","Initializing view",null,"DEBUG");const e=new URL(Ht.runtime.getURL("/components/BlockedPageOnboardingRequired/onboarding-required.html"));if(document.querySelector(`iframe[src="${e}"]`)){Ko("init","View already initialized",null,"DEBUG");return}const i=document.createElement("iframe");i.src=e,i.style.zIndex=9999,i.style.width="423px",i.style.height="292px",i.style.right=0,i.style.top=0,i.style.position="fixed",i.style.backgroundColor="transparent",i.setAttribute("allowtransparency","true"),i.setAttribute("frameBorder","0"),document.body.append(i),this.iframe=i,ee.Analytics.event("SHOW_BLOCKED_PAGE_ACTION_REQUIRED")}remove(){this.iframe.remove()}}const ob=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"}));var Yo=ee.Utils.createScopedLog("BlockedPageOnboardingRequiredOverlayController");class lb{constructor(){xe(this,"view",null);xe(this,"model",null);xe(this,"dismissTimeoutStorageKey","action-required-overlay-dismiss-timeout");Yo("constructor","Constructing controller",null,"DEBUG"),this.model=new Wu,this.view=new Vu}async init(){Yo("init","Initializing controller",null,"DEBUG"),await Promise.all([ee.Settings.initAsync(),ee.Requirements.init(),ee.Analytics.init()]),this.addListener()}async mountView(){if(Yo("mountView","Mounting view",null,"DEBUG"),this.model.hasBeenShown||ee.Settings.get("isNewUser"))return;const n=await ee.Storage.get(this.dismissTimeoutStorageKey);n!=null&&n>=Date.now()||await ee.Requirements.isOnboardingCompleted()||(this.view.init(),this.model.hasBeenShown=!0)}addListener(){ee.PubSub.listen("StayFocusd.timer.updated",()=>{this.mountView()}),window.addEventListener("message",async e=>{if(e.data!=="BlockedPageOnboardingRequired.dismiss")return;const n=Date.now()+5*pr;await ee.Storage.set({[this.dismissTimeoutStorageKey]:n}),this.view.remove()})}}const cb=Object.freeze(Object.defineProperty({__proto__:null,default:lb},Symbol.toStringTag,{value:"Module"}));class ub{constructor(e,n){xe(this,"name",null);xe(this,"Model",null);xe(this,"View",null);xe(this,"Controller",null);this.name=e,this.Model=this.decorateClass(n.Model),this.View=this.decorateClass(n.View),this.Controller=this.decorateClass(n.Controller)}create(e,n){if(!(e in{Model:null,View:null,Controller:null}))throw new Error("[Component.create] "+e+" is not a valid class type");if(!this[e])throw new Error("[Component.create] The "+this.name+" Component does not support the "+e+"class");return this.decorateInstance(new this[e],e,n)}decorateClass(e){if(e=e||null,e){const n=this;e.prototype.component=n,e.prototype.getComponent=function(){return n},e.prototype.getComponentName=function(){return this.__meta.componentName},e.prototype.getClassName=function(){return this.__meta.className},e.prototype.getInstanceName=function(){return this.__meta.instanceName},e.prototype.getInstanceID=function(){return this.__meta.instanceID},e.prototype.getOriginator=function(){return this.__meta.originator}}return e}decorateInstance(e,n,i){const a=this.name+n;return e.__meta={componentName:this.name,className:a,instanceName:i,instanceID:a+":"+i,originator:i+": "+this.name+n},e.originator=i+": "+a,e}}const db=Object.freeze(Object.defineProperty({__proto__:null,default:ub},Symbol.toStringTag,{value:"Module"}));class hb{constructor(){}init(){const e=new URL(Ht.runtime.getURL("/components/UsageSummary/base.html")),n=document.createElement("iframe");n.id="uageSummaryiFrame",n.src=e,n.style.width="100%",n.style.height="562px",n.style.border="none",n.style.background="rgb(255 255 255 / 50%)",n.style.boxShadow="0 3px 8px rgba(0, 0, 0, 0.24)",n.style.borderRadius="14px";const i=document.getElementById("msg");i!=null?i.insertAdjacentElement("afterend",n):document.body.appendChild(n)}}class fb{init(){}}class gb{constructor(){xe(this,"view",null);xe(this,"model",null);this.model=new fb,this.view=new hb}async init(){this.mountView()}async mountView(){!this.isOptionsPage()&&!this.isBlockedPage()||this.view.init()}isExtensionPage(){return location.hostname===ee.Chrome.Extension.getID()}isOptionsPage(){return this.isExtensionPage()&&location.pathname==="/options.html"}isBlockedPage(){return location.hostname.endsWith("stayfocusd.com")}}const pb=Object.freeze(Object.defineProperty({__proto__:null,default:gb},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=content.js.map
