define(["core/CoreAPI","core/vendor/DropletJS.PubSub.min","components/PopupOnboardingRequired/View"],function(API,PubSub,View){return class{view=null;constructor(){this.view=new View}async init(){await Promise.all([API.Settings.initAsync(),API.Requirements.init()]),this.mountView()}async mountView(){await API.Requirements.isOnboardingCompleted()||(API.Analytics.event("SHOW_POPUP_ACTION_REQUIRED"),this.view.init(),this.addListeners())}addListeners(){PubSub.listen("PopupOnboardingRequired.button.clicked",async(_,{id})=>{"btnOpenSettings"===id&&(API.Analytics.event("CLICK_POPUP_ACTION_REQUIRED_OPEN_SETTINGS"),await API.Chrome.Tab.create({url:API.Chrome.Extension.getURL("/options.html"),active:!0}),await this.dismiss())})}}});