define(()=>{let API;function getRemoteConfigFeatures(){return API.RemoteConfig.get("incrementalRollout")}return{initAPI(theAPI){var feature;(API=theAPI).mixin("IncrementalRollout",{AdFinder:{storageKey:"@incrementalRollout/"+(feature="ad-finder"),async getMyPercent(){return API.Storage.getOrSetAsync(this.storageKey,Math.random())},async getEnabledPercent(){return(await getRemoteConfigFeatures())[feature]??0},async isEnabled(){var enabledPercent=await this.getEnabledPercent();return await this.getMyPercent()<enabledPercent},async debug(){console.log("Incremental rollout info:",{isEnabled:await this.isEnabled(),myPercent:await this.getMyPercent(),enabledPercent:await this.getEnabledPercent(),remoteConfig:await getRemoteConfigFeatures()})},async enable(){await API.Storage.setAsync({[this.storageKey]:-1})},async disable(){await API.Storage.setAsync({[this.storageKey]:2})},async randomize(){await API.Storage.setAsync({[this.storageKey]:Math.random()})}}})}}});