var adFinder=function(q){"use strict";typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;var ue={exports:{}};!function(){typeof globalThis<"u"?globalThis:typeof self<"u"&&self;var r=ue;if("u"<typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const n="The message port closed before a response was received.",a="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",i=c=>{var g={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(g).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(p,_=void 0){super(_),this.createItem=p}get(p){return this.has(p)||this.set(p,this.createItem(p)),super.get(p)}}const f=(o,p)=>(..._)=>{c.runtime.lastError?o.reject(new Error(c.runtime.lastError.message)):p.singleCallbackArg||_.length<=1&&!1!==p.singleCallbackArg?o.resolve(_[0]):o.resolve(_)},u=o=>1==o?"argument":"arguments",T=(o,p,_)=>new Proxy(p,{apply(S,k,I){return _.call(k,o,...I)}});let O=Function.call.bind(Object.prototype.hasOwnProperty);const C=(o,p={},_={})=>{let S=Object.create(null),k={has(R,b){return b in o||b in S},get(R,b,L){if(b in S)return S[b];if(b in o){let P=o[b];var G;if("function"==typeof P)P="function"==typeof p[b]?T(o,o[b],p[b]):O(_,b)?(G=((o,p)=>function(S,...k){if(k.length<p.minArgs)throw new Error(`Expected at least ${p.minArgs} ${u(p.minArgs)} for ${o}(), got `+k.length);if(k.length>p.maxArgs)throw new Error(`Expected at most ${p.maxArgs} ${u(p.maxArgs)} for ${o}(), got `+k.length);return new Promise((I,R)=>{if(p.fallbackToNoCallback)try{S[o](...k,f({resolve:I,reject:R},p))}catch(b){console.warn(o+" API method doesn't seem to support the callback parameter, falling back to call it without a callback: ",b),S[o](...k),p.fallbackToNoCallback=!1,p.noCallback=!0,I()}else p.noCallback?(S[o](...k),I()):S[o](...k,f({resolve:I,reject:R},p))})})(b,_[b]),T(o,o[b],G)):P.bind(o);else if("object"==typeof P&&null!==P&&(O(p,b)||O(_,b)))P=C(P,p[b],_[b]);else{if(!O(_,"*"))return Object.defineProperty(S,b,{configurable:!0,enumerable:!0,get(){return o[b]},set(G){o[b]=G}}),P;P=C(P,p[b],_["*"])}return S[b]=P}},set(R,b,L,P){return b in S?S[b]=L:o[b]=L,!0},defineProperty(R,b,L){return Reflect.defineProperty(S,b,L)},deleteProperty(R,b){return Reflect.deleteProperty(S,b)}},I=Object.create(o);return new Proxy(I,k)},D=o=>({addListener(p,_,...S){p.addListener(o.get(_),...S)},hasListener(p,_){return p.hasListener(o.get(_))},removeListener(p,_){p.removeListener(o.get(_))}}),v=new s(o=>"function"!=typeof o?o:function(_){_=C(_,{},{getContent:{minArgs:0,maxArgs:0}});o(_)});let w=!1;const x=new s(o=>"function"!=typeof o?o:function(_,S,k){let I=!1,R,b=new Promise(z=>{R=function(W){w||(console.warn("Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",(new Error).stack),w=!0),I=!0,z(W)}}),L;try{L=o(_,S,R)}catch(z){L=Promise.reject(z)}_=!0!==L&&(o=>o&&"object"==typeof o&&"function"==typeof o.then)(L);return!(!0!==L&&!_&&!I||((_?L:b).then(W=>{k(W)},W=>{let se;se=W&&(W instanceof Error||"string"==typeof W.message)?W.message:"An unexpected error occurred",k({__mozWebExtensionPolyfillReject__:!0,message:se})}).catch(W=>{console.error("Failed to send onMessage rejected reply",W)}),0))}),A=(o,p,_,...S)=>{if(S.length<p.minArgs)throw new Error(`Expected at least ${p.minArgs} ${u(p.minArgs)} for ${o}(), got `+S.length);if(S.length>p.maxArgs)throw new Error(`Expected at most ${p.maxArgs} ${u(p.maxArgs)} for ${o}(), got `+S.length);return new Promise((k,I)=>{k=(({reject:o,resolve:p},_)=>{c.runtime.lastError?"The message port closed before a response was received."===c.runtime.lastError.message?p():o(new Error(c.runtime.lastError.message)):_&&_.__mozWebExtensionPolyfillReject__?o(new Error(_.message)):p(_)}).bind(null,{resolve:k,reject:I});S.push(k),_.sendMessage(...S)})},d={devtools:{network:{onRequestFinished:D(v)}},runtime:{onMessage:D(x),onMessageExternal:D(x),sendMessage:A.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:A.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},m={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return g.privacy={network:{"*":m},services:{"*":m},websites:{"*":m}},C(c,d,g)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");r.exports=i(chrome)}else r.exports=browser}();const H=ue.exports;var r,n,a,i,g,t,ce={exports:{}};function c(s,l){if(!i[s]){i[s]={};for(var f=0;f<s.length;f++)i[s][s.charAt(f)]=f}return i[s][l]}e=ce,r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},t=g={compressToBase64:function(s){if(null==s)return"";var l=g._compress(s,6,function(f){return n.charAt(f)});switch(l.length%4){default:case 0:return l;case 1:return l+"===";case 2:return l+"==";case 3:return l+"="}},decompressFromBase64:function(s){return null==s?"":""==s?null:g._decompress(s.length,32,function(l){return c(n,s.charAt(l))})},compressToUTF16:function(s){return null==s?"":g._compress(s,15,function(l){return r(l+32)})+" "},decompressFromUTF16:function(s){return null==s?"":""==s?null:g._decompress(s.length,16384,function(l){return s.charCodeAt(l)-32})},compressToUint8Array:function(s){for(var l=g.compress(s),f=new Uint8Array(2*l.length),u=0,h=l.length;u<h;u++){var T=l.charCodeAt(u);f[2*u]=T>>>8,f[2*u+1]=T%256}return f},decompressFromUint8Array:function(s){if(null==s)return g.decompress(s);for(var l=new Array(s.length/2),f=0,u=l.length;f<u;f++)l[f]=256*s[2*f]+s[2*f+1];var h=[];return l.forEach(function(T){h.push(r(T))}),g.decompress(h.join(""))},compressToEncodedURIComponent:function(s){return null==s?"":g._compress(s,6,function(l){return a.charAt(l)})},decompressFromEncodedURIComponent:function(s){return null==s?"":""==s?null:(s=s.replace(/ /g,"+"),g._decompress(s.length,32,function(l){return c(a,s.charAt(l))}))},compress:function(s){return g._compress(s,16,function(l){return r(l)})},_compress:function(s,l,f){if(null==s)return"";for(var u,h,C,D,T={},O={},v="",w=2,x=3,y=2,A=[],d=0,m=0,o=0;o<s.length;o+=1)if(C=s.charAt(o),Object.prototype.hasOwnProperty.call(T,C)||(T[C]=x++,O[C]=!0),D=v+C,Object.prototype.hasOwnProperty.call(T,D))v=D;else{if(Object.prototype.hasOwnProperty.call(O,v)){if(v.charCodeAt(0)<256){for(u=0;u<y;u++)d<<=1,m==l-1?(m=0,A.push(f(d)),d=0):m++;for(h=v.charCodeAt(0),u=0;u<8;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1}else{for(h=1,u=0;u<y;u++)d=d<<1|h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h=0;for(h=v.charCodeAt(0),u=0;u<16;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1}0==--w&&(w=Math.pow(2,y),y++),delete O[v]}else for(h=T[v],u=0;u<y;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1;0==--w&&(w=Math.pow(2,y),y++),T[D]=x++,v=String(C)}if(""!==v){if(Object.prototype.hasOwnProperty.call(O,v)){if(v.charCodeAt(0)<256){for(u=0;u<y;u++)d<<=1,m==l-1?(m=0,A.push(f(d)),d=0):m++;for(h=v.charCodeAt(0),u=0;u<8;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1}else{for(h=1,u=0;u<y;u++)d=d<<1|h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h=0;for(h=v.charCodeAt(0),u=0;u<16;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1}0==--w&&(w=Math.pow(2,y),y++),delete O[v]}else for(h=T[v],u=0;u<y;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1;0==--w&&(w=Math.pow(2,y),y++)}for(h=2,u=0;u<y;u++)d=d<<1|1&h,m==l-1?(m=0,A.push(f(d)),d=0):m++,h>>=1;for(;;){if(d<<=1,m==l-1){A.push(f(d));break}m++}return A.join("")},decompress:function(s){return null==s?"":""==s?null:g._decompress(s.length,32768,function(l){return s.charCodeAt(l)})},_decompress:function(s,l,f){for(var w,x,y,A,d,m,u=[],h=4,T=4,O=3,C="",D=[],o={val:f(0),position:l,index:1},v=0;v<3;v+=1)u[v]=v;for(x=0,A=Math.pow(2,2),d=1;d!=A;)y=o.val&o.position,o.position>>=1,0==o.position&&(o.position=l,o.val=f(o.index++)),x|=(0<y?1:0)*d,d<<=1;switch(x){case 0:for(x=0,A=Math.pow(2,8),d=1;d!=A;)y=o.val&o.position,o.position>>=1,0==o.position&&(o.position=l,o.val=f(o.index++)),x|=(0<y?1:0)*d,d<<=1;m=r(x);break;case 1:for(x=0,A=Math.pow(2,16),d=1;d!=A;)y=o.val&o.position,o.position>>=1,0==o.position&&(o.position=l,o.val=f(o.index++)),x|=(0<y?1:0)*d,d<<=1;m=r(x);break;case 2:return""}for(w=u[3]=m,D.push(m);;){if(s<o.index)return"";for(x=0,A=Math.pow(2,O),d=1;d!=A;)y=o.val&o.position,o.position>>=1,0==o.position&&(o.position=l,o.val=f(o.index++)),x|=(0<y?1:0)*d,d<<=1;switch(m=x){case 0:for(x=0,A=Math.pow(2,8),d=1;d!=A;)y=o.val&o.position,o.position>>=1,0==o.position&&(o.position=l,o.val=f(o.index++)),x|=(0<y?1:0)*d,d<<=1;u[T++]=r(x),m=T-1,h--;break;case 1:for(x=0,A=Math.pow(2,16),d=1;d!=A;)y=o.val&o.position,o.position>>=1,0==o.position&&(o.position=l,o.val=f(o.index++)),x|=(0<y?1:0)*d,d<<=1;u[T++]=r(x),m=T-1,h--;break;case 2:return D.join("")}if(0==h&&(h=Math.pow(2,O),O++),u[m])C=u[m];else{if(m!==T)return null;C=w+w.charAt(0)}D.push(C),u[T++]=w+C.charAt(0),w=C,0==--h&&(h=Math.pow(2,O),O++)}}},null!=e&&(e.exports=t);const re=ce.exports;var B=(e=>(e.UPLOAD_CRAWL="ads#CRAWL",e.UPLOAD_BASIC_DISPLAY_AD="ads#BASIC_DISPLAY_AD",e.GET_PM_EXTERNAL_CONFIG="ads#GET_EXTERNAL_CONFIGURATION",e.FETCH_HTTP_RESPONSE="ads#FETCH_HTTP_RESPONSE",e))({});async function de(e,t){var r={};r[e]=t,await H.storage.local.set(r)}async function fe(e,t,r){let n=await(r?null:async function(e){return(await H.storage.local.get(e))[e]}(e));return null==n&&await de(e,n=await t()),n}function he(e){return e.split(".").slice(e.endsWith(".uk")||e.endsWith(".jp")?-3:-2).join(".")}async function ge(e){var t=await fe("configTs",Date.now);return fe("config",async()=>{var a=await e({type:B.GET_PM_EXTERNAL_CONFIG,payload:void 0}),a=JSON.parse(a);return a.TimeOffset=a.Now&&Date.now()-a.Now||0,function(e){null!=(e=e.AdRules)&&e.forEach(r=>{var a=null!=(a=re.decompressFromUTF16(r.ParseTreeString||""))?a:"";r.ParseTree=JSON.parse(a),delete r.ParseTreeString})}(a),function(e){var t;e.ParsedSiteConfigs=null==(t=e.SiteConfigs)?void 0:t.reduce((r,n)=>(r[n.d]=n.r,r),{}),delete e.SiteConfigs}(a),function(e){var t;e.ParsedUrlBlackList=null==(t=e.UrlBlackList)?void 0:t.filter(r=>r.BlockAllAds).reduce((r,n)=>{var a,i;return(null!=(i=r[a=he(n.Hostname)])?i:r[a]=[]).push(n.UrlRegex),r},{}),delete e.UrlBlackList}(a),de("configTs",Date.now()),a},18e5<Date.now()-t)}function V(){return window.self===window.top}class Ie{constructor(t){this.config=t}async inject(t){return new Promise((r,n)=>{const a=this.defineOnCspError(n),i=()=>{var c,g;try{document.addEventListener("securitypolicyviolation",a);const s=document.createElement(t),l=()=>{var u,h;this.config.keepInDom||s.remove(),null!=(h=(u=this.config).onInjected)&&h.call(u)},f=this.getManifestVersion();3===f?s.onload=l:setTimeout(l),this.setSrc(s,f),null!=(c=this.config.logger)&&c.log(s),null!=(g=document.body)&&g.appendChild(s),document.removeEventListener("securitypolicyviolation",a),r()}catch(s){n(s)}finally{document.removeEventListener("DOMContentLoaded",i)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()})}defineOnCspError(t){return r=>{null!=t&&t(Error("Blocked by CSP: "+JSON.stringify({host:window.location.hostname,blockedUri:r.blockedURI,violatedDirective:r.violatedDirective,originalPolicy:r.originalPolicy})))}}getManifestVersion(){return"number"==typeof __AD_FINDER_MANIFEST_VERSION__?__AD_FINDER_MANIFEST_VERSION__:H.runtime.getManifest().manifest_version}setSrc(t,r){if(3===r){if(!this.config.mv3Path)throw Error("mv3Path config must be passed for Manifest V3 extensions");t.src=H.runtime.getURL(this.config.mv3Path)}else{if(2!==r)throw Error("Unsupported manifest version "+r);if(!this.config.mv2Content)throw Error("mv2Content config must be passed for Manifest V2 extensions");t.innerText=this.config.mv2Content}}}class Ue{constructor(t){this.config=t}sendMessage(t,r,n,a){window.postMessage({type:t,payload:r,nonce:a},"*",n)}onMessage(t,r){window.addEventListener("message",async n=>{var h,u,l,{type:n,payload:i,nonce:c}=null!=(n=n.data)?n:{};n===t&&(null!=(u=this.config.logger)&&u.debug("[ad-finder-custom-event] Recieved message:",{type:n,payload:i}),void 0!==(u=await r(i)))&&({response:u,transferables:l}=u,null!=(h=this.config.logger)&&h.debug("[ad-finder-custom-event] Sending response:",{name:n,payload:i,response:u}),this.sendMessage(n+this.config.responseSuffix,u,l,c))})}}const K=class{constructor(e){this.config=e,this.injector=new Ie({logger:e.logger,keepInDom:e.keepPathmaticsInDom,mv2Content:`"use strict";(()=>{var ur=Object.create;var Dt=Object.defineProperty;var lr=Object.getOwnPropertyDescriptor;var hr=Object.getOwnPropertyNames;var fr=Object.getPrototypeOf,dr=Object.prototype.hasOwnProperty;var pr=(e,r,t)=>r in e?Dt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var mr=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var gr=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of hr(r))!dr.call(e,a)&&a!==t&&Dt(e,a,{get:()=>r[a],enumerable:!(n=lr(r,a))||n.enumerable});return e};var ye=(e,r,t)=>(t=e!=null?ur(fr(e)):{},gr(r||!e||!e.__esModule?Dt(t,"default",{value:e,enumerable:!0}):t,e));var x=(e,r,t)=>(pr(e,typeof r!="symbol"?r+"":r,t),t),we=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var B=(e,r,t)=>(we(e,r,"read from private field"),t?t.call(e):r.get(e)),D=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)};var k=(e,r,t)=>(we(e,r,"access private method"),t);var Lt=mr((_e,Ae)=>{(function(e){if(typeof _e=="object")Ae.exports=e();else if(typeof define=="function"&&define.amd)define(e);else{var r;try{r=window}catch{r=self}r.SparkMD5=e()}})(function(e){"use strict";var r=function(f,l){return f+l&4294967295},t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(f,l,s,i,c,o){return l=r(r(l,f),r(i,o)),r(l<<c|l>>>32-c,s)}function a(f,l){var s=f[0],i=f[1],c=f[2],o=f[3];s+=(i&c|~i&o)+l[0]-680876936|0,s=(s<<7|s>>>25)+i|0,o+=(s&i|~s&c)+l[1]-389564586|0,o=(o<<12|o>>>20)+s|0,c+=(o&s|~o&i)+l[2]+606105819|0,c=(c<<17|c>>>15)+o|0,i+=(c&o|~c&s)+l[3]-1044525330|0,i=(i<<22|i>>>10)+c|0,s+=(i&c|~i&o)+l[4]-176418897|0,s=(s<<7|s>>>25)+i|0,o+=(s&i|~s&c)+l[5]+1200080426|0,o=(o<<12|o>>>20)+s|0,c+=(o&s|~o&i)+l[6]-1473231341|0,c=(c<<17|c>>>15)+o|0,i+=(c&o|~c&s)+l[7]-45705983|0,i=(i<<22|i>>>10)+c|0,s+=(i&c|~i&o)+l[8]+1770035416|0,s=(s<<7|s>>>25)+i|0,o+=(s&i|~s&c)+l[9]-1958414417|0,o=(o<<12|o>>>20)+s|0,c+=(o&s|~o&i)+l[10]-42063|0,c=(c<<17|c>>>15)+o|0,i+=(c&o|~c&s)+l[11]-1990404162|0,i=(i<<22|i>>>10)+c|0,s+=(i&c|~i&o)+l[12]+1804603682|0,s=(s<<7|s>>>25)+i|0,o+=(s&i|~s&c)+l[13]-40341101|0,o=(o<<12|o>>>20)+s|0,c+=(o&s|~o&i)+l[14]-1502002290|0,c=(c<<17|c>>>15)+o|0,i+=(c&o|~c&s)+l[15]+1236535329|0,i=(i<<22|i>>>10)+c|0,s+=(i&o|c&~o)+l[1]-165796510|0,s=(s<<5|s>>>27)+i|0,o+=(s&c|i&~c)+l[6]-1069501632|0,o=(o<<9|o>>>23)+s|0,c+=(o&i|s&~i)+l[11]+643717713|0,c=(c<<14|c>>>18)+o|0,i+=(c&s|o&~s)+l[0]-373897302|0,i=(i<<20|i>>>12)+c|0,s+=(i&o|c&~o)+l[5]-701558691|0,s=(s<<5|s>>>27)+i|0,o+=(s&c|i&~c)+l[10]+38016083|0,o=(o<<9|o>>>23)+s|0,c+=(o&i|s&~i)+l[15]-660478335|0,c=(c<<14|c>>>18)+o|0,i+=(c&s|o&~s)+l[4]-405537848|0,i=(i<<20|i>>>12)+c|0,s+=(i&o|c&~o)+l[9]+568446438|0,s=(s<<5|s>>>27)+i|0,o+=(s&c|i&~c)+l[14]-1019803690|0,o=(o<<9|o>>>23)+s|0,c+=(o&i|s&~i)+l[3]-187363961|0,c=(c<<14|c>>>18)+o|0,i+=(c&s|o&~s)+l[8]+1163531501|0,i=(i<<20|i>>>12)+c|0,s+=(i&o|c&~o)+l[13]-1444681467|0,s=(s<<5|s>>>27)+i|0,o+=(s&c|i&~c)+l[2]-51403784|0,o=(o<<9|o>>>23)+s|0,c+=(o&i|s&~i)+l[7]+1735328473|0,c=(c<<14|c>>>18)+o|0,i+=(c&s|o&~s)+l[12]-1926607734|0,i=(i<<20|i>>>12)+c|0,s+=(i^c^o)+l[5]-378558|0,s=(s<<4|s>>>28)+i|0,o+=(s^i^c)+l[8]-2022574463|0,o=(o<<11|o>>>21)+s|0,c+=(o^s^i)+l[11]+1839030562|0,c=(c<<16|c>>>16)+o|0,i+=(c^o^s)+l[14]-35309556|0,i=(i<<23|i>>>9)+c|0,s+=(i^c^o)+l[1]-1530992060|0,s=(s<<4|s>>>28)+i|0,o+=(s^i^c)+l[4]+1272893353|0,o=(o<<11|o>>>21)+s|0,c+=(o^s^i)+l[7]-155497632|0,c=(c<<16|c>>>16)+o|0,i+=(c^o^s)+l[10]-1094730640|0,i=(i<<23|i>>>9)+c|0,s+=(i^c^o)+l[13]+681279174|0,s=(s<<4|s>>>28)+i|0,o+=(s^i^c)+l[0]-358537222|0,o=(o<<11|o>>>21)+s|0,c+=(o^s^i)+l[3]-722521979|0,c=(c<<16|c>>>16)+o|0,i+=(c^o^s)+l[6]+76029189|0,i=(i<<23|i>>>9)+c|0,s+=(i^c^o)+l[9]-640364487|0,s=(s<<4|s>>>28)+i|0,o+=(s^i^c)+l[12]-421815835|0,o=(o<<11|o>>>21)+s|0,c+=(o^s^i)+l[15]+530742520|0,c=(c<<16|c>>>16)+o|0,i+=(c^o^s)+l[2]-995338651|0,i=(i<<23|i>>>9)+c|0,s+=(c^(i|~o))+l[0]-198630844|0,s=(s<<6|s>>>26)+i|0,o+=(i^(s|~c))+l[7]+1126891415|0,o=(o<<10|o>>>22)+s|0,c+=(s^(o|~i))+l[14]-1416354905|0,c=(c<<15|c>>>17)+o|0,i+=(o^(c|~s))+l[5]-57434055|0,i=(i<<21|i>>>11)+c|0,s+=(c^(i|~o))+l[12]+1700485571|0,s=(s<<6|s>>>26)+i|0,o+=(i^(s|~c))+l[3]-1894986606|0,o=(o<<10|o>>>22)+s|0,c+=(s^(o|~i))+l[10]-1051523|0,c=(c<<15|c>>>17)+o|0,i+=(o^(c|~s))+l[1]-2054922799|0,i=(i<<21|i>>>11)+c|0,s+=(c^(i|~o))+l[8]+1873313359|0,s=(s<<6|s>>>26)+i|0,o+=(i^(s|~c))+l[15]-30611744|0,o=(o<<10|o>>>22)+s|0,c+=(s^(o|~i))+l[6]-1560198380|0,c=(c<<15|c>>>17)+o|0,i+=(o^(c|~s))+l[13]+1309151649|0,i=(i<<21|i>>>11)+c|0,s+=(c^(i|~o))+l[4]-145523070|0,s=(s<<6|s>>>26)+i|0,o+=(i^(s|~c))+l[11]-1120210379|0,o=(o<<10|o>>>22)+s|0,c+=(s^(o|~i))+l[2]+718787259|0,c=(c<<15|c>>>17)+o|0,i+=(o^(c|~s))+l[9]-343485551|0,i=(i<<21|i>>>11)+c|0,f[0]=s+f[0]|0,f[1]=i+f[1]|0,f[2]=c+f[2]|0,f[3]=o+f[3]|0}function u(f){var l=[],s;for(s=0;s<64;s+=4)l[s>>2]=f.charCodeAt(s)+(f.charCodeAt(s+1)<<8)+(f.charCodeAt(s+2)<<16)+(f.charCodeAt(s+3)<<24);return l}function h(f){var l=[],s;for(s=0;s<64;s+=4)l[s>>2]=f[s]+(f[s+1]<<8)+(f[s+2]<<16)+(f[s+3]<<24);return l}function d(f){var l=f.length,s=[1732584193,-271733879,-1732584194,271733878],i,c,o,E,U,M;for(i=64;i<=l;i+=64)a(s,u(f.substring(i-64,i)));for(f=f.substring(i-64),c=f.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<c;i+=1)o[i>>2]|=f.charCodeAt(i)<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(a(s,o),i=0;i<16;i+=1)o[i]=0;return E=l*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),U=parseInt(E[2],16),M=parseInt(E[1],16)||0,o[14]=U,o[15]=M,a(s,o),s}function p(f){var l=f.length,s=[1732584193,-271733879,-1732584194,271733878],i,c,o,E,U,M;for(i=64;i<=l;i+=64)a(s,h(f.subarray(i-64,i)));for(f=i-64<l?f.subarray(i-64):new Uint8Array(0),c=f.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<c;i+=1)o[i>>2]|=f[i]<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(a(s,o),i=0;i<16;i+=1)o[i]=0;return E=l*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),U=parseInt(E[2],16),M=parseInt(E[1],16)||0,o[14]=U,o[15]=M,a(s,o),s}function m(f){var l="",s;for(s=0;s<4;s+=1)l+=t[f>>s*8+4&15]+t[f>>s*8&15];return l}function _(f){var l;for(l=0;l<f.length;l+=1)f[l]=m(f[l]);return f.join("")}_(d("hello"))!=="5d41402abc4b2a76b9719d911017c592"&&(r=function(f,l){var s=(f&65535)+(l&65535),i=(f>>16)+(l>>16)+(s>>16);return i<<16|s&65535}),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function f(l,s){return l=l|0||0,l<0?Math.max(l+s,0):Math.min(l,s)}ArrayBuffer.prototype.slice=function(l,s){var i=this.byteLength,c=f(l,i),o=i,E,U,M,it;return s!==e&&(o=f(s,i)),c>o?new ArrayBuffer(0):(E=o-c,U=new ArrayBuffer(E),M=new Uint8Array(U),it=new Uint8Array(this,c,E),M.set(it),U)}}();function y(f){return/[\\u0080-\\uFFFF]/.test(f)&&(f=unescape(encodeURIComponent(f))),f}function S(f,l){var s=f.length,i=new ArrayBuffer(s),c=new Uint8Array(i),o;for(o=0;o<s;o+=1)c[o]=f.charCodeAt(o);return l?c:i}function T(f){return String.fromCharCode.apply(null,new Uint8Array(f))}function A(f,l,s){var i=new Uint8Array(f.byteLength+l.byteLength);return i.set(new Uint8Array(f)),i.set(new Uint8Array(l),f.byteLength),s?i:i.buffer}function N(f){var l=[],s=f.length,i;for(i=0;i<s-1;i+=2)l.push(parseInt(f.substr(i,2),16));return String.fromCharCode.apply(String,l)}function w(){this.reset()}return w.prototype.append=function(f){return this.appendBinary(y(f)),this},w.prototype.appendBinary=function(f){this._buff+=f,this._length+=f.length;var l=this._buff.length,s;for(s=64;s<=l;s+=64)a(this._hash,u(this._buff.substring(s-64,s)));return this._buff=this._buff.substring(s-64),this},w.prototype.end=function(f){var l=this._buff,s=l.length,i,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o;for(i=0;i<s;i+=1)c[i>>2]|=l.charCodeAt(i)<<(i%4<<3);return this._finish(c,s),o=_(this._hash),f&&(o=N(o)),this.reset(),o},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(f){return this._buff=f.buff,this._length=f.length,this._hash=f.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(f,l){var s=l,i,c,o;if(f[s>>2]|=128<<(s%4<<3),s>55)for(a(this._hash,f),s=0;s<16;s+=1)f[s]=0;i=this._length*8,i=i.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(i[2],16),o=parseInt(i[1],16)||0,f[14]=c,f[15]=o,a(this._hash,f)},w.hash=function(f,l){return w.hashBinary(y(f),l)},w.hashBinary=function(f,l){var s=d(f),i=_(s);return l?N(i):i},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(f){var l=A(this._buff.buffer,f,!0),s=l.length,i;for(this._length+=f.byteLength,i=64;i<=s;i+=64)a(this._hash,h(l.subarray(i-64,i)));return this._buff=i-64<s?new Uint8Array(l.buffer.slice(i-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(f){var l=this._buff,s=l.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c,o;for(c=0;c<s;c+=1)i[c>>2]|=l[c]<<(c%4<<3);return this._finish(i,s),o=_(this._hash),f&&(o=N(o)),this.reset(),o},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var f=w.prototype.getState.call(this);return f.buff=T(f.buff),f},w.ArrayBuffer.prototype.setState=function(f){return f.buff=S(f.buff,!0),w.prototype.setState.call(this,f)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(f,l){var s=p(new Uint8Array(f)),i=_(s);return l?N(i):i},w})});var K=class{constructor(r,t){this.operation=r;this.data=t}nonce=K.NONCE;static fromObject(r){return!r||r.nonce!==K.NONCE?null:new K(r.operation,r.data)}validate(){return this.nonce===K.NONCE}},R=K;x(R,"NONCE","z3ZCw_12v");var ot=class{crawlId;installId;zys;dateCrawled;crawlUrl;youTubeChannelId;youTubeChannelName;youTubeVideoId;constructor(r,t,n,a,u,h){this.crawlId=r,this.installId=t,this.zys=n,this.dateCrawled=a,this.crawlUrl=u,Object.assign(this,h)}get ads(){return this.zys}set ads(r){this.zys=r}};var wt=ye(Lt(),1);var I=class{x;y;width;height;text;sourceUrls;hash;hashOverride;type;typeOverride;canvases;svgs;depth;adRuleId;dedupeKey;duration;language;youTubeId;facebookData;netflixData;twitterData;vastData;outerHtml;constructor(r){this.x=r.x??0,this.y=r.y??0,this.width=r.width,this.height=r.height,this.text=r.text??"",this.sourceUrls=r.sourceUrls??[],this.hash=r.hash??"",this.type=r.type,this.canvases=[],this.svgs=[],this.depth=0,this.adRuleId=r.adRuleId,this.duration=r.duration,this.language=r.language,this.youTubeId=r.youTubeId,this.facebookData=r.facebookData,this.netflixData=r.netflixData,this.twitterData=r.twitterData,this.vastData=r.vastData}};var Ht=class{u;t;d;width;height;constructor(r){this.u=Ht.qualifyURL(r.url),this.t=r.urlType,this.d=r.depth,this.width=r.width,this.height=r.height}get url(){return this.u}set url(r){this.u=r}get urlType(){return this.t}set urlType(r){this.t=r}get depth(){return this.d}set depth(r){this.d=r}static qualifyURL(r,t){if(!r||new RegExp("^(?:\\\\w+-extension)|(?:about)|(?:blob):").test(r))return"";t=t||document;let n=t.createElement("a");return n.href=r,n.href}},v=Ht;x(v,"SourceUrlTags",new Set(["A","DIV","IFRAME","IMG","LINK","SCRIPT","SPAN","VIDEO"]));async function Z(e,r){let t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u=>v.SourceUrlTags.has(u.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),n=[],a=t.currentNode;for(;a;)n.push(...await Promise.all(yr(a,r))),a=t.nextNode();return n.filter(u=>u.url)}function yr(e,r){if(!e||!v.SourceUrlTags.has(e.nodeName))return[];if(e.nodeName=="IMG")return[be(e,r)];if(e.nodeName=="DIV"||e.nodeName=="SPAN"){let a=/url\\(['"]?([^'"]+)['"]?\\)/gi,u=getComputedStyle(e).getPropertyValue("background-image");return Array.from(u.matchAll(a)).filter(h=>h).map(h=>h[1]).map(async h=>{try{let d=new Image;return d.src=h,await d.decode(),be(d,r)}catch{return new v({url:h,urlType:7,depth:r})}})}if(e.nodeName==="VIDEO"){if(e=e.hasAttribute("src")?e:e.querySelector("source"),!e)return[];let a=e.getBoundingClientRect(),u=Math.round(a.width),h=Math.round(a.height);return[new v({url:e.getAttribute("src"),urlType:4,depth:r,width:u,height:h})]}let t=null,n=0;switch(e.nodeName){case"IFRAME":t=e.getAttribute("src"),n=1;break;case"SCRIPT":t=e.getAttribute("src"),n=6;break;case"LINK":t=e.getAttribute("href"),n=6;break;case"A":t=e.getAttribute("href"),n=8;break}return[new v({url:t,urlType:n,depth:r})]}function be(e,r){let t=e.getAttribute("src"),n=e.getBoundingClientRect(),a=Math.round(e.naturalWidth||n.width),u=Math.round(e.naturalHeight||n.height),h=0;return(n.width||a)<2&&(n.height||u)<2||a===43&&u===22||n.y+window.scrollY<5&&(n.width||a)<85&&(n.height||u)<=20?h=7:h=3,new v({url:t,urlType:h,depth:r,width:n.width||a,height:n.height||u})}async function _t(e,r){var n,a,u;let t=e.sourceUrls.filter(h=>h.t===3||h.t===4);if(e.type=e.typeOverride??(t.length===1&&(t[0].width||0)>=e.width-2&&(((n=t[0])==null?void 0:n.height)||0)>=e.height-2?t[0].t===3?1:3:7),e.hashOverride)return e.hash=e.hashOverride;if(e.hash=(await Promise.all(t.map(async h=>await tt(h.u||"",r)))).filter(h=>h).reduce((h,d)=>at(h,d),"")||"",e.type===7&&e.text){let h=ct(e.text.toLowerCase(),!0);e.hash=at(e.hash,h)}if(e.hash||((a=e.canvases)!=null&&a.length&&(e.hash=e.canvases.reduce((h,d)=>at(ct(d),h),e.hash)),(u=e.svgs)!=null&&u.length&&(e.hash=e.svgs.reduce((h,d)=>at(ct(d),h),e.hash))),e.type===7&&e.hash){let h=ct(_r(ve(Math.round(e.height)),ve(Math.round(e.width))),!0);e.hash=at(e.hash,h)}e.hash=btoa(e.hash)}async function tt(e,r){try{return ct(await r(e))}catch(t){return C(t),""}}function ct(e,r){if(wr(e)==="arraybuffer"){let t=e;return t.byteLength===0?"":wt.default.ArrayBuffer.hash(t,!0)}else{let t=e;return r?wt.default.hash(t,!0):wt.default.hashBinary(t,!0)}}function wr(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function at(e,r){if(!r)return e||"";if(!e)return r;if(e.length<r.length){let u=e;e=r,r=u}let t=e.length,n=r.length,a="";for(let u=0;u<n;u++)a+=String.fromCharCode(e.charCodeAt(u)^r.charCodeAt(u));for(let u=n;u<t;u++)a+=String.fromCharCode(e.charCodeAt(u));return a}function ve(e){let r=new ArrayBuffer(4);return new DataView(r).setUint32(0,e,!0),r}function _r(e,r){let t=new Uint8Array(e.byteLength+r.byteLength);return t.set(new Uint8Array(e),0),t.set(new Uint8Array(r),e.byteLength),t.buffer}var G=3e3;var kt="pc",qt="ca",lt=null;function C(...e){!lt||(e=e||[],e=e.map(r=>(r==null?void 0:r.stack)&&r.message?{error:r.message,stack:r.stack}:r),e=e.map(r=>typeof r!="object"||r instanceof String?r:JSON.stringify(r)),e.length==1?lt(e[0]):lt(e))}function Ce(e){lt=e||lt}var At=class{constructor(r,t,n,a){let u=Te(r);u==="object"?(this.left=0,Object.assign(this,r)):u==="number"&&(this.left=Math.round(Math.max(r||0,0))||0,this.top=Math.round(Math.max(t||0,0))||0,this.width=Math.round(Math.max(n||0,0))||0,this.height=Math.round(Math.max(a||0,0))||0)}get bottom(){return this.top+this.height}get right(){return this.left+this.width}toString(){return\`\${this.width}x\${this.height}@\${this.left},\${this.top}\`}},Ie=new RegExp("^(?:https?://)?[a-z0-9.-]+(.[a-z]+)+(?:$|/)","i");function Ar(){return([1e7]+-1e3+-1e3+-1e3+-1e11).replace(/[01]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function Te(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}function br(e,r){var a;let t={},n=Object.keys(r);for(let u=0,h=n.length;u<h;u++){let d=n[u];if(r.hasOwnProperty(d)){let p=r[d];if(p==null||p===""&&e[d]||p instanceof Array&&!p.length&&((a=e[d])==null?void 0:a.length)||(d==="top"||d==="left"||d==="X"||d==="Y")&&e[d]>0)continue;t[d]=r[d]}}return Object.assign(e,r)}function b(e){try{return e()}catch{return null}}var xn=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").map(e=>e.charCodeAt(0));function Ne(e){var r,t;return((t=(r=e.tagName)==null?void 0:r.toUpperCase)==null?void 0:t.call(r))||b(()=>e.outerHTML.substr(1,e.outerHTML.indexOf(" ")-1).toUpperCase())||""}function xe(e){let r=0,t="",n={" ":1,"\\f":1,"\\n":1,"\\r":1,"	":1,"\\v":1,"\\xA0":1,"\\u2028":1,"\\u2029":1};for(let a=0,u=e.length;a<u;a++)n[e.charAt(a)]?(r||(t+=" "),r=1):(r=0,t+=e.charAt(a));return t.trim()}function q(){return vr(P.location.hostname)}function vr(e){return e.split(".").slice(e.endsWith(".uk")||e.endsWith(".jp")?-3:-2).join(".")}function St(){let e=new Set(["aarp.org","abc.com","aol.com","attn.com","atttvnow.com","brainly.com","bravotv.com","cartoonnetwork.com","cbs.com","cbssports.com","chron.com","citationmachine.net","cnet.com","cnn.com","crunchyroll.com","dailymail.co.uk","delish.com","discoveryplus.com","easybib.com","espn.com","facebook.com/watch","fandom.com","foxbusiness.com","foxnews.com","fubo.tv","genius.com","go.cnn.com","go.com","goodhousekeeping.com","happykids.tv","hulu.com","imdb.com","investigationdiscovery.com","linkedin.com","locast.org","mlb.com","msn.com","music.amazon.com","music.apple.com","music.youtube.com","mytuner-radio.com","nexusmods.com","nfl.com","nhl.com","nypost.com","nytimes.com","paramountplus.com","pch.com","philo.com","playstation.com","pluto.tv","rawstory.com","realtor.com","refinery29.com","seattlepi.com","sfgate.com","sling.com","spanishdict.com","sporcle.com","steampowered.com","tablotv.com","therokuchannel.roku.com","try.frndlytv.com","tubitv.com","tv.apple.com","tv.youtube.com","twitch.tv","uproxx.com","usatoday.com","vudu.com","washingtonpost.com","watch.hgtv.com","watch.spectrum.net","weather.com","www3.nhk.or.jp","xbox.com","xfinity.com","yahoo.com","yelp.com","youtube.com","youtubekids.com"]);return O&&(e.has(P.location.hostname)||e.has(q()))}function V(e){e.documentElement&&(e=e.documentElement);let r=Ne(e);if(e.offsetParent===null&&r!=="BODY"&&r!=="HTML"&&r!=="FRAME")return new At;let n=(e.ownerDocument||document).defaultView||P,a=e.getBoundingClientRect();return new At(a.left+n.scrollX,a.top+n.scrollY,a.width,a.height)}var Se=["background-image","display","visibility","z-index","border-top-width","border-left-width","border-bottom-width","border-right-width","padding-top","padding-left","padding-bottom","padding-right","position","width","height","top","bottom","left","right","font-size"];function xr(e){var n;if(e._pm_st)return e.style&&(e._pm_st=br(e._pm_st,JSON.parse(JSON.stringify(e.style,Se)))),e._pm_st;let r=(n=e.ownerDocument)==null?void 0:n.defaultView;typeof window<"u"&&(!r||!r.opener)&&(r=window);let t=JSON.parse(JSON.stringify(r.getComputedStyle(e),Se));return e._pm_st=t,t}function Pe(e,r){let t=e.nodeName,n=xr(e),a=V(e);if((n==null?void 0:n.display)!=="none"&&a&&a.width>20&&a.height>20)if(t==="CANVAS"&&!e.matches(".__pm_marker"))try{r.canvases.push(e.toDataURL("image/jpeg",.2))}catch{}else t==="SVG"&&r.svgs.push(e.outerHTML)}function et(e){if(!e)return"";let r=(e==null?void 0:e.ownerDocument)||document,t=r.defaultView.NodeFilter;if(Te(e)==="htmldocument"&&e.body&&(e=e.body),!e)return"";let n={SCRIPT:1,NOSCRIPT:1,STYLE:1},a=Ne(e);if(a==="HTML"&&(e=e.querySelector("body")),!e)return"";let u=function(p){try{return p.nodeType===3?t.FILTER_ACCEPT:!p.tagName||n[p.tagName]||p.offsetParent===null?t.FILTER_REJECT:t.FILTER_ACCEPT}catch{return t.FILTER_REJECT}};if(e.nodeType!==3&&(!a||n[a]))return"";let h=r.createTreeWalker(e,t.SHOW_ELEMENT|t.SHOW_TEXT,{acceptNode:u},!0),d=[];for(;e;){if(e.nodeType===3){let p=xe(e.nodeValue||"");d.push(p)}e=h.nextNode()}return d.length?xe(d.join(" ")):""}function L(e,r){return P.requestIdleCallback?{id:P.requestIdleCallback(e,{timeout:r}),isIdleCallback:!0}:{id:setTimeout(e,r),isIdleCallback:!1}}var bt=null;function rt(e){bt=e||bt}function Fe(){if(typeof window>"u")return;let e=function(d,p,m,_){L(()=>{!bt||!d||bt(d,p,m,_)},1e4)},r=d=>new TextDecoder("utf-8").decode(new Uint8Array(d)),t=function(d,p){try{if(p=d.currentTarget||p,p=p._datadog_xhr||p,p.readyState===4&&p.status>=200&&p.status<=210){let m=b(()=>p.responseXML),_=b(()=>p.responseText)||b(()=>r(p.response))||b(()=>m.documentElement.outerHTML);(_||m)&&e(_,m,p.reponseType==="json",p.responseURL)}}catch{}},n=XMLHttpRequest.prototype.send;function a(){let d=this.onreadystatechange,p=arguments;this.onreadystatechange=function(m){var _;return t(m,this),(_=d==null?void 0:d.apply)==null?void 0:_.call(d,this,arguments)},n.apply(this,p)}XMLHttpRequest.prototype.send=a;let u=P.fetch,h=function(){return u.apply(this,arguments).then(d=>{let p=d.headers.get("Content-Type");if(p&&(p.includes("text")||p.includes("json")||p.includes("xml")||p.includes("javascript"))){let m=d.clone();L(()=>{m.text().then(_=>e(_,null,p.includes("json"),d.url))},5e3)}return d})};P.fetch=h}function Vt(e){if(!e)return null;let r=null;return e=(e+"").trim(),e=="start"?r=0:e.indexOf(":")>=0?r=b(()=>Math.round(e.split(":").reduce((t,n,a,u)=>t+parseFloat(n)*Math.pow(60,u.length-a-1),0)))||r:isNaN(e)||(r=Math.round(parseFloat(e))),r}var Oe,Bt,ht,vt,xt;function Re(e){var r;((r=ht[e.dedupeKey])==null?void 0:r.depth)>e.depth||(ht[e.dedupeKey]=e)}function Sr(){let e=P.location;return e.href.indexOf("youtube.com/watch")===-1?e.origin+e.pathname:e.href}async function Er(e){await Promise.all(e.map(r=>_t(r,H)))}async function Cr(){var t;let e=Object.values(ht),r=Object.values(vt);return ht={},vt={},await Er(e),new ot(Oe,Ct,e.concat(r).filter(n=>n.hash),Date.now()-(((t=X)==null?void 0:t.TimeOffset)||0),Bt,xt)}function F(e,r){if(!O){J(top,new R(kt,[e,r]));return}e.forEach(t=>vt[t.hash]=t),xt=r||xt,$()}var Ee=0;async function $(){var r;let e=Date.now();if(e-Ee>G){Ee=e;let t=await Cr();(r=Wt)==null||r(JSON.stringify(t))}}function Ue(){var r;if(!O)return;Oe=Ar();let e=(r=X)==null?void 0:r.ParsedSiteConfigs[q()];if(e){let t=new RegExp(e).exec(location.href);Bt=t?t.slice(1).join(""):location.protocol+"://"+location.hostname}else Bt=Sr();ht={},vt={},xt=void 0}function Ir(e,r){return e.reduce(function(t,n){return(t[r(n)]=t[r(n)]||[]).push(n),t},{})}function Et(e,r){return Object.values(Ir(e,r)).map(t=>t[0])}function J(e,r){e.postMessage(r,"*")}var W=[];async function Me(){C("FACEBOOK AD CAPTURE"),rt((e,r,t,n)=>{var a;try{if(!n||!n.includes("/api/graphql"))return;let u=e.split(\`
\`),h=[];for(let d=0,p=u.length;d<p;d++)try{let m=JSON.parse(u[d]),_=null,y=null,S=null,T=null,A=null,N=null;if(((a=m==null?void 0:m.data)==null?void 0:a.category)==="SPONSORED"){let w=m.data.node;w!=null&&w.sponsored_data&&(_=b(()=>w.sponsored_data.ad_id)||b(()=>w.comet_sections.content.story.sponsored_data.ad_id),y=b(()=>w.post_id)||b(()=>w.comet_sections.feedback.story.feedback_context.feedback_target_with_context.ufi_renderer.feedback.comet_ufi_summary_and_actions_renderer.feedback.subscription_target_id),S=b(()=>m.data.node.comet_sections.content.story.wwwURL)||b(()=>m.o.data.node.comet_sections.feedback.story.url)||b(()=>m.data.node.comet_sections.feedback.story.feedback_context.feedback_target_with_context.ufi_renderer.feedback.url),A=b(()=>m.o.data.node.comet_sections.feedback.story.feedback_context.feedback_target_with_context.ufi_renderer.feedback.owning_profile.id)||b(()=>m.data.node.comet_sections.content.story.actors[0].id),N=b(()=>m.data.node.comet_sections.content.story.comet_sections.message.story.message.ranges[0].entity.web_link.url)||b(()=>m.data.node.comet_sections.content.story.comet_sections.message.story.message.ranges[0].entity.external_url)||b(()=>m.data.node.comet_sections.content.story.comet_sections.message.story.message.ranges[0].entity.url))}y&&h.push({id:y,url:S,page_id:A,lp:N,ad_id:_})}catch{}W=W.concat(h)}catch{}}),await Tr()}async function Tr(){if(!z||!W||!W.length)return;let e="div[role='article']",r=Array.from(document.querySelectorAll(e));W=Et(W,n=>n.id);let t=[];for(let n=0,a=r.length;n<a;n++){let u=r[n],h=null,d=Array.from(u.querySelectorAll("a")).map(w=>w.href);for(let w=0,f=d.length;w<f;w++){let l=d[w];for(let s=0,i=W.length;s<i;s++){let c=W[s];if(l&&c.tracker&&l.includes(c.tracker)){h=c,W.splice(s,1);break}}if(h)break}if(!h)continue;let p=V(u),m=u.querySelector("a span"),_,y=(m==null?void 0:m.textContent)||m&&(_=m.closest("a"))&&(_==null?void 0:_.href.match(/facebook\\.com\\/([^/]+)/)[1]),S=u.querySelector("div[data-ad-preview='message']"),T=et(S),A=b(()=>{var w;return h.id||((w=h.url)==null?void 0:w.match(/\\/(\\d{7,})\\/?(?:\\?.*)?$/)[1])||btoa(SparkMD5.hash(h.url,!0))});if(!A)continue;let N=new I({x:p.left,y:p.top,width:p.width,height:p.height,text:T,sourceUrls:[new v({url:h.lp,urlType:8})].concat(await Z(u)),hash:A,type:u.querySelector("video")?105:Array.from(u.querySelectorAll("img")).filter(w=>w.naturalWidth>200&&w.naturalHeight>40).length?104:102,facebookData:{id:h.id,adid:h.ad_id,u:h.url,an:y,un:b(()=>new URL(h.url).pathname.split("/",2)[1]),pid:h.page_id}});N.sourceUrls=(N.sourceUrls||[]).filter(w=>(w==null?void 0:w.url)&&w.urlType!=3).slice(0,5),t.push(N)}F(t)}var De=null;function Le(){let e=document.querySelector("video.ad-video-player,video#ad-video-player"),r=document.querySelector(".AdUnitView a"),t=e&&e.src;if(e&&r&&t&&De!==t&&t.endsWith(".mp4")&&t.indexOf("bumper")===-1&&(t.indexOf("ads")>=0||t.indexOf("Ads")>=0)){if(!e.duration||isNaN(e.duration))return;De=t,L(()=>{tt(t,H).then(n=>F([new I({width:1920,height:1080,sourceUrls:[new v({url:t,urlType:4}),new v({url:r.href,urlType:8})],hash:btoa(n),type:3,duration:Math.round(e.duration)})]))});return}}var It={},He=!1;function Be(){if(C("NETFLIX AD CAPTURE"),!(typeof window>"u")){if(!He){let e=Object.defineProperty;Object.defineProperty=function(t,n,a){return L(()=>{if(Object.hasOwn(t,"isAd")&&t.isAd){let u=Nr(t);u&&(It[u.hash]=u)}}),e(t,n,a)},He=!0}F(Object.values(It)),It={}}}function Nr(e){let r=e.movieId;if(!r||It[r])return;let t=e.video_tracks[0].streams[0],n=t.res_w,a=t.res_h,u=e.audio_tracks[0].streams[0];return new I({hash:("n+++"+r).padEnd(r.length+4+(r.length+4)*6%8/2,"=").replace("===","A=="),sourceUrls:[new v({url:t.urls[0].url,urlType:4,width:n,height:a}),new v({url:u.urls[0].url,urlType:9})],width:n,height:a,duration:e.duration,language:u.language,netflixData:{id:r}})}var ft=[];async function ke(){C("TWITTER AD CAPTURE"),rt((e,r,t,n)=>{try{if(!n||!n.includes("HomeTimeline")&&!(n.includes("/conversation/")&&n.includes("/"+/\\d+$/.exec(window.location.pathname)[0]+".json")))return;let a=Pr(e);ft=ft.concat(a)}catch{}}),await Fr()}function Pr(e){var a,u,h,d,p,m,_;let r=JSON.parse(e);return([].concat.apply([],(_=(m=(p=(d=(h=(u=(a=r==null?void 0:r.data)==null?void 0:a.home)==null?void 0:u.home_timeline_urt)==null?void 0:h.instructions)==null?void 0:d.filter)==null?void 0:p.call(d,y=>(y==null?void 0:y.type)=="TimelineAddEntries"))==null?void 0:m.map)==null?void 0:_.call(m,y=>y.entries))||[]).map(y=>{var S;return(S=y.content)==null?void 0:S.itemContent}).filter(y=>y==null?void 0:y.promotedMetadata).map(y=>{var A,N,w,f,l,s,i,c,o,E,U,M,it,Zt,te,ee,re,ne,ie,se,oe,ae,ce,ue,le,he,fe,de,pe,me;let S=(o=(c=(i=(s=(l=(f=(w=(N=(A=y.tweet_results)==null?void 0:A.result)==null?void 0:N.card)==null?void 0:w.legacy)==null?void 0:f.binding_values)==null?void 0:l.filter)==null?void 0:s.call(l,st=>(st==null?void 0:st.key)=="unified_card"))==null?void 0:i.map)==null?void 0:c.call(i,st=>{var ge;return JSON.parse((ge=st.value)==null?void 0:ge.string_value)}))==null?void 0:o[0],T=((it=(M=(U=(E=S==null?void 0:S.destination_objects)==null?void 0:E.browser_1)==null?void 0:U.data)==null?void 0:M.url_data)==null?void 0:it.url)||((ee=(te=(Zt=S==null?void 0:S.destination_objects)==null?void 0:Zt.browser_with_docked_media_1)==null?void 0:te.url_data)==null?void 0:ee.url);return{id_str:(ne=(re=y==null?void 0:y.tweet_results)==null?void 0:re.result)==null?void 0:ne.rest_id,screen_name:(ue=(ce=(ae=(oe=(se=(ie=y==null?void 0:y.tweet_results)==null?void 0:ie.result)==null?void 0:se.core)==null?void 0:oe.user_results)==null?void 0:ae.result)==null?void 0:ce.legacy)==null?void 0:ue.screen_name,cardDestination:T,advertiserId:(fe=(he=(le=y==null?void 0:y.promotedMetadata)==null?void 0:le.advertiser_results)==null?void 0:he.result)==null?void 0:fe.rest_id,user_id_str:(me=(pe=(de=y==null?void 0:y.tweet_results)==null?void 0:de.result)==null?void 0:pe.legacy)==null?void 0:me.user_id_str}}).filter(y=>y.id_str&&y.screen_name)}async function Fr(){if(!z)return;let e=await Or(document,ft),r=e.map(t=>t.twitterData.tid);ft=ft.filter(t=>!r.includes(t.id_str)),F(e)}async function Or(e,r){let t="div.tweet.promoted-tweet",n=Array.from(e.querySelectorAll(t));n.length||(n=Array.from(e.querySelectorAll("article div>svg")).map(u=>u.parentElement.querySelector("span")).filter(u=>(u==null?void 0:u.textContent)&&u.textContent.length<50).map(u=>u.closest("article")));let a=[];for(let u=0;u<n.length;u++){let h=n[u],d=Array.from(h.querySelectorAll("div>span,a span")).map(A=>A.textContent).filter(A=>A==null?void 0:A.startsWith("@"))[0];d=d.startsWith("@")?d.substring(1):d;let p=null,m=null;for(m of r)if(m.screen_name==d&&(p=m.id_str,p))break;if(!p)continue;let _=et(h);_&&(_=_.replace(new RegExp("# (\\\\w)","gi"),"#$1"));let y=V(h),S=new I({x:y.left,y:y.top,width:y.width,height:y.height,text:_,sourceUrls:(await Z(h.querySelector(".tweet-details-fixer")||h)).concat([new v({url:m.cardDestination,urlType:8})]).filter(A=>A.url&&!A.url.includes("/profile_images/")&&!A.url.includes(p+"/retweets")&&!A.url.includes(p+"/likes")&&!A.url.includes("/using-twitter/how-to")),hash:("t+++"+p).padEnd(p.length+4+(p.length+4)*6%8/2,"=").replace("===","A=="),type:h.querySelector("video")||h.querySelector(".PlayableMedia")?105:Array.from(h.querySelectorAll("img")).filter(A=>A.naturalWidth>200&&A.naturalHeight>40).length?104:h.querySelector("iframe")?102:103,twitterData:{taid:parseInt(m.advertiserId||m.user_id_str||0),tid:parseInt(p),tsn:d}}),T=(S.sourceUrls||[]).filter(A=>A==null?void 0:A.url);S.sourceUrls=Et(T,A=>A.url),a.push(S)}return a}function jt(){C("VAST AD CAPTURE"),rt((e,r,t)=>{try{let n=e.substring(0,500),a=n.indexOf('"ad_id":')>=0||n.indexOf('"ad_type"')>=0,u=[];if(t||a)Rr(e,u);else if(n.indexOf("<VAST ")>=0||n.indexOf("<vmap:AdBreak ")>=0){let h=b(()=>(r==null?void 0:r.documentElement)||e&&new DOMParser().parseFromString(e,"application/xml").documentElement);Ur(h,u)}else return;Promise.allSettled(u).then(h=>{C("Ads found.",h.map(d=>d.value)),F(h.map(d=>d.value).filter(d=>d))})}catch(n){C(n)}})}function Rr(e,r){let t=b,n=t(()=>e&&JSON.parse(e)),a=t(()=>n.items);a!=null&&a.length&&Array.from(a).forEach(u=>{let h=t(()=>u.media.streamurl);if(!h)return;let d=t(()=>u.clickthrough),p=t(()=>u.media.duration),m=t(()=>u.ad_id||u.ad_video_id),_=t(()=>u.title);m&&q()==="peacocktv.com"&&(m=m.split(".")[0]);let y=t(()=>u.system);r.push(tt(h,H).then(S=>new I({width:1920,height:1080,sourceUrls:[new v({url:h,urlType:4}),new v({url:d,urlType:8}),new v({url:"http://"+y,urlType:1})].filter(A=>A.url),hash:btoa(S)||m,type:3,duration:Math.round(p),vastData:{Id:m,Title:_,System:y}})))})}function Ur(e,r){let t=b,n=t(()=>e==null?void 0:e.querySelectorAll("VAST Ad"));n&&Array.from(n).forEach(a=>{let u=a.querySelector("Creatives Creative");if(!u)return;let h=u.querySelector("MediaFiles");if(!h)return;let d=t(()=>u.querySelector("VideoClicks ClickThrough").textContent.trim())||t(()=>document.querySelector(".AdUnitView a").href.trim()),p=t(()=>Vt(u.querySelector("Duration").textContent)),m=t(()=>h.querySelector("MediaFile[type='video/mp4'],MediaFile[type='application/dash+xml'],MediaFile[type='video/mpd']").textContent.trim());if(!m){let l=u.querySelector("AdParameters"),s={},i,c=new RegExp("<(\\\\w+)>([^<]+)</\\\\1>","gi");for(;(i=c.exec(l.textContent))!==null;)s[i[1]]=i[2];p=t(()=>Vt(s.adDuration)),d=t(()=>s.clickUrl);let o=s.JsParameters;if(!o)return;let E=JSON.parse(o);m=t(()=>E.videos[0].url),m&&(p=p||E.duration,d=d||E.clickThruUrl||E.clickThroughUrl)}if(!m)return;let _=u.getAttribute("AdID")||u.getAttribute("AdId")||u.getAttribute("adid")||a.getAttribute("id");if(!_)return;q()==="peacocktv.com"&&(_=_.split(".")[0]);let y=t(()=>a.querySelector("AdTitle").textContent.trim()),S=t(()=>a.querySelector("AdSystem").textContent.trim()),T=a.querySelector("Extension"),A=t(()=>T.querySelector("CreativeParameter[name='_fw_advertiser_name']").textContent.trim())||t(()=>T.querySelector("CreativeParameter[name='fw_advertiser_name']").textContent.trim())||t(()=>T.querySelector("CreativeParameter[name='fw_advertiser']").textContent.trim()),N=t(()=>T.querySelector("CreativeParameter[name='fw_brand']").textContent.trim()),w=t(()=>T.querySelector("CreativeParameter[name='industry']").textContent.trim()),f=t(()=>T.querySelector("CreativeParameter[name='ccr_measurement']").textContent.trim());r.push(tt(m,H).then(l=>new I({width:1920,height:1080,sourceUrls:[new v({url:m,urlType:4}),new v({url:d,urlType:8}),new v({url:f,urlType:0})].filter(s=>s.url),hash:btoa(l)||_,type:3,duration:Math.round(p),vastData:{Id:_,Adv:A,Brand:N,Cat:w,Title:y,System:S}})))})}var qe=ye(Lt(),1);function Mr(e){return e?new URL(e).searchParams.get("v"):null}var Gt;function Tt(){return Gt||(Gt=document.querySelector("#movie_player")),Gt}function Dr(){return b(()=>{let e=JSON.parse(Tt().getDebugText());return e.ad_debug_videoId||e.addebug_videoId||e.ad_videoId})}function Lr(){return b(()=>{let e=document.querySelector("#upload-info a.yt-simple-endpoint"),r=e.href.split("/");return{youTubeChannelId:r[r.length-1],youTubeChannelName:e.textContent.trim(),youTubeVideoId:b(()=>Mr(window.location.href))}})}function Hr(){let e="",r=new RegExp("\\\\.[a-z]{2,4}$"),t=Array.from(document.querySelectorAll(".ytp-a"+e+"d-button-text")).map(a=>a.textContent).filter(a=>a&&r.test(a))[0];if(t&&Ie.test(t)){let a=t.indexOf("http://")===0||t.indexOf("https://")===0?t:"https://"+t.toLowerCase();return new v({url:a,urlType:8})}let n=document.querySelector("a.ytd-image-companion-renderer[href*='googlead'],a.ytd-action-companion-renderer[href*='googlead']");if(n!=null&&n.href){let a=new v({url,urlType:8});if(a.url)return a}return null}function Br(e){return e?btoa(qe.default.hash("YouTube+"+e,!0)):null}function kr(){return b(()=>Tt().getAdState()>0||JSON.parse(Tt().getDebugText()).addebug_videoId)}function Ve(){if(!kr())return $();C("YouTube ad capturing detected ad playing.");let e=0,r=640,t=360,n=0,a=0,u=Tt(),h=u.querySelector("a.ytp-title-link"),d=u.querySelector("video");if(d){e=d.duration||0;let p=V(d);r=(p==null?void 0:p.width)||r,t=(p==null?void 0:p.height)||t,n=(p==null?void 0:p.left)||n,a=(p==null?void 0:p.top)||a}L(()=>{let p=Hr(),m=Dr()||void 0,_=Lr(),y=p?[p]:[],S=new I({x:n,y:a,width:r,height:t,text:h==null?void 0:h.textContent,sourceUrls:y,hash:Br(m),type:3,duration:Math.round(e),youTubeId:m});F([S],_)})}var g,Xt,Nt,Pt,zt,mt,$t,Y,dt,Yt,qr,gt,Jt,j,pt=class{constructor(r=null){D(this,j,(g=class{static evaluate(t,n,a){try{if(!this[t.r])throw new Error(t.r+" is not a parser rule function.");return this[t.r](t,n,a)}catch(u){this.log("Error "+t.r+' at "'+this.GetText(t)+'": '+u)}}static PassOn(t,n){return this.evaluate(t.c[0],n)}static NoOp(t){this.log(\`Unimplemented rule: \${t.r} at "\${this.GetText(t.t)}".\`)}static PropName(t){return t.c?t.c[0].t:k(this,mt,$t).call(this,t.t)}static ObjectLit(t,n){let a={};return t.c.forEach(u=>this.PropExpAssign(u,n,a)),a}static PropExpAssign(t,n,a){let u=this.evaluate(t.c[0],n),h=this.evaluate(t.c[1],n);a[u]=h}static StrLit(t){return k(this,mt,$t).call(this,t==null?void 0:t.t)}static NumLit(t){return Number.parseFloat(t==null?void 0:t.t)}static IntLit(t){return Number.parseInt(t==null?void 0:t.t)}static BoolLit(t){return t.t&&t.t=="true"}static NullLit(){return null}static IdExp(t,n){return this.evaluate(t.c[0],n)}static Id(t,n){return n[t.t]}static FuncExp(t,n){return this.evaluate(t.c[0],n)}static ArrowFunc(t,n){var h,d;let a=(d=(h=t.c[0])==null?void 0:h.c)==null?void 0:d.map(p=>k(this,Y,dt).call(this,p)).flat(),u=this;return function(...p){a.forEach((_,y)=>{n[_]=p[y]});let m=u.evaluate(t.c[1],n);return a.forEach(_=>{delete n[_]}),m}}static AnonFuncDecl(t,n){var h,d;let a=(d=(h=t.c[0])==null?void 0:h.c)==null?void 0:d.map(p=>k(this,Y,dt).call(this,p)).flat(),u=this;return function(...p){a.forEach((_,y)=>{n[_]=p[y]});let m=u.evaluate(t.c[1],n);return a.forEach(_=>{delete n[_]}),m}}static GetText(t){return k(this,Y,dt).call(this,t).join(" ")}static ElementList(t,n){return t.c.map(a=>this.evaluate(a,n))}static ArgsExp(t,n){let a=t.c[0],u=this.evaluate(t.c[1],n),h=this.evaluate(a,n,u);return typeof h=="function"&&(h=h.apply(a._this??null,u)),delete a._this,h}static Args(t,n){return t.c.map(a=>this.evaluate(a,n))}static Arg(t,n){return this.evaluate(t.c[0],n)}static MemberDotExp(t,n,a){return k(this,gt,Jt).call(this,t,n,a,!0)}static MemberIndexExp(t,n,a){return k(this,gt,Jt).call(this,t,n,a)}static ErrorNodeImpl(t){this.log(\`Error parsing \${t.r} at \${t.t} (unexpected token?)\`)}static AdditiveExp(t,n){switch(t.c[1].t){case"+":return this.evaluate(t.c[0],n)+this.evaluate(t.c[2],n);case"-":return this.evaluate(t.c[0],n)-this.evaluate(t.c[2],n);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static MultiplicativeExp(t,n){switch(t.c[1].t){case"*":return this.evaluate(t.c[0],n)*this.evaluate(t.c[2],n);case"/":return this.evaluate(t.c[0],n)/this.evaluate(t.c[2],n);case"%":return this.evaluate(t.c[0],n)%this.evaluate(t.c[2],n);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static RelationalExp(t,n){switch(t.c[1].t){case">":return this.evaluate(t.c[0],n)>this.evaluate(t.c[2],n);case"<":return this.evaluate(t.c[0],n)<this.evaluate(t.c[2],n);case">=":return this.evaluate(t.c[0],n)>=this.evaluate(t.c[2],n);case"<=":return this.evaluate(t.c[0],n)<=this.evaluate(t.c[2],n);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static EqualityExp(t,n){switch(t.c[1].t){case"==":return this.evaluate(t.c[0],n)==this.evaluate(t.c[2],n);case"!=":return this.evaluate(t.c[0],n)!=this.evaluate(t.c[2],n);case"===":return this.evaluate(t.c[0],n)===this.evaluate(t.c[2],n);case"!==":return this.evaluate(t.c[0],n)!==this.evaluate(t.c[2],n);default:throw new Error("Unknown binary operator "+t.c[1].t)}}static TernaryExp(t,n){return this.evaluate(t.c[0],n)?this.evaluate(t.c[1],n):this.evaluate(t.c[2],n)}static CoalesceExp(t,n){return this.evaluate(t.c[0],n)??this.evaluate(t.c[1],n)}static InstanceofExp(t,n){return this.evaluate(t.c[0],n)instanceof this.evaluate(t.c[1],n)}static LogicalAndExp(t,n){return this.evaluate(t.c[0],n)&&this.evaluate(t.c[1],n)}static LogicalOrExp(t,n){return this.evaluate(t.c[0],n)||this.evaluate(t.c[1],n)}static UnaryPlusExp(t,n){return+this.evaluate(t.c[0],n)}static UnaryMinusExp(t,n){return-this.evaluate(t.c[0],n)}static BitNotExp(t,n){return~this.evaluate(t.c[0],n)}static NotExp(t,n){return!this.evaluate(t.c[0],n)}static ParenthesizedExp(t,n){return this.evaluate(t.c[0],n)}static Eos(){return null}static _x_query(t,n){return Array.from((t==null?void 0:t.querySelectorAll(n))??[])}static _x_where(t,n){return t==null?void 0:t.filter(n)}static _x_select(t,...n){let a=n.length;if(!n||a===0)throw new Error("Method 'select' expects on or more arrow functions.");return t==null?void 0:t.map((u,h)=>{if(a>1){let d=[];for(let p=0;p<a-1;p++)d[p]=n[p](u,...p==0?[h]:d);return n[a-1](u,...d)}else return n[0](u,h)})}static _x_width(t){return t==null?void 0:t.scrollWidth}static _x_height(t){return t==null?void 0:t.scrollHeight}static _x_text(t){var n,a;return(a=(n=t==null?void 0:t.textContent)==null?void 0:n.trim())==null?void 0:a.replaceAll(B(this,Pt)," ")}static _x_parent(t){return t==null?void 0:t.parentNode}},Xt=new WeakMap,Nt=new WeakMap,Pt=new WeakMap,zt=new WeakMap,mt=new WeakSet,$t=function(t){return t==null?void 0:t.replaceAll(B(this,Nt),"")},Y=new WeakSet,dt=function(t,n=null){var a;return n=n??[],(a=t.c)==null||a.forEach(u=>k(this,Y,dt).call(this,u,n)),t.t&&n.push(t.t),n},Yt=new WeakSet,qr=function(t,n=0){this.log(\`\${"  ".repeat(n)}\${t.r}: \${this.GetText(t)}\`)},gt=new WeakSet,Jt=function(t,n,a,u){let h=this.evaluate(t.c[0],n),d=u?t.c[1].t:this.evaluate(t.c[1],n);return this["_x_"+d]?this["_x_"+d](h,...a??[]):(t._this=h,h[d])},D(g,mt),D(g,Y),D(g,Yt),D(g,gt),D(g,Xt,0),D(g,Nt,new RegExp(\`(?:^['"])|(?:['"]$)\`,"g")),D(g,Pt,new RegExp("\\\\s+","g")),D(g,zt,g),x(g,"ExpStmt",g.PassOn),x(g,"ExpSequence",g.PassOn),x(g,"LitExp",g.PassOn),x(g,"Literal",g.PassOn),x(g,"ArrayLitExp",g.PassOn),x(g,"ArrayLit",g.PassOn),x(g,"ArrowFuncBody",g.PassOn),x(g,"ObjectLitExp",g.PassOn),x(g,"IdName",g.PassOn),x(g,"MultOperator",g.NoOp),x(g,"AdditionOperator",g.NoOp),x(g,"RelationalOperator",g.NoOp),x(g,"EqualityOperator",g.NoOp),x(g,"ReservedWord",g.NoOp),x(g,"AssignExp",g.NoOp),x(g,"VarModifier",g.NoOp),x(g,"FormalParameterList",g.NoOp),x(g,"FormalParameterArg",g.NoOp),x(g,"PropAssign",g.NoOp),x(g,"Exp",g.NoOp),x(g,"Assignable",g.NoOp),x(g,"AnonFunc",g.NoOp),x(g,"ArrowFuncParameters",g.NoOp),x(g,"ArrayElem",g.PassOn),g));this.log=r,B(this,j).log=r??(()=>{})}simplifyTree(r){let t;for(;;){if(t=B(this,j)[r.r],!t)throw new Error(\`Rule \${r.r} not implemented.\`);if(t!==B(this,j).PassOn||!r.c||!r.c.length)break;r=r.c[0]}return r.c&&r.c.length&&(r.c=r.c.map(n=>this.simplifyTree(n))),r}debugPrintParseTree(r,t=0){this.log(\`\${" ".repeat(t*2)}\${r.r}: \${B(this,j).GetText(r)}\`),r.c&&r.c.length&&r.c.forEach(n=>this.debugPrintParseTree(n,t+1))}isValidRuleName(r){return r.indexOf("TerminalNode")===0||!!B(this,j)[r]}evaluate(r,t){return B(this,j).evaluate(r,t)}};j=new WeakMap;function We(e,r){return t=>new Promise(n=>{let a=e+"-response",u=Math.random(),h=p=>{let{type:m,payload:_,nonce:y}=p.data??{};m!==a||y!==u||(n(_),d())},d=()=>{window.removeEventListener("message",h)};window.addEventListener("message",h),a==="getFrameId-response"?t.postMessage(new R("getFrameId",u),"*"):window.postMessage({type:e,nonce:u,payload:t},"*"),r&&setTimeout(n,r)})}var $e,Je,Xe,nt,Ot,Rt,Qt,Ut=!1,Wt,H,X,Ct,z,P=typeof window>"u"?{location:{hostname:""}}:window,O=P.top===P.self,Vr=(Math.random()+1).toString(36).substring(2),Wr=2e3,ze=7e3,jr=5*ze,Gr=2e3;function Kt(e,r,...t){let n=setTimeout(e,r,...t);return Ot.add(n),n}function yt(e,r,...t){let n=setInterval(e,r,...t);return Rt.add(n),n}function Ye(e,r){let t=L(e,r);return t.isIdleCallback?Qt.add(t.id):Ot.add(t.id),t}var $r={"facebook.com":[Me],"hulu.com":[Le],"netflix.com":[Be],"twitter.com":[ke],"youtube.com":[Ve]};typeof q<"u"&&(nt=q());typeof St<"u"&&(St()||Ke())&&Fe();function Ke(){return $r[nt]}function Jr(){if(!O||!z)return;if(St()){jt();let a=new Set,u=()=>{let h=Array.from(P.frames).concat(Array.from(document.querySelectorAll("frame,iframe")).map(d=>b(d.contentWindow)).filter(d=>d));for(let d=0;d<h.length;d++)try{let p=h[d];if(!p||a.has(p))continue;J(p,new R(qt)),a.add(p)}catch(p){C(p)}};u(),yt(u,5e3)}let e=Date.now(),r=Ke(),t=function(a){e=Date.now(),Ye(async()=>{for(let u=0,h=r==null?void 0:r.length;r&&u<h;u++)await r[u].call();O&&(r||a)&&$()},G-500)},n=yt(t,G);t(!0),yt(()=>{Date.now()-e>G*5&&(clearInterval(n),Rt.delete(n),n=yt(t,G),t(!0))},G)}function Qe(){!O||(nt=q(),Ot=new Set,Rt=new Set,Qt=new Set,Ue(),$())}function Xr(){if(!O)return;let e=X.AdRules.filter(n=>!n.Hostnames||n.Hostnames.startsWith("^")&&!n.Hostnames.includes(nt)),r=X.AdRules.filter(n=>n.Hostnames&&!n.Hostnames.startsWith("^")&&n.Hostnames.includes(nt)),t=e.concat(r);Kt(()=>{let n=yt(()=>{Ge(t)},ze);Ge(t),Kt(()=>{r.length?t=r:clearInterval(n)},jr)},Wr)}var zr=new Set(["facebook.com","hulu.com","twitter.com"]);function Ze(){Jr(),zr.has(nt)||Xr()}function Yr(){if(!O)return;let e=P.location.href.split("#")[0];setInterval(()=>{let r=P.location.href.split("#")[0];r!==e&&(e=r,Ot.forEach(t=>clearTimeout(t)),Rt.forEach(t=>clearInterval(t)),Qt.forEach(t=>cancelIdleCallback(t)),Qe(),Ze())},1e3)}function Kr(e){Ut?_t(e,H).then(()=>window.dispatchEvent(new CustomEvent("displayAdFound",{detail:e}))):Re(e)}async function je(e){try{let r=R.fromObject(e.data);if(!r)return;let t=r.data;switch(r.operation){case qt:jt();break;case kt:F(t[0],t[1]);break;case"extractDisplayAd":O||await Ft(document.documentElement,t);break;case"displayAdFound":O&&Kr(t);break;case"getFrameId":J(e.source,{type:"getFrameId-response",payload:Vr,nonce:t});break}}catch(r){C(r);return}}function Qr(){function e(){P.removeEventListener("message",je,!0),P.addEventListener("message",je,!0)}e();let r=setInterval(e,500);setTimeout(clearInterval,3e3,r)}function Zr(e){Je=e.getInstallId,Ut=e.isRuleEditor,Wt=e.sendData,H=e.fetchHttpResponse,$e=e.getExternalConfiguration?r=>e.getExternalConfiguration(r):null,Ce(e.pm_log)}function tr(e){Xe=We("getFrameId",1e3),H=e.fetchHttpResponse,Qr(),O&&(Zr(e),Je().then(r=>Ct=r).then(r=>$e()).then(r=>X=r||{EnabledPct:0}).then(r=>{z=Array.from(Ct).map(t=>t.charCodeAt(0)).reduce((t,n)=>t+n,0)%100<X.EnabledPct,z&&(Qe(),Ze(),Yr())}))}async function tn(e,r){Ut||(O||(r.dedupeKey=await Xe(e.ownerDocument.defaultView)),r.dedupeKey??(r.dedupeKey=\`\${r.width}x\${r.height} @ \${r.x},\${r.y}\`)),J(top,new R("displayAdFound",r))}async function en(e,r){if(e){let t=V(e);(r.isFromIFrame||e.nodeName!=="IFRAME")&&(r.x+=t.left,r.y+=t.top),r.sourceUrls.push(...await Z(e,r.depth)),r.text+=et(e)+" ";let n=Array.from(e.querySelectorAll("canvas, svg"));n.length&&n.forEach(a=>Pe(a,r))}}async function Ft(e,r){if(await en(e,r),e.nodeName==="IFRAME"){r.depth++,r.outerHtml=e.outerHTML;try{await Ft(e.contentWindow.document.documentElement,r)}catch{J(e.contentWindow,new R("extractDisplayAd",r));try{var t=e.contentWindow.frames;for(let a=0,u=t.length;a<u;a++)try{J(t[a],new R("extractDisplayAd",r))}catch(h){C(h)}}catch(a){C(a)}}}else{let n;if(r.isFromIFrame){if(e.scrollWidth<=r.width-5||e.scrollHeight<=r.height-5)return;n=Array.from(e.querySelectorAll("iframe")).filter(a=>a.scrollWidth===r.width&&a.scrollHeight===r.height)[0]}else n=Array.from(e.querySelectorAll("iframe")).sort((a,u)=>a.scrollWidth*a.scrollHeight-u.scrollWidth*u.scrollHeight)[0];n?await Ft(n,r):(r.text=r.textOverride??r.text.trim(),tn(e,r))}}function rn(e,r,t){let a=new pt().evaluate(r,{doc:document});a&&a.forEach(async u=>await sn(e,u,t))}function nn(e){e.forEach(r=>rn(r.Id,r.ParseTree))}async function sn(e,r,t){let n={};!(r instanceof Node)&&r.element&&(n=r,r=r.element,delete n.element);let a=new I({width:r.scrollWidth,height:r.scrollHeight,adRuleId:e});a.isFromIFrame=r.nodeName==="IFRAME",Ut&&(a.adRuleName=t,a.tabUrl=location.href),Object.assign(a,n),await Ft(r,a)}function Ge(e){!O||Ye(r=>{r.didTimeout||(nn(e),Kt($,Gr))},4e3)}function er(...e){console.log("[injected-script]",...Array.isArray(e)?e:[e])}function Mt(e,r){return t=>new Promise(n=>{let a=r+"-response",u=Math.random(),h=p=>{let{type:m,payload:_,nonce:y}=p.data??{};m!==a||y!==u||(e==null||e("Got response:",{name:r,payload:t,response:_}),n(_),d())},d=()=>{window.removeEventListener("message",h)};window.addEventListener("message",h),e==null||e("Sending message:",{name:r,payload:t}),window.postMessage({type:r,payload:t,nonce:u},"*")})}function rr(e,r){return t=>{e==null||e("Sending message:",{type:r,payload:t}),window.postMessage({type:r,payload:t},"*")}}var nr="ads#INIT",ir="ads#SEND_DATA",sr="ads#GET_INSTALL_ID",or="ads#GET_EXTERNAL_CONFIG",ar="ads#FETCH_HTTP_RESPONSE";function cr(e){let r=e.enableLogs?er:void 0;r==null||r("Recieved init event",{config:e});let t=rr(r,ir),n=Mt(r,sr),a=Mt(r,or),u=Mt(r,ar);tr({getInstallId:n,fetchHttpResponse:u,sendData:t,pm_log:r,getExternalConfiguration:a})}function on(){window.addEventListener("message",({data:e})=>{(e==null?void 0:e.type)===nr&&cr(e.payload)})}on();})();
`,mv3Path:e.mv3PathmaticsPath,onInjected:this.initPathmaticsScript.bind(this)}),this.messenger=new Ue({logger:e.logger,responseSuffix:K.MESSENGER_SUFFIX})}async isSupportedSite(){const e=he(location.hostname);return V()?!await ge(this.config.sendMessageToBackground).then(t=>{return null==(t=null==(t=t.ParsedUrlBlackList)?void 0:t[e])?void 0:t.some(a=>new RegExp(a).test(location.href))}):!(location.hostname===K.GOOGLE_AUTH_HOSTNAME||K.SUBFRAME_DOMAIN_BLOCKLIST.has(e))}async start(){var n,a,t,e=await this.isSupportedSite();if(null!=(t=this.config.logger)&&t.log("Is supported site?",e),e)try{null!=(n=this.config.logger)&&n.log("Starting Pathmatics ad-finder...",{url:window.location.href}),this.setupMessageListeners(),await this.injector.inject("script"),null!=(a=this.config.logger)&&a.log("Pathmatics ad-finder injected!")}catch(c){null!=(t=this.config.logger)&&t.error("Failed to start Pathmatics ad-finder",c)}else null!=(e=this.config.logger)&&e.log("Not supported site, stopping pathmatics",window.location.hostname)}setupMessageListeners(){if(null==H.storage)throw Error("The storage permission is required for pathmatics' ad-finder");this.messenger.onMessage("ads#FETCH_HTTP_RESPONSE",async e=>{e=await function(e){if(!e)return Promise.resolve(new ArrayBuffer(0));try{return fetch("data:application/octet-binary;base64,"+e).then(r=>r.arrayBuffer(),()=>new ArrayBuffer(0))}catch{return Promise.resolve(new ArrayBuffer(0))}}(await this.config.sendMessageToBackground({type:B.FETCH_HTTP_RESPONSE,payload:e}));return{response:e,transferables:[e]}}),V()&&(this.messenger.onMessage("ads#GET_INSTALL_ID",async()=>({response:await this.config.getInstallId()})),this.messenger.onMessage("ads#SEND_DATA",async e=>{var i,c,a,e=JSON.parse(e),r=e.crawlId;for(const s of null!=(a=e.zys)?a:[])await(null==(c=(i=this.config).onAdDetected)?void 0:c.call(i,{id:r+"-"+s.hash,type:"pathmatics",timestamp:Date.now(),details:s}));await this.config.sendMessageToBackground({type:B.UPLOAD_CRAWL,payload:e}).catch(null==(a=this.config.logger)?void 0:a.error)}),this.messenger.onMessage("ads#GET_EXTERNAL_CONFIG",async()=>({response:await ge(this.config.sendMessageToBackground)})))}initPathmaticsScript(){null!=(t=this.config.logger)&&t.log("Initializing script");var t={enableLogs:null!=(t=this.config.enablePathmaticsLogs)&&t};this.messenger.sendMessage("ads#INIT",t)}};let Q=K;Q.MESSENGER_SUFFIX="-response",Q.SUBFRAME_DOMAIN_BLOCKLIST=new Set(["google.com","okta.com","amazon.com"]),Q.GOOGLE_AUTH_HOSTNAME="accounts.youtube.com";var Z,qe=new Uint8Array(16);function je(){if(Z||(Z=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))return Z(qe);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const He=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var M=[],ne=0;ne<256;++ne)M.push((ne+256).toString(16).substr(1));function $e(e,argument_1){argument_1=1<arguments.length&&void 0!==argument_1?argument_1:0,e=(M[e[argument_1+0]]+M[e[argument_1+1]]+M[e[argument_1+2]]+M[e[argument_1+3]]+"-"+M[e[argument_1+4]]+M[e[argument_1+5]]+"-"+M[e[argument_1+6]]+M[e[argument_1+7]]+"-"+M[e[argument_1+8]]+M[e[argument_1+9]]+"-"+M[e[argument_1+10]]+M[e[argument_1+11]]+M[e[argument_1+12]]+M[e[argument_1+13]]+M[e[argument_1+14]]+M[e[argument_1+15]]).toLowerCase();if(function(e){return"string"==typeof e&&He.test(e)}(e))return e;throw TypeError("Stringified UUID is invalid")}function me(e,t,r){var n=(e=e||{}).random||(e.rng||je)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return $e(n)}class Ge{constructor(t){this.config=t,this.fullType="@sensortower/ad-finder#"+t.type}onChildMessage(t){window.addEventListener("message",r=>{var a,n=r.data;null!=(a=this.config.logger)&&a.debug("[iframe-messenger] recieved message:",r),n.type===this.fullType&&n.nonce===this.config.nonce&&t(n.payload)})}postMessage(t){null!=(n=this.config.logger)&&n.debug("[iframe-messenger] post message:",t,top);var n={type:this.fullType,nonce:this.config.nonce,payload:t};null!=top&&top.postMessage(n,"*")}}const ae=class{constructor(e){this.config=e,this.iframeMessenger=new Ge({nonce:"ar3jkf0co128",type:"basic-display-ad-propagation",logger:e.logger})}async start(){var t,r,e;try{null!=(e=this.config.logger)&&e.log("Starting basic display ad detection...",{url:window.location.href}),V()&&(null!=(t=this.config.logger)&&t.log("Listening for ads from iframes"),this.iframeMessenger.onChildMessage(this.reportAd.bind(this))),await this.findAds(),null!=(r=this.config.logger)&&r.log("Started basic display ad detection!")}catch(a){null!=(e=this.config.logger)&&e.error("Failed to start basic display ad detection",a)}}async findAds(){var a,i,e=Date.now(),r=(this.isKnownIframeAd()&&(a=window.innerWidth,i=window.innerHeight,10<a)&&10<i&&(null!=(r=this.config.logger)&&r.log("Found Iframe Display Ad",window.location.href,{width:a,height:i}),await this.reportAd({id:me(),type:"basic-display",timestamp:e,details:{url:window.location.href,type:"iframe",width:a,height:i}})),this.findImageAdElement());r&&(null!=(a=this.config.logger)&&a.log("Found Image Display Ad",r.src,{width:r.width,height:r.height}),await this.reportAd({id:me(),type:"basic-display",timestamp:e,details:{url:r.src,type:"image",width:r.width,height:r.height}}))}isKnownIframeHost(){return!!ae.KNOWN_IFRAME_AD_HOSTS.find(e=>window.location.host.match(e))}isKnownIframeAd(){return!V()&&this.isKnownIframeHost()}findImageAdElement(){for(const e of ae.KNOWN_IMAGE_AD_SELECTORS){var t=document.querySelector(e);if(t)return t}}async reportAd(e){var r,n,t;V()?(t={...e,host:window.location.hostname},await(null==(n=(r=this.config).onAdDetected)?void 0:n.call(r,t)),await this.config.sendMessageToBackground({type:B.UPLOAD_BASIC_DISPLAY_AD,payload:t}).catch(null==(n=this.config.logger)?void 0:n.error)):this.iframeMessenger.postMessage(e)}};let ie=ae;function pe(e){return{...e,logger:void 0===e.logger?console:null!=(e=e.logger)?e:void 0}}function U(e){return null===e||!0===e||!1===e?NaN:(e=Number(e),isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e))}function N(e,t){if(t.length<e)throw new TypeError(e+" argument"+(1<e?"s":"")+" required, but only "+t.length+" present")}function F(e){N(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Ke(e){if(N(1,arguments),function(e){return N(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}(e)||"number"==typeof e)return e=F(e),!isNaN(Number(e))}ie.KNOWN_IFRAME_AD_HOSTS=[/.*\.2mdn\.net$/,/.*\.jivox\.com$/,/.*\.adnxs\.com$/],ie.KNOWN_IMAGE_AD_SELECTORS=["#google_image_div img",".GoogleCreativeContainerClass img"];var Qe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function oe(e){return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=t.width?String(t.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}var e={date:oe({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:oe({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:oe({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ot={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function X(e){return function(t,r){var g,r=r||{},c=(r="formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues?(c=e.defaultFormattingWidth||e.defaultWidth,g=r.width?String(r.width):c,e.formattingValues[g]||e.formattingValues[c]):(g=e.defaultWidth,c=r.width?String(r.width):e.defaultWidth,e.values[c]||e.values[g]),e.argumentCallback?e.argumentCallback(t):t);return r[c]}}function J(e){return function(t){var c,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(a);return a?(c=a[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],n=Array.isArray(a)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}(a,function(u){return u.test(c)}):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}(a,function(u){return u.test(c)}),a=e.valueCallback?e.valueCallback(n):n,{value:a=r.valueCallback?r.valueCallback(a):a,rest:t.slice(c.length)}):null}}const Ut={code:"en-US",formatDistance:function(e,t,r){e=Qe[e],e="string"==typeof e?e:1===t?e.one:e.other.replace("{{count}}",t.toString());return null!=r&&r.addSuffix?r.comparison&&0<r.comparison?"in "+e:e+" ago":e},formatLong:e,formatRelative:function(e,t,r,n){return ot[e]},localize:{ordinalNumber:function(e,t){var r=Number(e),e=r%100;if(20<e||e<10)switch(e%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:X({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:X({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:X({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:X({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:X({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return function(t){var i,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.match(e.matchPattern);return n&&(n=n[0],i=t.match(e.parsePattern))?(i=e.valueCallback?e.valueCallback(i[0]):i[0],{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(n.length)}):null}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:J({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:J({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:J({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:J({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rt(e,t){return N(2,arguments),function(e,t){return N(2,arguments),e=F(e).getTime(),t=U(t),new Date(e+t)}(e,-U(t))}function ee(e){N(1,arguments);var e=F(e),n=e.getUTCDay(),n=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-n),e.setUTCHours(0,0,0,0),e}function ye(e){N(1,arguments);var e=F(e),r=e.getUTCFullYear(),n=new Date(0),n=(n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0),ee(n)),i=new Date(0),i=(i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0),ee(i));return e.getTime()>=n.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function qt(e){N(1,arguments);e=F(e),e=ee(e).getTime()-function(e){N(1,arguments);var e=ye(e),r=new Date(0);return r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0),ee(r)}(e).getTime();return Math.round(e/6048e5)+1}function te(e,t){N(1,arguments);var t=t||{},n=t.locale,n=n&&n.options&&n.options.weekStartsOn,n=null==n?0:U(n),n=null==t.weekStartsOn?n:U(t.weekStartsOn);if(0<=n&&n<=6)return e=((e=(t=F(e)).getUTCDay())<n?7:0)+e-n,t.setUTCDate(t.getUTCDate()-e),t.setUTCHours(0,0,0,0),t;throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}function ve(e,t){N(1,arguments);var u,e=F(e),n=e.getUTCFullYear(),a=t||{},i=a.locale,i=i&&i.options&&i.options.firstWeekContainsDate,i=null==i?1:U(i),i=null==a.firstWeekContainsDate?i:U(a.firstWeekContainsDate);if(1<=i&&i<=7)return(a=new Date(0)).setUTCFullYear(n+1,0,i),a.setUTCHours(0,0,0,0),a=te(a,t),(u=new Date(0)).setUTCFullYear(n,0,i),u.setUTCHours(0,0,0,0),i=te(u,t),e.getTime()>=a.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1;throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively")}function Yt(e,t){N(1,arguments);e=F(e),e=te(e,t).getTime()-function(e,t){N(1,arguments);var n=null==(n=(n=(r=t||{}).locale)&&n.options&&n.options.firstWeekContainsDate)?1:U(n),n=null==r.firstWeekContainsDate?n:U(r.firstWeekContainsDate),r=ve(e,t),e=new Date(0);return e.setUTCFullYear(r,0,n),e.setUTCHours(0,0,0,0),te(e,t)}(e,t).getTime();return Math.round(e/6048e5)+1}function E(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}const j={y:function(e,t){e=e.getUTCFullYear(),e=0<e?e:1-e;return E("yy"===t?e%100:e,t.length)},M:function(e,t){e=e.getUTCMonth();return"M"===t?String(e+1):E(e+1,2)},d:function(e,t){return E(e.getUTCDate(),t.length)},a:function(e,t){var r=1<=e.getUTCHours()/12?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return E(e.getUTCHours()%12||12,t.length)},H:function(e,t){return E(e.getUTCHours(),t.length)},m:function(e,t){return E(e.getUTCMinutes(),t.length)},s:function(e,t){return E(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,e=e.getUTCMilliseconds();return E(Math.floor(e*Math.pow(10,r-3)),t.length)}};var $_midnight="midnight",$_noon="noon",$_morning="morning",$_afternoon="afternoon",$_evening="evening",$_night="night";function we(e,t){var r=0<e?"-":"+",e=Math.abs(e),a=Math.floor(e/60),e=e%60;return 0==e?r+String(a):(t=t||"",r+String(a)+t+E(e,2))}function Ae(e,t){return e%60==0?(0<e?"-":"+")+E(Math.abs(e)/60,2):Y(e,t)}function Y(e,t){var t=t||"",n=0<e?"-":"+",e=Math.abs(e);return n+E(Math.floor(e/60),2)+t+E(e%60,2)}const Vt={G:function(e,t,r){var n=0<e.getUTCFullYear()?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){var n;return"yo"===t?(n=e.getUTCFullYear(),r.ordinalNumber(0<n?n:1-n,{unit:"year"})):j.y(e,t)},Y:function(e,t,r,n){e=ve(e,n),n=0<e?e:1-e;return"YY"===t?E(n%100,2):"Yo"===t?r.ordinalNumber(n,{unit:"year"}):E(n,t.length)},R:function(e,t){return E(ye(e),t.length)},u:function(e,t){return E(e.getUTCFullYear(),t.length)},Q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return E(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return E(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getUTCMonth();switch(t){case"M":case"MM":return j.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return E(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){e=Yt(e,n);return"wo"===t?r.ordinalNumber(e,{unit:"week"}):E(e,t.length)},I:function(e,t,r){e=qt(e);return"Io"===t?r.ordinalNumber(e,{unit:"week"}):E(e,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):j.d(e,t)},D:function(e,t,r){e=function(e){N(1,arguments);var e=F(e),r=e.getTime(),e=(e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e.getTime());return Math.floor((r-e)/864e5)+1}(e);return"Do"===t?r.ordinalNumber(e,{unit:"dayOfYear"}):E(e,t.length)},E:function(e,t,r){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var a=e.getUTCDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return E(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var a=e.getUTCDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return E(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getUTCDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return E(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var a=1<=e.getUTCHours()/12?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){var e=e.getUTCHours(),a=12===e?$_noon:0===e?$_midnight:1<=e/12?"pm":"am";switch(t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){var e=e.getUTCHours(),a=17<=e?$_evening:12<=e?$_afternoon:4<=e?$_morning:$_night;switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){var n;return"ho"===t?(n=e.getUTCHours()%12,r.ordinalNumber(n=0===n?12:n,{unit:"hour"})):j.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):j.H(e,t)},K:function(e,t,r){e=e.getUTCHours()%12;return"Ko"===t?r.ordinalNumber(e,{unit:"hour"}):E(e,t.length)},k:function(e,t,r){e=e.getUTCHours();return 0===e&&(e=24),"ko"===t?r.ordinalNumber(e,{unit:"hour"}):E(e,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):j.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):j.s(e,t)},S:function(e,t){return j.S(e,t)},X:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Ae(i);case"XXXX":case"XX":return Y(i);default:return Y(i,":")}},x:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return Ae(i);case"xxxx":case"xx":return Y(i);default:return Y(i,":")}},O:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+we(i,":");default:return"GMT"+Y(i,":")}},z:function(e,t,r,n){var i=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+we(i,":");default:return"GMT"+Y(i,":")}},t:function(e,t,r,n){n=n._originalDate||e;return E(Math.floor(n.getTime()/1e3),t.length)},T:function(e,t,r,n){return E((n._originalDate||e).getTime(),t.length)}};function be(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function xe(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}const zt={p:xe,P:function(e,t){var i,r=e.match(/(P+)(p+)?/)||[],n=r[1];if(!(r=r[2]))return be(e,t);switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",be(n,t)).replace("{{time}}",xe(r,t))}};var Kt=["D","DD"],Qt=["YY","YYYY"];function _e(e,t,r){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://git.io/fxCyr"))}var tr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nr=/^'([^]*?)'?$/,ar=/''/g,ir=/[a-zA-Z]/;function or(e,t,r){N(2,arguments);var n=String(t),a=r||{},i=a.locale||Ut,r=i.options&&i.options.firstWeekContainsDate,r=null==r?1:U(r),r=null==a.firstWeekContainsDate?r:U(a.firstWeekContainsDate);if(!(1<=r&&r<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=i.options&&i.options.weekStartsOn,l=null==l?0:U(l),l=null==a.weekStartsOn?l:U(a.weekStartsOn);if(!(0<=l&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var O,C,h=F(e);if(Ke(h))return O=Rt(h,function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(h)),C={firstWeekContainsDate:r,weekStartsOn:l,locale:i,_originalDate:h},n.match(rr).map(function(v){var w=v[0];return"p"===w||"P"===w?(0,zt[w])(v,i.formatLong,C):v}).join("").match(tr).map(function(v){if("''"===v)return"'";var w=v[0];if("'"===w)return function(e){return e.match(nr)[1].replace(ar,"'")}(v);var x=Vt[w];if(x)return!a.useAdditionalWeekYearTokens&&function(e){return-1!==Qt.indexOf(e)}(v)&&_e(v,t,e),!a.useAdditionalDayOfYearTokens&&function(e){return-1!==Kt.indexOf(e)}(v)&&_e(v,t,e),x(O,v,i.localize,C);if(w.match(ir))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return v}).join("");throw new RangeError("Invalid time value")}const cr=function(){var r;function n(i){return Number.isInteger(i)&&i>=0}function a(i){this.name="ArgumentError",this.message=i}return function(i,c){if(c=c||{},typeof i!="function")throw new a("fetch must be a function");if(typeof c!="object")throw new a("defaults must be an object");if(c.retries!==void 0&&!n(c.retries))throw new a("retries must be a positive integer");if(c.retryDelay!==void 0&&!n(c.retryDelay)&&typeof c.retryDelay!="function")throw new a("retryDelay must be a positive integer or a function returning a positive integer");if(c.retryOn!==void 0&&!Array.isArray(c.retryOn)&&typeof c.retryOn!="function")throw new a("retryOn property expects an array or function");var g={retries:3,retryDelay:1e3,retryOn:[]};return c=Object.assign(g,c),function(l,f){var u=c.retries,h=c.retryDelay,T=c.retryOn;if(f&&f.retries!==void 0)if(n(f.retries))u=f.retries;else throw new a("retries must be a positive integer");if(f&&f.retryDelay!==void 0)if(n(f.retryDelay)||typeof f.retryDelay=="function")h=f.retryDelay;else throw new a("retryDelay must be a positive integer or a function returning a positive integer");if(f&&f.retryOn)if(Array.isArray(f.retryOn)||typeof f.retryOn=="function")T=f.retryOn;else throw new a("retryOn property expects an array or function");return new Promise(function(O,C){var D=function(w){var x=typeof Request<"u"&&l instanceof Request?l.clone():l;i(x,f).then(function(y){if(Array.isArray(T)&&T.indexOf(y.status)===-1)O(y);else if(typeof T=="function")try{return Promise.resolve(T(w,null,y)).then(function(A){A?v(w,null,y):O(y)}).catch(C)}catch(A){C(A)}else w<u?v(w,null,y):O(y)}).catch(function(y){if(typeof T=="function")try{Promise.resolve(T(w,y,null)).then(function(A){A?v(w,y,null):C(y)}).catch(function(A){C(A)})}catch(A){C(A)}else w<u?v(w,y,null):C(y)})};function v(w,x,y){var A=typeof h=="function"?h(w,x,y):h;setTimeout(function(){D(++w)},A)}D(0)})}}}();function Ee(e){return cr(fetch,{retryOn(t,r,n){if(null!==r||500<=n.status)return null!=(r=e.logger)&&r.log("retrying, attempt number "+(t+1)),!0},retries:5,retryDelay(t){var t=500*Math.pow(2,t);return t=t,Math.random()*t+t/2}})}class fr{constructor(t){this.config=t,this.fetch=Ee(t)}async upload(t){var i;await this.config.isEnabled()&&(null!=(i=this.config.logger)&&i.log("Uploading data:",t),i=Math.floor(t.timestamp/1e3),i={app_id:this.config.extensionId,install_id:await this.config.getInstallId(),time_zone:or(new Date,"OOOO"),app_version:this.config.extensionVersion,birth_year:await this.config.getBirthYear(),country_code:function(){let e=/^.+?(-|_)(.+?)($|-|_)/,t=[...navigator.languages,Intl.DateTimeFormat().resolvedOptions().locale].map(r=>{return null==(r=r.match(e))?void 0:r[2]}).find(r=>!!r);return null==t?void 0:t.toUpperCase()}(),websites:{[t.host]:{ad_events:[{timestamp:i,url:t.details.url}]}}},await this.fetch(this.config.basicDisplayAdsUploadUrl,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}))}}class hr{constructor(t){this.config=t,this.fetch=Ee(t)}async upload(t){var i;await this.config.isEnabled()&&(t=this.prepareData(t),null!=(i=this.config.logger)&&i.log("Uploading data:",t),t=await this.fetch(this.config.crawlUploadUrl,{method:"POST",body:re.compressToUint8Array(JSON.stringify(t)),headers:{"Content-Type":"application/octet-stream"}}).then(s=>{var l;return null==(l=this.config.logger)?void 0:l.log({status:s.status})}).catch(null==(i=this.config.logger)?void 0:i.error),null!=(i=this.config.logger))&&i.log("Response:",t)}prepareData(t){return{...t,PartnerVersion:H.runtime.getManifest().version,ExtensionId:H.runtime.id,ExtensionVersion:this.config.extensionVersion,UserAgent:navigator.userAgent,BrowserLanguage:navigator.language,BlankZys:null,PanelPartnerId:this.config.panelPartnerId}}}async function gr(e){return function(e){if(null==(e=re.decompressFromUint8Array(new Uint8Array(e))))throw Error("Failed to convert string to ArrayBuffer");return e}(await fetch(e).then(r=>r.arrayBuffer()))}return q.PROD_PM_EXTERNAL_CONFIG_ENDPOINT="https://p.qljx.co/Ajax0001/Config",q.PROD_UPLOAD_BASIC_DISPLAY_AD_ENDPOINT="https://api.stayfreeapps.com/v1/desktop/ads/upload",q.PROD_UPLOAD_CRAWL_ENDPOINT="https://p.qljx.co/Ajax0001/IPD",q.UNKNOWN_PARTNER_ID=0,q.initAdFinderInBackground=function(e){const t=pe(e),r=new hr(t),n=new fr(t);return{async processAdFinderMessage(a){var i;switch(a.type){case B.UPLOAD_CRAWL:return r.upload(a.payload).catch(null==(i=t.logger)?void 0:i.error);case B.GET_PM_EXTERNAL_CONFIG:return gr(e.pmExternalConfigUrl+"?installId="+await e.getInstallId()).catch(null==(i=t.logger)?void 0:i.error);case B.UPLOAD_BASIC_DISPLAY_AD:return n.upload(a.payload).catch(null==(i=t.logger)?void 0:i.error);case B.FETCH_HTTP_RESPONSE:return async function(e){const t=new Blob([e]),r=await new Promise((n,a)=>{const i=new FileReader;i.onload=()=>{"string"==typeof i.result&&n(i.result),a(Error("Failed to read buffer as string, got "+typeof i.result))},i.onerror=()=>a(i.error),i.onabort=()=>a("FileReader aborted"),i.readAsDataURL(t)});return(null==r?void 0:r.split(",").pop())||""}(await fetch(a.payload).then(l=>l.arrayBuffer()))}}}},q.initAdFinderInContentScript=function(e){var e=pe(e),r=new Q(e),n=new ie(e);r.start().catch(null==(r=e.logger)?void 0:r.error),n.start().catch(null==(r=e.logger)?void 0:r.error)},Object.defineProperties(q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),q}({});"function"==typeof define&&define.amd&&define(()=>adFinder);