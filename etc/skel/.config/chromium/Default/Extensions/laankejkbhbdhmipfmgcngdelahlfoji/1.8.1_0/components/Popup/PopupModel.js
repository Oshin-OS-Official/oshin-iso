define(["core/Logger","core/CoreAPI","core/vendor/DropletJS.PubSub.min","core/DomainParser"],function(Logger,API,PubSub,DomainParser){return class{url=null;timer=null;status=null;fullDomain=null;baseDomain=null;constructor(){this.url=API.StayFocusd.getCurrentURL(),this.status="INACTIVE",this.fullDomain=DomainParser.extractFullDomain(this.url),this.baseDomain=DomainParser.extractBaseDomain(this.url)}init(){var port=chrome.runtime.connect({name:"popup"}),self=this;port.onMessage.addListener(function(data){return"StayFocusd.timer.updated"===data.message&&self.updateTimer(data.payload.displayTimer),!0})}updateTimer(timer){this.timer=timer,this.updateStatus(),PubSub.publish("PopupModel.timer.updated",{timer:this.timer})}updateStatus(){this.status;API.NuclearOption.isActive()?this.status="NUCLEAR":!1===API.StayFocusd.isActive()?this.status="INACTIVE":this.status="ACTIVE"}isActive(){return"ACTIVE"===this.status}isNuclear(){return"NUCLEAR"===this.status}}});