import path from"node:path";import{mock}from"vitest-mock-extended";const mockedModules={};function standardizeModulePath(modulePath){return modulePath.endsWith(".js")||(modulePath+=".js"),modulePath}async function importAMD(modulePath){var absolutePath;return modulePath=standardizeModulePath(modulePath),null!=mockedModules[modulePath]?mockedModules[modulePath]:(absolutePath=path.resolve(defineOptions.rootPath,modulePath),absolutePath=path.relative(__dirname,absolutePath),moduleImportStack.push(modulePath),await import(absolutePath),absolutePath=await defineCompletedPromiseMap[modulePath],moduleImportStack.pop(),absolutePath)}function mockAMD(modulePath,implementation){modulePath=standardizeModulePath(modulePath);implementation=mock(implementation,{deep:!0});return mockedModules[modulePath]=implementation}export{importAMD,mockAMD};