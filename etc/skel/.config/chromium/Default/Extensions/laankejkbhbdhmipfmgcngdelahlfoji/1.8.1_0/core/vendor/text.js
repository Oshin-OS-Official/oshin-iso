define(["module"],function(module){"use strict";var fs,Cc,Ci,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap=[],masterConfig=module.config&&module.config()||{},text={version:"2.0.6",strip:function(content){var matches;return content?(matches=(content=content.replace(xmlRegExp,"")).match(bodyRegExp))&&(content=matches[1]):content="",content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,strip=!1,index=name.indexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||1<index)?(modName=name.substring(0,index),ext=name.substring(index+1,name.length)):modName=name,-1!==(index=(isRelative=ext||modName).indexOf("!"))&&(strip="strip"===isRelative.substring(index+1),isRelative=isRelative.substring(0,index),ext?ext=isRelative:modName=isRelative),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uPort,url=text.xdRegExp.exec(url);return!(url&&(uProtocol=url[2],uPort=(url=(url=url[3]).split(":"))[1],url=url[0],uProtocol&&uProtocol!==protocol||url&&url.toLowerCase()!==hostname.toLowerCase()||(uPort||url)&&uPort!==port))},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){var parsed,url,useXhr;config.isBuild&&!config.inlineText?onLoad():(masterConfig.isBuild=config.isBuild,config=(parsed=text.parseName(name)).moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(config),useXhr=masterConfig.useXhr||text.useXhr,!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([config],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}))},write:function(pluginName,moduleName,write,config){var content;buildMap.hasOwnProperty(moduleName)&&(content=text.jsEscape(buildMap[moduleName]),write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n"))},writeFile:function(pluginName,moduleName,req,write,config){var moduleName=text.parseName(moduleName),extPart=moduleName.ext?"."+moduleName.ext:"",nonStripName=moduleName.moduleName+extPart,fileName=req.toUrl(moduleName.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){function textWrite(contents){return write(fileName,contents)}textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}};return"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(fs=require.nodeRequire("fs"),text.get=function(url,callback){url=fs.readFileSync(url,"utf8");callback(url=0===url.indexOf("\ufeff")?url.substring(1):url)}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status;4===xhr.readyState&&(399<(status=xhr.status)&&status<600?((status=new Error(url+" HTTP status: "+status)).xhr=xhr,errback(status)):callback(xhr.responseText),masterConfig.onXhrComplete)&&masterConfig.onXhrComplete(xhr,url)},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,url=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(url),"utf-8")),url="";try{for(stringBuffer=new java.lang.StringBuffer,(line=input.readLine())&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);url=String(stringBuffer.toString())}finally{input.close()}callback(url)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),text.get=function(url,callback){var inStream,convertStream,readData={},url=new FileUtils.File(url);try{(inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream)).init(url,1,0,!1),(convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream)).init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((url&&url.path||"")+": "+e)}}),text});