define(["core/CoreAPI","core/vendor/DropletJS.PubSub.min","core/Time","components/BlockedPageOnboardingRequired/View"],function(API,PubSub,Time,View){return class{view=null;constructor(){this.view=new View}async init(){await Promise.all([API.Settings.initAsync(),API.Requirements.init()]),this.addListeners(),this.view.init()}addListeners(){PubSub.listen("BlockedPageOnboardingRequired.button.clicked",async(_,{id})=>{switch(id){case"btnDismiss":API.Analytics.event("CLICK_BLOCKED_PAGE_ACTION_REQUIRED_DISMISS"),await this.dismiss();break;case"btnOpenSettings":API.Analytics.event("CLICK_BLOCKED_PAGE_ACTION_REQUIRED_OPEN_SETTINGS"),await API.Chrome.Tab.create({url:API.Chrome.Extension.getURL("/options.html"),active:!0}),await this.dismiss()}})}async dismiss(){await API.Requirements.setPromptAgainAt(Date.now()+5*Time.MINUTE),window.parent.postMessage("BlockedPageOnboardingRequired.dismiss","*")}}});