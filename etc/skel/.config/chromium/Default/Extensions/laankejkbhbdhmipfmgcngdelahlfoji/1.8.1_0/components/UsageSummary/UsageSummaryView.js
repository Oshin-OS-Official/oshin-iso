define([chrome.extension.getURL("/core/vendor/chart.umd.js"),chrome.extension.getURL("/core/vendor/chart-colors.js"),"core/Time"],(ChartJS,{defineChartColors},Time)=>class{model;adCheckBoxBlock;title;canvas;chart;constructor(model){this.model=model,this.title=document.createElement("h3"),this.title.textContent="Here's how you spent today's time:",this.title.style.fontWeight="normal",this.adCheckBoxBlock=document.createElement("div"),this.adCheckBoxBlock.style.textAlign="left";const checkbox=document.createElement("input");checkbox.type="checkbox",checkbox.id="ads",checkbox.name="ads",checkbox.value=this.model.isShowAds=!1,checkbox.style.display="inline-block",checkbox.style.cursor="pointer";var model=document.createElement("label"),descriptionForCheckbox=(model.addEventListener("click",()=>{this.model.isShowAds=!checkbox.checked,this.chart.data=this.getDataForChart(),this.chart.update()}),model.setAttribute("for","ads"),model.innerText="Show ad count",model.style.display="inline-block",model.style.cursor="pointer",model.style.fontWeight="600",document.createElement("p")),model=(descriptionForCheckbox.innerText="The number of distractions you have had from these blocked websites",descriptionForCheckbox.style.marginLeft="22px",this.adCheckBoxBlock.appendChild(checkbox),this.adCheckBoxBlock.appendChild(model),this.adCheckBoxBlock.appendChild(descriptionForCheckbox),this.canvas=document.createElement("canvas"),this.canvas.width=640,this.canvas.height=512,this.canvas.style.width="640px",this.canvas.style.height="512px",this.chart=new ChartJS(this.canvas,{type:"doughnut",options:{responsive:!1,layout:{padding:16},plugins:{legend:{position:"right",labels:{usePointStyle:!0,pointStyle:"circle"}},tooltip:{callbacks:{label:context=>this.model.isShowAds?` ${context.raw} ads`:" "+Time.formatDurationInMilliseconds(context.raw)}}},elements:{arc:{borderColor:"#f4f4f4"}}},plugins:[{id:"emptyChart",afterDraw:function(chart){var ctx;chart.data.datasets[0].data.length<1&&((ctx=chart.ctx).textAlign="center",ctx.textBaseline="middle",ctx.font="30px Arial",ctx.fillText("No data to display",chart.width/2,chart.height/2),ctx.restore())}}],data:this.getDataForChart()}),document.getElementById("msg"));model.replaceWith(model,this.title,this.canvas,this.adCheckBoxBlock),this.render()}getDataForChart(){const getSeriesColor=defineChartColors(["#ED3B3B","#F48E2F","#FAD61D","#40DA99","#4FE6E8","#5080E7","#854FE8"]);var modelForAds;return this.model.isShowAds?{labels:(modelForAds=this.model.summary.filter(item=>0<item.adCount)).map(item=>item.website),datasets:[{data:modelForAds.map(item=>item.adCount),backgroundColor:modelForAds.map((_,index)=>getSeriesColor(index)),hoverOffset:4}]}:{labels:this.model.summary.map(item=>item.website),datasets:[{data:this.model.summary.map(item=>item.duration),backgroundColor:this.model.summary.map((_,index)=>getSeriesColor(index)),hoverOffset:4}]}}render(){var display=0<this.model.summary.length?"block":"none";this.canvas.style.display=display,this.title.style.display=display,this.adCheckBoxBlock.style.display=display}});