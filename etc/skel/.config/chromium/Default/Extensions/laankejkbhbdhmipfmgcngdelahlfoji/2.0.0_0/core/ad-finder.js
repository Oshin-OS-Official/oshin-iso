requirejs.config({baseUrl:chrome.extension.getURL("/"),waitSeconds:60}),requirejs(["core/CoreAPI","core/vendor/ad-finder"],function(API,AdFinder){let currentTabUrl;const port=chrome.runtime.connect({name:"ad-finder"});API.PubSub.listen("StayFocusd.tab.selected.*",function(message,payload){currentTabUrl=payload.tab.url});(async()=>{await API.Storage.initAsync(),await API.RemoteConfig.init();var isEnabled=await API.IncrementalRollout.AdFinder.isEnabled();Logger.log("ad-finder","Ad finder enabled? "+isEnabled,void 0,"INFO"),isEnabled&&AdFinder.initAdFinderInContentScript({getInstallId:()=>API.Storage.getAsync("install-id",!0),sendMessageToBackground:message=>{const msgNonce=Math.random();return port.postMessage({message:"forward-message.request",payload:message,nonce:msgNonce}),new Promise(res=>{const listener=({message,payload,nonce})=>{"forward-message.response"===message&&msgNonce===nonce&&(port.onMessage.removeListener(listener),res(payload))};port.onMessage.addListener(listener)})},logger:null,enablePathmaticsLogs:!1,mv3PathmaticsPath:void 0,onAdDetected:ad=>{port.postMessage({message:"ad-found",payload:{hostname:currentTabUrl,ad:ad}})}})})()});