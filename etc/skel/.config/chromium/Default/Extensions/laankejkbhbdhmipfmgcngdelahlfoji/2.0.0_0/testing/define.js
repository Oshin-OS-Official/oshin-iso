import path from"node:path";import{importAMD}from"./importAMD";defineOptions={rootPath:path.resolve(__dirname,"..")},(define=async(...args)=>{var moduleName=moduleImportStack[moduleImportStack.length-1];let dependencies=[],callback;for(;0<args.length;){var arg=args.shift();"function"==typeof arg?callback=arg:Array.isArray(arg)&&(dependencies=arg)}let resolve,reject;defineCompletedPromiseMap[moduleName]=new Promise((res,rej)=>{resolve=res,reject=rej});try{var modules=[];for(const dep of dependencies)modules.push(await importAMD(dep));var definition=callback(...modules);resolve(definition)}catch(err){console.log("Error defining "+moduleName,err),reject(err)}}).amd=!0;